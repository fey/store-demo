{"version":3,"sources":["components/Preloader.js","components/Cookie.js","components/StoreLoader.js","context.js","components/ProductCard.js","features/inventory/InventoryItem.js","features/inventory/InventoryLoader.js","features/inventory/InventoryList.js","features/physical/PhysicalListLoader.js","components/Currency.js","features/physical/PhysicalItem.js","features/physical/PhysicalList.js","components/GroupSwitcher.js","features/manage/ManageInventoryLoader.js","features/manage/ManageInventory.js","features/virtual/VirtualItemsLoader.js","features/virtual/VirtualItem.js","features/virtual/VirtualList.js","components/Product.js","components/formatCurrency.js","components/Cart.js","features/entitlement/EntitlementLoader.js","features/serverPurchase/ServerPurchase.js","features/serverPurchase/ServerPurchaseLoader.js","features/entitlement/EntitlementItem.js","features/entitlement/EntitlementList.js","styles/devices.js","features/cart/CartItem.js","features/cart/Cart.js","features/virtualCurrenciesList/VCItem.js","features/virtualCurrenciesList/VCLoader.js","features/virtualCurrenciesList/VCList.js","utils/routes.js","components/XLogin.js","components/Navbar.js","components/MobileNavbar.js","App.js","styles/theme.js","provider.js","serviceWorker.js","index.js"],"names":["Preloader","react_default","a","createElement","CssPreloader","CircularProgress","color","styled","div","_templateObject","eatCookie","o","window","location","search","split","join","e","n","t","exec","decodeURIComponent","getQueryParams","token","Date","setTime","getTime","toUTCString","document","cookie","setCookie","history","pushState","pathname","length","i","charAt","substring","indexOf","getCookie","Cookie","xProjectId","eraseCookie","cancel","CancelToken","axios","changeItemQuantityCart","_ref","quantity","cartId","loginToken","_ref$sku","sku","opts","url","method","headers","Content-Type","Authorization","data","JSON","stringify","getPsTokenBuyCart","then","response","catch","error","ProductContext","React","createContext","ProductProvider","state","projectId","_this","props","logToken","userBalanceVirtualCurrency","isSideMenuShown","virtualItems","areVirtualItemsFetching","virtualCurrencies","areVirtualCurrenciesFetching","physicalItems","arePhysicalItemsFetching","inventoryItems","areInventoryItemsFetching","isItemConsuming","entitlementItems","cartWithItemsBuyingByVCShown","cartWithItemsBuyingByVC","items","vcPriceSku","isCartShown","isCartProcessing","cart","price","amount","amount_without_discount","currency","setStateFrom","stateName","stateValue","setState","Object","defineProperty","showCart","hideCart","setSideMenuVisibility","setEntitlementItems","setInventoryItems","setPhysicalItems","setVirtualCurrencies","setVirtualItems","getCart","_this$state","cartPromise","cancelToken","c","console","isCancel","cart_id","sort","compareItems","createCart","id","clearCart","updateVirtualCurrencyBalance","payStationHandler","b","buyByVC","product","vcSku","clearVCCart","addToCart","enqueueSnackbar","_this$state2","some","elem","objectSpread","concat","toConsumableArray","errorMessage","variant","removeFromCart","filter","prod","changeItemQuantityInCart","_this$state3","_ref2","_ref2$sku","removeItemFromCart","indexFind","findIndex","cartItems","splice","getTheme","what","arguments","undefined","theme","getVirtualCurrencyBalance","reps","Provider","value","this","children","PureComponent","ProductConsumer","Consumer","withSnackbar","ProductCard","memo","image","order","name","description","actionButtonContent","onAction","isLoading","_React$useState","useState","_React$useState2","slicedToArray","isShown","setShown","showCard","_React$useState3","_React$useState4","isActionedCard","setActionedCard","_React$useState5","_React$useState6","isHovered","setHovered","useEffect","setTimeout","CardAppear","shown","hovered","Card","onMouseEnter","onMouseLeave","CardImage","ProductCard_CardContent","CardTitle","Collapse","in","timeout","collapsedHeight","react_dotdotdot_src_default","animate","clamp","CardFooter","CardQuantity","Button","disabled","onClick","size","ProductCard_templateObject","cardWidth","_templateObject2","colorText","colorBg","boxShadow","transitionStyle","borderRadius","CardContent","MUICardContent","_templateObject3","_templateObject4","_templateObject5","Colorer","alpha","string","_templateObject6","_templateObject7","colorAccent","InventoryItem","item","onConsume","image_url","remaining_uses","loadInventory","asyncToGenerator","regenerator_default","mark","_callee","URL","params","wrap","_context","prev","next","get","sent","abrupt","x","type","stop","_x","_x2","apply","consumeItem","_callee2","inventory","_context2","init","version","Inventory","instance_id","_x3","_x4","_x5","InventoryList","_React$useContext","useContext","useSnackbar","handleConsumeItem","useCallback","message","content","useMemo","Content","map","index","key","EmptyText","Body","Preloader_Preloader","InventoryList_templateObject","InventoryList_templateObject2","InventoryList_templateObject3","loadPhysicalGoods","physicalGood","PhysicalGood","getPhysicalGoodList","Currency","Currency_Body","CurrencyIcon","src","CurrencyAcronym","Currency_templateObject","span","Currency_templateObject2","Avatar","Currency_templateObject3","PhysicalItem","Currency_Currency","Math","round","ShoppingCart_default","PhysicalList","PhysicalList_Content","PhysicalList_Body","PhysicalList_templateObject","PhysicalList_templateObject2","GroupSwitcher","groups","activeGroup","onGroupChange","GroupSwitcher_Tabs","onChange","_","groupID","group","GroupSwitcher_Tab","textColor","label","Tabs","MUITabs","GroupSwitcher_templateObject","Tab","MUITab","GroupSwitcher_templateObject2","colorAccentText","fontFamily","loadVirtualItems","projectID","loadVirtualCurrencies","users","ManageInventory","userID","setUserID","setActiveGroup","selectedItem","setSelectedItem","_React$useState7","_React$useState8","setQuantity","_React$useState9","_React$useState10","setItemProcessing","_React$useState11","_React$useState12","areManageItemsFetching","setManageItemsFetching","_React$useState13","_React$useState14","manageItems","setManageItems","_React$useState15","_React$useState16","areManageCurrenciesFetching","setManageCurrenciesFetching","_React$useState17","_React$useState18","manageCurrencies","setManageCurrencies","isFetching","userOptions","MenuItem","itemsOptions","processItem","ManageInventory_Body","Form","ManageInventory_TextField","select","event","target","GroupSwitcher_GroupSwitcher","Items","FormActions","ManageInventory_templateObject","form","ManageInventory_templateObject2","TextField","MUITextField","ManageInventory_templateObject3","ManageInventory_templateObject4","ManageInventory_templateObject5","_ref3","Promise","all","_ref4","g","virtualItemsByGroup","loadVirtualItemsByGroup","external_id","groupName","toArray","slice","_ref5","_callee3","_context3","VirtualItem","hasVirtualCurrencyPrice","virtual_prices","buttonContent","VirtualList","Fragment","Title","Group","VirtualList_Body","VirtualList_templateObject","VirtualList_templateObject2","VirtualList_templateObject3","useStyles","makeStyles","currencies","height","width","marginRight","CssCartQs","Product_templateObject","CssCartQ","Product_templateObject2","CssCardAppear","Product_templateObject3","CssCard","Product_templateObject4","cardType","css","Product_templateObject5","Product_templateObject6","Product_templateObject7","CssDescEllipsis","_templateObject8","CssCardContent","_templateObject9","CssCardH1","_templateObject10","CssCardActions","_templateObject11","_templateObject12","_templateObject13","CssCardVCActions","_templateObject14","_templateObject15","_templateObject16","CssCardMedia","_templateObject17","CssTypographyPrice","_templateObject18","CssTypographyPriceSm","_templateObject19","withStyles","paper","mixins","gutters","paddingTop","spacing","paddingBottom","cardTitle","card","h1","fontWeight","fontSize","marginBottom","p","flexGrow","media","marginTop","backgroundSize","actions","display","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","red","_ref$addToCart","_ref$changeItemQuanti","_ref$buyByVC","_ref$cardType","initClass","title","_ref$getTheme","expanded","favorited","cardShown","classes","className","style","bind","Delete_default","opacity","IndeterminateCheckBox_default","AddBox_default","q","calcPrice","unmountOnExit","defaultCurrency","fractionSize","symbol","grapheme","template","rtl","uniqSymbol","defaultLocale","getFormattedCurrency","locale","parsedAmount","parseFloat","isNaN","formattedCurrency","dir","currencyOptions","currencyFormat","toUpperCase","getCurrencyOptions","languageOptions","currencyNumberFormat","substr","toLowerCase","formatLocale","getLanguageOptions","signAmount","thousandSeparator","thousands","decimalSeparator","decimal","splittedAmount","abs","toFixed","replace","formattedAmount","CssCartList","Cart_templateObject","Cart0","Cart_templateObject2","CartB","Cart_templateObject3","CartZ","Cart_templateObject4","CssCartH","Cart_templateObject5","CssCartB","Cart_templateObject6","CssSubtotal","Cart_templateObject7","withRouter","buyButtonDisabled","setBuyButtonDisabled","valueFromContext","buyByVirtualCurrencyButtonAction","quickPurchaseBuyVirtualCurrency","reason","padding","borderBottom","Close_default","cursor","oneCartItem","Product","borderTop","minWidth","textAlign","subtotal","forEach","element","calculateSubtotal","push","xPayStationInit","XPayStationWidget","open","on","eventTypes","CLOSE","STATUS_DONE","ServerPurchase","_PureComponent","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","showToast","statusToast","operations","inherits","createClass","crypto","getRandomValues","Uint8Array","toString","isVisible","_this2","body","user","platform","purchase","external_purchase_id","generateUUID","external_purchase_date","toISOString","cartItem","operationDetails","purchaseItems","_this3","_this$props","Snackbar","onClose","setShowToast","dismissible","Heading","operation","justifyContent","EntitlementItem","_Component","imageUrl","backgroundImage","Component","EntitlementList","code","hasRedeemError","handleChangeCode","assertThisInitialized","handleChangeSku","handleSubmit","updateEntitlement","getEntitlement","redeemCode","project_id","digital_content_sku","language","redeem","k","log","preventDefault","onSubmit","placeholder","oneProduct","EntitlementItem_EntitlementItem","device","mobileS","mobileM","mobileL","tablet","laptop","laptopL","desktop","retina","CartItemComponent","changeItemQuantity","handleQuantityDec","CartItem","CartItemImage","CartItemBody","ItemName","ItemPrice","CartItemTotal","CartItemPriceForOne","PriceInfo","QuantityActions","IconButton","DecrementIcon","DeleteIcon","ItemQuantity","IncrementIcon","CartItem_templateObject","CartItem_templateObject2","CartItem_templateObject3","CartItem_templateObject4","CartItem_templateObject5","CartItem_templateObject6","CartItem_templateObject7","CartItem_templateObject8","CartItem_templateObject9","CartItem_templateObject10","MUIDeleteIcon","CartItem_templateObject11","MUIDecrementIcon","CartItem_templateObject12","MUIIncrementIcon","CartItem_templateObject13","Modal","MUIModal","cart_Cart_templateObject","CartContent","cart_Cart_templateObject2","CartHeader","cart_Cart_templateObject3","CartList","cart_Cart_templateObject4","CartFooter","cart_Cart_templateObject5","CartActions","cart_Cart_templateObject6","Subtotal","cart_Cart_templateObject7","Price","Cart_templateObject8","Cart","Cart_Modal","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","Grow","CartItem_CartItemComponent","reduce","acc","VCItem","VCList","VCList_Content","VCList_Body","VCList_templateObject","VCList_templateObject2","routes","physical","entitlement","manage","navItems","route","getMenuItems","includes","XLogin","unauthorizedFlow","authorizedFlow","tkn","base64","parse","atob","parseJwt","psToken","CssXpop","CssXpopB","CssLoginInfo","CssLoginPop","myProjects","onePr","pr","login","urlFull","href","projectName","CssXpopZ","XloginInit","cke","XLogin_templateObject","XLogin_templateObject2","XLogin_templateObject3","XLogin_templateObject4","XLogin_templateObject5","login_id","Menu","MUIMenu","Navbar_templateObject","Navbar_templateObject2","Navbar_templateObject3","Link","NavLink","Navbar_templateObject4","MenuButton","MUIIconButton","Navbar_templateObject5","VCCurrency","Navbar_templateObject6","LoginPanel","Navbar_templateObject7","LoginButton","Navbar_templateObject8","UserMail","Navbar_templateObject9","Header","header","Navbar_templateObject10","menuAnchor","setMenuAnchor","handleMenuClose","isLogged","generalMenuItems","userMenuItems","Hidden","mdDown","Navbar_Tabs","component","Navbar_Tab","to","lgUp","Menu_default","vc","currentTarget","email","XLogin_XLogin","reload","ExitToAppOutlined_default","xsDown","Navbar_Menu","anchorEl","getContentAnchorEl","transformOrigin","vertical","horizontal","anchorOrigin","Boolean","activeClassName","MobileNavbar_templateObject","Divider","MUIDivider","MobileNavbar_templateObject2","MenuDivider","MobileNavbar_templateObject3","MobileNavbar_templateObject4","MobileNavbar_templateObject5","MobileNavbar_templateObject6","MobileNavbar_templateObject7","MobileNavbar_templateObject8","MobileNavbar","closeMenu","SwipeableDrawer","anchor","onOpen","MobileNavbar_Content","MobileNavbar_Header","MobileNavbar_IconButton","MobileNavbar_UserMail","ChevronLeft_default","MobileNavbar_Divider","MobileNavbar_Tabs","orientation","MobileNavbar_Tab","Background","App_templateObject","backgroundUrl","BackgroundOverlay","App_templateObject2","App","components_Navbar","Cart_Cart","Switch","Route","path","exact","render","EntitlementList_EntitlementList","ServerPurchase_ServerPurchase","transitionTime","transitionEasing","notificationPosition","isMobile","useMediaQuery","build","dense","maxSnack","preventDuplicate","styled_components_browser_esm","context","HashRouter","basename","hostname","match","ReactDOM","provider","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"kkBAIA,IAAMA,EAAY,kBAChBC,EAAAC,EAAAC,cAACC,EAAD,KACEH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAkBC,MAAM,gBAMtBF,EAAeG,IAAOC,IAAVC,sECVZC,EAAY,WAChB,IA2BIC,EAWJ,OATIC,OAAOC,SAASC,SAClBH,EAVF,SAAwBA,GACtBA,EAAIA,EAAEI,MAAM,KAAKC,KAAK,KACtB,IAAK,IAAIC,EAAGC,EAAI,GAAIC,EAAI,wBAA0BF,EAAIE,EAAEC,KAAKT,IAC3DO,EAAEG,mBAAmBJ,EAAE,KAAOI,mBAAmBJ,EAAE,IACrD,OAAOC,EAMHI,CAAeV,OAAOC,SAASC,QAAQS,OAEzCZ,IAnBc,SAACA,EAAGM,GACpB,IAAIC,EAAI,IAAIM,KACZN,EAAEO,QAAQP,EAAEQ,UAAY,OACxB,IAAIP,EAAI,WAAaD,EAAES,cACvBC,SAASC,OAASlB,EAAI,IAAMM,EAAI,IAAME,EAAI,UAgB1CW,CAAU,qBAAsBnB,GAChCC,OAAOmB,QAAQC,UAAU,GAAI,GAAIJ,SAASf,SAASoB,WAEnDtB,EApCgB,SAAAA,GAChB,IACE,IAAIM,EAAIN,EAAI,IACVO,EAAIG,mBAAmBO,SAASC,QAAQd,MAAM,KAC9CI,EAAI,EACNA,EAAID,EAAEgB,OACNf,IACA,CACA,IAAK,IAAIgB,EAAIjB,EAAEC,GAAI,MAAQgB,EAAEC,OAAO,IAAMD,EAAIA,EAAEE,UAAU,GAC1D,GAAI,IAAMF,EAAEG,QAAQrB,GAAI,OAAOkB,EAAEE,UAAUpB,EAAEiB,OAAQC,EAAED,QAEzD,MAAO,GAyBHK,CAAU,sBAEZ5B,GAAW,cAANA,EAEAA,EAEA,MAII,SAAS6B,IACtB,OAAO,QAAU5B,OAAO6B,WACpB,4hBAKA/B,IAGC,SAASgC,EAAY/B,GAC1B,OAAQiB,SAASC,OACflB,EAAI,wDC1DJgC,4CADEC,EAAcC,IAAMD,YAsEnB,SAASE,EAATC,EAELC,EACAC,EACAC,GACA,IAAAC,EAAAJ,EAJEK,WAIF,IAAAD,EAJQ,MAIRA,EACAR,GAAUA,IAEV,IAAIU,EAAO,CACTC,IACE,2CACA1C,OAAO6B,WACP,SACAQ,EACA,SACAG,EACFG,OAAQ,MACRC,QAAS,CACPC,eAAgB,kCAChBC,cAAe,UAAYR,GAE7BS,KAAMC,KAAKC,UAAU,CACnBb,SAAUA,KAGd,OAAOH,IAAMQ,GAgDR,SAASS,EAAkBb,EAAQC,GACxC,IAAIG,EAAO,CACTC,IACE,2CACA1C,OAAO6B,WACP,iBACAQ,EACFM,OAAQ,OACRC,QAAS,CACPE,cAAe,UAAYR,IAG/B,OAAOL,IAAMQ,GACVU,KAAK,SAASC,GAEb,OAAOA,IAERC,MAAM,SAASC,MCvJpB,IAAMC,EAAiBC,IAAMC,gBAEvBC,6MACJC,MAAQ,CACNC,UAAWC,EAAKC,MAAMF,UACtBG,SAAUnC,IACVoC,2BAA4B,GAC5BC,iBAAiB,EAEjBC,aAAc,GACdC,yBAAyB,EAEzBC,kBAAmB,GACnBC,8BAA8B,EAE9BC,cAAe,GACfC,0BAA0B,EAE1BC,eAAgB,GAChBC,2BAA2B,EAC3BC,iBAAiB,EAEjBC,iBAAkB,GAElBC,8BAA8B,EAC9BC,wBAAyB,CACvBC,MAAO,GACPC,WAAY,MAGdC,aAAa,EACbC,kBAAkB,EAClBC,KAAM,CACJ7C,OAAQ,KACRyC,MAAO,GACPK,MAAO,CACLC,OAAQ,EACRC,wBAAyB,EACzBC,SAAU,QAKhBC,aAAe,SAACC,EAAWC,GAAZ,OAA2B5B,EAAK6B,SAALC,OAAAC,EAAA,EAAAD,CAAA,GAAiBH,EAAYC,OAEvEI,SAAW,kBAAMhC,EAAK6B,SAAS,CAAEV,aAAa,OAC9Cc,SAAW,kBAAMjC,EAAK6B,SAAS,CAAEV,aAAa,OAE9Ce,sBAAwB,SAAA9B,GAAe,OAAIJ,EAAK6B,SAAS,CAAEzB,uBAC3D+B,oBAAsB,SAAArB,GAAgB,OAAId,EAAK6B,SAAS,CAAEf,wBAC1DsB,kBAAoB,SAAAzB,GAAc,OAAIX,EAAK6B,SAAS,CAAElB,sBACtD0B,iBAAmB,SAAA5B,GAAa,OAAIT,EAAK6B,SAAS,CAAEpB,qBACpD6B,qBAAuB,SAAA/B,GAAiB,OAAIP,EAAK6B,SAAS,CAAEtB,yBAC5DgC,gBAAkB,SAAAlC,GAAY,OAAIL,EAAK6B,SAAS,CAAExB,oBAElDmC,QAAU,WAAM,IAAAC,EACazC,EAAKF,MAAxBuB,EADMoB,EACNpB,KAAMnB,EADAuC,EACAvC,SACRwC,EDmGH,SAAiBlE,EAAQC,GAC9BP,GAAUA,IACV,IAAMU,EAAO,CACXC,IACE,2CACA1C,OAAO6B,WACP,SACAQ,EACFM,OAAQ,MACRC,QAAS,CACPE,cAAe,UAAYR,GAE7BkE,YAAa,IAAIxE,EAAY,SAAAyE,GAC3B1E,EAAS0E,KAGb,OAAOxE,IAAMQ,GACVU,KAAK,SAAAC,GAAQ,OAAIA,IACjBC,MAAM,SAAAC,GAAK,OAAIoD,QAAQpD,MAAMA,KCrHV+C,CAAQnB,EAAK7C,OAAQ0B,GACzCwC,EAAYpD,KAAK,SAAAC,IACVmD,EAAYI,UAAYvD,GAC3BS,EAAK6B,SAAS,CACZR,KAAM,CACJ7C,OAAQe,EAASL,KAAK6D,QACtB9B,MAAO1B,EAASL,KAAK+B,MAAM+B,KAAKhD,EAAKiD,cACrC3B,MAAO/B,EAASL,KAAKoC,OAEvBF,kBAAkB,SAM1B8B,WAAa,YDiBR,SAAoBzE,GACzB,IAAIG,EAAO,CACTC,IACE,2CAA6C1C,OAAO6B,WAAa,QACnEc,OAAQ,OACRC,QAAS,CACPE,cAAe,UAAYR,IAG/B,OAAOL,IAAMQ,GACVU,KAAK,SAASC,GAEb,OAAOA,IAERC,MAAM,SAASC,OC9BMyD,CAAWlD,EAAKF,MAAMI,UAC9BZ,KAAK,SAAAC,GACjBS,EAAK6B,SAAS,CACZR,KAAM,CACJ7C,OAAQe,EAASL,KAAKiE,GACtBlC,MAAO,GACPK,MAAO,CACLC,OAAQ,EACRC,wBAAyB,EACzBC,SAAU,YAOpB2B,UAAY,WACVpD,EAAKgC,WACLhC,EAAKkD,aACLlD,EAAKqD,kCAGPC,kBAAoB,kBAAMtD,EAAKoD,eAE/BH,aAAe,SAACxH,EAAG8H,GACjB,OAAI9H,EAAEkD,IAAM4E,EAAE5E,IACL,EAELlD,EAAEkD,IAAM4E,EAAE5E,KACJ,EAEH,KAGT6E,QAAU,SAACC,EAASC,GAClB1D,EAAK6B,SAAS,CACZd,8BAA8B,EAC9BC,wBAAyB,CACvBC,MAAO,CAACwC,GACRvC,WAAYwC,QAKlBC,YAAc,WACZ3D,EAAK6B,SAAS,CACZd,8BAA8B,EAC9BC,wBAAyB,CACvBC,MAAO,GACPC,WAAY,QAIhBlB,EAAKqD,kCAGPO,UAAY,SAAAH,GAAW,IACbI,EAAoB7D,EAAKC,MAAzB4D,gBADaC,EAEM9D,EAAKF,MAAxBuB,EAFayC,EAEbzC,KAAMnB,EAFO4D,EAEP5D,SACMmB,EAAKJ,MAAM8C,KAAK,SAAAC,GAAI,OAAIA,EAAKrF,MAAQ8E,EAAQ9E,OAE/DqB,EAAKwC,UACLxC,EAAK6B,SAAS,CAAEV,aAAa,MAE7BnB,EAAK6B,SAAS,CAAET,kBAAkB,IAClC/C,EAAuBoF,EAAS,EAAGpC,EAAK7C,OAAQ0B,GAC7CZ,KAAK,WACJU,EAAK6B,SAAS,CACZR,KAAKS,OAAAmC,EAAA,EAAAnC,CAAA,GACAT,EADD,CAEFJ,MAAO,CAACa,OAAAmC,EAAA,EAAAnC,CAAA,GAAK2B,EAAN,CAAelF,SAAU,KAAzB2F,OAAApC,OAAAqC,EAAA,EAAArC,CAAiCT,EAAKJ,QAAO+B,KAAKhD,EAAKiD,cAC9D3B,MAAMQ,OAAAmC,EAAA,EAAAnC,CAAA,GACDT,EAAKC,MADL,CAEHC,OAAQF,EAAKC,MAAMC,OAASkC,EAAQnC,MAAMC,OAC1CC,wBAAyBH,EAAKC,MAAME,wBAA0BiC,EAAQnC,MAAME,4BAGhFJ,kBAAkB,IAEpBpB,EAAKgC,aAENxC,MAAM,SAAAC,GACLO,EAAK6B,SAAS,CAAET,kBAAkB,IAClCyC,EAAgBpE,EAAMF,SAASL,KAAKkF,aAAc,CAAEC,QAAS,gBAKrEC,eAAiB,SAAAb,GAAW,IAClBpC,EAASrB,EAAKF,MAAduB,KAERrB,EAAK6B,SAAS,CACZR,KAAKS,OAAAmC,EAAA,EAAAnC,CAAA,GACAT,EADD,CAEFJ,MAAOI,EAAKJ,MACTsD,OAAO,SAAAC,GAAI,OAAIA,EAAK7F,MAAQ8E,EAAQ9E,MACpCqE,KAAKhD,EAAKiD,cACb3B,MAAMQ,OAAAmC,EAAA,EAAAnC,CAAA,GACDT,EAAKC,MADL,CAEHC,OAAQF,EAAKC,MAAMC,OAASkC,EAAQnC,MAAMC,OAASkC,EAAQlF,SAC3DiD,wBAAyBH,EAAKC,MAAME,wBAA0BiC,EAAQnC,MAAME,wBAA0BiC,EAAQlF,kBAMtHkG,yBAA2B,SAAChB,EAASlF,GAAa,IACxCsF,EAAoB7D,EAAKC,MAAzB4D,gBADwCa,EAErB1E,EAAKF,MAAxBuB,EAFwCqD,EAExCrD,KAAMnB,EAFkCwE,EAElCxE,SAEd,GAAI3B,GAAY,EACdyB,EAAKsE,eAAeb,GD5EnB,SAAAkB,EAA6CnG,EAAQC,GAAY,IAAAmG,EAAAD,EAAnChG,WAAmC,IAAAiG,EAA7B,MAA6BA,EACtE1G,GAAUA,IAEV,IAAIU,EAAO,CACTC,IACE,2CACA1C,OAAO6B,WACP,SACAQ,EACA,SACAG,EACFG,OAAQ,SACRC,QAAS,CACPE,cAAe,UAAYR,IAG/B,OAAOL,IAAMQ,GACVU,KAAK,SAASC,GAEFA,EAASL,OAErBM,MAAM,SAASC,MCwDdoF,CAAmBpB,EAASpC,EAAK7C,OAAQ0B,GACtCZ,KAAKU,EAAKwC,aACR,CACL,IAAMsC,EAAYzD,EAAKJ,MAAM8D,UAAU,SAAAf,GAAI,OAAIA,EAAKrF,MAAQ8E,EAAQ9E,MAC9DqG,EAAY3D,EAAKJ,MACvB+D,EAAUC,OAAOH,EAAW,EAA5BhD,OAAAmC,EAAA,EAAAnC,CAAA,GAAoC2B,EAApC,CAA6ClF,cAC7CyB,EAAK6B,SAAS,CAAER,KAAKS,OAAAmC,EAAA,EAAAnC,CAAA,GAAMT,EAAP,CAAaJ,MAAO+D,EAAUhC,KAAKhD,EAAKiD,kBAC5D5E,EAAuBoF,EAASlF,EAAU8C,EAAK7C,OAAQ0B,GACpDZ,KAAKU,EAAKwC,SACVhD,MAAM,SAAAC,GAAK,OAAIoE,EAAgBpE,EAAMF,SAASL,KAAKkF,aAAc,CAAEC,QAAS,gBAInFa,SAAW,eAACC,EAADC,UAAA3H,OAAA,QAAA4H,IAAAD,UAAA,GAAAA,UAAA,GAAQ,MAAR,MAA2B,QAATD,EACzBnF,EAAKF,MAAMwF,MADc,GAAApB,OAEtBlE,EAAKF,MAAMwF,MAAMH,IAFKjB,OAEY,iBAATiB,EAA0B,KAAO,OAEjE9B,6BAA+B,YDT1B,SAAmC5E,GACxC,IAAIG,EAAO,CACTC,IACI,2CAA6C1C,OAAO6B,WAAa,iCACrEc,OAAQ,MACRC,QAAS,CACPE,cAAe,UAAYR,IAG/B,OAAOL,IAAMQ,ICCX2G,CAA0BvF,EAAKF,MAAMI,UAAUZ,KAAK,SAACkG,GACnDxF,EAAK6B,SAAS,CACZ1B,2BAA4BqF,EAAKtG,KAAK+B,mFAM1C,OACEzF,EAAAC,EAAAC,cAACgE,EAAe+F,SAAhB,CACEC,MAAK5D,OAAAmC,EAAA,EAAAnC,CAAA,GACA6D,KAAK7F,MADL,CAEH4B,aAAciE,KAAKjE,aACnB4B,kBAAmBqC,KAAKrC,kBACxBlB,kBAAmBuD,KAAKvD,kBACxBE,qBAAsBqD,KAAKrD,qBAC3BD,iBAAkBsD,KAAKtD,iBACvBE,gBAAiBoD,KAAKpD,gBACtBJ,oBAAqBwD,KAAKxD,oBAC1ByB,UAAW+B,KAAK/B,UAChBJ,QAASmC,KAAKnC,QACdG,YAAagC,KAAKhC,YAClBuB,SAAUS,KAAKT,SACfhC,WAAYyC,KAAKzC,WACjBlB,SAAU2D,KAAK3D,SACfyC,yBAA0BkB,KAAKlB,yBAC/BpB,6BAA8BsC,KAAKtC,6BACnCpB,SAAU0D,KAAK1D,SACfC,sBAAuByD,KAAKzD,yBAG7ByD,KAAK1F,MAAM2F,iBAxOUjG,IAAMkG,eA8O9BC,EAAkBpG,EAAeqG,SAIxBC,yBAAanG,qhDCrP5B,IAAMoG,GAActG,IAAMuG,KAAK,SAAA5H,GASzB,IARJ6H,EAQI7H,EARJ6H,MACAC,EAOI9H,EAPJ8H,MACAC,EAMI/H,EANJ+H,KACAX,EAKIpH,EALJoH,MACAY,EAIIhI,EAJJgI,YACAC,EAGIjI,EAHJiI,oBACAC,EAEIlI,EAFJkI,SACAC,EACInI,EADJmI,UACIC,EACwB/G,IAAMgH,UAAS,GADvCC,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GACGI,EADHF,EAAA,GACYG,EADZH,EAAA,GAEEI,EAAW,kBAAMD,GAAS,IAF5BE,EAIsCtH,IAAMgH,UAAS,GAJrDO,EAAApF,OAAA+E,EAAA,EAAA/E,CAAAmF,EAAA,GAIGE,EAJHD,EAAA,GAImBE,EAJnBF,EAAA,GAAAG,EAU4B1H,IAAMgH,UAAS,GAV3CW,EAAAxF,OAAA+E,EAAA,EAAA/E,CAAAuF,EAAA,GAUGE,EAVHD,EAAA,GAUcE,EAVdF,EAAA,GAwBJ,OAVA3H,IAAM8H,UAAU,WACThB,GACHW,GAAgB,IAEjB,CAACX,IAEJ9G,IAAM8H,UAAU,WACdC,WAAWV,EAAkB,IAARZ,IACpB,IAGD5K,EAAAC,EAAAC,cAACiM,GAAD,CAAYC,MAAOd,EAASe,QAASN,GACnC/L,EAAAC,EAAAC,cAACoM,GAAD,CACED,QAASN,EACTQ,aAjBmB,kBAAMP,GAAW,IAkBpCQ,aAjBmB,kBAAMR,GAAW,KAmBpChM,EAAAC,EAAAC,cAACuM,GAAD,CAAW9B,MAAOA,IAClB3K,EAAAC,EAAAC,cAACwM,GAAD,KACE1M,EAAAC,EAAAC,cAACyM,GAAD,KAAY9B,GACZ7K,EAAAC,EAAAC,cAAC0M,EAAA,EAAD,CAAUC,GAAId,EAAWe,QAAQ,OAAOC,gBAAgB,QACrDhB,EACGjB,EAEF9K,EAAAC,EAAAC,cAAC8M,EAAA/M,EAAD,CAAWgN,SAAO,EAACC,MAAO,GACvBpC,KAKT9K,EAAAC,EAAAC,cAACiN,GAAD,KACEnN,EAAAC,EAAAC,cAACkN,GAAD,KACGlD,GAEFc,GAAYhL,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACXxE,QAAQ,YACRyE,SAAUrC,GAAaU,EACvB4B,QA9CW,WACnB3B,GAAgB,GAChBZ,MA8CSC,GAAaU,EAAiB3L,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAkBoN,KAAM,GAAInN,MAAM,cAAgB0K,QAQvFoB,GAAa7L,IAAOC,IAAVkN,KAEH,SAAAhJ,GAAK,OAAIA,EAAM4H,QAAU,EAAI,GAC/B,SAAA5H,GAAK,OAAIA,EAAMqF,MAAM4D,WACpB,SAAAjJ,GAAK,OAAIA,EAAMqF,MAAM4D,WAEpB,SAAAjJ,GAAK,OAAIA,EAAM2H,MAAQ,EAAI,GACzB,SAAA3H,GAAK,OAAIA,EAAM2H,MAAQ,OAAS,qBAGzCE,GAAOhM,IAAOC,IAAVoN,KAEC,SAAAlJ,GAAK,OAAIA,EAAMqF,MAAM8D,WAGrB,SAAAnJ,GAAK,OAAIA,EAAMqF,MAAM4D,WAChB,SAAAjJ,GAAK,OAAIA,EAAMqF,MAAM4D,WACf,SAAAjJ,GAAK,OAAIA,EAAM4H,QAAU5H,EAAMqF,MAAM+D,QAAU,eACrD,SAAApJ,GAAK,OAAIA,EAAM4H,QAAU5H,EAAMqF,MAAMgE,UAAY,QACpB,SAAArJ,GAAK,OAAIA,EAAMqF,MAAMiE,iBAC/C,SAAAtJ,GAAK,SAAAiE,OAAOjE,EAAMqF,MAAMkE,aAAnB,QAGlBC,GAAc3N,YAAO4N,IAAP5N,CAAH6N,KAQXxB,GAAYrM,IAAOC,IAAV6N,KAOTjB,GAAa7M,IAAOC,IAAV8N,IAGU,SAAA5J,GAAK,OAAI6J,IAAQ7J,EAAMqF,MAAM8D,WAAWW,MAAM,IAAKC,WAKvE/B,GAAYnM,IAAOC,IAAVkO,IAQW,SAAAhK,GAAK,OAAIA,EAAMkG,QAGnCyC,GAAe9M,IAAOC,IAAVmO,IAEP,SAAAjK,GAAK,OAAIA,EAAMqF,MAAM6E,cCvInBC,GAAgBzK,IAAMuG,KAAK,SAAA5H,GAKlC,IAJJ+L,EAII/L,EAJJ+L,KACAjE,EAGI9H,EAHJ8H,MACAK,EAEInI,EAFJmI,UACA6D,EACIhM,EADJgM,UAKA,OACE9O,EAAAC,EAAAC,cAACuK,GAAD,CACEE,MAAOkE,EAAKE,UACZlE,KAAMgE,EAAKhE,KACXD,MAAOA,EACPK,UAAWA,EACXf,MAAK,aAAAxB,OAAemG,EAAK9L,UACzB+H,YAAa+D,EAAK/D,YAClBC,oBAAoB,UACpBC,SAAU6D,EAAKG,eAXO,kBAAMF,EAAUD,SAWchF,yBClBpDlH,GAAcC,IAAMD,YACtBD,GAAS,aAEAuM,GAAa,eAAAnM,EAAAwD,OAAA4I,EAAA,EAAA5I,CAAA6I,EAAAlP,EAAAmP,KAAG,SAAAC,EAAO9K,EAAWtB,GAAlB,IAAAqM,EAAAC,EAAAxL,EAAA,OAAAoL,EAAAlP,EAAAuP,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACrBL,EADqB,2CAAA5G,OAC4BnE,EAD5B,yBAErBgL,EAAS,CACbhM,QAAS,CACPE,cAAe,UAAYR,GAE7BkE,YAAa,IAAIxE,GAAY,SAAAyE,GAC3B1E,KACAA,GAAS0E,KARcqI,EAAAE,KAAA,EAWJ/M,IAAMgN,IAAIN,EAAKC,GAXX,cAWrBxL,EAXqB0L,EAAAI,KAAAJ,EAAAK,OAAA,SAapB/L,EAASL,KAAK+B,MAAMsD,OAAO,SAAAgH,GAAC,MAAe,iBAAXA,EAAEC,QAbd,wBAAAP,EAAAQ,SAAAZ,EAAAlF,SAAH,gBAAA+F,EAAAC,GAAA,OAAArN,EAAAsN,MAAAjG,KAAAP,YAAA,GAgBbyG,GAAW,eAAAlH,EAAA7C,OAAA4I,EAAA,EAAA5I,CAAA6I,EAAAlP,EAAAmP,KAAG,SAAAkB,EAAO/L,EAAWtB,EAAY4L,GAA9B,IAAA0B,EAAA,OAAApB,EAAAlP,EAAAuP,KAAA,SAAAgB,GAAA,cAAAA,EAAAd,KAAAc,EAAAb,MAAA,cACzBc,aAAK,CAAElM,YAAWmM,QAAS,OACrBH,EAAY,IAAII,KAAU1N,GAFPuN,EAAAb,KAAA,EAGZY,EAAUF,YAAYxB,EAAK1L,IAAK,EAAG0L,EAAK+B,aAH5B,cAAAJ,EAAAV,OAAA,SAAAU,EAAAX,MAAA,wBAAAW,EAAAP,SAAAK,EAAAnG,SAAH,gBAAA0G,EAAAC,EAAAC,GAAA,OAAA5H,EAAAiH,MAAAjG,KAAAP,YAAA,ihBCdxB,IAAMoH,GAAgB,WAAM,IAAAC,EAUtB9M,IAAM+M,WAAWhN,GARnB2B,EAFwBoL,EAExBpL,KACAnB,EAHwBuM,EAGxBvM,SACAH,EAJwB0M,EAIxB1M,UACA2B,EALwB+K,EAKxB/K,aACAf,EANwB8L,EAMxB9L,eACAE,EAPwB4L,EAOxB5L,gBACAD,EARwB6L,EAQxB7L,0BACAwB,EATwBqK,EASxBrK,kBAEMyB,EAAoB8I,wBAApB9I,gBAEF+I,EAAoBjN,IAAMkN,YAAY,SAACxC,GAC3C3I,EAAa,mBAAmB,GAChCmK,GAAY9L,EAAWG,EAAUmK,GAC9B/K,KAAK,WACJ8C,EAAkB,IAClBV,EAAa,mBAAmB,KAEjClC,MAAM,SAAAC,GACLiC,EAAa,mBAAmB,GAChCmC,EAAgBpE,EAAMqN,QAAS,CAAEzI,QAAS,cAIhD1E,IAAM8H,UAAU,WAcd,OAbIvH,GAAsC,IAA1BS,EAAelD,QAAgB4D,EAAK7C,SAClDkD,EAAa,6BAA6B,GAC1C+I,GAAc1K,EAAWG,GACtBZ,KAAK,SAAAJ,GACJkD,EAAkBlD,GAClBwC,EAAa,6BAA6B,KAE3ClC,MAAM,SAAAC,GACLiC,EAAa,6BAA6B,GAC1CmC,EAAgBpE,EAAMqN,QAAS,CAAEzI,QAAS,aAIzC,kBAAM1D,EAAelD,OAAS,GAAK2E,EAAkB,MAC3D,CAACzB,EAAelD,OAAQ4D,EAAK7C,SAEhC,IAAMuO,EAAUpN,IAAMqN,QAAQ,kBAAMrM,EAAelD,OAAS,EAC1DjC,EAAAC,EAAAC,cAACuR,GAAD,KACGtM,EAAeuM,IAAI,SAAC7C,EAAM8C,GAAP,OAClB3R,EAAAC,EAAAC,cAAC0O,GAAD,CACEhE,MAAO+G,EACPC,IAAK/C,EAAK1L,IACV0L,KAAMA,EACN5D,UAAW5F,EACXyJ,UAAWsC,OAKjBpR,EAAAC,EAAAC,cAAC2R,GAAD,4CACC,CAAC1M,EAAgBE,IAEpB,OACErF,EAAAC,EAAAC,cAAC4R,GAAD,KACG1M,EACGpF,EAAAC,EAAAC,cAAC6R,EAAD,MACAR,IAMJO,GAAOxR,IAAOC,IAAVyR,KACC,SAAAvN,GAAK,OAAIA,EAAMqF,MAAM8D,YAO1B6D,GAAUnR,IAAOC,IAAV0R,KAIc,SAAAxN,GAAK,uCAAAiE,OAC1BjE,EAAMqF,MAAM4D,UADc,YAAAhF,OAE1BjE,EAAMqF,MAAM4D,UAFc,YAO1BmE,GAAYvR,IAAOC,IAAV2R,gBC9FFC,GAAiB,eAAArP,EAAAwD,OAAA4I,EAAA,EAAA5I,CAAA6I,EAAAlP,EAAAmP,KAAG,SAAAC,EAAO9K,EAAWtB,GAAlB,IAAAmP,EAAArO,EAAA,OAAAoL,EAAAlP,EAAAuP,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAE7Bc,aAAK,CAAElM,YAAWmM,QAAS,OACrB0B,EAAe,IAAIC,KAAapP,GAHTwM,EAAAE,KAAA,EAINyC,EAAaE,sBAJP,cAIvBvO,EAJuB0L,EAAAI,KAAAJ,EAAAK,OAAA,SAKtB/L,EAASL,KAAK+B,OALQ,wBAAAgK,EAAAQ,SAAAZ,EAAAlF,SAAH,gBAAA+F,EAAAC,GAAA,OAAArN,EAAAsN,MAAAjG,KAAAP,YAAA,oYCE9B,IAAM2I,GAAW,SAAAzP,GAAA,IAAG6H,EAAH7H,EAAG6H,MAAOT,EAAVpH,EAAUoH,MAAOjE,EAAjBnD,EAAiBmD,SAAjB,OACfjG,EAAAC,EAAAC,cAACsS,GAAD,KACG7H,GAAS3K,EAAAC,EAAAC,cAACuS,GAAD,CAAcC,IAAK/H,IAC5B1E,GAAYjG,EAAAC,EAAAC,cAACyS,GAAD,KAAkB1M,GAC9BiE,IAIC4H,GAAOxR,IAAOC,IAAVqS,MAKJD,GAAkBrS,IAAOuS,KAAVC,MAIfL,GAAenS,YAAOyS,KAAPzS,CAAH0S,MChBLC,GAAe9O,IAAMuG,KAAK,SAAA5H,GAKjC,IAJJmF,EAIInF,EAJJmF,QACA2C,EAGI9H,EAHJ8H,MACAK,EAEInI,EAFJmI,UACA7C,EACItF,EADJsF,UAKMtC,EAAQ3B,IAAMqN,QAAQ,kBAC1BxR,EAAAC,EAAAC,cAACgT,GAAD,CACEjN,SAAUgC,EAAQnC,MAAMG,SACxBiE,MAAOiJ,KAAKC,MAA6B,IAAvBnL,EAAQnC,MAAMC,QAAgB,OACjD,CAACkC,IAEJ,OACEjI,EAAAC,EAAAC,cAACuK,GAAD,CACEE,MAAO1C,EAAQ8G,UACflE,KAAM5C,EAAQ4C,KACdD,MAAOA,EACPV,MAAOpE,EACPmF,UAAWA,EACXH,YAAa7C,EAAQ6C,YACrBC,oBAAqB/K,EAAAC,EAAAC,cAACmT,GAAApT,EAAD,MACrB+K,SAjBkB,kBAAM5C,EAAUH,sXCJxC,IAAMqL,GAAe,WAAM,IAAArC,EAUrB9M,IAAM+M,WAAWhN,GARnBQ,EAFuBuM,EAEvBvM,SACAH,EAHuB0M,EAGvB1M,UACA6D,EAJuB6I,EAIvB7I,UACAlC,EALuB+K,EAKvB/K,aACAjB,EANuBgM,EAMvBhM,cACAC,EAPuB+L,EAOvB/L,yBACA2B,EARuBoK,EAQvBpK,iBACAjB,EATuBqL,EASvBrL,iBAEMyC,EAAoB8I,wBAApB9I,gBAEVlE,IAAM8H,UAAU,WACVvH,GAAqC,IAAzBO,EAAchD,SAC5BiE,EAAa,4BAA4B,GACzCiM,GAAkB5N,EAAWG,GAC1BZ,KAAK,SAAAJ,GACJmD,EAAiBnD,GACjBwC,EAAa,4BAA4B,KAE1ClC,MAAM,SAAAC,GACLoE,EAAgBpE,EAAMqN,QAAS,CAAEzI,QAAS,UAC1C3C,EAAa,4BAA4B,OAG9C,CAACjB,IAEJ,IAAMsM,EAAUpN,IAAMqN,QAAQ,kBAAMvM,EAAchD,OAAS,GACzDjC,EAAAC,EAAAC,cAACqT,GAAD,KACGtO,EAAcyM,IAAI,SAAC7C,EAAM8C,GAAP,OACjB3R,EAAAC,EAAAC,cAAC+S,GAAD,CACErI,MAAO+G,EACPC,IAAK/C,EAAK1L,IACV8E,QAAS4G,EACT5D,UAAWrF,EACXwC,UAAWA,QAIhB,CAACnD,EAAeW,IAEjB,OACE5F,EAAAC,EAAAC,cAACsT,GAAD,KACGtO,EACGlF,EAAAC,EAAAC,cAAC6R,EAAD,MACAR,IAMJO,GAAOxR,IAAOC,IAAVkT,KACC,SAAAhP,GAAK,OAAIA,EAAMqF,MAAM8D,YAO1B6D,GAAUnR,IAAOC,IAAVmT,KAIc,SAAAjP,GAAK,uCAAAiE,OAC1BjE,EAAMqF,MAAM4D,UADc,YAAAhF,OAE1BjE,EAAMqF,MAAM4D,UAFc,gXCpEhC,IAAMiG,GAAgB,SAAA7Q,GAIhB,IAHJ8Q,EAGI9Q,EAHJ8Q,OACAC,EAEI/Q,EAFJ+Q,YACAC,EACIhR,EADJgR,cAIA,OACE9T,EAAAC,EAAAC,cAAC6T,GAAD,CACE7J,MAAO2J,EACPG,SALsB,SAACC,EAAGC,GAAJ,OAAgBJ,EAAcI,IAMpDrL,QAAQ,cAEP+K,EAAOlC,IAAI,SAAAyC,GAAK,OACfnU,EAAAC,EAAAC,cAACkU,GAAD,CACElK,MAAOiK,EAAMxM,GACbiK,IAAKuC,EAAMxM,GACXtH,MAAM,YACNgU,UAAU,YACVC,MAAOH,EAAMG,YAOjBC,GAAOjU,YAAOkU,KAAPlU,CAAHmU,KAEC,SAAAhQ,GAAK,OAAIA,EAAMqF,MAAM6E,cAO1B+F,GAAMpU,YAAOqU,KAAPrU,CAAHsU,KAEI,SAAAnQ,GAAK,OAAIA,EAAMqF,MAAM+K,iBACf,SAAApQ,GAAK,OAAIA,EAAMqF,MAAMgL,aCzC3BC,GAAgB,eAAAjS,EAAAwD,OAAA4I,EAAA,EAAA5I,CAAA6I,EAAAlP,EAAAmP,KAAG,SAAAC,EAAM2F,GAAN,IAAA3R,EAAAU,EAAA,OAAAoL,EAAAlP,EAAAuP,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACxBtM,EADwB,2CAAAqF,OACyBsM,EADzB,wBAAAvF,EAAAE,KAAA,EAEP/M,IAAMgN,IAAIvM,GAFH,cAExBU,EAFwB0L,EAAAI,KAAAJ,EAAAK,OAAA,SAIvB/L,EAASL,KAAK+B,OAJS,wBAAAgK,EAAAQ,SAAAZ,EAAAlF,SAAH,gBAAA+F,GAAA,OAAApN,EAAAsN,MAAAjG,KAAAP,YAAA,GAOhBqL,GAAqB,eAAA9L,EAAA7C,OAAA4I,EAAA,EAAA5I,CAAA6I,EAAAlP,EAAAmP,KAAG,SAAAkB,EAAM0E,GAAN,IAAA3R,EAAAU,EAAA,OAAAoL,EAAAlP,EAAAuP,KAAA,SAAAgB,GAAA,cAAAA,EAAAd,KAAAc,EAAAb,MAAA,cAC7BtM,EAD6B,2CAAAqF,OACoBsM,EADpB,2BAAAxE,EAAAb,KAAA,EAEZ/M,IAAMgN,IAAIvM,GAFE,cAE7BU,EAF6ByM,EAAAX,KAAAW,EAAAV,OAAA,SAI5B/L,EAASL,KAAK+B,OAJc,wBAAA+K,EAAAP,SAAAK,EAAAnG,SAAH,gBAAAgG,GAAA,OAAAhH,EAAAiH,MAAAjG,KAAAP,YAAA,0vBCMlC,IAAMsL,GAAQ,CACZ,CACEvN,GAAI,uCACJkD,KAAM,sBAER,CACElD,GAAI,uCACJkD,KAAM,yBAER,CACElD,GAAI,uCACJkD,KAAM,wBAER,CACElD,GAAI,uCACJkD,KAAM,0BAIJ+I,GAAS,CACb,CACEjM,GAAI,QACJ2M,MAAO,SAET,CACE3M,GAAI,aACJ2M,MAAO,eAILa,GAAkB,WAAM,IACpB5Q,EAAcJ,IAAM+M,WAAWhN,GAA/BK,UACA8D,EAAoB8I,wBAApB9I,gBAFoB6C,EAIA/G,IAAMgH,SAAS,MAJfC,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GAIrBkK,EAJqBhK,EAAA,GAIbiK,EAJajK,EAAA,GAAAK,EAKUtH,IAAMgH,SAAS,MALzBO,EAAApF,OAAA+E,EAAA,EAAA/E,CAAAmF,EAAA,GAKrBoI,EALqBnI,EAAA,GAKR4J,EALQ5J,EAAA,GAAAG,EAMY1H,IAAMgH,SAAS,MAN3BW,EAAAxF,OAAA+E,EAAA,EAAA/E,CAAAuF,EAAA,GAMrB0J,EANqBzJ,EAAA,GAMP0J,EANO1J,EAAA,GAAA2J,EAOItR,IAAMgH,SAAS,GAPnBuK,EAAApP,OAAA+E,EAAA,EAAA/E,CAAAmP,EAAA,GAOrB1S,EAPqB2S,EAAA,GAOXC,EAPWD,EAAA,GAAAE,EAQkBzR,IAAMgH,UAAS,GARjC0K,EAAAvP,OAAA+E,EAAA,EAAA/E,CAAAsP,EAAA,GAQHE,GARGD,EAAA,GAAAA,EAAA,IAAAE,EAU6B5R,IAAMgH,UAAS,GAV5C6K,EAAA1P,OAAA+E,EAAA,EAAA/E,CAAAyP,EAAA,GAUrBE,EAVqBD,EAAA,GAUGE,EAVHF,EAAA,GAAAG,EAWUhS,IAAMgH,SAAS,IAXzBiL,EAAA9P,OAAA+E,EAAA,EAAA/E,CAAA6P,EAAA,GAWrBE,EAXqBD,EAAA,GAWRE,EAXQF,EAAA,GAAAG,EAauCpS,IAAMgH,UAAS,GAbtDqL,EAAAlQ,OAAA+E,EAAA,EAAA/E,CAAAiQ,EAAA,GAarBE,EAbqBD,EAAA,GAaQE,EAbRF,EAAA,GAAAG,EAcoBxS,IAAMgH,SAAS,IAdnCyL,EAAAtQ,OAAA+E,EAAA,EAAA/E,CAAAqQ,EAAA,GAcrBE,EAdqBD,EAAA,GAcHE,EAdGF,EAAA,GAgBtBG,EAAad,GAA0BQ,EACvCO,EAAc7S,IAAMqN,QAAQ,kBAAM0D,GAAMxD,IAAI,SAAA3B,GAAC,OAAI/P,EAAAC,EAAAC,cAAC+W,GAAA,EAAD,CAAU/M,MAAO6F,EAAEpI,IAAKoI,EAAElF,OAAkBqK,MAC7FgC,EAAe/S,IAAMqN,QAAQ,kBAAM6E,EAAY3E,IAAI,SAAA3B,GAAC,OAAI/P,EAAAC,EAAAC,cAAC+W,GAAA,EAAD,CAAU/M,MAAO6F,EAAE5M,KAAM4M,EAAElF,OAAkBwL,KAGrGc,GAFoBhT,IAAMqN,QAAQ,kBAAMqF,EAAiBnF,IAAI,SAAA3B,GAAC,OAAI/P,EAAAC,EAAAC,cAAC+W,GAAA,EAAD,CAAU/M,MAAO6F,EAAE5M,KAAM4M,EAAElF,OAAkBgM,KAEjG,SAAA7G,GAOlB,GANA3H,EAAgB,OAAQ,CACtBQ,QAAS,QACT0I,QAAS,SAACK,EAAKN,GAAN,OACPtR,EAAAC,EAAAC,cAAA,WAAMoR,MAGW,OAAjBiE,EAAJ,CAWAO,GAAkB,MAyDpB,OAlCA3R,IAAM8H,UAAU,WACdqJ,EAAe1B,GAAO,GAAKA,GAAO,GAAGjM,GAAK,OACzC,CAACiM,KAEJzP,IAAM8H,UAAU,WACa,IAAvBoK,EAAYpU,SACdiU,GAAuB,GACvBnB,GAAiBxQ,GACdT,KAAK,SAAA2B,GACJyQ,GAAuB,GACvBI,EAAe7Q,KAEhBzB,MAAM,SAAAC,GACLiS,GAAuB,GACvB7N,EAAgBpE,EAAMqN,QAAS,CAAEzI,QAAS,cAG/C,CAACwN,IAEJlS,IAAM8H,UAAU,WACa,IAAvBoK,EAAYpU,SACdyU,GAA4B,GAC5BzB,GAAsB1Q,GACnBT,KAAK,SAAA2B,GACJiR,GAA4B,GAC5BI,EAAoBrR,KAErBzB,MAAM,SAAAC,GACLyS,GAA4B,GAC5BrO,EAAgBpE,EAAMqN,QAAS,CAAEzI,QAAS,cAG/C,CAACgO,IAGF7W,EAAAC,EAAAC,cAACkX,GAAD,KACGL,EACG/W,EAAAC,EAAAC,cAAC6R,EAAD,MAEA/R,EAAAC,EAAAC,cAACmX,GAAD,KACErX,EAAAC,EAAAC,cAACoX,GAAD,CACEC,QAAM,EACNjD,MAAM,OACNpK,MAAOkL,EACP/U,MAAM,YACN2T,SAjDa,SAAAwD,GAAK,OAAInC,EAAUmC,EAAMC,OAAOvN,SAmD5C8M,GAEHhX,EAAAC,EAAAC,cAACwX,GAAD,CACE9D,OAAQA,GACRC,YAAaA,EACbC,cAAewB,IAEjBtV,EAAAC,EAAAC,cAACyX,GAAD,KACE3X,EAAAC,EAAAC,cAACoX,GAAD,CACEC,QAAM,EACNjD,MAAM,OACNpK,MAAOqL,EACPlV,MAAM,YACN2T,SA/DW,SAAAwD,GAAK,OAAIhC,EAAgBgC,EAAMC,OAAOvN,SAiEhDgN,GAEHlX,EAAAC,EAAAC,cAACoX,GAAD,CACEtH,KAAK,SACLsE,MAAM,WACNpK,MAAOnH,EACP1C,MAAM,YACN2T,SAvEe,SAAAwD,GAAK,OAAI7B,EAAY6B,EAAMC,OAAOvN,WA0ErDlK,EAAAC,EAAAC,cAAC0X,GAAD,KACE5X,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACE2C,KAAK,SACLnH,QAAQ,YACR0E,QAlFW,kBAAM4J,MA+EnB,UAOAnX,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACExE,QAAQ,YACR0E,QAvFW,kBAAM4J,MAqFnB,cAcRrF,GAAOxR,IAAOC,IAAVsX,MAOJR,GAAO/W,IAAOwX,KAAVC,KAGC,SAAAtT,GAAK,OAAIA,EAAMqF,MAAM8D,YAG1BoK,GAAY1X,YAAO2X,KAAP3X,CAAH4X,KAIF,SAAAzT,GAAK,OAAIA,EAAMqF,MAAM8D,WAIrB,SAAAnJ,GAAK,OAAIA,EAAMqF,MAAM8D,YAI5B+J,GAAQrX,IAAOC,IAAV4X,MAMLP,GAActX,IAAOC,IAAV6X,gBCtOJrD,GAAgB,eAAAjS,EAAAwD,OAAA4I,EAAA,EAAA5I,CAAA6I,EAAAlP,EAAAmP,KAAG,SAAAkB,EAAO0E,EAAW1T,GAAlB,IAAAgO,EAAAvL,EAAAoF,EAAAkP,EAAAzE,EAAA,OAAAzE,EAAAlP,EAAAuP,KAAA,SAAAgB,GAAA,cAAAA,EAAAd,KAAAc,EAAAb,MAAA,cACxBL,EADwB,2CAAA5G,OACyBsM,EADzB,iBAAAxE,EAAAb,KAAA,EAEP/M,IAAMgN,IAC3BN,EACA,CACE/L,QAAS,CACPE,cAAa,UAAAiF,OAAYpH,MAND,cAExByC,EAFwByM,EAAAX,KAAAW,EAAAb,KAAA,EAWJ2I,QAAQC,IAAIxU,EAASL,KAAKkQ,OAAOlC,IAArB,eAAA8G,EAAAlS,OAAA4I,EAAA,EAAA5I,CAAA6I,EAAAlP,EAAAmP,KAAyB,SAAAC,EAAMoJ,GAAN,IAAAC,EAAA,OAAAvJ,EAAAlP,EAAAuP,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAC3BgJ,GAAwB3D,EAAWyD,EAAEG,aADV,cACvDF,EADuDjJ,EAAAI,KAAAJ,EAAAK,OAAA,SAEtD,CACLoE,QAASuE,EAAEG,YACXC,UAAWJ,EAAE5N,KACbpF,MAAOiT,IALoD,wBAAAjJ,EAAAQ,SAAAZ,EAAAlF,SAAzB,gBAAA0G,GAAA,OAAA2H,EAAApI,MAAAjG,KAAAP,YAAA,KAXR,cAAAT,EAAAqH,EAAAX,KAAAwI,EAAA/R,OAAAwS,GAAA,EAAAxS,CAAA6C,GAWpByK,EAXoByE,EAAAU,MAAA,GAAAvI,EAAAV,OAAA,SAoBvB8D,GApBuB,yBAAApD,EAAAP,SAAAK,EAAAnG,SAAH,gBAAA+F,EAAAC,GAAA,OAAArN,EAAAsN,MAAAjG,KAAAP,YAAA,GAuBvB+O,GAAuB,eAAAK,EAAA1S,OAAA4I,EAAA,EAAA5I,CAAA6I,EAAAlP,EAAAmP,KAAG,SAAA6J,EAAOjE,EAAWd,GAAlB,IAAA5E,EAAAvL,EAAA,OAAAoL,EAAAlP,EAAAuP,KAAA,SAAA0J,GAAA,cAAAA,EAAAxJ,KAAAwJ,EAAAvJ,MAAA,cACxBL,EADwB,2CAAA5G,OACyBsM,EADzB,+BAAAtM,OACgEwL,GADhEgF,EAAAvJ,KAAA,EAEP/M,IAAMgN,IAAIN,GAFH,cAExBvL,EAFwBmV,EAAArJ,KAAAqJ,EAAApJ,OAAA,SAIvB/L,EAASL,KAAK+B,OAJS,wBAAAyT,EAAAjJ,SAAAgJ,EAAA9O,SAAH,gBAAA2G,EAAAC,GAAA,OAAAiI,EAAA5I,MAAAjG,KAAAP,YAAA,GCnBhBuP,GAAchV,IAAMuG,KAAK,SAAA5H,GAMhC,IALJmF,EAKInF,EALJmF,QACA2C,EAII9H,EAJJ8H,MACAK,EAGInI,EAHJmI,UACA7C,EAEItF,EAFJsF,UACAJ,EACIlF,EADJkF,QAKMoR,EAA0BnR,EAAQoR,gBAAkBpR,EAAQoR,eAAepX,OAAS,EACpFqX,EAAgBnV,IAAMqN,QAAQ,kBAAM4H,EAA0B,UAAYpZ,EAAAC,EAAAC,cAACmT,GAAApT,EAAD,OAAkB,CAACgI,IAC7FnC,EAAQ3B,IAAMqN,QAAQ,kBAAM4H,EAE9BpZ,EAAAC,EAAAC,cAACgT,GAAD,CACEvI,MAAO1C,EAAQoR,eAAe,GAAGtK,UACjC7E,MAAOjC,EAAQoR,eAAe,GAAGtT,SAGnC/F,EAAAC,EAAAC,cAACgT,GAAD,CACEjN,SAAUgC,EAAQnC,MAAMG,SACxBiE,MAAOiJ,KAAKC,MAA6B,IAAvBnL,EAAQnC,MAAMC,QAAgB,OAEjD,CAACkC,IAEN,OACEjI,EAAAC,EAAAC,cAACuK,GAAD,CACEE,MAAO1C,EAAQ8G,UACflE,KAAM5C,EAAQ4C,KACdD,MAAOA,EACPV,MAAOpE,EACPmF,UAAWA,EACXH,YAAa7C,EAAQ6C,YACrBC,oBAAqBuO,EACrBtO,SAAUoO,EA3BQ,kBAAMpR,EAAQC,EAASA,EAAQoR,eAAe,GAAGlW,MACjD,kBAAMiF,EAAUH,6pBCJxC,IAAMsR,GAAc,WAAM,IAAAtI,EAWpB9M,IAAM+M,WAAWhN,GATnBQ,EAFsBuM,EAEtBvM,SACAG,EAHsBoM,EAGtBpM,aACAuD,EAJsB6I,EAItB7I,UACAJ,EALsBiJ,EAKtBjJ,QACAzD,EANsB0M,EAMtB1M,UACAO,EAPsBmM,EAOtBnM,wBACAc,EARsBqL,EAQtBrL,iBACAmB,EATsBkK,EAStBlK,gBACAb,EAVsB+K,EAUtB/K,aAEMmC,EAAoB8I,wBAApB9I,gBAZgB6C,EAcc/G,IAAMgH,SAAS,MAd7BC,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GAcjB2I,EAdiBzI,EAAA,GAcJkK,EAdIlK,EAAA,GAgBlBwI,EAASzP,IAAMqN,QAAQ,kBAAM3M,EAAa6M,IAAI,SAAA3B,GAAC,MAAK,CAAEpI,GAAIoI,EAAEmE,QAASI,MAAOvE,EAAE8I,cAAe,CAAChU,IAEpGV,IAAM8H,UAAU,WACdqJ,EAAezQ,EAAa,GAAKA,EAAa,GAAGqP,QAAU,OAC1D,CAACrP,IAEJV,IAAM8H,UAAU,YACTnH,GAA2BJ,GAAoC,IAAxBG,EAAa5C,SACvDiE,EAAa,2BAA2B,GACxC6O,GAAiBxQ,EAAWG,GAAUZ,KAAK,SAAAe,GACzCkC,EAAgBlC,GAChBqB,EAAa,2BAA2B,KACvClC,MAAM,SAAAC,GACPiC,EAAa,2BAA2B,GACxCmC,EAAgBpE,EAAMqN,QAAS,CAAEzI,QAAS,cAG7C,CAAChE,IAEJ,IAAM0M,EAAUpN,IAAMqN,QAAQ,kBAAM3M,EAAa5C,OAAS,GACxDjC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuZ,SAAA,KACExZ,EAAAC,EAAAC,cAACwX,GAAD,CACE9D,OAAQA,EACRC,YAAaA,EACbC,cAAewB,IAEhBzQ,EAAa6M,IAAI,SAAA+G,GAAC,OAAI5E,IAAgB4E,EAAEvE,SACvClU,EAAAC,EAAAC,cAACF,EAAAC,EAAMuZ,SAAP,CAAgB5H,IAAK6G,EAAEvE,SACrBlU,EAAAC,EAAAC,cAACuZ,GAAD,KACGhB,EAAEI,WAEL7Y,EAAAC,EAAAC,cAACwZ,GAAD,KACGjB,EAAEhT,MAAMiM,IAAI,SAAC7C,EAAM8C,GAAP,OACX3R,EAAAC,EAAAC,cAACiZ,GAAD,CACEvO,MAAO+G,EACPC,IAAK/C,EAAK1L,IACV8E,QAAS4G,EACTzG,UAAWA,EACX6C,UAAWrF,EACXoC,QAASA,YAOpB,CAAC6L,EAAahP,EAAce,IAE/B,OACE5F,EAAAC,EAAAC,cAACyZ,GAAD,KACG7U,EACG9E,EAAAC,EAAAC,cAAC6R,EAAD,MACAR,IAMJO,GAAOxR,IAAOC,IAAVqZ,KACC,SAAAnV,GAAK,OAAIA,EAAMqF,MAAM8D,YAO1B8L,GAAQpZ,IAAOC,IAAVsZ,KAIgB,SAAApV,GAAK,uCAAAiE,OAC1BjE,EAAMqF,MAAM4D,UADc,YAAAhF,OAE1BjE,EAAMqF,MAAM4D,UAFc,YAO1B+L,GAAQnZ,IAAOC,IAAVuZ,KACA,SAAArV,GAAK,OAAIA,EAAMqF,MAAM8D,ikICxFhC,IAsDMmM,GAAYC,aAAW,CAC3BC,WAAY,CACVC,OAAQ,GACRC,MAAO,GACPC,YAAa,KAsKXC,GAAY/Z,IAAOC,IAAV+Z,MAKTC,GAAWja,IAAOC,IAAVia,MASRC,GAAgBna,IAAOC,IAAVma,KAGI,SAAAjW,GAAK,OAAIA,EAAMmG,MAAQ,MAWxC+P,GAAUra,IAAOC,IAAVqa,KACF,SAAAnW,GAAK,OAAIA,EAAMiF,SAAS,cAC/B,SAAAjF,GAAK,OACJA,EAAMoW,UACPC,YADAC,KAIa,SAAAtW,GAAK,SAAAiE,OAAOjE,EAAMiF,SAAS,eAC3B,SAAAjF,GAAK,SAAAiE,OAAOjE,EAAMiF,SAAS,eAC9B,SAAAjF,GAAK,SAAAiE,OAAOjE,EAAMiF,SAAS,eAE3B,GAOe,SAAAjF,GAAK,OAAIA,EAAMiF,SAAS,oBAChC,SAAAjF,GAAK,OAAIA,EAAMiF,SAAS,iBAC9B,SAAAjF,GAAK,OAAIA,EAAMiF,SAAS,cAGnC,SAAAjF,GAAK,OACLA,EAAMoW,UACNC,YADAE,OAQE,SAAAvW,GACA,OACGA,EAAMoW,UACPC,YADAG,KAEgB,SAAAxW,GAAK,OAAIA,EAAMiF,SAAS,iBAO1CwR,GAAkB5a,IAAOC,IAAV4a,MAefC,GAAiB9a,YAAO2N,IAAP3N,CAAH+a,MAQdC,GAAYhb,IAAOC,IAAVgb,MASTC,GAAiBlb,IAAOC,IAAVkb,KAChB,SAAAhX,GAAK,OACJA,EAAMoW,UACPC,YADAY,KAKM,SAAAjX,GAAK,OACL6J,IAAQ7J,EAAMiF,SAAS,cACpB6E,MAAM,IACNC,YAIT,SAAA/J,GAAK,OACLA,EAAMoW,UACNC,YADAa,QAWEC,GAAmBtb,IAAOC,IAAVsb,KAClB,SAAApX,GAAK,OACJA,EAAMoW,UACPC,YADAgB,KAKM,SAAArX,GAAK,OACP6J,IAAQ7J,EAAMiF,SAAS,cAClB6E,MAAM,IACNC,YAIT,SAAA/J,GAAK,OACLA,EAAMoW,UACNC,YADAiB,QAWEC,GAAe1b,IAAOC,IAAV0b,KAUQ,SAAAxX,GAAK,OAAIA,EAAMkG,QAGnCuR,GAAqB5b,IAAOC,IAAV4b,KAEb,SAAA1X,GAAK,OAAIA,EAAMiF,SAAS,iBAI7B0S,GAAuB9b,IAAOC,IAAV8b,KAGZ,SAAA5X,GAAK,OAAIA,EAAMiF,SAAS,iBAKvB4S,gBAtZA,SAAAxS,GAAK,MAAK,CACvByS,MAAMjW,OAAAmC,EAAA,EAAAnC,CAAA,GACDwD,EAAM0S,OAAOC,UADb,CAEHC,WAAY5S,EAAM6S,QAAQ,GAC1BC,cAAe9S,EAAM6S,QAAQ,KAE/BE,UAAW,GACXC,KAAM,GAKNC,GAAI,CACFC,WAAY,OACZC,SAAU,QACVC,aAAc,EACd7c,MAAO,mBAET8c,EAAG,CACDC,SAAU,EACV/c,MAAO,mBAETyF,MAAO,CACLsX,SAAU,EAEVJ,WAAY,MACZ3c,MAAO,mBAETgd,MAAO,CACLC,UAAW,EACXpD,OAAQ,EACRwC,WAAY,SACZa,eAAgB,WAIlBC,QAAS,CACPC,QAAS,QAEXC,OAAQ,CACNC,UAAW,eACXC,WAAY,OACZC,WAAY/T,EAAMgU,YAAYC,OAAO,YAAa,CAChDC,SAAUlU,EAAMgU,YAAYE,SAASC,YAGzCC,WAAY,CACVP,UAAW,kBAEbQ,OAAQ,CACNC,gBAAiBC,KAAI,QAoWV/B,CAxVU,SAAAxZ,GAwBnB,IAAAwb,EAAAxb,EAvBJsF,iBAuBI,IAAAkW,EAvBQ,aAuBRA,EAAAC,EAAAzb,EApBJmG,gCAoBI,IAAAsV,EApBuB,aAoBvBA,EAAAC,EAAA1b,EAjBJkF,eAiBI,IAAAwW,EAjBM,aAiBNA,EAbJvW,GAaInF,EAdJ+Q,YAcI/Q,EAbJmF,SACA2C,EAYI9H,EAZJ8H,MAYI6T,EAAA3b,EAXJ+X,gBAWI,IAAA4D,EAXO,KAWPA,EAVJC,EAUI5b,EAVJ4b,UACA3P,EASIjM,EATJiM,UACA4P,EAQI7b,EARJ6b,MACA1Y,EAOInD,EAPJmD,SACAH,EAMIhD,EANJgD,MACAgF,EAKIhI,EALJgI,YAKI8T,EAAA9b,EAJJ4G,gBAII,IAAAkV,EAJO,aAIPA,EADJ7b,EACID,EADJC,SACImI,EACsB/G,IAAMgH,SAAS,CACvC0T,UAAU,EACVC,WAAW,EACXC,WAAW,IAJT3T,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GACG5G,EADH8G,EAAA,GACU/E,EADV+E,EAAA,GAOE4T,EAAUjF,KAPZtO,EAS4BtH,IAAMgH,SACvB,SAAb0P,EAAsB9X,EAAW,GAV/B2I,EAAApF,OAAA+E,EAAA,EAAA/E,CAAAmF,EAAA,GAAAC,EAAA,GAAAA,EAAA,GAyBJvH,IAAM8H,UAAU,WAET3H,EAAMya,WACT7S,WAAW,WACT7F,EAAS,CACP0Y,WAAW,KAEJ,IAARnU,KAIP,IAAMwO,EAA0BnR,EAAQoR,gBAAkBpR,EAAQoR,eAAepX,OAAS,EAE1F,OACEjC,EAAAC,EAAAC,cAACua,GAAD,CAAewE,UAAY3a,EAAMya,UAAwB,GAAZL,GAC3C1e,EAAAC,EAAAC,cAACya,GAAD,CAASE,SAAUA,EAAUnR,SAAUA,GACrC1J,EAAAC,EAAAC,cAAC8b,GAAD,CACEkD,MAAO,GACPvU,MAAOoE,EACPjF,MACe,SAAb+Q,GAAoC,cAAbA,EACnB,CACEV,MAAO,IACPD,OAAQ,KAEV,KAGRla,EAAAC,EAAAC,cAACkb,GAAD,KACEpb,EAAAC,EAAAC,cAACob,GAAD,KAAYqD,GACZ3e,EAAAC,EAAAC,cAACgb,GAAD,KAAkBpQ,IAGN,SAAb+P,GAAoC,cAAbA,GACtB7a,EAAAC,EAAAC,cAAC0b,GAAD,CAAkBf,SAAUA,EAAUnR,SAAUA,GAE5C0P,GACApZ,EAAAC,EAAAC,cAAC6S,GAAA,EAAD,CAAUL,IAAKzK,EAAQoR,eAAe,GAAGtK,UAAWkQ,UAAWD,EAAQ/E,aAEzEja,EAAAC,EAAAC,cAACgc,GAAD,CAAoBxS,SAAUA,GAE1B0P,EACInR,EAAQoR,eAAe,GAAGtT,OADP,GAAA2C,OACmBzC,EADnB,KAAAyC,OAC+ByK,KAAKC,MAAc,IAARtN,GAAe,MAGpF9F,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACI3D,SAAUA,EACVb,QAAQ,YACR0E,QACE6L,EAzDmB,SAAClR,GAClCF,EAAQC,EAASC,IAwDkDiX,YAAWlX,EAAQoR,eAAe,GAAGlW,KA7DlF,WACtBiF,EAAUH,KAgEEmR,EAAuB,UACPpZ,EAAAC,EAAAC,cAACmT,GAAApT,EAAD,QAMV,SAAb4a,GACC7a,EAAAC,EAAAC,cAACsb,GAAD,CAAgBX,SAAUA,EAAUnR,SAAUA,GAC5C1J,EAAAC,EAAAC,cAACma,GAAD,KACGtX,GAAY,GACX/C,EAAAC,EAAAC,cAACkf,GAAAnf,EAAD,CACEif,MAAO,CACLG,QAAS,IAEX9R,QAAS,WACPtE,EAAyBhB,EAASlF,EAAW,MAKlDA,EAAW,GACV/C,EAAAC,EAAAC,cAACof,GAAArf,EAAD,CACEif,MAAO,CACLG,QAAS,IAEX9R,QAAS,WACPtE,EAAyBhB,EAASlF,EAAW,MAInD/C,EAAAC,EAAAC,cAACqa,GAAD,KAAWxX,GACX/C,EAAAC,EAAAC,cAACqf,GAAAtf,EAAD,CACEsN,QAAS,WACPtE,EAAyBhB,EAASlF,EAAW,OAInD/C,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACgc,GAAD,CAAoBxS,SAAUA,GAC3BzD,EADH,IAhGM,SAACH,EAAO0Z,GACxB,OAAOrM,KAAKC,MAAMtN,EAAQ0Z,EAAI,KAAO,IAgGbC,CAAU3Z,EAAO/C,KAIhCA,EAAW,GACV/C,EAAAC,EAAAC,cAACkc,GAAD,CAAsB1S,SAAUA,GAC7BzD,EADH,IACckN,KAAKC,MAAc,IAARtN,GAAe,IADxC,kBAON9F,EAAAC,EAAAC,cAAC0M,EAAA,EAAD,CAAUC,GAAIvI,EAAMua,SAAU/R,QAAQ,OAAO4S,eAAa,GACxD1f,EAAAC,EAAAC,cAAC+N,EAAA,EAAD,KAAcnD,+CCrOxB,SAAS6U,GAAgB1Z,GACvB,MAAO,CACL4E,KAAM5E,EACN2Z,aAAc,EACdC,OAAQ,CACNC,SAAU7Z,EACV8Z,SAAU,KACVC,KAAK,GAEPC,WAAY,MAUhB,IAAIC,GAAgB,QA0Cb,SAASC,GAAqBpa,EAAQE,EAAUma,GACrD,IAAIC,EAAeC,WAAWva,GAC9B,IAAKE,GAAYsa,MAAMF,GACrB,MAAO,CACLG,kBAAmBza,EAAS,IAAME,EAClCwa,IAAK,OAIT,IAAIC,EA1DN,SAA4Bza,GAC1B,OAAOA,GACH0a,GAAe1a,EAAS2a,gBACxBjB,GAAgB1Z,GAuDE4a,CAAmB5a,GACrC6a,EAvBN,SAA4BV,GAC1B,OAAOA,GACHW,GARN,SAAsBX,GACpB,MAAO,CACLA,EAAOY,OAAO,EAAG,GAAGC,cACpBb,EAAOY,OAAO,EAAG,GAAGJ,eACpB7f,KAAK,KAIkBmgB,CAAad,KAElCW,GAAqBb,IAmBHiB,CAAmBf,GAErCgB,EAAaf,EAAe,EAAI,IAAM,GACtCT,EAAec,EAAgBd,aAE/BC,EAASa,EAAgBb,OACzBwB,EAAoBP,EAAgBQ,UACpCC,EAAmBT,EAAgBU,QAEjC3B,IAAUA,EAAOG,KAAsC,MAA9Bc,EAAgBQ,YAC7CD,EAAoB,IACpBE,EAAmB,KAGrB,IAAIE,EAAiBtO,KAAKuO,IAAIrB,GAC3BsB,QAAQ/B,GACR9e,MAAM,KACT2gB,EAAe,GAAKA,EAAe,GAAGG,QACpC,0BACA,KAAOP,GAET,IAAIQ,EAAkBJ,EAAe1gB,KAAKwgB,GAEtCf,EAAoBY,EAAaS,EAAkB,IAAM5b,EACzD+Z,GAAM,EAUV,OATIH,GAAUA,EAAOE,WACnBS,EACEY,EACAvB,EAAOE,SACJ6B,QAAQ,IAAKC,GACbD,QAAQ,IAAK/B,EAAOC,UACzBE,EAAMH,EAAOG,KAGR,CACLQ,kBAAmBA,EACnBC,IAAKT,EAAM,MAAQ,qvDC8MhB,IC1THtd,GD0TSof,GAAcxhB,IAAOC,IAAVwhB,MAelBC,GAAQ1hB,IAAOC,IAAV0hB,MAaLC,GAAQ5hB,IAAOC,IAAV4hB,MAULC,GAAQ9hB,IAAOC,IAAV8hB,MAULC,GAAWhiB,IAAOC,IAAVgiB,MAaRC,GAAWliB,IAAOC,IAAVkiB,MAaDC,GAAcpiB,IAAOC,IAAVoiB,UAMTC,aAhYf,SAAA9f,GAAuC,IAAA0B,EAAA2F,KAAVrI,GAAUgB,EAAvBoc,MAAuBpc,EAAVhB,SAAUoJ,EACW/G,IAAMgH,UAAS,GAD1BC,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GAChC2X,EADgCzX,EAAA,GACb0X,EADa1X,EAAA,GAG/B2X,EAAmB5e,IAAM+M,WAAWhN,GAEpCuC,EAAW,WACfsc,EAAiBtc,YA6CXuc,EAAmC,SAAC/a,EAASvC,GAC/Cod,GAAqB,GlB2HtB,SAAyC7a,EAASvC,EAAYzC,GACnE,IAAIG,EAAO,CACTC,IACI,2CACA1C,OAAO6B,WACP,iBACAyF,EAAQ9E,IACR,YAAcuC,EAClBpC,OAAQ,OACRC,QAAS,CACPE,cAAe,UAAYR,IAG/B,OAAOL,IAAMQ,GkBvIP6f,CAAgChb,EAASvC,EAAYqd,EAAiBre,UACjEZ,KAAK,SAAAC,GACFgf,EAAiB5a,cACjB2a,GAAqB,GACrBte,EAAKC,MAAMoD,iCAEd7D,MAAM,SAAAkf,GACHJ,GAAqB,MAInC,OACE9iB,EAAAC,EAAAC,cAAA,WACG6iB,EAAiBpd,aAChB3F,EAAAC,EAAAC,cAAC8hB,GAAD,KACEhiB,EAAAC,EAAAC,cAACgiB,GAAD,CACEhD,MAAO,CACLiE,QAAS,gBACTnV,aAAc+U,EAAiBrZ,SAAS,gBACxC0U,gBAAiB2E,EAAiBrZ,SAAS,WAC3CrJ,MAAO0iB,EAAiBrZ,SAAS,eAGnC1J,EAAAC,EAAAC,cAAA,OACEgf,MAAO,CACLd,gBAAiB2E,EAAiBrZ,SAAS,WAC3CrJ,MAAO0iB,EAAiBrZ,SAAS,eAGnC1J,EAAAC,EAAAC,cAACoiB,GAAD,CACEpD,MAAO,CACLd,gBAAe,GAAA1V,OAAKqa,EAAiBrZ,SAAS,YAE9C0Z,aAAY,aAAA1a,OAAe4F,IACzByU,EAAiBrZ,SAAS,cAEzB6E,MAAM,IACNC,YAGLxO,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAACmjB,GAAApjB,EAAD,CACEif,MAAO,CACLoE,OAAQ,WAEV/V,QAAS,SAAAvM,GAAC,OAAIyF,QAIlBzG,EAAAC,EAAAC,cAAC4hB,GAAD,KACGiB,EAAiBld,MAChBkd,EAAiBld,KAAKJ,MAAMiM,IAAI,SAAC6R,EAAarhB,GAC5C,OACElC,EAAAC,EAAAC,cAAA,OAAK0R,IAAG,WAAAlJ,OAAaxG,IACnBlC,EAAAC,EAAAC,cAACsjB,GAAD,CACEvb,QAASsb,EACT3R,IAAK2R,EAAYpgB,IACjByH,MAAO1I,EACPwc,UAAU,eACVvb,IAAKogB,EAAYpgB,IACjBwb,MAAO4E,EAAY1Y,KACnBC,YAAayY,EAAYzY,YACzBhF,MAAOyd,EAAYzd,MAAMC,OACzBgJ,UAAWwU,EAAYxU,UACvB9I,SAAUsd,EAAYzd,MAAMG,SAC5B4U,SAAS,OACT7X,OAAQ+f,EAAiBld,KAAK7C,OAC9B0B,SAAUqe,EAAiBre,SAC3BuE,yBACE8Z,EAAiB9Z,yBAEnBlG,SAAUwgB,EAAYxgB,cAK/BggB,EAAiBld,MAChBkd,EAAiBld,KAAKJ,MAAMxD,QAAU,GAAKjC,EAAAC,EAAAC,cAAA,wBAG/CF,EAAAC,EAAAC,cAACsiB,GAAD,CACEtD,MAAO,CACLd,gBAAe,GAAA1V,OAAKqa,EAAiBrZ,SAAS,YAE9C+Z,UAAS,aAAA/a,OAAe4F,IACtByU,EAAiBrZ,SAAS,cAEzB6E,MAAM,IACNC,YAGLxO,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,KACd8D,EAAiBld,MAChBkd,EAAiBld,KAAKJ,MAAMxD,OAAS,GACnCjC,EAAAC,EAAAC,cAACwiB,GAAD,iBAEE1iB,EAAAC,EAAAC,cAAA,OACEgf,MAAO,CACLwE,SAAU,GACVC,UAAW,UAGZZ,EAAiBhM,YAChBoJ,GAnJE,SAAAta,GACxB,IAAI+d,EAAW,EAIf,OAHA/d,EAAKge,QAAQ,SAASC,GACpBF,GAAYE,EAAQhe,MAAMC,OAAS+d,EAAQ/gB,WAEtCoQ,KAAKC,MAAiB,IAAXwQ,GAAkB,IA+IZG,CAAkBhB,EAAiBld,KAAKJ,OACxCsd,EAAiBld,KAAKJ,MAAM,GAAGK,MAAMG,UACrCua,mBACFuC,EAAiBhM,YACjBoJ,GACE4C,EAAiBld,KAAKC,MAAMC,OAC5Bgd,EAAiBld,KAAKC,MAAMG,UAC5Bua,oBAIVxgB,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACIxE,QAAQ,YACRqW,MAAO,CAAC9E,YAAa,OACrB7M,QAAS,aAEDsV,GACAE,EAAiBld,KAAKJ,MAAMxD,QAAU,KA5J1D4gB,GACAE,EAAiBld,KAAKJ,MAAMxD,QAAU,IAI1CH,EAAQkiB,KADG,aAEXvd,QAgJY,cAYFzG,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACExE,QAAQ,YACR0E,QAAS,aAELsV,GACAE,EAAiBld,KAAKJ,MAAMxD,QAAU,KA7JxD6gB,GAAqB,GACAjf,EACnBkf,EAAiBld,KAAK7C,OACtB+f,EAAiBre,UAGhBZ,KAAK,SAAAC,GACJpD,OAAOsjB,gBAAgBlgB,EAASL,KAAT,OACvB/C,OAAOujB,kBAAkBC,OACzBxjB,OAAOujB,kBAAkBE,GACvBzjB,OAAOujB,kBAAkBG,WAAWC,MACpC,SAAC9M,EAAO9T,GACNof,GAAqB,KAGzBniB,OAAOujB,kBAAkBE,GACvBzjB,OAAOujB,kBAAkBG,WAAWE,YACpC,SAAC/M,EAAO9T,GAAR,OAAiBqf,EAAiBjb,kBAAkB0P,EAAO9T,OAG9DM,MAAM,SAAAhD,SAoIG,oBAeNhB,EAAAC,EAAAC,cAACkiB,GAAD,CAAO7U,QAAS,SAAAvM,GAAC,OAAIyF,QAItBsc,EAAiBxd,8BACdvF,EAAAC,EAAAC,cAAC8hB,GAAD,KACIhiB,EAAAC,EAAAC,cAACgiB,GAAD,CACIhD,MAAO,CACHiE,QAAS,gBACTnV,aAAc+U,EAAiBrZ,SAAS,gBACxC0U,gBAAiB2E,EAAiBrZ,SAAS,WAC3CrJ,MAAO0iB,EAAiBrZ,SAAS,eAGrC1J,EAAAC,EAAAC,cAAA,OACIgf,MAAO,CACHd,gBAAiB2E,EAAiBrZ,SAAS,WAC3CrJ,MAAO0iB,EAAiBrZ,SAAS,eAGrC1J,EAAAC,EAAAC,cAACoiB,GAAD,CACIpD,MAAO,CACHd,gBAAe,GAAA1V,OAAKqa,EAAiBrZ,SAAS,YAC9C0Z,aAAY,aAAA1a,OAAe4F,IACvByU,EAAiBrZ,SAAS,cAEzB6E,MAAM,IACNC,YAGTxO,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAACmjB,GAAApjB,EAAD,CACIif,MAAO,CACHoE,OAAQ,WAEZ/V,QAAS,SAAAvM,GAAC,OAAIyF,QAItBzG,EAAAC,EAAAC,cAAC4hB,GAAD,KACKiB,EAAiBvd,yBAClBud,EAAiBvd,wBAAwBC,MAAMiM,IAAI,SAAC6R,EAAarhB,GAC7D,OACIlC,EAAAC,EAAAC,cAAA,OAAK0R,IAAG,WAAAlJ,OAAaxG,IACjBlC,EAAAC,EAAAC,cAACsjB,GAAD,CACIvb,QAASsb,EACT3R,IAAK2R,EAAYpgB,IACjByH,MAAO1I,EACPwc,UAAU,eACVvb,IAAKogB,EAAYpgB,IACjBwb,MAAO4E,EAAY1Y,KACnBC,YAAayY,EAAYzY,YACzBhF,MAAOyd,EAAYzd,MAAMC,OACzBgJ,UAAWwU,EAAYxU,UACvB9I,SAAUsd,EAAYzd,MAAMG,SAC5B4U,SAAS,YACT7X,OAAQ+f,EAAiBld,KAAK7C,OAC9B0B,SAAUqe,EAAiBre,SAC3BuE,yBACI8Z,EAAiB9Z,yBAErBlG,SAAUwgB,EAAYxgB,cAKrCggB,EAAiBvd,yBAClBud,EAAiBvd,wBAAwBC,MAAMxD,QAAU,GAAKjC,EAAAC,EAAAC,cAAA,wBAGlEF,EAAAC,EAAAC,cAACsiB,GAAD,CACItD,MAAO,CACHd,gBAAe,GAAA1V,OAAKqa,EAAiBrZ,SAAS,YAC9C+Z,UAAS,aAAA/a,OAAe4F,IACpByU,EAAiBrZ,SAAS,cAEzB6E,MAAM,IACNC,YAGTxO,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,KAEX4D,EACI7iB,EAAAC,EAAAC,cAAC6R,EAAD,MACA/R,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACIxE,QAAQ,YACR0E,QAAS,aAEDsV,GACAE,EAAiBvd,wBAAwBC,MAAMxD,QAAU,IACxD+gB,EACDD,EAAiBvd,wBAAwBC,MAAM,GAC/Csd,EAAiBvd,wBAAwBE,cARrD,UAkBpB1F,EAAAC,EAAAC,cAACkiB,GAAD,CAAO7U,QAAS,SAAAvM,GAAC,OAAIyF,mBE5SxB+d,GAAb,SAAAC,GACI,SAAAD,EAAY/f,GAAO,IAAAD,EAAA,OAAA8B,OAAAoe,EAAA,EAAApe,CAAA6D,KAAAqa,IACfhgB,EAAA8B,OAAAqe,EAAA,EAAAre,CAAA6D,KAAA7D,OAAAse,EAAA,EAAAte,CAAAke,GAAAK,KAAA1a,KAAM1F,KASVsf,kBAAoB,SAAAle,GAChB,IAAI+d,EAAW,EAIf,OAHA/d,EAAKge,QAAQ,SAAUC,GACnBF,GAAYE,EAAQhe,MAAMC,OAAS+d,EAAQ/gB,WAExCoQ,KAAKC,MAAiB,IAAXwQ,GAAkB,KAZpCpf,EAAKF,MAAQ,CACTwgB,WAAW,EACXC,YAAa,aACbC,WAAY,MANDxgB,EADvB,OAAA8B,OAAA2e,EAAA,EAAA3e,CAAAke,EAAAC,GAAAne,OAAA4e,EAAA,EAAA5e,CAAAke,EAAA,EAAA5S,IAAA,eAAA1H,MAAA,WAoBQ,OAAQ,CAAC,MAAQ,KAAO,KAAO,KAAO,MAAM0X,QAAQ,SAAU,SAAAxa,GAAC,OAC1DA,EAAI+d,OAAOC,gBAAgB,IAAIC,WAAW,IAAI,GAAK,IAAMje,EAAI,GAAGke,SAAS,QArBtF,CAAA1T,IAAA,eAAA1H,MAAA,SAyBiBqb,GACTpb,KAAK9D,SAAS,CAACye,UAAWS,MA1BlC,CAAA3T,IAAA,WAAA1H,MAAA,WA6Be,IAAAsb,EAAArb,KACFtE,EAAQsE,KAAK1F,MAAboB,KAEC4f,EAAO,CACTzV,KAAM,WACN0V,KAAM,uCACNC,SAAU,sBACVC,SAAU,CACN7f,OAAQF,EAAKC,MAAMC,OACnBE,SAAUJ,EAAKC,MAAMG,SACrB4f,qBAAsB1b,KAAK2b,eAC3BC,wBAAyB,IAAIxkB,MAAQykB,eAEzCvgB,MAAOI,EAAKJ,MAAMiM,IAAI,SAACuU,GACnB,MAAO,CACH9iB,IAAK8iB,EAAS9iB,IACdJ,SAAUkjB,EAASljB,aAI/BoH,KAAK9D,SAAS,CAACye,WAAW,EAAMC,YAAa,aAAcmB,iBAAkB,OCxDxD,SAACxiB,GAC1B,IAAIN,EAAO,CACPC,IAAG,uDAEHC,OAAQ,OACRI,KAAMA,GAGV,OAAOd,IAAMQ,GACRU,KAAK,SAASC,GACX,OAAOA,EAASL,OD+CpByiB,CAAcV,GACT3hB,KAAK,SAAAC,GACFyhB,EAAKnf,SAAS,CACVye,WAAW,EACXC,YAAa,WACbC,WAAYjhB,EAASihB,eAG5BhhB,MAAM,gBA1DnB,CAAA4N,IAAA,SAAA1H,MAAA,WA8Da,IAAAkc,EAAAjc,KAAAkc,EAC0Dlc,KAAK1F,MAA7DoB,EADFwgB,EACExgB,KAAMnB,EADR2hB,EACQ3hB,SAAUuE,EADlBod,EACkBpd,yBAA0B8N,EAD5CsP,EAC4CtP,WAD5C9P,EAEwCkD,KAAK7F,MAA3C0gB,EAFF/d,EAEE+d,WAAYF,EAFd7d,EAEc6d,UAAWC,EAFzB9d,EAEyB8d,YAE9B,OACI/kB,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,0BACXjf,EAAAC,EAAAC,cAAComB,GAAA,EAAD,CAAOC,QAAS,SAACvlB,GAAD,OAAOolB,EAAKI,cAAa,IAAQrC,KAAMW,EAChDjc,QAAyB,eAAhBkc,EAA+B,UAAY,UAAW0B,aAAW,GAC7EzmB,EAAAC,EAAAC,cAAComB,GAAA,EAAMI,QAAP,KAAgC,eAAhB3B,EAA+B,0BAA4B,uBAEvEC,GAAcA,EAAW/iB,OACrB+iB,EAAWtT,IACP,SAACiV,GACG,OAAOA,EAAUlhB,MAAMiM,IACnB,SAAC7C,EAAM8C,GACH,OACI3R,EAAAC,EAAAC,cAAA,OAAK0R,IAAKD,GACN3R,EAAAC,EAAAC,cAAA,oBAAWF,EAAAC,EAAAC,cAAA,SAAI2O,EAAK1L,MACpBnD,EAAAC,EAAAC,cAAA,wBAAeF,EAAAC,EAAAC,cAAA,SAAsB,OAAlB2O,EAAK9L,SAAoB,EAAI8L,EAAK9L,gBAQ7E,KAIhB/C,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,mBACXjf,EAAAC,EAAAC,cAAC4hB,GAAD,KACKjc,GAAQA,EAAKJ,MAAMiM,IAAI,SAAC6R,EAAarhB,GAClC,OACIlC,EAAAC,EAAAC,cAAA,OAAK0R,IAAG,WAAAlJ,OAAaxG,IACjBlC,EAAAC,EAAAC,cAACsjB,GAAD,CACIvb,QAASsb,EACT3R,IAAK2R,EAAYpgB,IACjByH,MAAO1I,EACPwc,UAAU,eACVvb,IAAKogB,EAAYpgB,IACjBwb,MAAO4E,EAAY1Y,KACnBC,YAAayY,EAAYzY,YACzBhF,MAAOyd,EAAYzd,MAAMC,OACzBgJ,UAAWwU,EAAYxU,UACvB9I,SAAUsd,EAAYzd,MAAMG,SAC5B4U,SAAS,OACT7X,OAAQ6C,EAAK7C,OACb0B,SAAUA,EACVuE,yBAA0BA,EAC1BlG,SAAUwgB,EAAYxgB,cAKrC8C,GAAQA,EAAKJ,MAAMxD,QAAU,GAAKjC,EAAAC,EAAAC,cAAA,0CAEvCF,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,KACdpZ,GAAQA,EAAKJ,MAAMxD,OAAS,GACzBjC,EAAAC,EAAAC,cAAA,OAAKgf,MAAO,CAACzB,QAAS,OAAQmJ,eAAgB,kBAC1C5mB,EAAAC,EAAAC,cAACwiB,GAAD,CAAaxD,MAAO,CAACxC,WAAY,QAAjC,YAEI1c,EAAAC,EAAAC,cAAA,OACIgf,MAAO,CACHwE,SAAU,GACVC,UAAW,UAGd5M,GACDoJ,GACIhW,KAAK4Z,kBAAkBle,EAAKJ,OAC5BI,EAAKJ,MAAM,GAAGK,MAAMG,UACtBua,mBACAzJ,GACFoJ,GACIta,EAAKC,MAAMC,OACXF,EAAKC,MAAMG,UACbua,oBAGVxgB,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACIxE,QAAQ,YACR0E,QAAS,WACL6Y,EAAKR,SAAS/f,KAHtB,yBA/I5B2e,EAAA,CAAoCna,0BEFvBwc,WAAb,SAAAC,GACE,SAAAD,IAAc,IAAAriB,EAAA,OAAA8B,OAAAoe,EAAA,EAAApe,CAAA6D,KAAA0c,IACZriB,EAAA8B,OAAAqe,EAAA,EAAAre,CAAA6D,KAAA7D,OAAAse,EAAA,EAAAte,CAAAugB,GAAAhC,KAAA1a,QACK7F,MAAQ,CACXua,UAAU,EACVE,WAAW,GAJDva,EADhB,OAAA8B,OAAA2e,EAAA,EAAA3e,CAAAugB,EAAAC,GAAAxgB,OAAA4e,EAAA,EAAA5e,CAAAugB,EAAA,EAAAjV,IAAA,oBAAA1H,MAAA,WASsB,IAAAsb,EAAArb,KAEhBS,EACET,KAAK1F,MADPmG,MAGGT,KAAK7F,MAAMya,WACd7S,WAAW,WACTsZ,EAAKnf,SAAS,CACZ0Y,WAAW,KAEJ,IAARnU,KAnBT,CAAAgH,IAAA,SAAA1H,MAAA,WAuBW,IAAAmc,EAMHlc,KAAK1F,MAJPia,EAFK2H,EAEL3H,UACAqI,EAHKV,EAGLU,SACApI,EAJK0H,EAIL1H,MACA7T,EALKub,EAKLvb,YAGF,OACE9K,EAAAC,EAAAC,cAAA,OAAK+e,UAAS,oBAAAvW,OAAuByB,KAAK7F,MAAMya,UAAwB,GAAZL,IAC1D1e,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,yBACbjf,EAAAC,EAAAC,cAAA,OACE+e,UAAU,8BACVC,MAAO,CACL8H,gBAAe,OAAAte,OAASqe,EAAT,QAGnB/mB,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,iCACbjf,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,uCAAuCN,GACtD3e,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,6CAA6CnU,IAE9D9K,EAAAC,EAAAC,cAAC0M,EAAA,EAAD,CAAUC,GAAI1C,KAAK7F,MAAMua,SAAU/R,QAAQ,OAAO4S,eAAa,GAC7D1f,EAAAC,EAAAC,cAAC+N,EAAA,EAAD,KAAcnD,UA7C1B+b,EAAA,CAAqCI,cHN/BtkB,GAAcC,IAAMD,YISbukB,kBAAb,SAAAzC,GACI,SAAAyC,EAAYziB,GAAO,IAAAD,EAAA,OAAA8B,OAAAoe,EAAA,EAAApe,CAAA6D,KAAA+c,IACf1iB,EAAA8B,OAAAqe,EAAA,EAAAre,CAAA6D,KAAA7D,OAAAse,EAAA,EAAAte,CAAA4gB,GAAArC,KAAA1a,KAAM1F,KACDH,MAAQ,CACT6iB,KAAM,GACNhkB,IAAK,GACLikB,gBAAgB,EAChBrQ,YAAY,GAGhBvS,EAAK6iB,iBAAmB7iB,EAAK6iB,iBAAiBlI,KAAtB7Y,OAAAghB,GAAA,EAAAhhB,QAAAghB,GAAA,EAAAhhB,CAAA9B,KACxBA,EAAK+iB,gBAAkB/iB,EAAK+iB,gBAAgBpI,KAArB7Y,OAAAghB,GAAA,EAAAhhB,QAAAghB,GAAA,EAAAhhB,CAAA9B,KACvBA,EAAKgjB,aAAehjB,EAAKgjB,aAAarI,KAAlB7Y,OAAAghB,GAAA,EAAAhhB,QAAAghB,GAAA,EAAAhhB,CAAA9B,KAXLA,EADvB,OAAA8B,OAAA2e,EAAA,EAAA3e,CAAA4gB,EAAAzC,GAAAne,OAAA4e,EAAA,EAAA5e,CAAA4gB,EAAA,EAAAtV,IAAA,oBAAA1H,MAAA,WAgBYC,KAAK1F,MAAMC,UAAmD,IAAvCyF,KAAK1F,MAAMa,iBAAiBrD,SACnDkI,KAAKsd,oBACLtd,KAAK1F,MAAMyB,aAAa,cAAc,MAlBlD,CAAA0L,IAAA,uBAAA1H,MAAA,WAuBY,OAASC,KAAK1F,MAAMa,kBACpB6E,KAAK1F,MAAMkC,oBAAoB,MAxB3C,CAAAiL,IAAA,oBAAA1H,MAAA,WA4BwB,IAAAsb,EAAArb,KAChBsG,aAAK,CACDlM,UAAW5D,OAAO6B,WAClBkO,QAAS,OAGbvG,KAAK1F,MAAMyB,aAAa,cAAc,GJxChB,SAAC3B,EAAWtB,GACxCP,IAAUA,KACV,IAAIU,EAAO,CACTC,IAAG,uDAEHC,OAAQ,MACRC,QAAS,CACPE,cAAe,UAAYR,GAE7BkE,YAAa,IAAIxE,GAAY,SAAkByE,GAC7C1E,GAAS0E,KAIb,OAAOxE,IAAMQ,GACVU,KAAK,SAASC,GACb,OAAOA,EAASL,OI0BdgkB,CAAe/mB,OAAO6B,WAAY2H,KAAK1F,MAAMC,UACxCZ,KAAK,SAAA2B,GACF+f,EAAK/gB,MAAMkC,oBAAoBlB,KAElCzB,MAAM,WACHwhB,EAAK/gB,MAAMkC,oBAAoB,QAzC/C,CAAAiL,IAAA,mBAAA1H,MAAA,SA6CqBsN,GACbrN,KAAK9D,SAAS,CAAC8gB,KAAM3P,EAAMC,OAAOvN,UA9C1C,CAAA0H,IAAA,kBAAA1H,MAAA,SAiDoBsN,GACZrN,KAAK9D,SAAS,CAAClD,IAAKqU,EAAMC,OAAOvN,UAlDzC,CAAA0H,IAAA,eAAA1H,MAAA,SAqDiBsN,GAAO,IAAA4O,EAAAjc,KAChBA,KAAK9D,SAALC,OAAAmC,EAAA,EAAAnC,CAAA,GACO6D,KAAK7F,MADZ,CAEIyS,YAAY,KJ1CF,SAACxS,EAAWtB,EAAY0kB,EAAYxkB,GACxDT,IAAUA,KAEV,IAAIU,EAAO,CACTC,IAAG,wEAEHC,OAAQ,OACRC,QAAS,CACPE,cAAe,UAAYR,GAE7BS,KAAM,CACJkkB,WAAYrjB,EACZsjB,oBAAqB1kB,EACrB2kB,SAAU,KACVlW,IAAK+V,GAEPxgB,YAAa,IAAIxE,GAAY,SAAkByE,GAC7C1E,GAAS0E,KAIb,OAAOxE,IAAMQ,GIwBP2kB,CAAOpnB,OAAO6B,WAAY2H,KAAK1F,MAAMC,SAAUyF,KAAK7F,MAAM6iB,KAAMhd,KAAK7F,MAAMnB,KACtEW,KAAK,SAAC9C,EAAGgnB,GACN5B,EAAKqB,oBACLrB,EAAK/f,SAALC,OAAAmC,EAAA,EAAAnC,CAAA,GACO8f,EAAK9hB,MADZ,CAEI8iB,gBAAgB,EAChBrQ,YAAY,OAGnB/S,MAAM,WACHqD,QAAQ4gB,IAAI,SACZ7B,EAAK/f,SAALC,OAAAmC,EAAA,EAAAnC,CAAA,GACO8f,EAAK9hB,MADZ,CAEI8iB,gBAAgB,EAChBrQ,YAAY,OAIxBS,EAAM0Q,mBA7Ed,CAAAtW,IAAA,SAAA1H,MAAA,WAgFa,IACE5E,EAAoB6E,KAAK1F,MAAzBa,iBAEP,OACItF,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,IACXjf,EAAAC,EAAAC,cAAA,QAAM+e,UAAU,0BACVkJ,SAAUhe,KAAKqd,cAEjBxnB,EAAAC,EAAAC,cAAA,SACI+e,UAAU,2BACVjP,KAAK,OACLxC,KAAK,KACL4a,YAAa,kBACbpU,SAAU7J,KAAKkd,iBAAkBnd,MAAOC,KAAK7F,MAAM6iB,OAEvDnnB,EAAAC,EAAAC,cAAA,SACI+e,UAAU,2BACVjP,KAAK,OACLxC,KAAK,KACL4a,YAAa,yBACbpU,SAAU7J,KAAKod,gBAAiBrd,MAAOC,KAAK7F,MAAMnB,MAGlDgH,KAAK7F,MAAM8iB,iBAAmBjd,KAAK7F,MAAMyS,YAAc/W,EAAAC,EAAAC,cAAA,QAAM+e,UAAU,4BAAhB,cAGvD9U,KAAK7F,MAAMyS,YACX/W,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,6BACXjf,EAAAC,EAAAC,cAACE,EAAA,EAAD,OAGRJ,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACI2C,KAAK,SACLiP,UAAU,4BACVpW,QAAQ,aAHZ,gBAQJ7I,EAAAC,EAAAC,cAAA,OAAK+e,UAAU,oBAEP3Z,GAAoBA,EAAiBrD,OAEjCqD,EACKoM,IACG,SAAC2W,EAAYzW,GACT,OACI5R,EAAAC,EAAAC,cAACooB,GAAD,CACI1W,IAAKyW,EAAWR,oBAChBjd,MAAOgH,EACP8M,UAAU,eACVC,MAAO0J,EAAWxd,KAClBC,YAAaud,EAAWvd,YACxBic,SAAUsB,EAAWtZ,cAMzC/O,EAAAC,EAAAC,cAAA,iDA3I5BgnB,EAAA,CAAqC7c,0DCX/BmD,GAEK,QAFLA,GAGK,QAHLA,GAII,QAJJA,GAKI,SALJA,GAMK,SANLA,GAOK,SAPLA,GAQI,SAGG+a,GAAS,CACpBC,QAAO,eAAA9f,OAXE,QAWF,KACP+f,QAAO,eAAA/f,OAAiB8E,GAAjB,KACPkb,QAAO,eAAAhgB,OAAiB8E,GAAjB,KACPmb,OAAM,eAAAjgB,OAAiB8E,GAAjB,KACNob,OAAM,eAAAlgB,OAAiB8E,GAAjB,KACNqb,QAAO,eAAAngB,OAAiB8E,GAAjB,KACPsb,QAAO,eAAApgB,OAAiB8E,GAAjB,KACPub,OAAM,eAAArgB,OAAiB8E,GAAjB,miECVR,IAAMwb,GAAoB,SAAAlmB,GAAkC,IAA/B+L,EAA+B/L,EAA/B+L,KAAMoa,EAAyBnmB,EAAzBmmB,mBAC3BxJ,EAAY,SAAC3Z,EAAO/C,GAAR,OAAqBoQ,KAAKC,MAAMtN,EAAQ/C,EAAW,KAAO,KACtEmmB,EAAoB,kBAAMD,EAAmBpa,EAAMA,EAAK9L,SAAW,IAGzE,OACE/C,EAAAC,EAAAC,cAACipB,GAAD,KACEnpB,EAAAC,EAAAC,cAACkpB,GAAD,CAAeze,MAAOkE,EAAKE,YAC3B/O,EAAAC,EAAAC,cAACmpB,GAAD,KACErpB,EAAAC,EAAAC,cAACopB,GAAD,KAAWza,EAAKhE,MAChB7K,EAAAC,EAAAC,cAACqpB,GAAD,KACEvpB,EAAAC,EAAAC,cAACspB,GAAD,KACG3a,EAAK/I,MAAMG,SADd,IACyBwZ,EAAU5Q,EAAK/I,MAAMC,OAAQ8I,EAAK9L,WAE1D8L,EAAK9L,SAAW,GACf/C,EAAAC,EAAAC,cAACupB,GAAD,KACG5a,EAAK/I,MAAMG,SADd,IACyBwZ,EAAU5Q,EAAK/I,MAAMC,OAAQ,GADtD,mBAMN/F,EAAAC,EAAAC,cAACwpB,GAAD,KACE1pB,EAAAC,EAAAC,cAACypB,GAAD,KACG9a,EAAK9L,SAAW,EAEb/C,EAAAC,EAAAC,cAAC0pB,GAAA,EAAD,CAAYvpB,MAAM,UAAUkN,QAAS2b,GACnClpB,EAAAC,EAAAC,cAAC2pB,GAAD,OAGF7pB,EAAAC,EAAAC,cAAC0pB,GAAA,EAAD,CAAYvpB,MAAM,UAAUkN,QAAS2b,GACnClpB,EAAAC,EAAAC,cAAC4pB,GAAD,OAIN9pB,EAAAC,EAAAC,cAAC6pB,GAAD,KAAelb,EAAK9L,UACpB/C,EAAAC,EAAAC,cAAC0pB,GAAA,EAAD,CAAYvpB,MAAM,UAAUkN,QAhCV,kBAAM0b,EAAmBpa,EAAMA,EAAK9L,SAAW,KAiC/D/C,EAAAC,EAAAC,cAAC8pB,GAAD,WAQNb,GAAW7oB,IAAOC,IAAV0pB,KAMH1B,GAAOG,SAOZU,GAAgB9oB,IAAOC,IAAV2pB,KAIO,SAAAzlB,GAAK,OAAIA,EAAMkG,QAGnC0e,GAAe/oB,IAAOC,IAAV4pB,MAIZb,GAAWhpB,IAAOC,IAAV6pB,MAKRT,GAAkBrpB,IAAOC,IAAV8pB,MAMfN,GAAezpB,IAAOC,IAAV+pB,MASZZ,GAAYppB,IAAOC,IAAVgqB,KAKJhC,GAAOG,SAKZa,GAAYjpB,IAAOC,IAAViqB,KAIJjC,GAAOG,SAKZc,GAAgBlpB,IAAOC,IAAVkqB,KACR,SAAAhmB,GAAK,OAAIA,EAAMqF,MAAM6E,cAI1B8a,GAAsBnpB,IAAOC,IAAVmqB,MAKnBZ,GAAaxpB,YAAOqqB,KAAPrqB,CAAHsqB,KACLrC,GAAOG,SAOZmB,GAAgBvpB,YAAOuqB,KAAPvqB,CAAHwqB,KACRvC,GAAOG,SAOZsB,GAAgB1pB,YAAOyqB,KAAPzqB,CAAH0qB,KACRzC,GAAOG,ixDC9HlB,IA6GMuC,GAAQ3qB,YAAO4qB,KAAP5qB,CAAH6qB,MAMLC,GAAc9qB,IAAOC,IAAV8qB,KAIE,SAAA5mB,GAAK,SAAAiE,OAAOjE,EAAMqF,MAAMkE,aAAnB,OACF,SAAAvJ,GAAK,OAAIA,EAAMqF,MAAM+D,SAChC,SAAApJ,GAAK,OAAIA,EAAMqF,MAAM8D,WAMrB2a,GAAOI,QASZ2C,GAAahrB,IAAOC,IAAVgrB,KAIM,SAAA9mB,GAAK,OAAIA,EAAMqF,MAAM+D,SAChC,SAAApJ,GAAK,OAAIA,EAAMqF,MAAM8D,WACH,SAAAnJ,GAAK,OAAI6J,IAAQ7J,EAAMqF,MAAM8D,WAAWW,MAAM,IAAKC,WAKnEgd,GAAWlrB,IAAOC,IAAVkrB,MASfC,GAAaprB,IAAOC,IAAVorB,KAKM,SAAAlnB,GAAK,OAAIA,EAAMqF,MAAM+D,SACjBS,IAAQ,SAAA7J,GAAK,OAAIA,EAAMqF,MAAM8D,YAAWW,MAAM,IAAKC,UAIvEod,GAActrB,IAAOC,IAAVsrB,KAGNtD,GAAOI,QAMZmD,GAAWxrB,IAAOC,IAAVwrB,KAKHxD,GAAOI,QAQZqD,GAAQ1rB,IAAOC,IAAV0rB,MAKEC,GAAOtJ,aAjME,SAAA9f,GAAiB,IAAdhB,EAAcgB,EAAdhB,QAAcoJ,EACa/G,IAAMgH,UAAS,GAD5BC,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GAC9B2X,EAD8BzX,EAAA,GACX0X,EADW1X,EAAA,GAAA6F,EASjC9M,IAAM+M,WAAWhN,GANnB2B,EAHmCoL,EAGnCpL,KACAY,EAJmCwK,EAInCxK,SACA/B,EALmCuM,EAKnCvM,SACAoD,EANmCmJ,EAMnCnJ,kBACAnC,EAPmCsL,EAOnCtL,YACAsD,EARmCgI,EAQnChI,yBAoCF,OACEjJ,EAAAC,EAAAC,cAACisB,GAAD,CACEhI,KAAMxe,EACN4gB,QAAS9f,EACT2lB,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CAAEzf,QAAS,MAE1B9M,EAAAC,EAAAC,cAACssB,GAAA,EAAD,CAAM3f,GAAIlH,EAAamH,QAAS,KAC9B9M,EAAAC,EAAAC,cAACkrB,GAAD,KACEprB,EAAAC,EAAAC,cAACorB,GAAD,KACEtrB,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAC0pB,GAAA,EAAD,CAAYvpB,MAAM,UAAUkN,QAAS9G,GACnCzG,EAAAC,EAAAC,cAACmjB,GAAApjB,EAAD,QAGJD,EAAAC,EAAAC,cAACsrB,GAAD,KACG3lB,EAAKJ,MAAMxD,OAAS,EACjB4D,EAAKJ,MAAMiM,IAAI,SAAA7C,GAAI,OACnB7O,EAAAC,EAAAC,cAACusB,GAAD,CACE5d,KAAMA,EACNoa,mBAAoBhgB,MAGtBjJ,EAAAC,EAAAC,cAAA,wBAGNF,EAAAC,EAAAC,cAACwrB,GAAD,KACG7lB,EAAKJ,MAAMxD,OAAS,GACnBjC,EAAAC,EAAAC,cAAC4rB,GAAD,iBAEE9rB,EAAAC,EAAAC,cAAC8rB,GAAD,KAEI7L,GAlEQ,SAAAta,GACxB,IAAM+d,EAAW/d,EAAK6mB,OAAO,SAACC,EAAK5c,GAAN,OAAY4c,EAAM5c,EAAEjK,MAAMC,OAASgK,EAAEhN,UAAU,GAC5E,OAAOoQ,KAAKC,MAAiB,IAAXwQ,GAAkB,IAiElBG,CAAkBle,EAAKJ,OACvBI,EAAKC,MAAMG,UAAYJ,EAAKJ,MAAM,GAAGK,MAAMG,UAC3Cua,oBAKVxgB,EAAAC,EAAAC,cAAC0rB,GAAD,KACE5rB,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACExE,QAAQ,YACRyE,SAAgC,IAAtBzH,EAAKJ,MAAMxD,OACrBid,MAAO,CAAE9E,YAAa,OACtB7M,QA1Ea,WACrBsV,GAAqBhd,EAAKJ,MAAMxD,QAAU,IAI9CH,EAAQkiB,KADK,aAEbvd,OAgEU,cAQAzG,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACExE,QAAQ,YACRyE,SAAgC,IAAtBzH,EAAKJ,MAAMxD,OACrBsL,QAxEU,WACtB9G,IACA5C,EAAkBgC,EAAK7C,OAAQ0B,GAC5BZ,KAAK,SAAAC,GACJ+e,GAAqB,GACrBniB,OAAOsjB,gBAAgBlgB,EAASL,KAAKpC,OACrCX,OAAOujB,kBAAkBC,OACzBxjB,OAAOujB,kBAAkBE,GACvBzjB,OAAOujB,kBAAkBG,WAAWC,MACpC,kBAAMxB,GAAqB,KAE7BniB,OAAOujB,kBAAkBE,GACvBzjB,OAAOujB,kBAAkBG,WAAWE,YACpCzc,KAGH9D,MAAM,kBAAM8e,GAAqB,OAqD1B,wBCzGD8J,GAASzoB,IAAMuG,KAAK,SAAA5H,GAK3B,IAJJmF,EAIInF,EAJJmF,QACA2C,EAGI9H,EAHJ8H,MACAK,EAEInI,EAFJmI,UACA7C,EACItF,EADJsF,UAKMtC,EAAQ3B,IAAMqN,QAAQ,kBAC1BxR,EAAAC,EAAAC,cAACgT,GAAD,CACEjN,SAAUgC,EAAQnC,MAAMG,SACxBiE,MAAOiJ,KAAKC,MAA6B,IAAvBnL,EAAQnC,MAAMC,QAAgB,OACjD,CAACkC,IAEJ,OACEjI,EAAAC,EAAAC,cAACuK,GAAD,CACEE,MAAO1C,EAAQ8G,UACflE,KAAM5C,EAAQ4C,KACdD,MAAOA,EACPV,MAAOpE,EACPmF,UAAWA,EACXH,YAAa7C,EAAQ6C,YACrBC,oBAAqB/K,EAAAC,EAAAC,cAACmT,GAAApT,EAAD,MACrB+K,SAjBkB,kBAAM5C,EAAUH,QCX3BgN,GAAqB,eAAAnS,EAAAwD,OAAA4I,EAAA,EAAA5I,CAAA6I,EAAAlP,EAAAmP,KAAG,SAAAC,EAAO2F,EAAW1T,GAAlB,IAAAgO,EAAAvL,EAAA,OAAAoL,EAAAlP,EAAAuP,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAC7BL,EAD6B,2CAAA5G,OACoBsM,EADpB,mCAAAvF,EAAAE,KAAA,EAEZ/M,IAAMgN,IAAIN,EAAK,CACpC/L,QAAS,CACPE,cAAa,UAAAiF,OAAYpH,MAJM,cAE7ByC,EAF6B0L,EAAAI,KAAAJ,EAAAK,OAAA,SAQ5B/L,EAASL,KAAK+B,OARc,wBAAAgK,EAAAQ,SAAAZ,EAAAlF,SAAH,gBAAA+F,EAAAC,GAAA,OAAArN,EAAAsN,MAAAjG,KAAAP,YAAA,iXCOlC,IAAMijB,GAAS,WAAM,IAAA5b,EAUf9M,IAAM+M,WAAWhN,GARnBQ,EAFiBuM,EAEjBvM,SACAH,EAHiB0M,EAGjB1M,UACA6D,EAJiB6I,EAIjB7I,UACAlC,EALiB+K,EAKjB/K,aACAnB,EANiBkM,EAMjBlM,kBACAC,EAPiBiM,EAOjBjM,6BACAY,EARiBqL,EAQjBrL,iBACAkB,EATiBmK,EASjBnK,qBAEMuB,EAAoB8I,wBAApB9I,gBAERlE,IAAM8H,UAAU,WACVvH,GAAyC,IAA7BK,EAAkB9C,SAChCiE,EAAa,gCAAgC,GAC7C+O,GAAsB1Q,EAAWG,GAC9BZ,KAAK,SAAAJ,GACJoD,EAAqBpD,GACrBwC,EAAa,gCAAgC,KAE9ClC,MAAM,SAAAC,GACLoE,EAAgBpE,EAAMqN,QAAS,CAAEzI,QAAS,UAC1C3C,EAAa,gCAAgC,OAGlD,CAACnB,IAEJ,IAAMwM,EAAUpN,IAAMqN,QAAQ,kBAAMzM,EAAkB9C,OAAS,GAC7DjC,EAAAC,EAAAC,cAAC4sB,GAAD,KACG/nB,EAAkB2M,IAAI,SAACzL,EAAU0L,GAAX,OACrB3R,EAAAC,EAAAC,cAAC0sB,GAAD,CACEhiB,MAAO+G,EACPC,IAAK3L,EAAS9C,IACd8E,QAAShC,EACTgF,UAAWrF,EACXwC,UAAWA,QAIhB,CAACrD,EAAmBa,IAEvB,OACE5F,EAAAC,EAAAC,cAAC6sB,GAAD,KACG/nB,EACGhF,EAAAC,EAAAC,cAAC6R,EAAD,MACAR,IAMJO,GAAOxR,IAAOC,IAAVysB,KACC,SAAAvoB,GAAK,OAAIA,EAAMqF,MAAM8D,YAO1B6D,GAAUnR,IAAOC,IAAV0sB,KAIc,SAAAxoB,GAAK,uCAAAiE,OAC1BjE,EAAMqF,MAAM4D,UADc,YAAAhF,OAE1BjE,EAAMqF,MAAM4D,UAFc,YCzE1Bwf,GAAS,CACbznB,MAAO,IACPwU,WAAY,YACZkT,SAAU,YACV5c,UAAW,aACX6c,YAAa,eACbC,OAAQ,UACRzH,SAAU,aAGN0H,GAAW,CACf,CACEC,MAAOL,GAAOznB,MACd6O,MAAO,SAET,CACEiZ,MAAOL,GAAOjT,WACd3F,MAAO,cAET,CACEiZ,MAAOL,GAAOC,SACd7Y,MAAO,eAET,CACEiZ,MAAOL,GAAO3c,UACd+D,MAAO,aAET,CACEiZ,MAAOL,GAAOE,YACd9Y,MAAO,eAET,CACEiZ,MAAOL,GAAOG,OACd/Y,MAAO,UAET,CACEiZ,MAAOL,GAAOtH,SACdtR,MAAO,oBAIEkZ,GAAe,SAAA/nB,GAAK,OAAI6nB,GAClCvkB,OAAO,SAAAgH,GAAC,OAAItK,EAAMgoB,SAAS1d,EAAEwd,SAC7B/lB,KAAK,SAACvH,EAAG8H,GAAJ,OAAUtC,EAAMpD,QAAQpC,EAAEstB,OAAS9nB,EAAMpD,QAAQ0F,EAAEwlB,m+CCtCtCG,eACnB,SAAAA,EAAYjpB,GAAO,IAAAD,EAAA,OAAA8B,OAAAoe,EAAA,EAAApe,CAAA6D,KAAAujB,IACjBlpB,EAAA8B,OAAAqe,EAAA,EAAAre,CAAA6D,KAAA7D,OAAAse,EAAA,EAAAte,CAAAonB,GAAA7I,KAAA1a,KAAM1F,KAQRkpB,iBAAmB,WACjBnpB,EAAK6B,SAAS,CAAE3B,SAAU,OAC1BF,EAAK6B,SAAS,CAAE+F,OAAO,KAXN5H,EAcnBopB,eAAiB,SAAAC,GACfrpB,EAAK6B,SAAS,CAAE3B,SAAUmpB,EAAKzhB,OAAO,IACtC5H,EAAKkhB,KhC0CF,SAAkBhlB,GACvB,IACIotB,EADYptB,EAAEI,MAAM,KAAK,GACN8gB,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KACtD,OAAOje,KAAKoqB,MAAMptB,OAAOqtB,KAAKF,IgC7ChBG,CAASJ,GACrBrpB,EAAK0B,aAAa,OAAQ1B,EAAKkhB,MAC/BlhB,EAAKkD,cAhBLlD,EAAKF,MAAQ,CACX8H,OAAO,EACP1H,SAAU,KACVwpB,QAAS,MALM1pB,wEAqBV,IAAAghB,EAAArb,KACP,OACEnK,EAAAC,EAAAC,cAACoK,EAAD,KACK,SAAAyY,GAIC,OAHAyC,EAAKtf,aAAe6c,EAAiB7c,aACrCsf,EAAK9d,WAAaqb,EAAiBrb,WAGjC1H,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiuB,GAAD,CACEjP,MAAO,CAAEzB,QAAS+H,EAAKlhB,MAAM8H,MAAQ,OAAS,SAE9CpM,EAAAC,EAAAC,cAACkuB,GAAD,KACEpuB,EAAAC,EAAAC,cAACmuB,GAAD,yBACmBruB,EAAAC,EAAAC,cAAA,SAAIS,OAAO6B,aAG9BxC,EAAAC,EAAAC,cAACouB,GAAD,KACEtuB,EAAAC,EAAAC,cAAA,OAAKyH,GAAG,aAGV3H,EAAAC,EAAAC,cAACmuB,GAAD,KACGE,GAAW7c,IAAI,SAAC8c,EAAOtsB,GACtB,IAAIusB,EAAKD,EAAK,WACVE,EAAQF,EAAK,SAEbG,EAAO,GAAAjmB,OADJ,yCACI,gBAAAA,OAAwB+lB,EAAxB,cAAA/lB,OAAuCgmB,GAClD,OACE1uB,EAAAC,EAAAC,cAAA,OAAK0R,IAAK6c,EAAKvsB,EAAGgd,MAAO,CAAEhC,aAAc,QACvCld,EAAAC,EAAAC,cAAA,OAAKgf,MAAO,CAAEjC,SAAU,UACtBjd,EAAAC,EAAAC,cAAA,KAAG0uB,KAAMD,GACNF,EADH,KACSD,EAAMK,iBAMvB7uB,EAAAC,EAAAC,cAAA,uDAC6CF,EAAAC,EAAAC,cAAA,WAC3CF,EAAAC,EAAAC,cAAA,uBAFF,QAEwBF,EAAAC,EAAAC,cAAA,qBAFxB,wEAOJF,EAAAC,EAAAC,cAAC4uB,GAAD,sDAUdnuB,OAAOouB,aACP,IAAIC,EAAMzsB,IACVysB,EAAM7kB,KAAKyjB,eAAeoB,GAAO7kB,KAAKwjB,0BA9EN1G,aAkF9BkH,GAAU7tB,IAAOC,IAAV0uB,MAePb,GAAW9tB,IAAOC,IAAV2uB,MAYRJ,GAAWxuB,IAAOC,IAAV4uB,MAURd,GAAe/tB,IAAOC,IAAV6uB,MAgBZd,GAAchuB,IAAOC,IAAV8uB,MAWXd,GAAa,CACjB,CACEM,YAAa,oBACbjH,WAAY,MACZ0H,SAAU,spECtId,IA0HMC,GAAOjvB,YAAOkvB,KAAPlvB,CAAHmvB,KAEc,SAAAhrB,GAAK,OAAIA,EAAMqF,MAAM+D,UAIvC0G,GAAOjU,YAAOkU,KAAPlU,CAAHovB,MAMJhb,GAAMpU,YAAOqU,KAAPrU,CAAHqvB,KAGU,SAAAlrB,GAAK,OAAIA,EAAMqF,MAAMgL,aAQlC8a,GAAOtvB,YAAOuvB,KAAPvvB,CAAHwvB,KAOO,SAAArrB,GAAK,OAAIA,EAAMqF,MAAMgL,aAkBhCib,GAAazvB,YAAO0vB,KAAP1vB,CAAH2vB,KAEH,SAAAxrB,GAAK,OAAIA,EAAMqF,MAAM+K,kBAI5Bqb,GAAa5vB,IAAOC,IAAV4vB,MAIVC,GAAa9vB,IAAOC,IAAV8vB,KAKL9H,GAAOG,SAKZ4H,GAAchwB,IAAOC,IAAVgwB,MAeXC,GAAWlwB,IAAOC,IAAVkwB,MAQRC,GAASpwB,IAAOqwB,OAAVC,KAMD,SAAAnsB,GAAK,OAAIA,EAAMqF,MAAM+K,iBACV,SAAApQ,GAAK,OAAIA,EAAMqF,MAAM+D,UAG5B+U,gBA/NA,SAAA9f,GAAkB,IAAflC,EAAekC,EAAflC,SAAeqQ,EAS3B9M,IAAM+M,WAAWhN,GAPnBQ,EAF6BuM,EAE7BvM,SACAghB,EAH6BzU,EAG7ByU,KACA/gB,EAJ6BsM,EAI7BtM,2BACAJ,EAL6B0M,EAK7B1M,UACAiC,EAN6ByK,EAM7BzK,SACAE,EAP6BuK,EAO7BvK,sBACA9B,EAR6BqM,EAQ7BrM,gBAR6BsG,EAWK/G,IAAMgH,SAAS,MAXpBC,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GAWxB2lB,EAXwBzlB,EAAA,GAWZ0lB,EAXY1lB,EAAA,GAYzB2lB,EAAkB,kBAAMD,EAAc,OAWtCE,EAAWtsB,GAAYghB,EACvBuL,EAAmBzD,GAAY,CACnCN,GAAOznB,MACPynB,GAAOjT,YAF4BvR,OAAApC,OAAAqC,EAAA,EAAArC,CAGlB,QAAd/B,EAAsB,CAAC2oB,GAAOC,UAAY,MAGzC+D,EAAgB1D,GAAa,CACjCN,GAAO3c,UACP2c,GAAOE,YACPF,GAAOG,OACPH,GAAOtH,WAGT,OACE5lB,EAAAC,EAAAC,cAACwwB,GAAD,KACE1wB,EAAAC,EAAAC,cAACixB,EAAA,EAAD,CAAQC,QAAM,GACZpxB,EAAAC,EAAAC,cAACmxB,GAAD,CAAMnnB,MAAOtJ,EAASoB,SAAUsvB,UAAU,OACvCL,EAAiBvf,IAAI,SAAA3B,GAAC,OACrB/P,EAAAC,EAAAC,cAACqxB,GAAD,CACE3f,IAAK7B,EAAEwd,MACP+D,UAAWzB,KACXvb,MAAOvE,EAAEuE,MACTpK,MAAO6F,EAAEwd,MACTiE,GAAIzhB,EAAEwd,YAMdvtB,EAAAC,EAAAC,cAACixB,EAAA,EAAD,CAAQM,MAAI,GACVzxB,EAAAC,EAAAC,cAAC6vB,GAAD,CAAYxiB,QAvCK,kBAAM7G,GAAuB9B,KAwC5C5E,EAAAC,EAAAC,cAACwxB,GAAAzxB,EAAD,QAIH+wB,GACChxB,EAAAC,EAAAC,cAACkwB,GAAD,KACGzrB,EAA2B+M,IAAI,SAAAigB,GAAE,OAChC3xB,EAAAC,EAAAC,cAACgwB,GAAD,CAAYte,IAAK+f,EAAGxuB,KAClBnD,EAAAC,EAAAC,cAACgT,GAAD,CAAUvI,MAAOgnB,EAAG5iB,UAAW7E,MAAOynB,EAAG5rB,YAI7C/F,EAAAC,EAAAC,cAACixB,EAAA,EAAD,CAAQC,QAAM,GACZpxB,EAAAC,EAAAC,cAACswB,GAAD,CAAUjjB,QAvDG,SAAAiK,GAAK,OAAIsZ,EAActZ,EAAMoa,iBAuDNlM,EAAKmM,SAK/C7xB,EAAAC,EAAAC,cAAC4xB,GAAD,OAEEptB,GAAY1E,EAAAC,EAAAC,cAACowB,GAAD,eACbU,GAA0B,QAAdzsB,GACZvE,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACGxE,QAAQ,WACRxI,MAAM,YACNmN,KAAK,QACLD,QAhEc,WACpB9K,EAAY,sBACZA,EAAY,wBACZ9B,OAAOC,SAASmxB,WA+DV/xB,EAAAC,EAAAC,cAAC8xB,GAAA/xB,EAAD,CAAYuN,KAAK,aAIrBxN,EAAAC,EAAAC,cAACmN,EAAA,EAAD,CACExE,QAAQ,YACRxI,MAAM,YACNmN,KAAK,QACLD,QAAS/G,GAETxG,EAAAC,EAAAC,cAACmT,GAAApT,EAAD,CAAUuN,KAAK,YACfxN,EAAAC,EAAAC,cAACixB,EAAA,EAAD,CAAQc,QAAM,GAAd,SAKFjyB,EAAAC,EAAAC,cAACgyB,GAAD,CACEC,SAAUtB,EACVuB,mBAAoB,KACpBC,gBAAiB,CAAEC,SAAU,MAAOC,WAAY,UAChDC,aAAc,CAAEF,SAAU,SAAUC,WAAY,UAChDpO,KAAMsO,QAAQ5B,GACdtK,QAASwK,GAERG,EAAcxf,IAAI,SAAA3B,GAAC,OAClB/P,EAAAC,EAAAC,cAAC0vB,GAAD,CACEhe,IAAK7B,EAAEwd,MACPhgB,QAASwjB,EACT2B,gBAAgB,SAChBlB,GAAIzhB,EAAEwd,OAELxd,EAAEuE,21CCxHf,IAsFM7C,GAAUnR,IAAOC,IAAVoyB,KAKS,SAAAluB,GAAK,OAAIA,EAAMqF,MAAM+D,UAGrC+kB,GAAUtyB,YAAOuyB,KAAPvyB,CAAHwyB,KAEW,SAAAruB,GAAK,OAAIA,EAAMqF,MAAM+K,kBAMvCke,GAAczyB,YAAOsyB,GAAPtyB,CAAH0yB,MAMXpJ,GAAatpB,YAAO0vB,KAAP1vB,CAAH2yB,KAEH,SAAAxuB,GAAK,OAAIA,EAAMqF,MAAM+K,kBAI5BN,GAAOjU,YAAOkU,KAAPlU,CAAH4yB,KACC,SAAAzuB,GAAK,OAAIA,EAAMqF,MAAM6E,cAG1B+F,GAAMpU,YAAOqU,KAAPrU,CAAH6yB,KAEI,SAAA1uB,GAAK,OAAIA,EAAMqF,MAAM+K,iBAEf,SAAApQ,GAAK,OAAIA,EAAMqF,MAAMgL,aAWlC4b,GAASpwB,IAAOC,IAAV6yB,MAON5C,GAAWlwB,IAAOC,IAAV8yB,KAKH,SAAA5uB,GAAK,OAAIA,EAAMqF,MAAM6E,cAGnB2kB,GAAe1Q,aApJE,SAAA9f,GAAkB,IAAflC,EAAekC,EAAflC,SAAeqQ,EAO1C9M,IAAM+M,WAAWhN,GALnBU,EAF4CqM,EAE5CrM,gBACA8gB,EAH4CzU,EAG5CyU,KACAhhB,EAJ4CuM,EAI5CvM,SACAH,EAL4C0M,EAK5C1M,UACAmC,EAN4CuK,EAM5CvK,sBAGI6sB,EAAY,kBAAM7sB,GAAsB,IAS9CvC,IAAM8H,UAAU,kBAAMsnB,GAAW,IAEjC,IAAMvC,EAAWtsB,GAAYghB,EAEvBuL,EAAmB9sB,IAAMqN,QAAQ,kBAAMgc,GAAY,CACvDN,GAAOznB,MACPynB,GAAOjT,YAFgDvR,OAAApC,OAAAqC,EAAA,EAAArC,CAGtC,QAAd/B,EAAsB,CAAC2oB,GAAOC,UAAY,OAC3C,CAAC5oB,IAEC2sB,EAAgB/sB,IAAMqN,QAAQ,kBAAMgc,GAAa,CACrDN,GAAO3c,UACP2c,GAAOE,YACPF,GAAOG,OACPH,GAAOtH,YACL,IAEJ,OACE5lB,EAAAC,EAAAC,cAACszB,GAAA,EAAD,CACErP,KAAMvf,EACN6uB,OAAO,OACPC,OA7Ba,kBAAMhtB,GAAsB,IA8BzC6f,QAASgN,GAETvzB,EAAAC,EAAAC,cAACyzB,GAAD,KACE3zB,EAAAC,EAAAC,cAAC0zB,GAAD,KACC5C,GAA0B,QAAdzsB,GACXvE,EAAAC,EAAAC,cAAC2zB,GAAD,CAAYtmB,QAjCE,WACpB9K,EAAY,sBACZA,EAAY,wBACZ9B,OAAOC,SAASmxB,WA+BR/xB,EAAAC,EAAAC,cAAC8xB,GAAA/xB,EAAD,CAAYuN,KAAK,aAGnBxN,EAAAC,EAAAC,cAAC4zB,GAAD,KAAWpO,EAAKmM,OAChB7xB,EAAAC,EAAAC,cAAC2zB,GAAD,CAAYtmB,QAASgmB,GACnBvzB,EAAAC,EAAAC,cAAC6zB,GAAA9zB,EAAD,QAGJD,EAAAC,EAAAC,cAAC8zB,GAAD,MACEh0B,EAAAC,EAAAC,cAAC+zB,GAAD,CACE/pB,MAAOtJ,EAASoB,SAChBgS,SAAUuf,EACVjC,UAAU,MACVzoB,QAAQ,aACRqrB,YAAY,YAGbjD,EAAiBvf,IAAI,SAAA3B,GAAC,OACrB/P,EAAAC,EAAAC,cAACi0B,GAAD,CACE7C,UAAWzB,KACXvb,MAAOvE,EAAEuE,MACTpK,MAAO6F,EAAEwd,MACTiE,GAAIzhB,EAAEwd,UAGVvtB,EAAAC,EAAAC,cAAC6yB,GAAD,MACC7B,EAAcxf,IAAI,SAAA3B,GAAC,OAClB/P,EAAAC,EAAAC,cAACi0B,GAAD,CACE7C,UAAWzB,KACXvb,MAAOvE,EAAEuE,MACTpK,MAAO6F,EAAEwd,MACTiE,GAAIzhB,EAAEwd,qaC1EpB,IA2BM6G,GAAa9zB,IAAOC,IAAV8zB,KACU,SAAA5vB,GAAK,OAAIA,EAAMqF,MAAMwqB,gBAUzCC,GAAoBj0B,IAAOC,IAAVi0B,KAED,SAAA/vB,GAAK,OAAIA,EAAMqF,MAAM+D,UAQ5B4mB,GAhDH,WACV,IAAM1R,EAAmB5e,IAAM+M,WAAWhN,GAE1C,OACElE,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuZ,SAAA,KACExZ,EAAAC,EAAAC,cAACw0B,GAAD,MACA10B,EAAAC,EAAAC,cAACixB,EAAA,EAAD,CAAQM,MAAI,GACVzxB,EAAAC,EAAAC,cAACozB,GAAD,OAEFtzB,EAAAC,EAAAC,cAACy0B,GAAD,MACA30B,EAAAC,EAAAC,cAAC00B,EAAA,EAAD,KACE50B,EAAAC,EAAAC,cAAC20B,EAAA,EAAD,CAAOC,KAAM5H,GAAOznB,MAAOsvB,OAAK,EAACzD,UAAW/X,KAC5CvZ,EAAAC,EAAAC,cAAC20B,EAAA,EAAD,CAAOC,KAAM5H,GAAOjT,WAAYqX,UAAWzE,KAC3C7sB,EAAAC,EAAAC,cAAC20B,EAAA,EAAD,CAAOC,KAAM5H,GAAOC,SAAUmE,UAAWhe,KACzCtT,EAAAC,EAAAC,cAAC20B,EAAA,EAAD,CAAOC,KAAM5H,GAAO3c,UAAW+gB,UAAWtgB,KAC1ChR,EAAAC,EAAAC,cAAC20B,EAAA,EAAD,CAAOC,KAAM5H,GAAOG,OAAQiE,UAAWnc,KACvCnV,EAAAC,EAAAC,cAAC20B,EAAA,EAAD,CAAOC,KAAM5H,GAAOE,YAAa4H,OAAQ,kBAAMh1B,EAAAC,EAAAC,cAAC+0B,GAAoBlS,MACpE/iB,EAAAC,EAAAC,cAAC20B,EAAA,EAAD,CAAOC,KAAM5H,GAAOtH,SAAUoP,OAAQ,kBAAMh1B,EAAAC,EAAAC,cAACg1B,GAAmBnS,OAGlE/iB,EAAAC,EAAAC,cAACk0B,GAAD,KACEp0B,EAAAC,EAAAC,cAACq0B,GAAD,6BCvCFzqB,GAAQ,CACZ8D,UAAW,UACXe,YAAa,UACbkG,gBAAiB,UACjBhH,QAAS,UACTG,aAAc,EACdsmB,cAAe,8GACf5mB,UAAW,QACXI,UAAW,iCACXqV,QAAS,MACTgS,eAAgB,OAChBC,iBAAkB,cAClBvX,WAAU,uBACV9P,gBAAiB,mBACjB+G,WAAY,2HCJRugB,GAAuB,CAC3B/C,SAAU,SACVC,WAAY,SAwBCtoB,GArBE,SAAAnH,GAAkB,IAAfsH,EAAetH,EAAfsH,SACZkrB,EAAWC,aAAa,UAAA7sB,OAAW6f,GAAOG,UAEhD,OACE1oB,EAAAC,EAAAC,cAACs1B,EAAA,iBAAD,CACEhD,aAAc6C,GACdI,MAAOH,EACPI,SAAU,EACVC,iBAAkBL,GAElBt1B,EAAAC,EAAAC,cAAC01B,EAAA,EAAD,CAAe9rB,MAAOA,IACpB9J,EAAAC,EAAAC,cAAC21B,EAAD,CAAiBtxB,UAAW5D,OAAO6B,YACjCxC,EAAAC,EAAAC,cAAC41B,GAAA,EAAD,CAAYC,SAAS,KAClB3rB,OChBOqoB,QACW,cAA7B9xB,OAAOC,SAASo1B,UAEe,UAA7Br1B,OAAOC,SAASo1B,UAEhBr1B,OAAOC,SAASo1B,SAASC,MACvB,2DCVNC,IAASlB,OACPh1B,EAAAC,EAAAC,cAACi2B,GAAD,KACEn2B,EAAAC,EAAAC,cAACk2B,GAAD,OAEFz0B,SAAS00B,eAAe,SDqHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM1yB,KAAK,SAAA2yB,GACjCA,EAAaC","file":"static/js/main.a701c058.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst Preloader = () => (\n  <CssPreloader>\n    <CircularProgress color=\"secondary\" />\n  </CssPreloader>\n);\n\nexport { Preloader };\n\nconst CssPreloader = styled.div`\n  z-index: 9;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n`;\n","import React from \"react\";\n\nconst eatCookie = () => {\n  const getCookie = o => {\n    for (\n      var e = o + \"=\",\n        n = decodeURIComponent(document.cookie).split(\";\"),\n        t = 0;\n      t < n.length;\n      t++\n    ) {\n      for (var i = n[t]; \" \" === i.charAt(0); ) i = i.substring(1);\n      if (0 === i.indexOf(e)) return i.substring(e.length, i.length);\n    }\n    return \"\";\n  };\n  const setCookie = (o, e) => {\n    var n = new Date();\n    n.setTime(n.getTime() + 864e5);\n    var t = \"expires=\" + n.toUTCString();\n    document.cookie = o + \"=\" + e + \";\" + t + \";path=/\";\n  };\n\n  function getQueryParams(o) {\n    o = o.split(\"+\").join(\" \");\n    for (var e, n = {}, t = /[?&]?([^=]+)=([^&]*)/g; (e = t.exec(o)); )\n      n[decodeURIComponent(e[1])] = decodeURIComponent(e[2]);\n    return n;\n  }\n\n  let o;\n  //console.log(\"let = \");\n  if (window.location.search) {\n    o = getQueryParams(window.location.search).token;\n  }\n  if (o) {\n    setCookie(\"xsolla_login_token\", o);\n    window.history.pushState(\"\", \"\", document.location.pathname);\n  } else {\n    o = getCookie(\"xsolla_login_token\");\n  }\n  if (o && o !== \"undefined\") {\n    //console.log(\"o = \", o);\n    return o;\n  } else {\n    return null;\n  }\n};\n\nexport default function Cookie() {\n  return 44056 === window.xProjectId\n    ? 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE5NjIyMzQwNDgsImlzcyI6Imh0dHBzOi8vbG9naW4ueHNvbGxhLmNvbSIsI'\n    + 'mlhdCI6MTU2MjE0NzY0OCwidXNlcm5hbWUiOiJ4c29sbGEiLCJ4c29sbGFfbG9naW5fYWNjZXNzX2tleSI6IjA2SWF2ZHpDeEVHbm5aMTlp'\n    + 'LUc5TmMxVWFfTWFZOXhTR3ZEVEY4OFE3RnMiLCJzdWIiOiJkMzQyZGFkMi05ZDU5LTExZTktYTM4NC00MjAxMGFhODAwM2YiLCJlbWFpbCI'\n    + '6InN1cHBvcnRAeHNvbGxhLmNvbSIsInR5cGUiOiJ4c29sbGFfbG9naW4iLCJ4c29sbGFfbG9naW5fcHJvamVjdF9pZCI6ImU2ZGZhYWM2LTc'\n    + '4YTgtMTFlOS05MjQ0LTQyMDEwYWE4MDAwNCIsInB1Ymxpc2hlcl9pZCI6MTU5MjR9.GCrW42OguZbLZTaoixCZgAeNLGH2xCeJHxl8u8Xn2aI'\n    : eatCookie();\n}\n\nexport function eraseCookie(o) {\n  return (document.cookie =\n    o + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;\");\n}\n\nexport function parseJwt(o) {\n  let base64Url = o.split(\".\")[1];\n  let base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\n  return JSON.parse(window.atob(base64));\n}\n","import axios from \"axios\";\n\nconst CancelToken = axios.CancelToken;\nlet cancel;\n\nexport default async function StoreLoader(projectId, loginToken) {\n  let result;\n  let all = [];\n  let responseGroups = await fetch(\n    \"https://store.xsolla.com/api/v1/project/\" + projectId + \"/items/groups\",\n    {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + loginToken\n      }\n    }\n  );\n\n  const virtualCurrency = await fetch(\n      \"https://store.xsolla.com/api/v2/project/\" + projectId + \"/items/virtual_currency/package\", {\n        method: \"GET\"\n      }\n  );\n\n  const virtualCurrencyPackages = await virtualCurrency.json();\n\n  if (responseGroups) {\n    // only proceed once promise is resolved\n    let resolvedGroups = await responseGroups.json();\n    resolvedGroups = resolvedGroups[\"groups\"];\n    // only proceed once second promise is resolved\n\n    let fulfilledGroups = await Promise.all(\n      resolvedGroups.map((oneGroup, key) => {\n        //console.log(\"group\", oneGroup);\n        return loadByGroup(projectId, oneGroup);\n      })\n    ).then(fulfilledGroups => {\n      //console.log(\"fulfilledGroups = \", fulfilledGroups);\n      return fulfilledGroups;\n    });\n    all = all.concat(fulfilledGroups);\n  }\n\n  result = {\n    virtualItems: all,\n    virtualCurrencyPackages: virtualCurrencyPackages.items\n  };\n  return result;\n}\n\nfunction loadByGroup(projectId, group) {\n  return new Promise((resolve, reject) => {\n    fetch(\n      \"https://store.xsolla.com/api/v2/project/\" +\n        projectId +\n        \"/items/virtual_items/group/\" +\n        group[\"external_id\"]\n    )\n      .then(response => response.json())\n      .then(json => {\n        let products = json[\"items\"];\n        group[\"products\"] = products;\n        resolve(group);\n      })\n      .catch(function(error) {\n        //console.log(\"Products ERROR = \", error.message);\n        reject(error.message);\n      });\n  });\n}\n\nexport function changeItemQuantityCart(\n  { sku = \"sku\" },\n  quantity,\n  cartId,\n  loginToken\n) {\n  cancel && cancel();\n  //console.log(\"sku added = \", sku, \" to cartId = \", cartId);\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId +\n      \"/item/\" +\n      sku,\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: JSON.stringify({\n      quantity: quantity\n    })\n  };\n  return axios(opts);\n}\n\nexport function createCart(loginToken) {\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v1/project/\" + window.xProjectId + \"/cart\",\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log('createCart ', response.data[\"id\"]);\n      return response;\n    })\n    .catch(function(error) {\n      //console.log(\"L2PS ERROR = \", error.response);\n    });\n}\n\nexport function removeItemFromCart({ sku = \"sku\" }, cartId, loginToken) {\n  cancel && cancel();\n  //console.log(\"sku removed = \", sku, \" from cartId = \", cartId);\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId +\n      \"/item/\" +\n      sku,\n    method: \"DELETE\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log(\"Item removed = \", response.data);\n      let resp = response.data;\n    })\n    .catch(function(error) {\n      //console.log(\"L2PS ERROR = \", error.response);\n    });\n}\n\nexport function getPsTokenBuyCart(cartId, loginToken) {\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/payment/cart/\" +\n      cartId,\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log(\"PsToken generated = \", response.data);\n      return response;\n    })\n    .catch(function(error) {\n      //console.log(\"L2PS ERROR = \", error.response);\n    });\n}\n\nexport function getCart(cartId, loginToken) {\n  cancel && cancel();\n  const opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId,\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(c => {\n      cancel = c;\n    })\n  };\n  return axios(opts)\n    .then(response => response)\n    .catch(error => console.error(error));\n}\n\nexport function quickPurchaseBuyVirtualCurrency(product, vcPriceSku, loginToken) {\n  let opts = {\n    url:\n        \"https://store.xsolla.com/api/v2/project/\" +\n        window.xProjectId +\n        \"/payment/item/\" +\n        product.sku +\n        \"/virtual/\" + vcPriceSku,\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n\nexport function getVirtualCurrencyBalance(loginToken) {\n  let opts = {\n    url:\n        \"https://store.xsolla.com/api/v2/project/\" + window.xProjectId + \"/user/virtual_currency_balance\",\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n","import React from 'react';\nimport { withSnackbar } from 'notistack';\n\nimport Cookie from './components/Cookie';\nimport {\n  changeItemQuantityCart,\n  createCart,\n  removeItemFromCart,\n  getCart, getVirtualCurrencyBalance\n} from './components/StoreLoader';\n\nconst ProductContext = React.createContext();\n\nclass ProductProvider extends React.PureComponent {\n  state = {\n    projectId: this.props.projectId,\n    logToken: Cookie(),\n    userBalanceVirtualCurrency: [],\n    isSideMenuShown: false,\n\n    virtualItems: [],\n    areVirtualItemsFetching: false,\n\n    virtualCurrencies: [],\n    areVirtualCurrenciesFetching: false,\n\n    physicalItems: [],\n    arePhysicalItemsFetching: false,\n\n    inventoryItems: [],\n    areInventoryItemsFetching: false,\n    isItemConsuming: false,\n\n    entitlementItems: [],\n\n    cartWithItemsBuyingByVCShown: false,\n    cartWithItemsBuyingByVC: {\n      items: [],\n      vcPriceSku: null\n    },\n\n    isCartShown: false,\n    isCartProcessing: false,\n    cart: {\n      cartId: null,\n      items: [],\n      price: {\n        amount: 0,\n        amount_without_discount: 0,\n        currency: '',\n      }\n    },\n  };\n\n  setStateFrom = (stateName, stateValue) => this.setState({ [stateName]: stateValue });\n\n  showCart = () => this.setState({ isCartShown: true });\n  hideCart = () => this.setState({ isCartShown: false });\n\n  setSideMenuVisibility = isSideMenuShown => this.setState({ isSideMenuShown });\n  setEntitlementItems = entitlementItems => this.setState({ entitlementItems });\n  setInventoryItems = inventoryItems => this.setState({ inventoryItems });\n  setPhysicalItems = physicalItems => this.setState({ physicalItems });\n  setVirtualCurrencies = virtualCurrencies => this.setState({ virtualCurrencies });\n  setVirtualItems = virtualItems => this.setState({ virtualItems });\n\n  getCart = () => {\n    const { cart, logToken } = this.state;\n    const cartPromise = getCart(cart.cartId, logToken);\n    cartPromise.then(response => {\n      if (!cartPromise.isCancel && response) {\n        this.setState({\n          cart: {\n            cartId: response.data.cart_id,\n            items: response.data.items.sort(this.compareItems),\n            price: response.data.price\n          },\n          isCartProcessing: false\n        });\n      }\n    });\n  };\n\n  createCart = () => {\n    const cartIdPromise = createCart(this.state.logToken);\n    cartIdPromise.then(response => {\n      this.setState({\n        cart: {\n          cartId: response.data.id,\n          items: [],\n          price: {\n            amount: 0,\n            amount_without_discount: 0,\n            currency: '',\n          }\n        }\n      });\n    });\n  };\n\n  clearCart = () => {\n    this.showCart();\n    this.createCart();\n    this.updateVirtualCurrencyBalance();\n  };\n\n  payStationHandler = () => this.clearCart();\n\n  compareItems = (a, b) => {\n    if (a.sku > b.sku) {\n      return 1;\n    }\n    if (a.sku < b.sku) {\n      return -1;\n    }\n    return 0;\n  };\n\n  buyByVC = (product, vcSku) => {\n    this.setState({\n      cartWithItemsBuyingByVCShown: true,\n      cartWithItemsBuyingByVC: {\n        items: [product],\n        vcPriceSku: vcSku\n      }\n    });\n  };\n\n  clearVCCart = () => {\n    this.setState({\n      cartWithItemsBuyingByVCShown: false,\n      cartWithItemsBuyingByVC: {\n        items: [],\n        vcPriceSku: null\n      }\n    });\n\n    this.updateVirtualCurrencyBalance();\n  };\n\n  addToCart = product => {\n    const { enqueueSnackbar } = this.props;\n    const { cart, logToken } = this.state;\n    const isItemExist = cart.items.some(elem => elem.sku === product.sku);\n    if (isItemExist) {\n      this.getCart();\n      this.setState({ isCartShown: true });\n    } else {\n      this.setState({ isCartProcessing: true });\n      changeItemQuantityCart(product, 1, cart.cartId, logToken)\n        .then(() => {\n          this.setState({\n            cart: {\n              ...cart,\n              items: [{ ...product, quantity: 1 }, ...cart.items].sort(this.compareItems),\n              price: {\n                ...cart.price,\n                amount: cart.price.amount + product.price.amount,\n                amount_without_discount: cart.price.amount_without_discount + product.price.amount_without_discount,\n              },\n            },\n            isCartProcessing: false\n          });\n          this.showCart();\n        })\n        .catch(error => {\n          this.setState({ isCartProcessing: false });\n          enqueueSnackbar(error.response.data.errorMessage, { variant: 'error' });\n        });\n    }\n  };\n\n  removeFromCart = product => {\n    const { cart } = this.state;\n    \n    this.setState({\n      cart: {\n        ...cart,\n        items: cart.items\n          .filter(prod => prod.sku !== product.sku)\n          .sort(this.compareItems),\n        price: {\n          ...cart.price,\n          amount: cart.price.amount - product.price.amount * product.quantity,\n          amount_without_discount: cart.price.amount_without_discount - product.price.amount_without_discount * product.quantity\n        }\n      }\n    });\n  };\n\n  changeItemQuantityInCart = (product, quantity) => {\n    const { enqueueSnackbar } = this.props;\n    const { cart, logToken } = this.state;\n\n    if (quantity <= 0) {\n      this.removeFromCart(product);\n      removeItemFromCart(product, cart.cartId, logToken)\n        .then(this.getCart);\n    } else {\n      const indexFind = cart.items.findIndex(elem => elem.sku === product.sku);\n      const cartItems = cart.items;\n      cartItems.splice(indexFind, 1, { ...product, quantity });\n      this.setState({ cart: { ...cart, items: cartItems.sort(this.compareItems) } });\n      changeItemQuantityCart(product, quantity, cart.cartId, logToken)\n        .then(this.getCart)\n        .catch(error => enqueueSnackbar(error.response.data.errorMessage, { variant: 'error' }));\n    }\n  };\n\n  getTheme = (what = 'all') => what === 'all' \n    ? this.state.theme\n    : `${this.state.theme[what]}${what === 'borderRadius' ? 'px' : ''}`;\n\n  updateVirtualCurrencyBalance = () => {\n    getVirtualCurrencyBalance(this.state.logToken).then((reps) => {\n      this.setState({\n        userBalanceVirtualCurrency: reps.data.items\n      });\n    });\n  };\n\n  render() {\n    return (\n      <ProductContext.Provider\n        value={{\n          ...this.state,\n          setStateFrom: this.setStateFrom,\n          payStationHandler: this.payStationHandler,\n          setInventoryItems: this.setInventoryItems,\n          setVirtualCurrencies: this.setVirtualCurrencies,\n          setPhysicalItems: this.setPhysicalItems,\n          setVirtualItems: this.setVirtualItems,\n          setEntitlementItems: this.setEntitlementItems,\n          addToCart: this.addToCart,\n          buyByVC: this.buyByVC,\n          clearVCCart: this.clearVCCart,\n          getTheme: this.getTheme,\n          createCart: this.createCart,\n          showCart: this.showCart,\n          changeItemQuantityInCart: this.changeItemQuantityInCart,\n          updateVirtualCurrencyBalance: this.updateVirtualCurrencyBalance,\n          hideCart: this.hideCart,\n          setSideMenuVisibility: this.setSideMenuVisibility,\n        }}\n      >\n        {this.props.children}\n      </ProductContext.Provider>\n    );\n  }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductContext, ProductConsumer };\n\nexport default withSnackbar(ProductProvider);\n","import React from 'react';\nimport styled from 'styled-components';\nimport Colorer from 'color';\nimport Dotdotdot from 'react-dotdotdot'\n\nimport Collapse from '@material-ui/core/Collapse';\nimport MUICardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst ProductCard = React.memo(({\n  image,\n  order,\n  name,\n  value,\n  description,\n  actionButtonContent,\n  onAction,\n  isLoading,\n}) => {\n  const [isShown, setShown] = React.useState(false);\n  const showCard = () => setShown(true);\n\n  const [isActionedCard, setActionedCard] = React.useState(false);\n  const handleAction = () => {\n    setActionedCard(true);\n    onAction();\n  }\n\n  const [isHovered, setHovered] = React.useState(false);\n  const handleMouseEnter = () => setHovered(true);\n  const handleMouseLeave = () => setHovered(false);\n\n  React.useEffect(() => {\n    if (!isLoading) {\n      setActionedCard(false);\n    }\n  }, [isLoading]);\n\n  React.useEffect(() => {\n    setTimeout(showCard, order * 100);\n  }, []);\n\n  return (\n    <CardAppear shown={isShown} hovered={isHovered}>\n      <Card\n        hovered={isHovered}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <CardImage image={image}/>\n        <CardContent>\n          <CardTitle>{name}</CardTitle>\n          <Collapse in={isHovered} timeout=\"auto\" collapsedHeight=\"50px\">\n            {isHovered\n              ? description\n              : (\n              <Dotdotdot animate clamp={2}>\n                {description}\n              </Dotdotdot>\n            )}\n          </Collapse>\n        </CardContent>\n        <CardFooter>\n          <CardQuantity>\n            {value}\n          </CardQuantity>\n          {onAction && <Button\n            variant=\"contained\"\n            disabled={isLoading && isActionedCard}\n            onClick={handleAction}\n          >\n            {isLoading && isActionedCard ? <CircularProgress size={24} color=\"secondary\"/> : actionButtonContent}\n          </Button>}\n        </CardFooter>\n      </Card>\n    </CardAppear>\n  );\n});\n\nconst CardAppear = styled.div`\n  position: relative;\n  z-index: ${props => props.hovered ? 1 : 0};\n  width: ${props => props.theme.cardWidth};\n  height: ${props => props.theme.cardWidth};\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  opacity: ${props => props.shown ? 1 : 0};\n  transform: ${props => props.shown ? 'none' : 'translateY(20px)'};;\n`;\n\nconst Card = styled.div`\n  position: absolute;\n  color: ${props => props.theme.colorText};\n  display: flex;\n  flex-direction: column;\n  width: ${props => props.theme.cardWidth};\n  min-height: ${props => props.theme.cardWidth};\n  background-color: ${props => props.hovered ? props.theme.colorBg : 'transparent'};\n  box-shadow: ${props => props.hovered ? props.theme.boxShadow : 'none'};\n  transition: box-shadow, background-color ${props => props.theme.transitionStyle};\n  border-radius: ${props => `${props.theme.borderRadius}px`};\n`;\n\nconst CardContent = styled(MUICardContent)`\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0;\n  margin-bottom: 8px;\n`;\n\nconst CardTitle = styled.div`\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  font-weight: bolder;\n`;\n\nconst CardFooter = styled.div`\n  display: flex;\n  align-items: center;\n  border-top: 1px solid ${props => Colorer(props.theme.colorText).alpha(0.1).string()};\n  padding: 8px 0;\n  margin: 0px 16px 0 16px;\n`;\n\nconst CardImage = styled.div`\n  display: block;\n  margin-top: 8px;\n  height: 120px;\n  flex-shrink: 1;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CardQuantity = styled.div`\n  flex-grow: 1;\n  color: ${props => props.theme.colorAccent};\n  font-weight: 600;\n`;\n\nexport { ProductCard };\n","import React from 'react';\n\nimport { ProductCard } from '../../components/ProductCard';\n\nexport const InventoryItem = React.memo(({\n  item,\n  order,\n  isLoading,\n  onConsume,\n}) => {\n\n  const handleItemConsume = () => onConsume(item);\n\n  return (\n    <ProductCard\n      image={item.image_url}\n      name={item.name}\n      order={order}\n      isLoading={isLoading}\n      value={`Quantity: ${item.quantity}`}\n      description={item.description}\n      actionButtonContent=\"Consume\"\n      onAction={item.remaining_uses ? handleItemConsume : undefined}\n    />\n  )\n});\n\n","import axios from 'axios';\nimport { Inventory } from 'store-js-sdk/src/inventory/inventory';\nimport { init } from 'store-js-sdk/src/init';\n\nconst CancelToken = axios.CancelToken;\nlet cancel = () => void 0;\n\nexport const loadInventory = async (projectId, loginToken) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectId}/user/inventory/items`;\n  const params = {\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(c => {\n      cancel();\n      cancel = c;\n    })\n  };\n  const response = await axios.get(URL, params);\n\n  return response.data.items.filter(x => x.type === 'virtual_good');\n}\n\nexport const consumeItem = async (projectId, loginToken, item) => {\n  init({ projectId, version: 'v2' });\n  const inventory = new Inventory(loginToken);\n  return await inventory.consumeItem(item.sku, 1, item.instance_id);\n}","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { Preloader } from '../../components/Preloader';\nimport { ProductContext } from '../../context';\nimport { InventoryItem } from './InventoryItem';\nimport { loadInventory, consumeItem } from './InventoryLoader';\n\nconst InventoryList = () => {\n  const {\n    cart,\n    logToken,\n    projectId,\n    setStateFrom,\n    inventoryItems,\n    isItemConsuming,\n    areInventoryItemsFetching,\n    setInventoryItems,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleConsumeItem = React.useCallback((item) => {\n    setStateFrom('isItemConsuming', true);\n    consumeItem(projectId, logToken, item)\n      .then(() => {\n        setInventoryItems([]);\n        setStateFrom('isItemConsuming', false);\n      })\n      .catch(error => {\n        setStateFrom('isItemConsuming', false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  });\n\n  React.useEffect(() => {\n    if (logToken && inventoryItems.length === 0 && cart.cartId) {\n      setStateFrom('areInventoryItemsFetching', true);\n      loadInventory(projectId, logToken)\n        .then(data => {\n          setInventoryItems(data);\n          setStateFrom('areInventoryItemsFetching', false);\n        })\n        .catch(error => {\n          setStateFrom('areInventoryItemsFetching', false);\n          enqueueSnackbar(error.message, { variant: 'error' });\n        });\n    }\n\n    return () => inventoryItems.length > 0 && setInventoryItems([]);\n  }, [inventoryItems.length, cart.cartId]);\n\n  const content = React.useMemo(() => inventoryItems.length > 0 ? (\n    <Content>\n      {inventoryItems.map((item, index) => (\n        <InventoryItem\n          order={index}\n          key={item.sku}\n          item={item}\n          isLoading={isItemConsuming}\n          onConsume={handleConsumeItem}\n        />\n      ))}\n    </Content>\n  ) : (\n    <EmptyText>Oops, you have nothing bought yet!</EmptyText>\n  ), [inventoryItems, isItemConsuming]);\n\n  return (\n    <Body>\n      {areInventoryItemsFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  color: ${props => props.theme.colorText};\n  position: relative;\n  background-color: transparent;\n  z-index: 1;\n  height: 100%;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${props => `repeat(auto-fit, minmax(\n    ${props.theme.cardWidth}, \n    ${props.theme.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nconst EmptyText = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n`;\n\nexport { InventoryList };\n","import { PhysicalGood } from 'store-js-sdk/src/physical-goods/physical-goods';\nimport { init } from 'store-js-sdk/src/init';\n\nexport const loadPhysicalGoods = async (projectId, loginToken) => {\n    //TODO добавить возможность использовать cancelToken в SDK\n    init({ projectId, version: 'v2' });\n    const physicalGood = new PhysicalGood(loginToken);\n    const response = await physicalGood.getPhysicalGoodList();\n    return response.data.items;\n};","import React from 'react';\nimport styled from 'styled-components';\n\nimport Avatar from '@material-ui/core/Avatar';\n\nconst Currency = ({ image, value, currency }) => (\n  <Body>\n    {image && <CurrencyIcon src={image} />}\n    {currency && <CurrencyAcronym>{currency}</CurrencyAcronym>}\n    {value}\n  </Body>\n);\n\nconst Body = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst CurrencyAcronym = styled.span`\n  margin-right: 5px;\n`;\n\nconst CurrencyIcon = styled(Avatar)`\n  && {\n    height: 1em;\n    width: 1em;\n    margin-right: 5px;\n  }\n`;\n\nexport { Currency };\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const PhysicalItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n}) => {\n\n  const handleItemAdd = () => addToCart(product);\n\n  const price = React.useMemo(() => (\n    <Currency\n      currency={product.price.currency}\n      value={Math.round(product.price.amount * 100) / 100} />\n  ), [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={<ShoppingCart />}\n      onAction={handleItemAdd}\n    />\n  )\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { ProductContext } from '../../context';\nimport { Preloader } from '../../components/Preloader';\nimport { loadPhysicalGoods } from './PhysicalListLoader';\nimport { PhysicalItem } from './PhysicalItem';\n\nconst PhysicalList = () => {\n  const {\n    logToken,\n    projectId,\n    addToCart,\n    setStateFrom,\n    physicalItems,\n    arePhysicalItemsFetching,\n    setPhysicalItems,\n    isCartProcessing,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\nReact.useEffect(() => {\n  if (logToken && physicalItems.length === 0) {\n    setStateFrom('arePhysicalItemsFetching', true);\n    loadPhysicalGoods(projectId, logToken)\n      .then(data => {\n        setPhysicalItems(data);\n        setStateFrom('arePhysicalItemsFetching', false);\n      })\n      .catch(error => {\n        enqueueSnackbar(error.message, { variant: 'error' });\n        setStateFrom('arePhysicalItemsFetching', false);\n      });\n  }\n}, [physicalItems]);\n\nconst content = React.useMemo(() => physicalItems.length > 0 && (\n  <Content>\n    {physicalItems.map((item, index) => (\n      <PhysicalItem\n        order={index}\n        key={item.sku}\n        product={item}\n        isLoading={isCartProcessing}\n        addToCart={addToCart}\n      />\n    ))}\n  </Content>\n), [physicalItems, isCartProcessing]);\n\n  return (\n    <Body>\n      {arePhysicalItemsFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  color: ${props => props.theme.colorText};\n  position: relative;\n  background-color: transparent;\n  z-index: 1;\n  height: 100%;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${props => `repeat(auto-fit, minmax(\n    ${props.theme.cardWidth}, \n    ${props.theme.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nexport { PhysicalList };\n","import React from 'react';\nimport styled from 'styled-components';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\n\nconst GroupSwitcher = ({\n  groups,\n  activeGroup,\n  onGroupChange,\n}) => {\n  const handleGroupChange = (_, groupID) => onGroupChange(groupID);\n\n  return (\n    <Tabs\n      value={activeGroup}\n      onChange={handleGroupChange}\n      variant=\"scrollable\"\n    >\n      {groups.map(group => (\n        <Tab\n          value={group.id}\n          key={group.id}\n          color=\"secondary\"\n          textColor=\"secondary\"\n          label={group.label}\n        />\n      ))}\n    </Tabs>\n  );\n}\n\nconst Tabs = styled(MUITabs)`\n  padding: 30px 0;\n  color: ${props => props.theme.colorAccent};\n  \n  & .MuiTabs-flexContainer {\n    justify-content: center;\n  };\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    color: ${props => props.theme.colorAccentText};\n    font-family: ${props => props.theme.fontFamily};\n  };\n`;\n\nexport { GroupSwitcher };\n","import axios from 'axios';\n\nexport const loadVirtualItems = async projectID => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_items`;\n  const response = await axios.get(url);\n\n  return response.data.items;\n}\n\nexport const loadVirtualCurrencies = async projectID => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_currency`;\n  const response = await axios.get(url);\n\n  return response.data.items;\n}\n\nexport const rewardItems = async data => {\n  const url = 'https://livedemo.xsolla.com/store-demo/api/index.php';\n  const response = await axios.post(url, data);\n\n  return response.data;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport MUIFormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport MUITextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\n\nimport { ProductContext } from '../../context';\nimport { GroupSwitcher } from '../../components/GroupSwitcher';\nimport { Preloader } from '../../components/Preloader.js';\nimport { loadVirtualCurrencies, loadVirtualItems, rewardItems } from './ManageInventoryLoader';\n\nconst users = [\n  {\n    id: 'd342dad2-9d59-11e9-a384-42010aa8003f',\n    name: 'support@xsolla.com',\n  },\n  {\n    id: '7d8b1f52-7d3f-400b-acd8-46e3a4368596',\n    name: 'v.legotkin@xsolla.com',\n  },\n  {\n    id: '27bc1227-48a3-4da8-bb86-f8d093f68805',\n    name: 'r.ushakov@xsolla.com',\n  },\n  {\n    id: 'a7d10a4e-3f68-43cc-a6b2-893d2c68fd14',\n    name: 'p.sanachev@xsolla.com',\n  },\n];\n\nconst groups = [\n  {\n    id: 'items',\n    label: 'Items',\n  },\n  {\n    id: 'currencies',\n    label: 'Currencies',\n  },\n];\n\nconst ManageInventory = () => {\n  const { projectId } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [userID, setUserID] = React.useState(null);\n  const [activeGroup, setActiveGroup] = React.useState(null);\n  const [selectedItem, setSelectedItem] = React.useState(null);\n  const [quantity, setQuantity] = React.useState(1);\n  const [isItemProcessing, setItemProcessing] = React.useState(false);\n  \n  const [areManageItemsFetching, setManageItemsFetching] = React.useState(false);\n  const [manageItems, setManageItems] = React.useState([]);\n\n  const [areManageCurrenciesFetching, setManageCurrenciesFetching] = React.useState(false);\n  const [manageCurrencies, setManageCurrencies] = React.useState([]);\n\n  const isFetching = areManageItemsFetching || areManageCurrenciesFetching;\n  const userOptions = React.useMemo(() => users.map(x => <MenuItem value={x.id}>{x.name}</MenuItem>, users));\n  const itemsOptions = React.useMemo(() => manageItems.map(x => <MenuItem value={x.sku}>{x.name}</MenuItem>, manageItems));\n  const currenciesOptions = React.useMemo(() => manageCurrencies.map(x => <MenuItem value={x.sku}>{x.name}</MenuItem>, manageCurrencies));\n\n  const processItem = type => {\n    enqueueSnackbar('test', {\n      variant: 'error',\n      content: (key, message) => (\n        <div>{message}</div>\n      ),\n    })\n    if (selectedItem === null) {\n      return;\n    }\n  \n    const data = {\n      type,\n      user: userID,\n      item: setSelectedItem,\n      count: quantity\n    };\n\n    setItemProcessing(true);\n    \n    // rewardItems(data)\n    //   .then(response => {\n    //     setItemProcessing(false);\n    //       this.setState({\n    //           showToast: true,\n    //           statusToast: 'complete',\n    //           operationDetails: response.operations[0].items\n    //       });\n    //   })\n    //   .catch(error => {\n    //     setItemProcessing(false);\n    //     enqueueSnackbar(error.message, { variant: 'error' })\n    //   });\n  }\n  \n  const handleRewardItem = () => processItem('reward');\n  const handleRevokeItem = () => processItem('revoke');\n  const handleUserSelect = event => setUserID(event.target.value);\n  const handleItemSelect = event => setSelectedItem(event.target.value);\n  const handleQuantityChange = event => setQuantity(event.target.value);\n\n  React.useEffect(() => {\n    setActiveGroup(groups[0] ? groups[0].id : null);\n  }, [groups]);\n\n  React.useEffect(() => {\n    if (manageItems.length === 0) {\n      setManageItemsFetching(true);\n      loadVirtualItems(projectId)\n        .then(items => {\n          setManageItemsFetching(false);\n          setManageItems(items);\n        })\n        .catch(error => {\n          setManageItemsFetching(false);\n          enqueueSnackbar(error.message, { variant: 'error' })\n        });\n    }\n  }, [manageItems]);\n\n  React.useEffect(() => {\n    if (manageItems.length === 0) {\n      setManageCurrenciesFetching(true);\n      loadVirtualCurrencies(projectId)\n        .then(items => {\n          setManageCurrenciesFetching(false);\n          setManageCurrencies(items);\n        })\n        .catch(error => {\n          setManageCurrenciesFetching(false);\n          enqueueSnackbar(error.message, { variant: 'error' })\n        });\n    }\n  }, [manageCurrencies]);\n    \n  return (\n    <Body>\n      {isFetching\n        ? <Preloader />\n        : (\n          <Form>\n            <TextField\n              select\n              label=\"User\"\n              value={userID}\n              color=\"secondary\"\n              onChange={handleUserSelect}\n            >\n              {userOptions}\n            </TextField>\n            <GroupSwitcher\n              groups={groups}\n              activeGroup={activeGroup}\n              onGroupChange={setActiveGroup}\n            />\n            <Items>\n              <TextField\n                select\n                label=\"Item\"\n                value={selectedItem}\n                color=\"secondary\"\n                onChange={handleItemSelect}\n              >\n                {itemsOptions}\n              </TextField>\n              <TextField\n                type=\"number\"\n                label=\"Quantity\"\n                value={quantity}\n                color=\"secondary\"\n                onChange={handleQuantityChange}\n              />\n            </Items>\n            <FormActions>\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                onClick={handleRewardItem}\n              >\n                Reward\n              </Button>\n              <Button\n                variant=\"contained\"\n                onClick={handleRevokeItem}\n              >\n                Revoke\n              </Button>\n            </FormActions>\n          </Form>\n        )\n      }\n    </Body>\n  );\n};\n\nconst Body = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 50px;\n  height: 100%;\n`;\n\nconst Form = styled.form`\n  max-width: 400px;\n  width: 100%;\n  color: ${props => props.theme.colorText};\n`;\n\nconst TextField = styled(MUITextField)`\n  width: 100%;\n\n  & .MuiFormLabel-root {\n    color: ${props => props.theme.colorText}\n  }\n\n  & .MuiInput-root {\n    color: ${props => props.theme.colorText}\n  }\n`;\n\nconst Items = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 20px;\n`;\n\nconst FormActions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px 0;\n`;\n\nexport { ManageInventory };\n\n// export class ManageInventorys extends PureComponent {\n//   state = {\n//     fetching: false,\n//     isPurchasing: false,\n//     inventoryItem: null,\n//     quantity: 1,\n//     user: 'd342dad2-9d59-11e9-a384-42010aa8003f',\n//     showToast: false,\n//     statusToast: 'processing',\n//     operationDetails: null,\n//     manageInventoryGroups: [],\n//     activeInventoryGroup: 'first',\n//     manageInventoryItems: null,\n//     manageInventoryCurrencies: null,\n//     invoice: null,\n//     date: null\n//   }\n\n//     componentDidMount() {\n//         if (null === this.state.manageInventoryItems) {\n//             this.getItems();\n//             this.props.updateVirtualCurrencyBalance();\n//         }\n//         if (null === this.state.manageInventoryCurrencies) {\n//             this.getCurrencies();\n//         }\n//     }\n\n//     changeGroupHandler = group => {\n//         const {manageInventoryGroups} = this.state;\n//         const activeGroup = manageInventoryGroups.find(g => g['id'] === group);\n//         const itemSku = activeGroup && activeGroup.items.length > 0 ? activeGroup.items[0].sku : 'helmet_1';\n//         this.setState({inventoryItem: itemSku, activeInventoryGroup: group});\n//         this.setItemQuantity(1);\n//     };\n\n\n//     getItems() {\n//         this.setState({fetching: true});\n\n//         getVirtualItemList(window.xProjectId)\n//             .then(virtualItemsList => {\n//                 this.setManageInventoryItems(virtualItemsList);\n//             })\n//             .catch(() => {\n//             });\n//     }\n\n//     getCurrencies() {\n//         this.setState({fetching: true});\n\n//         getVirtualCurrencyList(window.xProjectId)\n//             .then(virtualCurrencyList => {\n//                 this.setManageInventoryCurrencies(virtualCurrencyList);\n//             })\n//             .catch(() => {\n//             });\n//     }\n\n//     changeInventoryItem(event) {\n//         this.setState({inventoryItem: event.target.value});\n//     }\n\n//     changeUser(event) {\n//         this.setState({user: event.target.value});\n//     }\n\n//     setItemQuantity(quantity) {\n//         if (parseInt(quantity) >= 1) {\n//             this.setState({quantity: parseInt(quantity)});\n//         }\n//     }\n\n//     setShowToast(isVisible) {\n//         this.setState({showToast: isVisible});\n//     }\n\n//     setManageInventoryItems = (manageInventoryItems) => {\n//         this.setState({\n//             manageInventoryItems,\n//             fetching: false,\n//             manageInventoryGroups: [\n//                 ...this.state.manageInventoryGroups,\n//                 {\n//                     id: 1,\n//                     name: 'items',\n//                     items: manageInventoryItems,\n//                     singleItemName: 'Item'\n//                 }\n//             ],\n//         })\n//     };\n\n//     setManageInventoryCurrencies = (manageInventoryCurrencies) => {\n//         this.setState({\n//             manageInventoryCurrencies,\n//             fetching: false,\n//             manageInventoryGroups: [\n//                 ...this.state.manageInventoryGroups,\n//                 {\n//                     id: 2,\n//                     name: 'currencies',\n//                     items: manageInventoryCurrencies,\n//                     singleItemName: 'Currency'\n//                 }\n//             ],\n//         })\n//     };\n\n//     itemOperation(type) {\n//         let {user, activeInventoryGroup, quantity, inventoryItem, manageInventoryGroups, invoice, date} = this.state;\n//         if (inventoryItem === null && manageInventoryGroups && manageInventoryGroups.length) {\n//             const group = activeInventoryGroup !== 'first'\n//                 ? manageInventoryGroups.find(group => group['id'] === activeInventoryGroup)\n//                 : manageInventoryGroups[0];\n//             inventoryItem = group && group.items.length > 0 ? group.items[0].sku : 'helmet_1';\n//         }\n\n//         const body = {\n//             type: type,\n//             user: user,\n//             item: inventoryItem,\n//             count: quantity\n//         };\n//         if (invoice && date) {\n//             body.purchase.external_purchase_id = invoice;\n//             body.purchase.external_purchase_date = date;\n//         }\n\n//         this.setState({showToast: true, statusToast: 'processing', operationDetails: null});\n//         rewardItems(body)\n//             .then(response => {\n//                 this.setState({\n//                     showToast: true,\n//                     statusToast: 'complete',\n//                     operationDetails: response.operations[0].items\n//                 });\n//                 this.props.updateVirtualCurrencyBalance();\n//             })\n//             .catch(() => {\n//             });\n//     }\n\n//     rewardItem(e) {\n//         this.itemOperation('reward');\n//     }\n\n//     revokeItem() {\n//         this.itemOperation('revoke');\n//     }\n\n//     render() {\n//         const {quantity, showToast, statusToast, operationDetails, manageInventoryGroups, activeInventoryGroup} = this.state;\n//         const group = activeInventoryGroup !== 'first'\n//             ? manageInventoryGroups.find(group => group['id'] === activeInventoryGroup)\n//             : manageInventoryGroups[0];\n//         return (\n//             <div className=\"manage-inventory__row\">\n//                 <div className=\"manage-inventory__alert\">\n//                     <Alert onClose={(e) => this.setShowToast(false)} open={showToast}\n//                            variant={statusToast === 'processing' ? \"primary\" : \"success\"} dismissible>\n//                         <Alert.Heading>{statusToast === 'processing' ? 'Operation is processing' : 'Operation complete!'}</Alert.Heading>\n//                         <p>\n//                             {\n//                                 group && group.items.length && operationDetails && operationDetails.length ?\n//                                     operationDetails.map(\n//                                         (item) => {\n//                                             return (\n//                                                 <div>\n//                                                     <div>Item: <b>{\n//                                                         group.items.filter((inventoryItem) => {\n//                                                             return inventoryItem.sku === item.sku\n//                                                         }).map((inventoryItem) => {\n//                                                             return inventoryItem.name;\n//                                                         })\n//                                                     }</b></div>\n//                                                     <div>Quantity: <b>{item.quantity === null ? 0 : item.quantity}</b>\n//                                                     </div>\n//                                                 </div>\n//                                             )\n//                                         })\n//                                     :\n//                                     ''\n//                             }\n//                         </p>\n//                     </Alert>\n//                 </div>\n//                 <div>\n//                     <div className=\"manage-inventory\">\n//                         <div className=\"manage-inventory__user-list\">\n//                             <div className=\"manage-inventory__title\">User</div>\n//                             <div>\n//                                 <select value={this.state.user} onChange={(e) => this.changeUser(e)}>\n//                                     {\n//                                         users.map(\n//                                             (user) => {\n//                                                 return (\n//                                                     <option key={user.id} value={user.id}>{user.name}</option>\n//                                                 )\n//                                             })\n//                                     }\n//                                 </select>\n//                             </div>\n//                         </div>\n//                         <GroupSwitcher\n//                           groups={manageInventoryGroups}\n//                           activeGroup={activeInventoryGroup}\n//                           onGroupChange={this.changeGroupHandler}\n//                         />\n\n//                         <div className=\"manage-inventory-item-container\">\n//                             <div className=\"manage-inventory-list\">\n//                                 <div\n//                                     className=\"manage-inventory__title\">{group ? group.singleItemName : 'Item'}</div>\n//                                 <div>\n//                                     {group && group.items.length > 0\n//                                         ? <select value={this.state.inventoryItem}\n//                                                   onChange={(e) => this.changeInventoryItem(e)}>\n//                                             {\n//                                                 group.items.map(\n//                                                     (item) => {\n//                                                         return (\n//                                                             <option key={item.sku}\n//                                                                     value={item.sku}>{item.name}</option>\n//                                                         )\n//                                                     })\n//                                             }\n//                                         </select>\n//                                         : <div>\n//                                             Nothing to show\n//                                         </div>\n//                                     }\n//                                 </div>\n//                             </div>\n//                             <div className=\"manage-inventory__quantity\">\n//                                 <div className=\"manage-inventory__quantity-change\">\n//                                     <TextField\n//                                         label={\"Quantity\"}\n//                                         type={\"number\"}\n//                                         inputProps={{style: {color: 'white'}, min: \"0\", step: \"1\"}}\n//                                         defaultValue={quantity}\n//                                         InputLabelProps={{\n//                                             className: \"manage-inventory__quantity-input-label\"\n//                                         }}\n//                                         onChange={(e) => this.setItemQuantity(e.target.value)}\n//                                     />\n//                                 </div>\n//                             </div>\n//                         </div>\n//                         <div className=\"manage-inventory-actions\">\n//                             <Button\n//                                 type=\"submit\"\n//                                 variant=\"contained\"\n//                                 onClick={(e) => this.rewardItem(e)}\n//                             >Reward</Button>\n//                             <Button\n//                                 variant=\"contained\"\n//                                 onClick={(e) => this.revokeItem(e)}\n//                             >Revoke</Button>\n//                         </div>\n//                     </div>\n//                 </div>\n//             </div>\n//         )\n//     }\n// }\n","import axios from 'axios';\n\nexport const loadVirtualItems = async (projectID, token) => {\n  const URL = `https://store.xsolla.com/api/v1/project/${projectID}/items/groups`\n  const response = await axios.get(\n    URL,\n    {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }\n  );\n\n  const [...groups] = await Promise.all(response.data.groups.map(async g => {\n    const virtualItemsByGroup = await loadVirtualItemsByGroup(projectID, g.external_id);\n    return {\n      groupID: g.external_id,\n      groupName: g.name,\n      items: virtualItemsByGroup\n    };\n  }));\n\n  return groups;\n};\n\nconst loadVirtualItemsByGroup = async (projectID, groupID) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_items/group/${groupID}`\n  const response = await axios.get(URL);\n\n  return response.data.items;\n}\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const VirtualItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n  buyByVC,\n}) => {\n  const handleBuyByVC = () => buyByVC(product, product.virtual_prices[0].sku);\n  const handleItemAdd = () => addToCart(product);\n  \n  const hasVirtualCurrencyPrice = product.virtual_prices && product.virtual_prices.length > 0;\n  const buttonContent = React.useMemo(() => hasVirtualCurrencyPrice ? 'Buy now' : <ShoppingCart />, [product]);\n  const price = React.useMemo(() => hasVirtualCurrencyPrice\n    ? (\n      <Currency\n        image={product.virtual_prices[0].image_url}\n        value={product.virtual_prices[0].amount}\n      />\n    ) : (\n      <Currency\n        currency={product.price.currency}\n        value={Math.round(product.price.amount * 100) / 100}\n      />\n    ), [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={buttonContent}\n      onAction={hasVirtualCurrencyPrice ? handleBuyByVC : handleItemAdd}\n    />\n  )\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { ProductContext } from '../../context';\nimport { Preloader } from '../../components/Preloader.js';\nimport { GroupSwitcher } from '../../components/GroupSwitcher';\nimport { loadVirtualItems } from './VirtualItemsLoader';\nimport { VirtualItem } from './VirtualItem';\n\nconst VirtualList = () => {\n  const {\n    logToken,\n    virtualItems,\n    addToCart,\n    buyByVC,\n    projectId,\n    areVirtualItemsFetching,\n    isCartProcessing,\n    setVirtualItems,\n    setStateFrom,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [activeGroup, setActiveGroup] = React.useState(null);\n\n  const groups = React.useMemo(() => virtualItems.map(x => ({ id: x.groupID, label: x.groupName })), [virtualItems]);\n\n  React.useEffect(() => {\n    setActiveGroup(virtualItems[0] ? virtualItems[0].groupID : null);\n  }, [virtualItems]);\n\n  React.useEffect(() => {\n    if (!areVirtualItemsFetching && logToken && virtualItems.length === 0) {\n      setStateFrom('areVirtualItemsFetching', true);\n      loadVirtualItems(projectId, logToken).then(virtualItems => {\n        setVirtualItems(virtualItems);\n        setStateFrom('areVirtualItemsFetching', false);\n      }).catch(error => {\n        setStateFrom('areVirtualItemsFetching', false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n    }\n  }, [virtualItems]);\n\n  const content = React.useMemo(() => virtualItems.length > 0 && (\n    <>\n      <GroupSwitcher\n        groups={groups}\n        activeGroup={activeGroup}\n        onGroupChange={setActiveGroup}\n      />\n      {virtualItems.map(g => activeGroup === g.groupID && (\n        <React.Fragment key={g.groupID}>\n          <Title>\n            {g.groupName}\n          </Title>\n          <Group>\n            {g.items.map((item, index) => (\n              <VirtualItem\n                order={index}\n                key={item.sku}\n                product={item}\n                addToCart={addToCart}\n                isLoading={isCartProcessing}\n                buyByVC={buyByVC}\n              />\n            ))}\n          </Group>\n        </React.Fragment>\n      ))}\n    </>\n  ), [activeGroup, virtualItems, isCartProcessing]);\n\n  return (\n    <Body>\n      {areVirtualItemsFetching\n        ? <Preloader />\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  color: ${props => props.theme.colorText};\n  position: relative;\n  background-color: transparent;\n  z-index: 4;\n  height: 100%;\n`;\n\nconst Group = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${props => `repeat(auto-fit, minmax(\n    ${props.theme.cardWidth}, \n    ${props.theme.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nconst Title = styled.div`\n  color: ${props => props.theme.colorText};\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nexport { VirtualList };\n","import React from \"react\";\n\nimport styled, { css } from \"styled-components\";\n\nimport {makeStyles, withStyles} from \"@material-ui/core/styles\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport IconAdd from \"@material-ui/icons/AddBox\";\nimport IconRem from \"@material-ui/icons/IndeterminateCheckBox\";\nimport red from \"@material-ui/core/colors/red\";\nimport ShoppingCart from \"@material-ui/icons/ShoppingCart\";\nimport IconDelete from \"@material-ui/icons/Delete\";\nimport AvatarVC from \"@material-ui/core/Avatar\";\nimport Colorer from \"color\";\nimport Button from \"@material-ui/core/Button\";\n\nconst styles = theme => ({\n  paper: {\n    ...theme.mixins.gutters(),\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2)\n  },\n  cardTitle: {},\n  card: {\n    // minWidth: '300px',\n    // height: 300,\n    // marginBottom: 4 * 8,\n  },\n  h1: {\n    fontWeight: \"bold\",\n    fontSize: \"1.2em\",\n    marginBottom: 1 * 8,\n    color: \"var(--mainDark)\"\n  },\n  p: {\n    flexGrow: 1,\n    color: \"var(--mainDark)\"\n  },\n  price: {\n    flexGrow: 1,\n    // paddingLeft: 1 * 8,\n    fontWeight: \"600\",\n    color: \"var(--mainBlue)\"\n  },\n  media: {\n    marginTop: 1 * 8,\n    height: 0,\n    paddingTop: \"56.25%\", // 16:9\n    backgroundSize: \"contain\"\n    // backgroundSize: 'cover',\n    // backgroundColor: 'var(--lightBlue)',\n  },\n  actions: {\n    display: \"flex\"\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\"\n  },\n  avatar: {\n    backgroundColor: red[500]\n  }\n});\n\nconst useStyles = makeStyles({\n  currencies: {\n    height: 24,\n    width: 24,\n    marginRight: 4\n  }\n});\n\nconst RecipeReviewCard = ({\n  addToCart = () => {\n    void 0;\n  },\n  changeItemQuantityInCart = () => {\n    void 0;\n  },\n  buyByVC = () => {\n    void 0;\n  },\n  activeGroup,\n  product,\n  order,\n  cardType = null,\n  initClass,\n  image_url,\n  title,\n  currency,\n  price,\n  description,\n  getTheme = () => {\n    void 0;\n  },\n  quantity\n}) => {\n  const [state, setState] = React.useState({\n    expanded: false,\n    favorited: false,\n    cardShown: false\n  });\n\n  const classes = useStyles();\n\n  let [cartState, setCartState] = React.useState(\n    cardType === \"cart\" ? quantity : 0\n  );\n\n  const handleCartClick = () => {\n    addToCart(product);\n  };\n\n  const handleBuyByVirtualCurrency = (vcSku) => {\n    buyByVC(product, vcSku);\n  };\n\n  const calcPrice = (price, q) => {\n    return Math.round(price * q * 100) / 100;\n  };\n\n  React.useEffect(() => {\n    // debugger;\n    if (!state.cardShown) {\n      setTimeout(() => {\n        setState({\n          cardShown: true //TODO: зачем это\n        });\n      }, order * 100);\n    }\n  });\n\n  const hasVirtualCurrencyPrice = product.virtual_prices && product.virtual_prices.length > 0;\n\n  return (\n    <CssCardAppear className={!state.cardShown ? initClass : \"\"}>\n      <CssCard cardType={cardType} getTheme={getTheme}>\n        <CssCardMedia\n          style={{}}\n          image={image_url}\n          theme={\n            cardType === \"cart\" || cardType === \"buy_by_vc\"\n              ? {\n                  width: 140,\n                  height: 140\n                }\n              : {}\n          }\n        />\n        <CssCardContent>\n          <CssCardH1>{title}</CssCardH1>\n          <CssDescEllipsis>{description}</CssDescEllipsis>\n        </CssCardContent>\n\n        {cardType !== \"cart\" && cardType !== \"buy_by_vc\" && (\n          <CssCardVCActions cardType={cardType} getTheme={getTheme}>\n            {\n              hasVirtualCurrencyPrice &&\n              <AvatarVC src={product.virtual_prices[0].image_url} className={classes.currencies}/>\n            }\n            <CssTypographyPrice getTheme={getTheme}>\n              {\n                hasVirtualCurrencyPrice ?\n                    product.virtual_prices[0].amount : `${currency} ${Math.round(price * 100) / 100}`\n              }\n            </CssTypographyPrice>\n            <Button\n                getTheme={getTheme}\n                variant=\"contained\"\n                onClick={\n                  hasVirtualCurrencyPrice ? handleBuyByVirtualCurrency.bind(this, product.virtual_prices[0].sku) : handleCartClick\n                }\n            >\n              {\n                hasVirtualCurrencyPrice ?\n                    `Buy now` : <ShoppingCart />\n              }\n            </Button>\n          </CssCardVCActions>\n        )}\n\n        {cardType === \"cart\" && (\n          <CssCardActions cardType={cardType} getTheme={getTheme}>\n            <CssCartQs>\n              {quantity <= 1 && (\n                <IconDelete\n                  style={{\n                    opacity: 0.4\n                  }}\n                  onClick={() => {\n                    changeItemQuantityInCart(product, quantity - 1);\n                  }}\n                />\n              )}\n\n              {quantity > 1 && (\n                <IconRem\n                  style={{\n                    opacity: 0.4\n                  }}\n                  onClick={() => {\n                    changeItemQuantityInCart(product, quantity - 1);\n                  }}\n                />\n              )}\n              <CssCartQ>{quantity}</CssCartQ>\n              <IconAdd\n                onClick={() => {\n                  changeItemQuantityInCart(product, quantity + 1);\n                }}\n              />\n            </CssCartQs>\n            <div>\n              <CssTypographyPrice getTheme={getTheme}>\n                {currency} {calcPrice(price, quantity)}\n              </CssTypographyPrice>\n            </div>\n\n            {quantity > 1 && (\n              <CssTypographyPriceSm getTheme={getTheme}>\n                {currency} {Math.round(price * 100) / 100} for one item\n              </CssTypographyPriceSm>\n            )}\n          </CssCardActions>\n        )}\n\n        <Collapse in={state.expanded} timeout=\"auto\" unmountOnExit>\n          <CardContent>{description}</CardContent>\n        </Collapse>\n      </CssCard>\n    </CssCardAppear>\n  );\n};\n\nconst CssCartQs = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n`;\nconst CssCartQ = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n`;\n\nconst CssCardAppear = styled.div`\n  position: relative;\n\n  /* transition: all ${props => props.order + \"s\"} ease-in-out; */\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  &.initialFlow1 {\n    opacity: 0;\n    transform: translateY(20px) scale(1);\n  }\n`;\n\n// const CssCard = styled(Card)`\n// Карточка не корзина\n// Карточка корзина\nconst CssCard = styled.div`\n  color: ${props => props.getTheme(\"colorText\")};\n  ${props =>\n    !props.cardType &&\n    css`\n    display: flex;\n    flex-direction: column;\n    max-width: ${props => `${props.getTheme(\"cardWidth\")}`};\n    min-width: ${props => `${props.getTheme(\"cardWidth\")}`};\n    height: ${props => `${props.getTheme(\"cardWidth\")}`};\n    /* height: 360px; */\n    margin: ${2 * 8}px;\n    flex-shrink: 0;\n    flex-grow: 1;\n    flex-base: 50%;\n    background: transparent;\n    /* boxShadow: none; */\n    /* color: var(--mainWhite); */\n    transition: box-shadow ${props => props.getTheme(\"transitionStyle\")};\n    border-radius: ${props => props.getTheme(\"borderRadius\")}\n    padding: ${props => props.getTheme(\"padding\")};\n  `}\n\n  ${props =>\n    props.cardType &&\n    css`\n      display: grid;\n      grid-template-columns: 20% 50% 30%;\n      grid-template-rows: 160px;\n      place-content: center;\n    `}\n  &:hover {\n    ${props => {\n      return (\n        !props.cardType &&\n        css`\n          box-shadow: ${props => props.getTheme(\"boxShadow\")};\n        `\n      );\n    }}\n  }\n`;\n\nconst CssDescEllipsis = styled.div`\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  /* max-height: 120px; */\n  width: 100%;\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  max-width: 400px;\n  margin: 0 auto;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst CssCardContent = styled(CardContent)`\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0 !important;\n  margin-bottom: 8px;\n`;\n\nconst CssCardH1 = styled.div`\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n`;\n\n// Кнопки не корзина\n// Кнопки корзина\n// const CssCardActions = styled(CardActions)`\nconst CssCardActions = styled.div`\n  ${props =>\n    !props.cardType &&\n    css`\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ${props =>\n          Colorer(props.getTheme(\"colorText\"))\n            .alpha(0.1)\n            .string()};\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    `}\n  ${props =>\n    props.cardType &&\n    css`\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    `}\n`;\n\nconst CssCardVCActions = styled.div`\n  ${props =>\n    !props.cardType &&\n    css`\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ${props =>\n        Colorer(props.getTheme(\"colorText\"))\n            .alpha(0.1)\n            .string()};\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    `}\n  ${props =>\n    props.cardType &&\n    css`\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    `}\n`;\n\nconst CssCardMedia = styled.div`\n  display: block;\n  /* height: 0; */\n  margin-top: 8px;\n  min-height: 120px;\n  flex-grow: 1;\n  /* padding-top: 56.25%; */\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CssTypographyPrice = styled.div`\n  flex-grow: 1;\n  color: ${props => props.getTheme(\"colorAccent\")};\n  font-weight: 600;\n`;\n\nconst CssTypographyPriceSm = styled.div`\n  flex-grow: 1;\n  font-size: 0.8em;\n  /* color: ${props => props.getTheme(\"colorAccent\")}; */\n  /* font-weight: 600; */\n  opacity: 0.3;\n`;\n\nexport default withStyles(styles)(RecipeReviewCard);\n","import currencyFormat from \"currency-format\";\nimport currencyNumberFormat from \"currency-number-format\";\n\n// CURRENCY CODE\nfunction defaultCurrency(currency) {\n  return {\n    name: currency,\n    fractionSize: 2,\n    symbol: {\n      grapheme: currency,\n      template: null,\n      rtl: false\n    },\n    uniqSymbol: null\n  };\n}\nfunction getCurrencyOptions(currency) {\n  return currency\n    ? currencyFormat[currency.toUpperCase()] || defaultCurrency(currency)\n    : defaultCurrency(currency);\n}\n\n// LOCALE\nvar defaultLocale = \"en_US\";\nvar localesMap = {\n  ar: \"ar_AE\",\n  bg: \"bg_BG\",\n  cn: \"zh_CN\",\n  cs: \"cs_CZ\",\n  de: \"de_DE\",\n  en: \"en_US\",\n  es: \"es_ES\",\n  fr: \"fr_FR\",\n  he: \"he_IL\",\n  it: \"it_IT\",\n  ja: \"ja_JP\",\n  ko: \"ko_KR\",\n  pl: \"pl_PL\",\n  pt: \"pt_BR\",\n  ro: \"ro_RO\",\n  ru: \"ru_RU\",\n  th: \"th_TH\",\n  tr: \"tr_TR\",\n  tw: \"zh_TW\",\n  vi: \"vi_VN\"\n};\nfunction formatLocale(locale) {\n  return [\n    locale.substr(0, 2).toLowerCase(),\n    locale.substr(3, 2).toUpperCase()\n  ].join(\"_\");\n}\nfunction getLanguageOptions(locale) {\n  return locale\n    ? currencyNumberFormat[formatLocale(locale)] ||\n        currencyNumberFormat[defaultLocale]\n    : currencyNumberFormat[defaultLocale];\n}\nfunction map2to5Locale(locale) {\n  return locale && locale.length === 5\n    ? locale\n    : localesMap[locale] || defaultLocale;\n}\n\n// CURRENCY\nexport function getFormattedCurrency(amount, currency, locale) {\n  var parsedAmount = parseFloat(amount);\n  if (!currency || isNaN(parsedAmount)) {\n    return {\n      formattedCurrency: amount + \" \" + currency,\n      dir: \"ltr\"\n    };\n  }\n\n  var currencyOptions = getCurrencyOptions(currency);\n  var languageOptions = getLanguageOptions(locale);\n\n  var signAmount = parsedAmount < 0 ? \"-\" : \"\";\n  var fractionSize = currencyOptions.fractionSize;\n\n  var symbol = currencyOptions.symbol;\n  var thousandSeparator = languageOptions.thousands;\n  var decimalSeparator = languageOptions.decimal;\n  // Spike for escaping case when grapheme is arabic symbol, and russian style separators was chosen\n  if ((!symbol || symbol.rtl) && languageOptions.thousands === \" \") {\n    thousandSeparator = \",\";\n    decimalSeparator = \".\";\n  }\n\n  var splittedAmount = Math.abs(parsedAmount)\n    .toFixed(fractionSize)\n    .split(\".\");\n  splittedAmount[0] = splittedAmount[0].replace(\n    /(\\d)(?=(\\d{3})+(?!\\d))/g,\n    \"$1\" + thousandSeparator\n  );\n  var formattedAmount = splittedAmount.join(decimalSeparator);\n\n  var formattedCurrency = signAmount + formattedAmount + \" \" + currency;\n  var rtl = false;\n  if (symbol && symbol.template) {\n    formattedCurrency =\n      signAmount +\n      symbol.template\n        .replace(\"1\", formattedAmount)\n        .replace(\"$\", symbol.grapheme);\n    rtl = symbol.rtl;\n  }\n\n  return {\n    formattedCurrency: formattedCurrency,\n    dir: rtl ? \"rtl\" : \"ltr\"\n  };\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Product from \"./Product\";\nimport IconClose from \"@material-ui/icons/Close\";\nimport Button from \"@material-ui/core/Button\";\nimport Colorer from \"color\";\nimport { getFormattedCurrency } from \"./formatCurrency\";\nimport { withRouter } from 'react-router-dom';\n\nimport { ProductContext } from \"../context\";\nimport { getPsTokenBuyCart, quickPurchaseBuyVirtualCurrency } from \"./StoreLoader\";\nimport { Preloader } from \"./Preloader\";\n\nfunction Cart({ style = {} , history}) {\n  let [buyButtonDisabled, setBuyButtonDisabled] = React.useState(false);\n\n  const valueFromContext = React.useContext(ProductContext);\n\n  const hideCart = () => {\n    valueFromContext.hideCart();\n  };\n\n  const calculateSubtotal = cart => {\n    let subtotal = 0;\n    cart.forEach(function(element) {\n      subtotal += element.price.amount * element.quantity;\n    });\n    return Math.round(subtotal * 100) / 100;\n  };\n\n  const buyAnotherPlatform = function () {\n      if (buyButtonDisabled ||\n          valueFromContext.cart.items.length <= 0) {\n          return;\n      }\n      let path = \"/purchase\";\n      history.push(path);\n      hideCart();\n  };\n\n  const buyButtonAction = () => {\n    setBuyButtonDisabled(true);\n    let psTokenPromise = getPsTokenBuyCart(\n      valueFromContext.cart.cartId,\n      valueFromContext.logToken\n    );\n    psTokenPromise\n      .then(response => {\n        window.xPayStationInit(response.data[\"token\"]);\n        window.XPayStationWidget.open();\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.CLOSE,\n          (event, data) => {\n            setBuyButtonDisabled(false);\n          }\n        );\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.STATUS_DONE,\n          (event, data) => valueFromContext.payStationHandler(event, data)\n        );\n      })\n      .catch(e => {});\n  };\n\n    const buyByVirtualCurrencyButtonAction = (product, vcPriceSku) => {\n        setBuyButtonDisabled(true);\n        quickPurchaseBuyVirtualCurrency(product, vcPriceSku, valueFromContext.logToken)\n            .then(response => {\n                valueFromContext.clearVCCart();\n                setBuyButtonDisabled(false);\n                this.props.updateVirtualCurrencyBalance();\n            })\n            .catch(reason => {\n                setBuyButtonDisabled(false);\n            })\n    };\n\n  return (\n    <div>\n      {valueFromContext.isCartShown && (\n        <Cart0>\n          <CartB\n            style={{\n              padding: \"0 32px 0 32px\",\n              borderRadius: valueFromContext.getTheme(\"borderRadius\"),\n              backgroundColor: valueFromContext.getTheme(\"colorBg\"),\n              color: valueFromContext.getTheme(\"colorText\")\n            }}\n          >\n            <div\n              style={{\n                backgroundColor: valueFromContext.getTheme(\"colorBg\"),\n                color: valueFromContext.getTheme(\"colorText\")\n              }}\n            >\n              <CssCartH\n                style={{\n                  backgroundColor: `${valueFromContext.getTheme(\"colorBg\")}`,\n                  // borderBottom: `1px solid ${valueFromContext.getTheme(\"colorText\")}`\n                  borderBottom: `1px solid ${Colorer(\n                    valueFromContext.getTheme(\"colorText\")\n                  )\n                    .alpha(0.1)\n                    .string()}`\n                }}\n              >\n                <h4>Cart {}</h4>\n                <IconClose\n                  style={{\n                    cursor: \"pointer\"\n                  }}\n                  onClick={e => hideCart(e)}\n                />\n              </CssCartH>\n\n              <CssCartList>\n                {valueFromContext.cart &&\n                  valueFromContext.cart.items.map((oneCartItem, i) => {\n                    return (\n                      <div key={`cartitem${i}`}>\n                        <Product\n                          product={oneCartItem}\n                          key={oneCartItem.sku}\n                          order={i}\n                          initClass=\"initialFlow1\"\n                          sku={oneCartItem.sku}\n                          title={oneCartItem.name}\n                          description={oneCartItem.description}\n                          price={oneCartItem.price.amount}\n                          image_url={oneCartItem.image_url}\n                          currency={oneCartItem.price.currency}\n                          cardType=\"cart\"\n                          cartId={valueFromContext.cart.cartId}\n                          logToken={valueFromContext.logToken}\n                          changeItemQuantityInCart={\n                            valueFromContext.changeItemQuantityInCart\n                          }\n                          quantity={oneCartItem.quantity}\n                        />\n                      </div>\n                    );\n                  })}\n                {valueFromContext.cart &&\n                  valueFromContext.cart.items.length <= 0 && <p>Empty cart</p>}\n              </CssCartList>\n\n              <CssCartB\n                style={{\n                  backgroundColor: `${valueFromContext.getTheme(\"colorBg\")}`,\n                  // borderTop: `1px solid ${valueFromContext.getTheme(\"colorText\")}`\n                  borderTop: `1px solid ${Colorer(\n                    valueFromContext.getTheme(\"colorText\")\n                  )\n                    .alpha(0.1)\n                    .string()}`\n                }}\n              >\n                <div className=\"\" />\n                {valueFromContext.cart &&\n                  valueFromContext.cart.items.length > 0 && (\n                    <CssSubtotal>\n                      Subtotal:\n                      <div\n                        style={{\n                          minWidth: 80,\n                          textAlign: \"right\"\n                        }}\n                      >\n                        {valueFromContext.isFetching &&\n                          getFormattedCurrency(\n                            calculateSubtotal(valueFromContext.cart.items),\n                            valueFromContext.cart.items[0].price.currency\n                          ).formattedCurrency}\n                        {!valueFromContext.isFetching &&\n                          getFormattedCurrency(\n                            valueFromContext.cart.price.amount,\n                            valueFromContext.cart.price.currency\n                          ).formattedCurrency}\n                      </div>\n                    </CssSubtotal>\n                  )}\n                  <Button\n                      variant=\"contained\"\n                      style={{marginRight: '5px'}}\n                      onClick={() => {\n                          !(\n                              buyButtonDisabled ||\n                              valueFromContext.cart.items.length <= 0\n                          ) && buyAnotherPlatform();\n                      }}\n                  >\n                      Buy on PS4\n                  </Button>\n                <Button\n                  variant=\"contained\"\n                  onClick={() => {\n                    !(\n                      buyButtonDisabled ||\n                      valueFromContext.cart.items.length <= 0\n                    ) && buyButtonAction();\n                  }}\n                >\n                  Buy on Xsolla\n                </Button>\n              </CssCartB>\n            </div>\n          </CartB>\n          {/* <Link to='/'> */}\n          <CartZ onClick={e => hideCart(e)} />\n          {/* </Link> */}\n        </Cart0>\n      )}\n        {valueFromContext.cartWithItemsBuyingByVCShown && (\n            <Cart0>\n                <CartB\n                    style={{\n                        padding: \"0 32px 0 32px\",\n                        borderRadius: valueFromContext.getTheme(\"borderRadius\"),\n                        backgroundColor: valueFromContext.getTheme(\"colorBg\"),\n                        color: valueFromContext.getTheme(\"colorText\")\n                    }}\n                >\n                    <div\n                        style={{\n                            backgroundColor: valueFromContext.getTheme(\"colorBg\"),\n                            color: valueFromContext.getTheme(\"colorText\")\n                        }}\n                    >\n                        <CssCartH\n                            style={{\n                                backgroundColor: `${valueFromContext.getTheme(\"colorBg\")}`,\n                                borderBottom: `1px solid ${Colorer(\n                                    valueFromContext.getTheme(\"colorText\")\n                                )\n                                    .alpha(0.1)\n                                    .string()}`\n                            }}\n                        >\n                            <h4>Confirm</h4>\n                            <IconClose\n                                style={{\n                                    cursor: \"pointer\"\n                                }}\n                                onClick={e => hideCart(e)}\n                            />\n                        </CssCartH>\n\n                        <CssCartList>\n                            {valueFromContext.cartWithItemsBuyingByVC &&\n                            valueFromContext.cartWithItemsBuyingByVC.items.map((oneCartItem, i) => {\n                                return (\n                                    <div key={`cartitem${i}`}>\n                                        <Product\n                                            product={oneCartItem}\n                                            key={oneCartItem.sku}\n                                            order={i}\n                                            initClass=\"initialFlow1\"\n                                            sku={oneCartItem.sku}\n                                            title={oneCartItem.name}\n                                            description={oneCartItem.description}\n                                            price={oneCartItem.price.amount}\n                                            image_url={oneCartItem.image_url}\n                                            currency={oneCartItem.price.currency}\n                                            cardType=\"buy_by_vc\"\n                                            cartId={valueFromContext.cart.cartId}\n                                            logToken={valueFromContext.logToken}\n                                            changeItemQuantityInCart={\n                                                valueFromContext.changeItemQuantityInCart\n                                            }\n                                            quantity={oneCartItem.quantity}\n                                        />\n                                    </div>\n                                );\n                            })}\n                            {valueFromContext.cartWithItemsBuyingByVC &&\n                            valueFromContext.cartWithItemsBuyingByVC.items.length <= 0 && <p>Empty cart</p>}\n                        </CssCartList>\n\n                        <CssCartB\n                            style={{\n                                backgroundColor: `${valueFromContext.getTheme(\"colorBg\")}`,\n                                borderTop: `1px solid ${Colorer(\n                                    valueFromContext.getTheme(\"colorText\")\n                                )\n                                    .alpha(0.1)\n                                    .string()}`\n                            }}\n                        >\n                            <div className=\"\" />\n                            {\n                                buyButtonDisabled ?\n                                    <Preloader/> :\n                                    <Button\n                                        variant=\"contained\"\n                                        onClick={() => {\n                                            !(\n                                                buyButtonDisabled ||\n                                                valueFromContext.cartWithItemsBuyingByVC.items.length <= 0\n                                            ) && buyByVirtualCurrencyButtonAction(\n                                                valueFromContext.cartWithItemsBuyingByVC.items[0],\n                                                valueFromContext.cartWithItemsBuyingByVC.vcPriceSku\n                                            );\n                                        }}\n                                    >\n                                        Buy\n                                    </Button>\n                            }\n                        </CssCartB>\n                    </div>\n                </CartB>\n                <CartZ onClick={e => hideCart(e)} />\n            </Cart0>\n        )}\n    </div>\n  );\n}\n\nexport const CssCartList = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 600px;\n  padding-top: 16px;\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* position: fixed; */\n  /* left: 0; */\n  /* right: 0; */\n  /* top: 0; */\n  /* bottom: 0; */\n  /* z-index: 1; */\n`;\n\nconst Cart0 = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 100;\n`;\n\nconst CartB = styled.div`\n  flex: 1;\n  position: absolute;\n  max-width: 680px;\n  z-index: 1;\n  max-height: 80vh;\n  overflow-y: auto;\n  padding-top: 64px;\n`;\n\nconst CartZ = styled.div`\n  background-color: rgba(0, 0, 0, 0.8);\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n`;\n\nconst CssCartH = styled.div`\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  top: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  z-index: 10;\n  padding: 24px 0 8px 0;\n`;\n\nconst CssCartB = styled.div`\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  bottom: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  z-index: 10;\n  padding: 24px 0 24px 0;\n`;\n\nexport const CssSubtotal = styled.div`\n  display: flex;\n  padding: 0 24px 0 24px;\n  font-weight: bold;\n`;\n\nexport default withRouter(Cart);\n","import axios from \"axios\";\n\nconst CancelToken = axios.CancelToken;\nlet cancel;\n\nexport const getEntitlement = (projectId, loginToken) => {\n  cancel && cancel();\n  let opts = {\n    url:\n    `https://store.xsolla.com/api/v2/projects/entitlement`,\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(function executor(c) {\n      cancel = c;\n    })\n  };\n\n  return axios(opts)\n    .then(function(response) {\n      return response.data;\n    });\n};\n\nexport const redeem = (projectId, loginToken, redeemCode, sku) => {\n  cancel && cancel();\n\n  let opts = {\n    url:\n        `https://store.xsolla.com/api/v1/game_delivery/xsolla_login/redeem_key`,\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: {\n      project_id: projectId,\n      digital_content_sku: sku,\n      language: \"en\",\n      key: redeemCode\n    },\n    cancelToken: new CancelToken(function executor(c) {\n      cancel = c;\n    }),\n  };\n\n  return axios(opts);\n};\n","import React, {PureComponent} from \"react\";\n\nimport './ServerPurchase.css';\nimport Product from \"../../components/Product\";\nimport {CssCartList, CssSubtotal} from \"../../components/Cart\";\nimport {getFormattedCurrency} from \"../../components/formatCurrency\";\nimport Button from \"@material-ui/core/Button\";\nimport {purchaseItems} from \"./ServerPurchaseLoader\";\nimport Alert from \"@material-ui/core/Snackbar\";\n\nexport class ServerPurchase extends PureComponent {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showToast: false,\n            statusToast: 'processing',\n            operations: null\n        }\n    }\n\n    calculateSubtotal = cart => {\n        let subtotal = 0;\n        cart.forEach(function (element) {\n            subtotal += element.price.amount * element.quantity;\n        });\n        return Math.round(subtotal * 100) / 100;\n    };\n\n    generateUUID() {\n        return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n        );\n    }\n\n    setShowToast(isVisible) {\n        this.setState({showToast: isVisible});\n    }\n\n    purchase() {\n        let {cart} = this.props;\n\n        const body = {\n            type: \"purchase\",\n            user: \"d342dad2-9d59-11e9-a384-42010aa8003f\",\n            platform: \"playstation_network\",\n            purchase: {\n                amount: cart.price.amount,\n                currency: cart.price.currency,\n                external_purchase_id: this.generateUUID(),\n                external_purchase_date: (new Date()).toISOString()\n            },\n            items: cart.items.map((cartItem) => {\n                return {\n                    sku: cartItem.sku,\n                    quantity: cartItem.quantity\n                }\n            })\n        };\n        this.setState({showToast: true, statusToast: 'processing', operationDetails: null});\n        purchaseItems(body)\n            .then(response => {\n                this.setState({\n                    showToast: true,\n                    statusToast: 'complete',\n                    operations: response.operations\n                });\n            })\n            .catch(() => {\n            });\n    }\n\n    render() {\n        const {cart, logToken, changeItemQuantityInCart, isFetching} = this.props;\n        const {operations, showToast, statusToast} = this.state;\n\n        return (\n            <div>\n                <div className=\"server-purchase__alert\">\n                    <Alert onClose={(e) => this.setShowToast(false)} open={showToast}\n                           variant={statusToast === 'processing' ? \"primary\" : \"success\"} dismissible>\n                        <Alert.Heading>{statusToast === 'processing' ? 'Operation is processing' : 'Operation complete!'}</Alert.Heading>\n                        {\n                            operations && operations.length ?\n                                operations.map(\n                                    (operation) => {\n                                        return operation.items.map(\n                                            (item, index) => {\n                                                return (\n                                                    <div key={index}>\n                                                        <div>Item: <b>{item.sku}</b></div>\n                                                        <div>Quantity: <b>{item.quantity === null ? 0 : item.quantity}</b>\n                                                        </div>\n                                                    </div>\n                                                )\n                                            }\n                                        )\n                                    })\n                                :\n                                ''\n                        }\n                    </Alert>\n                </div>\n                <div className=\"server-purchase\">\n                    <CssCartList>\n                        {cart && cart.items.map((oneCartItem, i) => {\n                            return (\n                                <div key={`cartitem${i}`}>\n                                    <Product\n                                        product={oneCartItem}\n                                        key={oneCartItem.sku}\n                                        order={i}\n                                        initClass=\"initialFlow1\"\n                                        sku={oneCartItem.sku}\n                                        title={oneCartItem.name}\n                                        description={oneCartItem.description}\n                                        price={oneCartItem.price.amount}\n                                        image_url={oneCartItem.image_url}\n                                        currency={oneCartItem.price.currency}\n                                        cardType=\"cart\"\n                                        cartId={cart.cartId}\n                                        logToken={logToken}\n                                        changeItemQuantityInCart={changeItemQuantityInCart}\n                                        quantity={oneCartItem.quantity}\n                                    />\n                                </div>\n                            );\n                        })}\n                        {cart && cart.items.length <= 0 && <div>Oops, you have empty cart!</div>}\n                    </CssCartList>\n                    <div className=\"\"/>\n                    {cart && cart.items.length > 0 && (\n                        <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n                            <CssSubtotal style={{paddingTop: \"7px\"}}>\n                                Subtotal:\n                                <div\n                                    style={{\n                                        minWidth: 80,\n                                        textAlign: \"right\"\n                                    }}\n                                >\n                                    {isFetching &&\n                                    getFormattedCurrency(\n                                        this.calculateSubtotal(cart.items),\n                                        cart.items[0].price.currency\n                                    ).formattedCurrency}\n                                    {!isFetching &&\n                                    getFormattedCurrency(\n                                        cart.price.amount,\n                                        cart.price.currency\n                                    ).formattedCurrency}\n                                </div>\n                            </CssSubtotal>\n                            <Button\n                                variant=\"contained\"\n                                onClick={() => {\n                                    this.purchase(cart)\n                                }}\n                            >\n                                Grant purchase\n                            </Button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n","import axios from \"axios\";\n\n\nexport const purchaseItems = (data) => {\n    let opts = {\n        url:\n            `https://livedemo.xsolla.com/store-demo/api/index.php`,\n        method: \"POST\",\n        data: data\n    }\n\n    return axios(opts)\n        .then(function(response) {\n            return response.data;\n        });\n}\n","import React, {Component} from \"react\";\n\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nimport './EntitlementItem.css';\nimport Button from \"@material-ui/core/Button\";\n\nexport class EntitlementItem extends Component {\n  constructor() {\n    super();\n    this.state = {\n      expanded: false,\n      cardShown: false\n    }\n  }\n\n  componentDidMount() {\n    const {\n      order\n    } = this.props;\n\n    if (!this.state.cardShown) {\n      setTimeout(() => {\n        this.setState({\n          cardShown: true\n        });\n      }, order * 100);\n    }\n  }\n\n  render() {\n    const {\n      initClass,\n      imageUrl,\n      title,\n      description\n    } = this.props;\n\n    return (\n      <div className={`entitlement-item ${!this.state.cardShown ? initClass : \"\"}`}>\n        <div className=\"entitlement-item-card\">\n          <div\n            className=\"entitlement-item-card-media\"\n            style={{\n              backgroundImage: `url(${imageUrl})`\n            }}\n          />\n          <div className=\"entitlement-item-card-content\">\n            <div className=\"entitlement-item-card-content-title\">{title}</div>\n            <div className=\"entitlement-item-card-content-description\">{description}</div>\n          </div>\n          <Collapse in={this.state.expanded} timeout=\"auto\" unmountOnExit>\n            <CardContent>{description}</CardContent>\n          </Collapse>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, {PureComponent} from \"react\";\n\nimport {EntitlementItem} from './EntitlementItem';\nimport {getEntitlement, redeem} from './EntitlementLoader';\nimport {init} from 'store-js-sdk/src/init';\n\nimport './EntitlementList.css';\nimport './EntitlementRedeem.css';\nimport Button from \"@material-ui/core/Button\";\nimport {CircularProgress} from \"@material-ui/core\";\n\nexport class EntitlementList extends PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            code: '',\n            sku: '',\n            hasRedeemError: false,\n            isFetching: false\n        };\n\n        this.handleChangeCode = this.handleChangeCode.bind(this);\n        this.handleChangeSku = this.handleChangeSku.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.logToken && this.props.entitlementItems.length === 0) {\n            this.updateEntitlement();\n            this.props.setStateFrom(\"isFetching\", true);\n        }\n    }\n\n    componentWillUnmount() {\n        if (null !== this.props.entitlementItems) {\n            this.props.setEntitlementItems([]);\n        }\n    }\n\n    updateEntitlement() {\n        init({\n            projectId: window.xProjectId,\n            version: 'v2'\n        });\n\n        this.props.setStateFrom(\"isFetching\", true);\n\n        getEntitlement(window.xProjectId, this.props.logToken)\n            .then(items => {\n                this.props.setEntitlementItems(items);\n            })\n            .catch(() => {\n                this.props.setEntitlementItems([]);\n            });\n    }\n\n    handleChangeCode(event) {\n        this.setState({code: event.target.value});\n    }\n\n    handleChangeSku(event) {\n        this.setState({sku: event.target.value});\n    }\n\n    handleSubmit(event) {\n        this.setState({\n            ...this.state,\n            isFetching: true\n        });\n\n        redeem(window.xProjectId, this.props.logToken, this.state.code, this.state.sku)\n            .then((e, k) => {\n                this.updateEntitlement();\n                this.setState({\n                    ...this.state,\n                    hasRedeemError: false,\n                    isFetching: false\n                });\n            })\n            .catch(() => {\n                console.log('error');\n                this.setState({\n                    ...this.state,\n                    hasRedeemError: true,\n                    isFetching: false\n                });\n            });\n\n        event.preventDefault();\n    }\n\n    render() {\n        const {entitlementItems} = this.props;\n\n        return (\n            <div className=\"\">\n                <form className=\"entitlement-redeem-form\"\n                      onSubmit={this.handleSubmit}\n                >\n                    <input\n                        className=\"entitlement-redeem-input\"\n                        type=\"text\"\n                        size=\"40\"\n                        placeholder={\"Enter your code\"}\n                        onChange={this.handleChangeCode} value={this.state.code}\n                    />\n                    <input\n                        className=\"entitlement-redeem-input\"\n                        type=\"text\"\n                        size=\"40\"\n                        placeholder={\"Enter sku of your game\"}\n                        onChange={this.handleChangeSku} value={this.state.sku}\n                    />\n                    {\n                        this.state.hasRedeemError && !this.state.isFetching && <span className=\"entitlement-redeem-error\">Wrong code</span>\n                    }\n                    {\n                        this.state.isFetching &&\n                        <div className=\"entitlement-redeem-loader\">\n                            <CircularProgress />\n                        </div>\n                    }\n                    <Button\n                        type=\"submit\"\n                        className=\"entitlement-redeem-button\"\n                        variant=\"contained\"\n                    >\n                        Redeem Code\n                    </Button>\n                </form>\n                <div className=\"entitlement-list\">\n                    {\n                        entitlementItems && entitlementItems.length\n                            ?\n                            entitlementItems\n                                .map(\n                                    (oneProduct, key) => {\n                                        return (\n                                            <EntitlementItem\n                                                key={oneProduct.digital_content_sku}\n                                                order={key}\n                                                initClass=\"initialFlow1\"\n                                                title={oneProduct.name}\n                                                description={oneProduct.description}\n                                                imageUrl={oneProduct.image_url}\n                                            />\n                                        );\n                                    }\n                                )\n                            :\n                            <div>\n                                Oops, you have no games yet!\n                            </div>\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n","const size = {\n  mobileS: '320px',\n  mobileM: '375px',\n  mobileL: '425px',\n  tablet: '768px',\n  laptop: '1024px',\n  laptopL: '1440px',\n  desktop: '1920px',\n  retina: '2560px'\n}\n\nexport const device = {\n  mobileS: `(max-width: ${size.mobileS})`,\n  mobileM: `(max-width: ${size.mobileM})`,\n  mobileL: `(max-width: ${size.mobileL})`,\n  tablet: `(max-width: ${size.tablet})`,\n  laptop: `(max-width: ${size.laptop})`,\n  laptopL: `(max-width: ${size.laptopL})`,\n  desktop: `(max-width: ${size.desktop})`,\n  retina: `(max-width: ${size.retina})`\n};","import React from 'react';\nimport styled from 'styled-components';\nimport IconButton from '@material-ui/core/IconButton';\nimport MUIDeleteIcon from \"@material-ui/icons/Delete\";\nimport MUIIncrementIcon from \"@material-ui/icons/AddBox\";\nimport MUIDecrementIcon from \"@material-ui/icons/IndeterminateCheckBox\";\n\nimport { device } from '../../styles/devices';\n\nconst CartItemComponent = ({ item, changeItemQuantity }) => {\n  const calcPrice = (price, quantity) => Math.round(price * quantity * 100) / 100;\n  const handleQuantityDec = () => changeItemQuantity(item, item.quantity - 1);\n  const handleQuantityInc = () => changeItemQuantity(item, item.quantity + 1);\n  \n  return (\n    <CartItem>\n      <CartItemImage image={item.image_url} />\n      <CartItemBody>\n        <ItemName>{item.name}</ItemName>\n        <ItemPrice>\n          <CartItemTotal>\n            {item.price.currency} {calcPrice(item.price.amount, item.quantity)}\n          </CartItemTotal>\n          {item.quantity > 1 && (\n            <CartItemPriceForOne>\n              {item.price.currency} {calcPrice(item.price.amount, 1)} for one item\n            </CartItemPriceForOne>\n          )}\n        </ItemPrice>\n      </CartItemBody>\n      <PriceInfo>\n        <QuantityActions>\n          {item.quantity > 1\n            ? (\n              <IconButton color=\"inherit\" onClick={handleQuantityDec}>\n                <DecrementIcon />\n              </IconButton>\n            ) : (\n              <IconButton color=\"inherit\" onClick={handleQuantityDec}>\n                <DeleteIcon />\n              </IconButton>\n            )\n          }\n          <ItemQuantity>{item.quantity}</ItemQuantity>\n          <IconButton color=\"inherit\" onClick={handleQuantityInc}>\n            <IncrementIcon />\n          </IconButton>\n        </QuantityActions>\n      </PriceInfo>\n    </CartItem>\n  );\n}\n\nconst CartItem = styled.div`\n  display: grid;\n  grid-template-columns: 0.7fr 1.3fr 1fr;\n  overflow: hidden;\n  height: 130px;\n\n  @media ${device.mobileL} {\n    height: 185px;\n    grid-template-columns: 0.9fr 1.1fr;\n    grid-template-rows: 120px 1fr;\n  }\n`;\n\nconst CartItemImage = styled.div`\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CartItemBody = styled.div`  \n  padding: 10px;\n`;\n\nconst ItemName = styled.div`\n  font-weight: bolder;\n  margin-bottom: 5px;\n`;\n\nconst QuantityActions = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n`;\n\nconst ItemQuantity = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n`;\n\nconst PriceInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  @media ${device.mobileL} {\n    grid-column: 2 / 2;\n  }\n`;\n\nconst ItemPrice = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  @media ${device.mobileL} {\n    flex-grow: 1;\n  }\n`;\n\nconst CartItemTotal = styled.div`\n  color: ${props => props.theme.colorAccent};\n  font-weight: 600;\n`;\n\nconst CartItemPriceForOne = styled.div`\n  font-size: 0.8em;\n  opacity: 0.3;\n`;\n\nconst DeleteIcon = styled(MUIDeleteIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\nconst DecrementIcon = styled(MUIDecrementIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\nconst IncrementIcon = styled(MUIIncrementIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\n\nexport { CartItemComponent as CartItem };","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Colorer from 'color';\nimport IconClose from '@material-ui/icons/Close';\nimport Button from '@material-ui/core/Button';\nimport MUIModal from '@material-ui/core/Modal';\nimport IconButton from '@material-ui/core/IconButton';\nimport Grow from '@material-ui/core/Grow';\nimport Backdrop from '@material-ui/core/Backdrop';\n\nimport { ProductContext } from '../../context';\nimport { getFormattedCurrency } from '../../components/formatCurrency';\nimport { getPsTokenBuyCart } from '../../components/StoreLoader';\nimport { device } from '../../styles/devices';\nimport { CartItem } from './CartItem';\n\nconst CartComponent = ({ history }) => {\n  const [buyButtonDisabled, setBuyButtonDisabled] = React.useState(false);\n  const {\n    cart,\n    hideCart,\n    logToken,\n    payStationHandler,\n    isCartShown,\n    changeItemQuantityInCart,\n  } = React.useContext(ProductContext);\n\n  const calculateSubtotal = cart => {\n    const subtotal = cart.reduce((acc, x) => acc + x.price.amount * x.quantity, 0);\n    return Math.round(subtotal * 100) / 100;\n  };\n\n  const buyAnotherPlatform = () => {\n    if (buyButtonDisabled || cart.items.length <= 0) {\n      return;\n    }\n    const path = \"/purchase\";\n    history.push(path);\n    hideCart();\n  };\n\n  const buyButtonAction = () => {\n    hideCart();\n    getPsTokenBuyCart(cart.cartId, logToken)\n      .then(response => {\n        setBuyButtonDisabled(true);\n        window.xPayStationInit(response.data.token);\n        window.XPayStationWidget.open();\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.CLOSE,\n          () => setBuyButtonDisabled(false),\n        );\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.STATUS_DONE,\n          payStationHandler\n        );\n      })\n      .catch(() => setBuyButtonDisabled(false));\n  };\n\n  return (\n    <Modal\n      open={isCartShown}\n      onClose={hideCart}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{ timeout: 250 }}\n    >\n      <Grow in={isCartShown} timeout={250}>\n        <CartContent>\n          <CartHeader>\n            <h4>Cart</h4>\n            <IconButton color=\"inherit\" onClick={hideCart}>\n              <IconClose />\n            </IconButton>\n          </CartHeader>\n          <CartList>\n            {cart.items.length > 0\n              ? cart.items.map(item => (\n                <CartItem\n                  item={item}\n                  changeItemQuantity={changeItemQuantityInCart}\n                />\n              ))\n              : <p>Empty cart</p>\n            }\n          </CartList>\n          <CartFooter>\n            {cart.items.length > 0 && (\n              <Subtotal>\n                Subtotal:\n                <Price>\n                  {\n                    getFormattedCurrency(\n                      calculateSubtotal(cart.items),\n                      cart.price.currency || cart.items[0].price.currency\n                    ).formattedCurrency\n                  }\n                </Price>\n              </Subtotal>\n            )}\n            <CartActions>\n              <Button\n                variant=\"contained\"\n                disabled={cart.items.length === 0}\n                style={{ marginRight: '7px' }}\n                onClick={buyAnotherPlatform}\n              >\n                Buy on PS4\n              </Button>\n              <Button\n                variant=\"contained\"\n                disabled={cart.items.length === 0}\n                onClick={buyButtonAction}\n              >\n                Buy on Xsolla\n              </Button>\n            </CartActions>\n          </CartFooter>\n        </CartContent>\n      </Grow>\n    </Modal>\n  );\n}\n\nconst Modal = styled(MUIModal)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst CartContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-radius: ${props => `${props.theme.borderRadius}px`};\n  background-color: ${props => props.theme.colorBg};\n  color: ${props => props.theme.colorText};\n  padding: 0 32px;\n  width: 680px;\n  max-height: 80vh;\n  outline: none;\n\n  @media ${device.tablet} {\n    padding: 0 16px;\n    max-height: none;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n`;\n\nconst CartHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: ${props => props.theme.colorBg};\n  color: ${props => props.theme.colorText};\n  border-bottom: 1px solid ${props => Colorer(props.theme.colorText).alpha(0.1).string()};\n  z-index: 10;\n  padding: 24px 0 8px 0;\n`;\n\nexport const CartList = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  flex-grow: 1;\n  padding: 16px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  background-color: ${props => props.theme.colorBg};\n  border-top: 1px solid ${Colorer(props => props.theme.colorText).alpha(0.1).string()};\n  padding: 24px 0 24px 0;\n`;\n\nconst CartActions = styled.div`\n  display: flex;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n  }\n`;\n\nconst Subtotal = styled.div`\n  display: flex;\n  font-weight: bold;\n  margin-right: 10px;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n    margin-bottom: 15px;\n    margin-right: 0;\n  }\n`;\n\nconst Price = styled.div`\n  min-width: 80px;\n  text-align: right;\n`;\n\nexport const Cart = withRouter(CartComponent);\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const VCItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n}) => {\n\n  const handleItemAdd = () => addToCart(product);\n\n  const price = React.useMemo(() => (\n    <Currency\n      currency={product.price.currency}\n      value={Math.round(product.price.amount * 100) / 100} />\n  ), [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={<ShoppingCart />}\n      onAction={handleItemAdd}\n    />\n  )\n});\n","import axios from 'axios';\n\nexport const loadVirtualCurrencies = async (projectID, token) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_currency/package`;\n  const response = await axios.get(URL, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n\n  return response.data.items;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { Preloader } from '../../components/Preloader';\nimport { ProductContext } from '../../context';\nimport { VCItem } from './VCItem';\nimport { loadVirtualCurrencies } from './VCLoader';\n\nconst VCList = () => {\n  const {\n    logToken,\n    projectId,\n    addToCart,\n    setStateFrom,\n    virtualCurrencies,\n    areVirtualCurrenciesFetching,\n    isCartProcessing,\n    setVirtualCurrencies,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    if (logToken && virtualCurrencies.length === 0) {\n      setStateFrom('areVirtualCurrenciesFetching', true);\n      loadVirtualCurrencies(projectId, logToken)\n        .then(data => {\n          setVirtualCurrencies(data);\n          setStateFrom('areVirtualCurrenciesFetching', false);\n        })\n        .catch(error => {\n          enqueueSnackbar(error.message, { variant: 'error' });\n          setStateFrom('areVirtualCurrenciesFetching', false);\n        });\n    }\n  }, [virtualCurrencies]);\n\n  const content = React.useMemo(() => virtualCurrencies.length > 0 && (\n    <Content>\n      {virtualCurrencies.map((currency, index) => (\n        <VCItem\n          order={index}\n          key={currency.sku}\n          product={currency}\n          isLoading={isCartProcessing}\n          addToCart={addToCart}\n        />\n      ))}\n    </Content>\n  ), [virtualCurrencies, isCartProcessing]);\n\n  return (\n    <Body>\n      {areVirtualCurrenciesFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  color: ${props => props.theme.colorText};\n  position: relative;\n  background-color: transparent;\n  z-index: 1;\n  height: 100%;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${props => `repeat(auto-fit, minmax(\n    ${props.theme.cardWidth}, \n    ${props.theme.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nexport { VCList };\n","const routes = {\n  items: '/',\n  currencies: '/crystals',\n  physical: '/physical',\n  inventory: '/inventory',\n  entitlement: '/entitlement',\n  manage: '/manage',\n  purchase: '/purchase',\n}\n\nconst navItems = [\n  {\n    route: routes.items,\n    label: 'Items'\n  },\n  {\n    route: routes.currencies,\n    label: 'Currencies',\n  },\n  {\n    route: routes.physical,\n    label: 'Merchandise',\n  },\n  {\n    route: routes.inventory,\n    label: 'Inventory',\n  },\n  {\n    route: routes.entitlement,\n    label: 'Entitlement',\n  },\n  {\n    route: routes.manage,\n    label: 'Manage',\n  },\n  {\n    route: routes.purchase,\n    label: 'Server purchase',\n  },\n];\n\nexport const getMenuItems = items => navItems\n  .filter(x => items.includes(x.route))\n  .sort((a, b) => items.indexOf(a.route) - items.indexOf(b.route));\n\nexport { routes, navItems };","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { ProductConsumer } from \"../context\";\nimport Cookie, { parseJwt } from \"./Cookie\";\n\nexport default class XLogin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shown: true,\n      logToken: null,\n      psToken: null\n    };\n  }\n\n  unauthorizedFlow = () => {\n    this.setState({ logToken: null });\n    this.setState({ shown: true });\n  };\n\n  authorizedFlow = tkn => {\n    this.setState({ logToken: tkn, shown: false });\n    this.user = parseJwt(tkn);\n    this.setStateFrom(\"user\", this.user);\n    this.createCart();\n  };\n\n  render() {\n    return (\n      <ProductConsumer>\n          {valueFromContext => {\n            this.setStateFrom = valueFromContext.setStateFrom;\n            this.createCart = valueFromContext.createCart;\n\n            return (\n              <div>\n                <CssXpop\n                  style={{ display: this.state.shown ? \"flex\" : \"none\" }}\n                >\n                  <CssXpopB>\n                    <CssLoginInfo>\n                      Current project: <b>{window.xProjectId}</b>\n                    </CssLoginInfo>\n\n                    <CssLoginPop>\n                      <div id=\"xl_auth\"></div>\n                    </CssLoginPop>\n\n                    <CssLoginInfo>\n                      {myProjects.map((onePr, i) => {\n                        let pr = onePr[\"project_id\"];\n                        let login = onePr[\"login_id\"];\n                        let url = `https://xsolla.github.io/store-demo/#/`;\n                        let urlFull = `${url}?project_id=${pr}&login_id=${login}`;\n                        return (\n                          <div key={pr + i} style={{ marginBottom: \"1em\" }}>\n                            <div style={{ fontSize: \"0.4em\" }}>\n                              <a href={urlFull}>\n                                {pr}: {onePr.projectName}\n                              </a>\n                            </div>\n                          </div>\n                        );\n                      })}\n                      <p>\n                        Open any Xsolla Store using GET parameters <br />\n                        <b>project_id</b> and <b>login_id</b> (login must point\n                        back to https://xsolla.github.io/store-demo/#/)\n                      </p>\n                    </CssLoginInfo>\n                  </CssXpopB>\n                  <CssXpopZ />\n                </CssXpop>\n              </div>\n            );\n          }}\n        </ProductConsumer>\n    );\n  }\n\n  componentDidMount() {\n    window.XloginInit();\n    let cke = Cookie();\n    cke ? this.authorizedFlow(cke) : this.unauthorizedFlow();\n  }\n}\n\nconst CssXpop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  min-height: 100%;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  overflow-y: scroll;\n  padding: 40px 0;\n`;\nconst CssXpopB = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  min-height: 100%;\n  z-index: 100;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n`;\nconst CssXpopZ = styled.div`\n  position: fixed;\n  z-index: 99;\n  background: rgba(0, 0, 0, 0.8);\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n`;\n\nconst CssLoginInfo = styled.div`\n  padding: 20px 70px;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n  flex-grow: 1;\n  font-size: 22px;\n  width: 600px;\n  & a {\n    /* font-family: 'PS Mono', Courier, monospace; */\n    text-decoration: underline;\n    font-size: 28px;\n    line-height: 0px;\n  }\n`;\nconst CssLoginPop = styled.div`\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  text-align: center;\n  padding: 36px;\n  overflow: hidden;\n  margin: 0 70px;\n  border-radius: 8px;\n`;\n\nconst myProjects = [\n  {\n    projectName: \"Xsolla Store Demo\",\n    project_id: 47278,\n    login_id: \"fb2d7c69-bf25-11e9-9244-42010aa80004\"\n  }\n];\n","import React from 'react';\nimport { NavLink, withRouter } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport MUIMenu from '@material-ui/core/Menu';\nimport Hidden from '@material-ui/core/Hidden';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\nimport MUIIconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Button from '@material-ui/core/Button';\nimport CartIcon from '@material-ui/icons/ShoppingCart';\nimport LogoutIcon from '@material-ui/icons/ExitToAppOutlined';\n\nimport { routes, getMenuItems } from '../utils/routes';\nimport { device } from '../styles/devices';\nimport { Currency } from '../components/Currency';\nimport { ProductContext } from '../context';\nimport { eraseCookie } from './Cookie';\nimport XLogin from './XLogin.js';\n\nconst Navbar = ({ location }) => {\n  const {\n    logToken,\n    user,\n    userBalanceVirtualCurrency,\n    projectId,\n    showCart,\n    setSideMenuVisibility,\n    isSideMenuShown,\n  } = React.useContext(ProductContext);\n\n  const [menuAnchor, setMenuAnchor] = React.useState(null);\n  const handleMenuClose = () => setMenuAnchor(null);\n  const handleMenuOpen = event => setMenuAnchor(event.currentTarget);\n\n  const toggleSideMenu = () => setSideMenuVisibility(!isSideMenuShown);\n\n  const logOutHandler = () => {\n    eraseCookie(\"xsolla_login_token\", null);\n    eraseCookie(\"xsolla_last_click_id\", null);\n    window.location.reload();\n  };\n\n  const isLogged = logToken && user;\n  const generalMenuItems = getMenuItems([\n    routes.items,\n    routes.currencies,\n    ...projectId === 44056 ? [routes.physical] : [],\n  ])\n\n  const userMenuItems = getMenuItems([\n    routes.inventory,\n    routes.entitlement,\n    routes.manage,\n    routes.purchase,\n  ]);\n\n  return (\n    <Header>\n      <Hidden mdDown>\n        <Tabs value={location.pathname} component=\"nav\">\n          {generalMenuItems.map(x => (\n            <Tab\n              key={x.route}\n              component={NavLink}\n              label={x.label}\n              value={x.route}\n              to={x.route}\n            />\n          ))}\n        </Tabs>\n      </Hidden>\n\n      <Hidden lgUp>\n        <MenuButton onClick={toggleSideMenu}>\n          <MenuIcon />\n        </MenuButton>\n      </Hidden>\n\n      {isLogged && (\n        <LoginPanel>\n          {userBalanceVirtualCurrency.map(vc => (\n            <VCCurrency key={vc.sku}>\n              <Currency image={vc.image_url} value={vc.amount} />\n            </VCCurrency>\n          ))}\n\n          <Hidden mdDown>\n            <UserMail onClick={handleMenuOpen}>{user.email}</UserMail>\n          </Hidden>\n        </LoginPanel>\n      )}\n\n      <XLogin />\n\n      {!logToken && <LoginButton>Log In</LoginButton>}\n      {isLogged && projectId !== 44056 && (\n       <Button\n          variant=\"outlined\"\n          color=\"secondary\"\n          size=\"small\"\n          onClick={logOutHandler}\n        >\n          <LogoutIcon size=\"inherit\" />\n        </Button>\n      )}\n\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        size=\"small\"\n        onClick={showCart}\n      >\n        <CartIcon size=\"inherit\" />\n        <Hidden xsDown>\n          cart\n        </Hidden>\n      </Button>\n\n      <Menu\n        anchorEl={menuAnchor}\n        getContentAnchorEl={null}\n        transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        open={Boolean(menuAnchor)}\n        onClose={handleMenuClose}\n      >\n        {userMenuItems.map(x => (\n          <Link\n            key={x.route}\n            onClick={handleMenuClose}\n            activeClassName=\"active\"\n            to={x.route}\n          >\n            {x.label}\n          </Link>\n        ))}\n      </Menu>\n    </Header>\n  );\n}\n\nconst Menu = styled(MUIMenu)`\n  .MuiMenu-list {\n    background-color: ${props => props.theme.colorBg};\n  }\n`;\n\nconst Tabs = styled(MUITabs)`\n  &.MuiTabs-root {\n    height: 100%\n  }\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    text-transform: uppercase;\n    font-family: ${props => props.theme.fontFamily};\n    font-size: 1.4rem;\n    font-weight: 700;\n    line-height: 1.4rem;\n    min-width: 50px;\n  }\n`;\n\nconst Link = styled(NavLink)`\n  display: flex;\n  padding: 15px 20px;\n  min-width: 200px;\n  align-items: center;\n  text-transform: uppercase;\n  text-decoration: none;\n  font-family: ${props => props.theme.fontFamily};\n  font-size: 1.2rem;\n  font-weight: 700;\n  line-height: 1.2rem;\n  height: 100%;\n  color: #d6e0e7;\n  border: none;\n\n  &:hover {\n    color: #ff005b;\n    text-decoration: none;\n  }\n\n  &.active {\n    color: #ff005b;\n  }\n`;\n\nconst MenuButton = styled(MUIIconButton)`\n  &.MuiIconButton-root {\n    color: ${props => props.theme.colorAccentText};\n  }\n`;\n\nconst VCCurrency = styled.div`\n  margin-right: 10px;\n`;\n\nconst LoginPanel = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  flex-grow: 1;\n\n  @media ${device.mobileL} {\n    justify-content: center;\n  }\n`;\n\nconst LoginButton = styled.div`\n  display: flex;\n  flex-direction: row;\n  font-size: 0.8rem;\n  line-height: 2em;\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  font-family: 'Roboto';\n  color: black;\n  border-radius: 4px;\n  padding: 0 0.6rem;\n  cursor: pointer;\n`;\n\nconst UserMail = styled.div`\n  cursor: pointer;\n  font-family: 'Roboto';\n  text-transform: uppercase;\n  color: #ff005b;\n  margin: 0 1rem;\n`;\n\nconst Header = styled.header`\n  display: flex;\n  align-items: center;\n  height: 50px;\n  padding: 0 15px;\n  font-family: 'Helvetica Neue', 'Roboto', Arial, Helvetica, sans-serif;\n  color: ${props => props.theme.colorAccentText};\n  background-color: ${props => props.theme.colorBg};\n`;\n\nexport default withRouter(Navbar);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { NavLink, withRouter } from 'react-router-dom';\nimport Drawer from '@material-ui/core/SwipeableDrawer';\nimport MUIIconButton from '@material-ui/core/IconButton';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport MUIDivider from '@material-ui/core/Divider';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\nimport LogoutIcon from '@material-ui/icons/ExitToAppOutlined';\n\nimport { ProductContext } from '../context';\nimport { routes, getMenuItems } from '../utils/routes';\nimport { eraseCookie } from './Cookie';\n\nconst MobileNavbarComponent = ({ location }) => {\n  const {\n    isSideMenuShown,\n    user,\n    logToken,\n    projectId,\n    setSideMenuVisibility,\n  } = React.useContext(ProductContext);\n\n  const closeMenu = () => setSideMenuVisibility(false);\n  const openMenu = () => setSideMenuVisibility(true);\n\n  const logOutHandler = () => {\n    eraseCookie(\"xsolla_login_token\", null);\n    eraseCookie(\"xsolla_last_click_id\", null);\n    window.location.reload();\n  };\n\n  React.useEffect(() => closeMenu, []);\n\n  const isLogged = logToken && user;\n\n  const generalMenuItems = React.useMemo(() => getMenuItems([\n    routes.items,\n    routes.currencies,\n    ...projectId === 44056 ? [routes.physical] : [],\n  ]), [projectId]);\n\n  const userMenuItems = React.useMemo(() => getMenuItems([\n    routes.inventory,\n    routes.entitlement,\n    routes.manage,\n    routes.purchase,\n  ]), []);\n\n  return (\n    <Drawer\n      open={isSideMenuShown}\n      anchor=\"left\"\n      onOpen={openMenu}\n      onClose={closeMenu}\n    >\n      <Content>\n        <Header>\n        {isLogged && projectId !== 44056 && (\n          <IconButton onClick={logOutHandler}>\n            <LogoutIcon size=\"inherit\" />\n          </IconButton>\n          )}\n          <UserMail>{user.email}</UserMail>\n          <IconButton onClick={closeMenu}>\n            <ChevronLeftIcon />\n          </IconButton>\n        </Header>\n        <Divider />\n          <Tabs\n            value={location.pathname}\n            onChange={closeMenu}\n            component=\"nav\"\n            variant=\"scrollable\"\n            orientation=\"vertical\"\n          \n          >\n          {generalMenuItems.map(x => (\n            <Tab\n              component={NavLink}\n              label={x.label}\n              value={x.route}\n              to={x.route}\n            />\n          ))}\n          <MenuDivider />\n          {userMenuItems.map(x => (\n            <Tab\n              component={NavLink}\n              label={x.label}\n              value={x.route}\n              to={x.route}\n            />\n          ))}\n          </Tabs>\n      </Content>\n    </Drawer>\n  );\n};\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  height: 100%;\n  background-color: ${props => props.theme.colorBg};\n`;\n\nconst Divider = styled(MUIDivider)`\n  &.MuiDivider-root {\n    background-color: ${props => props.theme.colorAccentText};\n    opacity: 0.1;\n    margin-bottom: 5px;\n  }\n`;\n\nconst MenuDivider = styled(Divider)`\n  &.MuiDivider-root {\n    margin: 5px 0;\n  }\n`;\n\nconst IconButton = styled(MUIIconButton)`\n  &.MuiIconButton-root {\n    color: ${props => props.theme.colorAccentText};\n  }\n`;\n\nconst Tabs = styled(MUITabs)`\n  color: ${props => props.theme.colorAccent};\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    color: ${props => props.theme.colorAccentText};\n    padding: 15px;\n    font-family: ${props => props.theme.fontFamily};\n    font-size: 1.3rem;\n    line-height: 1.3rem;\n    font-weight: 700;\n  }\n\n  & .MuiTab-wrapper {\n    align-items: flex-start;\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 49px;\n`;\n\nconst UserMail = styled.div`\n  flex-grow: 1;\n  padding: 0 15px;\n  text-transform: uppercase;\n  font-family: Roboto;\n  color: ${props => props.theme.colorAccent};\n`;\n\nexport const MobileNavbar = withRouter(MobileNavbarComponent);\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Hidden from '@material-ui/core/Hidden';\n\nimport { InventoryList } from './features/inventory/InventoryList';\nimport { PhysicalList } from './features/physical/PhysicalList';\nimport { ManageInventory } from './features/manage/ManageInventory';\nimport { VirtualList } from './features/virtual/VirtualList';\nimport { ServerPurchase } from './features/serverPurchase/ServerPurchase';\nimport { EntitlementList } from './features/entitlement/EntitlementList';\nimport { Cart } from './features/cart/Cart';\nimport { VCList } from './features/virtualCurrenciesList/VCList';\nimport { routes } from './utils/routes';\nimport Navbar from './components/Navbar';\nimport { MobileNavbar } from './components/MobileNavbar';\nimport { ProductContext } from './context';\n\nconst App = () => {\n  const valueFromContext = React.useContext(ProductContext);\n\n  return (\n    <>\n      <Navbar />\n      <Hidden lgUp>\n        <MobileNavbar />\n      </Hidden>\n      <Cart />\n      <Switch>\n        <Route path={routes.items} exact component={VirtualList} />\n        <Route path={routes.currencies} component={VCList} />\n        <Route path={routes.physical} component={PhysicalList} />\n        <Route path={routes.inventory} component={InventoryList} />\n        <Route path={routes.manage} component={ManageInventory} />\n        <Route path={routes.entitlement} render={() => <EntitlementList {...valueFromContext} />} />\n        <Route path={routes.purchase} render={() => <ServerPurchase {...valueFromContext} />} />\n      </Switch>\n\n      <Background>\n        <BackgroundOverlay />\n      </Background>\n    </>\n  );\n};\n\nconst Background = styled.div`\n  background-image: url(${props => props.theme.backgroundUrl});\n  z-index: -1;\n  background-size: cover;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n`;\n\nconst BackgroundOverlay = styled.div`\n  position: absolute;\n  background-color: ${props => props.theme.colorBg};\n  opacity: 0.8;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n`;\n\nexport default App;\n","const theme = {\n  colorText: '#D6E0E7',\n  colorAccent: '#FF005B',\n  colorAccentText: '#F6FAFF',\n  colorBg: '#011627',\n  borderRadius: 8,\n  backgroundUrl: 'https://res.cloudinary.com/maiik/image/upload/v1549624607/Xsolla/HomePage_Hero_Illustration_1440_oabqmk.jpg',\n  cardWidth: '300px',\n  boxShadow: '0 5px 12px 0px rgba(0,0,0,0.2)',\n  padding: '8px',\n  transitionTime: '0.3s',\n  transitionEasing: 'ease-in-out',\n  transition: `all 0.3s ease-in-out`,\n  transitionStyle: '0.3s ease-in-out',\n  fontFamily: '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif'\n};\n\nexport { theme };\n","import React from 'react';\nimport { SnackbarProvider } from 'notistack';\nimport { ThemeProvider } from 'styled-components';\nimport { useMediaQuery } from '@material-ui/core';\nimport { HashRouter } from 'react-router-dom';\n\nimport ProductProvider from './context';\nimport { theme } from './styles/theme';\nimport { device } from './styles/devices';\n\nconst notificationPosition = {\n  vertical: 'bottom',\n  horizontal: 'right',\n};\n\nconst Provider = ({ children }) => {\n  const isMobile = useMediaQuery(`@media ${device.mobileL}`);\n\n  return (\n    <SnackbarProvider\n      anchorOrigin={notificationPosition}\n      dense={isMobile}\n      maxSnack={3}\n      preventDuplicate={isMobile}\n    >\n      <ThemeProvider theme={theme}>\n        <ProductProvider projectId={window.xProjectId}>\n          <HashRouter basename='/'>\n            {children}\n          </HashRouter>\n        </ProductProvider>\n      </ThemeProvider>\n    </SnackbarProvider>\n  )\n};\n\nexport default Provider;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport Provider from './provider';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <Provider>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}