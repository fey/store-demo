(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,n){e.exports=n(183)},132:function(e,t,n){},170:function(e,t,n){},173:function(e,t,n){},176:function(e,t,n){},178:function(e,t,n){},180:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(12),o=n.n(i),c=n(238),u=(n(132),n(6)),l=n(242),s=n(182),m=n(5),d=n(236),p=n(217);function h(){var e=Object(u.a)(["\n  z-index: 9;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n"]);return h=function(){return e},e}var f=function(){return a.a.createElement(g,null,a.a.createElement(p.a,{color:"secondary"}))},g=m.c.div(h()),v=n(39),y=n(24),b=n(63),x=n(22),E=n(23),w=n(30),j=n(29),C=n(31),k=function(){var e;return window.location.search&&(e=function(e){e=e.split("+").join(" ");for(var t,n={},r=/[?&]?([^=]+)=([^&]*)/g;t=r.exec(e);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return n}(window.location.search).token),e?(!function(e,t){var n=new Date;n.setTime(n.getTime()+864e5);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}("xsolla_login_token",e),window.history.pushState("","",document.location.pathname)):e=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var a=n[r];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}("xsolla_login_token"),e&&"undefined"!==e?e:null};function I(){return 44056===window.xProjectId?"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE5NjIyMzQwNDgsImlzcyI6Imh0dHBzOi8vbG9naW4ueHNvbGxhLmNvbSIsImlhdCI6MTU2MjE0NzY0OCwidXNlcm5hbWUiOiJ4c29sbGEiLCJ4c29sbGFfbG9naW5fYWNjZXNzX2tleSI6IjA2SWF2ZHpDeEVHbm5aMTlpLUc5TmMxVWFfTWFZOXhTR3ZEVEY4OFE3RnMiLCJzdWIiOiJkMzQyZGFkMi05ZDU5LTExZTktYTM4NC00MjAxMGFhODAwM2YiLCJlbWFpbCI6InN1cHBvcnRAeHNvbGxhLmNvbSIsInR5cGUiOiJ4c29sbGFfbG9naW4iLCJ4c29sbGFfbG9naW5fcHJvamVjdF9pZCI6ImU2ZGZhYWM2LTc4YTgtMTFlOS05MjQ0LTQyMDEwYWE4MDAwNCIsInB1Ymxpc2hlcl9pZCI6MTU5MjR9.GCrW42OguZbLZTaoixCZgAeNLGH2xCeJHxl8u8Xn2aI":k()}function O(e){return document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;"}var T,S=n(13),_=n.n(S),B=n(20),F=n(10),M=n.n(F),V=M.a.CancelToken;function P(e,t,n,r){var a=e.sku,i=void 0===a?"sku":a;T&&T();var o={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/cart/"+n+"/item/"+i,method:"PUT",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+r},data:JSON.stringify({quantity:t})};return M()(o).then(function(e){e.data})}function z(e,t){var n={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/payment/cart/"+e,method:"POST",headers:{Authorization:"Bearer "+t}};return M()(n).then(function(e){return e}).catch(function(e){})}function N(e,t){T&&T();var n={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/cart/"+e,method:"GET",headers:{Authorization:"Bearer "+t},cancelToken:new V(function(e){T=e})};return M()(n).then(function(e){return e}).catch(function(e){return console.error(e)})}var W=a.a.createContext(),A={colorText:"#D6E0E7",colorAccent:"#FF005B",colorAccentText:"#F6FAFF",colorBg:"#011627",borderRadius:8,backgroundUrl:"https://res.cloudinary.com/maiik/image/upload/v1549624607/Xsolla/HomePage_Hero_Illustration_1440_oabqmk.jpg",cardWidth:"300px",boxShadow:"0 5px 12px 0px rgba(0,0,0,0.2)",padding:"8px",transitionTime:"0.3s",transitionEasing:"ease-in-out",transition:"all 0.3s ease-in-out",transitionStyle:"0.3s ease-in-out",fontFamily:"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif"},G=function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a)))).state={projectId:n.props.projectId,logToken:I(),userBalanceVirtualCurrency:[],virtualItems:[],virtualItemsError:"",areVirtualItemsFetching:!1,virtualCurrencies:[],virtualCurrenciesError:"",areVirtualCurrenciesFetching:!1,physicalItems:[],physicalItemsError:"",arePhysicalItemsFetching:!1,inventoryItems:[],inventoryItemsError:"",areInventoryItemsFetching:!1,isItemConsuming:!1,cartWithItemsBuyingByVCShown:!1,cartWithItemsBuyingByVC:{items:[]},entitlementItems:[],virtualCurrencyPackages:null,currency:null,subscriptions:null,cartShown:!1,isSideMenuShown:!1,cart:{cartId:null,items:[],price:{amount:0,amount_without_discount:0,currency:""}},showCartError:!1,cartError:!1,isFetching:!1,psToken:""},n.showCart=function(){return n.setState({cartShown:!0})},n.hideCart=function(){return n.setState({cartShown:!1})},n.showCartError=function(e,t){n.setState({showCartError:!0,cartError:{title:e,message:t}}),n.getCart()},n.setSideMenuVisibility=function(e){return n.setState({isSideMenuShown:e})},n.hideCartError=function(){n.setState({showCartError:!1,cartError:null})},n.setEntitlementItems=function(e){n.setState({entitlementItems:e,isFetching:!1})},n.setInventoryItems=function(e){return n.setState({inventoryItems:e})},n.setInventoryItemsError=function(e){return n.setState({inventoryItemsError:e})},n.setPhysicalItems=function(e){return n.setState({physicalItems:e})},n.setPhysicalItemsError=function(e){return n.setState({physicalItemsError:e})},n.setVirtualItems=function(e){return n.setState({virtualItems:e})},n.setVirtualItemsError=function(e){return n.setState({virtualItemsError:e})},n.setVirtualCurrencies=function(e){return n.setState({virtualCurrencies:e})},n.setVirtualCurrenciesError=function(e){return n.setState({virtualCurrenciesError:e})},n.getCart=function(){var e=N(n.state.cart.cartId,n.state.logToken);e.then(function(t){!e.isCancel&&t&&n.setState({cart:{cartId:t.data.cart_id,items:t.data.items.sort(n.compareItems),price:t.data.price},isFetching:!1})})},n.createCart=function(){(function(e){var t={url:"https://store.xsolla.com/api/v1/project/"+window.xProjectId+"/cart",method:"POST",headers:{Authorization:"Bearer "+e}};return M()(t).then(function(e){return e}).catch(function(e){})})(n.state.logToken).then(function(e){n.setState({cart:{cartId:e.data.id,items:[],price:{amount:0,amount_without_discount:0,currency:""}}})})},n.clearCart=function(){n.showCart(),n.createCart(),n.updateVirtualCurrencyBalance()},n.payStationHandler=function(){return n.clearCart()},n.setPsToken=function(e){return n.setState({psToken:e})},n.setStateFrom=function(e,t){return n.setState(Object(b.a)({},e,t))},n.compareItems=function(e,t){return e.sku>t.sku?1:e.sku<t.sku?-1:0},n.buyByVC=function(e,t){n.setState({cartWithItemsBuyingByVCShown:!0,cartWithItemsBuyingByVC:{items:[e],vcPriceSku:t}})},n.clearVCCart=function(){n.setState({cartWithItemsBuyingByVCShown:!1,cartWithItemsBuyingByVC:{items:[],vcPriceSku:null}}),n.updateVirtualCurrencyBalance()},n.addToCart=function(e){var t=n.state,r=t.cart,a=t.logToken;-1!==r.items.findIndex(function(t){return t.sku===e.sku})?(n.getCart(),n.setState({cartShown:!0})):(n.setState({cart:Object(y.a)({},r,{items:[Object(y.a)({},e,{quantity:1})].concat(Object(v.a)(r.items)).sort(n.compareItems),price:Object(y.a)({},r.price,{amount:r.price.amount+e.price.amount,amount_without_discount:r.price.amount_without_discount+e.price.amount_without_discount})})}),P(e,1,r.cartId,a).then(n.getCart).catch(function(e){return n.showCartError("Change Item Quantity Error",e.response.data.errorMessage)}),n.showCart())},n.removeFromCart=function(e){var t=n.state.cart;n.setState({cart:Object(y.a)({},t,{items:t.items.filter(function(t){return t.sku!==e.sku}).sort(n.compareItems),price:Object(y.a)({},t.price,{amount:t.price.amount-e.price.amount*e.quantity,amount_without_discount:t.price.amount_without_discount-e.price.amount_without_discount*e.quantity})})})},n.changeItemQuantityInCart=function(e,t){var r=n.state,a=r.cart,i=r.logToken;if(t<=0)n.removeFromCart(e),function(e,t,n){var r=e.sku,a=void 0===r?"sku":r;T&&T();var i={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/cart/"+t+"/item/"+a,method:"DELETE",headers:{Authorization:"Bearer "+n}};return M()(i).then(function(e){e.data}).catch(function(e){})}(e,a.cartId,i).then(N);else{var o=a.items.findIndex(function(t){return t.sku===e.sku}),c=a.items;c.splice(o,1,Object(y.a)({},e,{quantity:t})),n.setState({cart:Object(y.a)({},a,{items:c.sort(n.compareItems)})}),P(e,t,a.cartId,i).then(n.getCart).catch(function(e){return n.showCartError("Change Item Quantity Error",e.response.data.errorMessage)})}},n.getTheme=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return"all"===e?n.state.theme:"".concat(n.state.theme[e]).concat("borderRadius"===e?"px":"")},n.setProducts=function(e){return n.setState({storeProducts:e})},n.updateVirtualCurrencyBalance=function(){(function(e){var t={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/user/virtual_currency_balance",method:"GET",headers:{Authorization:"Bearer "+e}};return M()(t)})(n.state.logToken).then(function(e){n.setState({userBalanceVirtualCurrency:e.data.items})})},n}return Object(C.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return a.a.createElement(W.Provider,{value:Object(y.a)({},this.state,{setPsToken:this.setPsToken,setProducts:this.setProducts,setStateFrom:this.setStateFrom,payStationHandler:this.payStationHandler,setInventoryItems:this.setInventoryItems,setInventoryItemsError:this.setInventoryItemsError,setPhysicalItems:this.setPhysicalItems,setPhysicalItemsError:this.setPhysicalItemsError,setVirtualCurrencies:this.setVirtualCurrencies,setVirtualCurrenciesError:this.setVirtualCurrenciesError,setVirtualItems:this.setVirtualItems,setVirtualItemsError:this.setVirtualItemsError,setEntitlementItems:this.setEntitlementItems,addToCart:this.addToCart,buyByVC:this.buyByVC,clearVCCart:this.clearVCCart,getTheme:this.getTheme,createCart:this.createCart,showCart:this.showCart,changeItemQuantityInCart:this.changeItemQuantityInCart,buyCart:this.buyCart,updateVirtualCurrencyBalance:this.updateVirtualCurrencyBalance,hideCart:this.hideCart,hideCartError:this.hideCartError,setSideMenuVisibility:this.setSideMenuVisibility})},a.a.createElement(m.a,{theme:A},this.props.children))}}]),t}(a.a.PureComponent),D=W.Consumer,q=n(25),U=n(26),R=n.n(U),L=n(103),Q=n.n(L),H=n(221),X=n(224),J=n(222);function Z(){var e=Object(u.a)(["\n  flex-grow: 1;\n  color: ",";\n  font-weight: 600;\n"]);return Z=function(){return e},e}function Y(){var e=Object(u.a)(["\n  display: block;\n  margin-top: 8px;\n  height: 120px;\n  flex-shrink: 1;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(",");\n"]);return Y=function(){return e},e}function $(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  border-top: 1px solid ",";\n  padding: 8px 0;\n  margin: 0px 16px 0 16px;\n"]);return $=function(){return e},e}function K(){var e=Object(u.a)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  font-weight: bolder;\n"]);return K=function(){return e},e}function ee(){var e=Object(u.a)(["\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0;\n  margin-bottom: 8px;\n"]);return ee=function(){return e},e}function te(){var e=Object(u.a)(["\n  position: absolute;\n  color: ",";\n  display: flex;\n  flex-direction: column;\n  width: ",";\n  min-height: ",";\n  background-color: ",";\n  box-shadow: ",";\n  transition: box-shadow, background-color ",";\n  border-radius: ",";\n"]);return te=function(){return e},e}function ne(){var e=Object(u.a)(["\n  position: relative;\n  z-index: ",";\n  width: ",";\n  height: ",";\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  opacity: ",";\n  transform: ",";;\n"]);return ne=function(){return e},e}var re=a.a.memo(function(e){var t=e.image,n=e.order,r=e.name,i=e.value,o=e.description,c=e.actionButtonContent,u=e.onAction,l=a.a.useState(!1),s=Object(q.a)(l,2),m=s[0],d=s[1],p=function(){return d(!0)},h=a.a.useState(!1),f=Object(q.a)(h,2),g=f[0],v=f[1];return a.a.useEffect(function(){setTimeout(p,100*n)},[]),a.a.createElement(ae,{shown:m,hovered:g},a.a.createElement(ie,{hovered:g,onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)}},a.a.createElement(le,{image:t}),a.a.createElement(oe,null,a.a.createElement(ce,null,r),a.a.createElement(H.a,{in:g,timeout:"auto",collapsedHeight:"50px"},g?o:a.a.createElement(Q.a,{animate:!0,clamp:2},o))),a.a.createElement(ue,null,a.a.createElement(se,null,i),u&&a.a.createElement(J.a,{variant:"contained",onClick:u},c))))}),ae=m.c.div(ne(),function(e){return e.hovered?1:0},function(e){return e.theme.cardWidth},function(e){return e.theme.cardWidth},function(e){return e.shown?1:0},function(e){return e.shown?"none":"translateY(20px)"}),ie=m.c.div(te(),function(e){return e.theme.colorText},function(e){return e.theme.cardWidth},function(e){return e.theme.cardWidth},function(e){return e.hovered?e.theme.colorBg:"transparent"},function(e){return e.hovered?e.theme.boxShadow:"none"},function(e){return e.theme.transitionStyle},function(e){return"".concat(e.theme.borderRadius,"px")}),oe=Object(m.c)(X.a)(ee()),ce=m.c.div(K()),ue=m.c.div($(),function(e){return R()(e.theme.colorText).alpha(.1).string()}),le=m.c.div(Y(),function(e){return e.image}),se=m.c.div(Z(),function(e){return e.theme.colorAccent}),me=a.a.memo(function(e){var t=e.item,n=e.order,r=e.onConsume;return a.a.createElement(re,{image:t.image_url,name:t.name,order:n,value:"Quantity: ".concat(t.quantity),description:t.description,actionButtonContent:"Consume",onAction:t.remaining_uses?function(){return r(t)}:void 0})}),de=n(105),pe=n(32),he=M.a.CancelToken,fe=function(){},ge=function(){var e=Object(B.a)(_.a.mark(function e(t,n){var r,a,i;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://store.xsolla.com/api/v2/project/".concat(t,"/user/inventory/items"),a={headers:{Authorization:"Bearer "+n},cancelToken:new he(function(e){fe(),fe=e})},e.next=4,M.a.get(r,a);case 4:return i=e.sent,e.abrupt("return",i.data.items.filter(function(e){return"virtual_good"===e.type}));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(B.a)(_.a.mark(function e(t,n,r){var a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(pe.b)({projectId:t,version:"v2"}),a=new de.a(n),e.next=4,a.consumeItem(r.sku,1,r.instance_id);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}();function ye(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]);return ye=function(){return e},e}function be(){var e=Object(u.a)(["\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ",";\n  justify-content: center;\n"]);return be=function(){return e},e}function xe(){var e=Object(u.a)(["\n  color: ",";\n  position: relative;\n  background-color: transparent;\n  z-index: 1;\n  height: 100%;\n"]);return xe=function(){return e},e}var Ee=function(){var e=a.a.useContext(W),t=e.logToken,n=e.projectId,r=e.setStateFrom,i=e.inventoryItems,o=e.isItemConsuming,c=e.areInventoryItemsFetching,u=e.setInventoryItems,l=e.setInventoryItemsError,s=a.a.useCallback(function(e){r("isItemConsuming",!0),ve(n,t,e).then(function(){u([]),r("isItemConsuming",!1)}).catch(function(e){l(e.message),r("isItemConsuming",!1)})});a.a.useEffect(function(){return t&&0===i.length&&(r("areInventoryItemsFetching",!0),ge(n,t).then(function(e){u(e),r("areInventoryItemsFetching",!1)}).catch(function(e){l(e.message),r("areInventoryItemsFetching",!1)})),function(){return i.length>0&&u([])}},[i]);var m=a.a.useMemo(function(){return i.length>0?a.a.createElement(je,null,i.map(function(e,t){return a.a.createElement(me,{order:t,key:e.sku,item:e,onConsume:s})})):a.a.createElement(Ce,null,"Oops, you have nothing bought yet!")},[i]);return a.a.createElement(we,null,c||o?a.a.createElement(f,null):m)},we=m.c.div(xe(),function(e){return e.theme.colorText}),je=m.c.div(be(),function(e){return"repeat(auto-fit, minmax(\n    ".concat(e.theme.cardWidth,", \n    ").concat(e.theme.cardWidth,"\n  ))")}),Ce=m.c.div(ye()),ke=n(106),Ie=function(){var e=Object(B.a)(_.a.mark(function e(t,n){var r,a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(pe.b)({projectId:t,version:"v2"}),r=new ke.a(n),e.next=4,r.getPhysicalGoodList();case 4:return a=e.sent,e.abrupt("return",a.data.items);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),Oe=n(35),Te=n.n(Oe),Se=n(244);function _e(){var e=Object(u.a)(["\n  && {\n    height: 1em;\n    width: 1em;\n    margin-right: 5px;\n  }\n"]);return _e=function(){return e},e}function Be(){var e=Object(u.a)(["\n  margin-right: 5px;\n"]);return Be=function(){return e},e}function Fe(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n"]);return Fe=function(){return e},e}var Me=function(e){var t=e.image,n=e.value,r=e.currency;return a.a.createElement(Ve,null,t&&a.a.createElement(ze,{src:t}),r&&a.a.createElement(Pe,null,r),n)},Ve=m.c.div(Fe()),Pe=m.c.span(Be()),ze=Object(m.c)(Se.a)(_e()),Ne=a.a.memo(function(e){var t=e.product,n=e.order,r=e.addToCart,i=a.a.useMemo(function(){return a.a.createElement(Me,{currency:t.price.currency,value:Math.round(100*t.price.amount)/100})},[t]);return a.a.createElement(re,{image:t.image_url,name:t.name,order:n,value:i,description:t.description,actionButtonContent:a.a.createElement(Te.a,null),onAction:function(){return r(t)}})});function We(){var e=Object(u.a)(["\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ",";\n  justify-content: center;\n"]);return We=function(){return e},e}function Ae(){var e=Object(u.a)(["\n  color: ",";\n  position: relative;\n  background-color: transparent;\n  z-index: 1;\n  height: 100%;\n"]);return Ae=function(){return e},e}var Ge=function(){var e=a.a.useContext(W),t=e.logToken,n=e.projectId,r=e.addToCart,i=e.setStateFrom,o=e.physicalItems,c=e.arePhysicalItemsFetching,u=e.setPhysicalItems,l=e.setPhysicalItemsError;a.a.useEffect(function(){t&&0===o.length&&(i("arePhysicalItemsFetching",!0),Ie(n,t).then(function(e){u(e),i("arePhysicalItemsFetching",!1)}).catch(function(e){l(e.message),i("arePhysicalItemsFetching",!1)}))},[o]);var s=a.a.useMemo(function(){return o.length>0&&a.a.createElement(qe,null,o.map(function(e,t){return a.a.createElement(Ne,{order:t,key:e.sku,product:e,addToCart:r})}))},[o]);return a.a.createElement(De,null,c?a.a.createElement(f,null):s)},De=m.c.div(Ae(),function(e){return e.theme.colorText}),qe=m.c.div(We(),function(e){return"repeat(auto-fit, minmax(\n    ".concat(e.theme.cardWidth,", \n    ").concat(e.theme.cardWidth,"\n  ))")}),Ue=n(231),Re=n(239),Le=(n(170),n(233)),Qe=n(225);function He(){var e=Object(u.a)(["\n  &.MuiTab-root {\n    color: ",";\n    font-family: ",";\n  };\n"]);return He=function(){return e},e}function Xe(){var e=Object(u.a)(["\n  padding: 30px 0;\n  color: ",";\n  \n  & .MuiTabs-flexContainer {\n    justify-content: center;\n  };\n"]);return Xe=function(){return e},e}var Je=function(e){var t=e.groups,n=e.activeGroup,r=e.onGroupChange;return a.a.createElement(Ze,{value:n,onChange:function(e,t){return r(t)},variant:"scrollable"},t.map(function(e){return a.a.createElement(Ye,{value:e.id,key:e.id,color:"secondary",textColor:"secondary",label:e.label})}))},Ze=Object(m.c)(Le.a)(Xe(),function(e){return e.theme.colorAccent}),Ye=Object(m.c)(Qe.a)(He(),function(e){return e.theme.colorAccentText},function(e){return e.theme.fontFamily}),$e=function(e){function t(e){var n;Object(x.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).changeGroupHandler=function(e){var t=n.state.manageInventoryGroups.find(function(t){return t.id===e}),r=t&&t.items.length>0?t.items[0].sku:"helmet_1";n.setState({inventoryItem:r,activeInventoryGroup:e}),n.setItemQuantity(1)},n.setManageInventoryItems=function(e){n.setState({manageInventoryItems:e,fetching:!1,manageInventoryGroups:[].concat(Object(v.a)(n.state.manageInventoryGroups),[{id:1,name:"items",items:e,singleItemName:"Item"}])})},n.setManageInventoryCurrencies=function(e){n.setState({manageInventoryCurrencies:e,fetching:!1,manageInventoryGroups:[].concat(Object(v.a)(n.state.manageInventoryGroups),[{id:2,name:"currencies",items:e,singleItemName:"Currency"}])})};return n.state={fetching:!1,isPurchasing:!1,inventoryItem:null,quantity:1,users:[{id:"d342dad2-9d59-11e9-a384-42010aa8003f",name:"support@xsolla.com"},{id:"7d8b1f52-7d3f-400b-acd8-46e3a4368596",name:"v.legotkin@xsolla.com"},{id:"27bc1227-48a3-4da8-bb86-f8d093f68805",name:"r.ushakov@xsolla.com"},{id:"a7d10a4e-3f68-43cc-a6b2-893d2c68fd14",name:"p.sanachev@xsolla.com"}],user:"d342dad2-9d59-11e9-a384-42010aa8003f",showToast:!1,statusToast:"processing",operationDetails:null,manageInventoryGroups:[],activeInventoryGroup:"first",manageInventoryItems:null,manageInventoryCurrencies:null,invoice:null,date:null},n}return Object(C.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){null===this.state.manageInventoryItems&&(this.getItems(),this.props.updateVirtualCurrencyBalance()),null===this.state.manageInventoryCurrencies&&this.getCurrencies()}},{key:"getItems",value:function(){var e=this;this.setState({fetching:!0}),function(e){var t={url:"https://store.xsolla.com/api/v2/project/".concat(e,"/items/virtual_items"),method:"GET"};return M()(t).then(function(e){return e.data.items})}(window.xProjectId).then(function(t){e.setManageInventoryItems(t)}).catch(function(){})}},{key:"getCurrencies",value:function(){var e=this;this.setState({fetching:!0}),function(e){var t={url:"https://store.xsolla.com/api/v2/project/".concat(e,"/items/virtual_currency"),method:"GET"};return M()(t).then(function(e){return e.data.items})}(window.xProjectId).then(function(t){e.setManageInventoryCurrencies(t)}).catch(function(){})}},{key:"changeInventoryItem",value:function(e){this.setState({inventoryItem:e.target.value})}},{key:"changeUser",value:function(e){this.setState({user:e.target.value})}},{key:"setItemQuantity",value:function(e){parseInt(e)>=1&&this.setState({quantity:parseInt(e)})}},{key:"setShowToast",value:function(e){this.setState({showToast:e})}},{key:"itemOperation",value:function(e){var t=this,n=this.state,r=n.user,a=n.activeInventoryGroup,i=n.quantity,o=n.inventoryItem,c=n.manageInventoryGroups,u=n.invoice,l=n.date;if(null===o&&c&&c.length){var s="first"!==a?c.find(function(e){return e.id===a}):c[0];o=s&&s.items.length>0?s.items[0].sku:"helmet_1"}var m={type:e,user:r,item:o,count:i};u&&l&&(m.purchase.external_purchase_id=u,m.purchase.external_purchase_date=l),this.setState({showToast:!0,statusToast:"processing",operationDetails:null}),function(e){var t={url:"https://livedemo.xsolla.com/store-demo/api/index.php",method:"POST",data:e};return M()(t).then(function(e){return e.data})}(m).then(function(e){t.setState({showToast:!0,statusToast:"complete",operationDetails:e.operations[0].items}),t.props.updateVirtualCurrencyBalance()}).catch(function(){})}},{key:"rewardItem",value:function(e){this.itemOperation("reward")}},{key:"revokeItem",value:function(){this.itemOperation("revoke")}},{key:"render",value:function(){var e=this,t=this.state,n=t.quantity,r=t.users,i=t.showToast,o=t.statusToast,c=t.operationDetails,u=t.manageInventoryGroups,l=t.activeInventoryGroup,s="first"!==l?u.find(function(e){return e.id===l}):u[0];return a.a.createElement("div",{className:"manage-inventory__row"},a.a.createElement("div",{className:"manage-inventory__alert"},a.a.createElement(Re.a,{onClose:function(t){return e.setShowToast(!1)},open:i,variant:"processing"===o?"primary":"success",dismissible:!0},a.a.createElement(Re.a.Heading,null,"processing"===o?"Operation is processing":"Operation complete!"),a.a.createElement("p",null,s&&s.items.length&&c&&c.length?c.map(function(e){return a.a.createElement("div",null,a.a.createElement("div",null,"Item: ",a.a.createElement("b",null,s.items.filter(function(t){return t.sku===e.sku}).map(function(e){return e.name}))),a.a.createElement("div",null,"Quantity: ",a.a.createElement("b",null,null===e.quantity?0:e.quantity)))}):""))),a.a.createElement("div",null,a.a.createElement("div",{className:"manage-inventory"},a.a.createElement("div",{className:"manage-inventory__user-list"},a.a.createElement("div",{className:"manage-inventory__title"},"User"),a.a.createElement("div",null,a.a.createElement("select",{value:this.state.user,onChange:function(t){return e.changeUser(t)}},r.map(function(e){return a.a.createElement("option",{key:e.id,value:e.id},e.name)})))),a.a.createElement(Je,{groups:u,activeGroup:l,onGroupChange:this.changeGroupHandler}),a.a.createElement("div",{className:"manage-inventory-item-container"},a.a.createElement("div",{className:"manage-inventory-list"},a.a.createElement("div",{className:"manage-inventory__title"},s?s.singleItemName:"Item"),a.a.createElement("div",null,s&&s.items.length>0?a.a.createElement("select",{value:this.state.inventoryItem,onChange:function(t){return e.changeInventoryItem(t)}},s.items.map(function(e){return a.a.createElement("option",{key:e.sku,value:e.sku},e.name)})):a.a.createElement("div",null,"Nothing to show"))),a.a.createElement("div",{className:"manage-inventory__quantity"},a.a.createElement("div",{className:"manage-inventory__quantity-change"},a.a.createElement(Ue.a,{label:"Quantity",type:"number",inputProps:{style:{color:"white"},min:"0",step:"1"},defaultValue:n,InputLabelProps:{className:"manage-inventory__quantity-input-label"},onChange:function(t){return e.setItemQuantity(t.target.value)}})))),a.a.createElement("div",{className:"manage-inventory-actions"},a.a.createElement(J.a,{type:"submit",variant:"contained",onClick:function(t){return e.rewardItem(t)}},"Reward"),a.a.createElement(J.a,{variant:"contained",onClick:function(t){return e.revokeItem(t)}},"Revoke")))))}}]),t}(r.PureComponent),Ke=n(109),et=function(){var e=Object(B.a)(_.a.mark(function e(t,n){var r,a,i,o,c;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://store.xsolla.com/api/v1/project/".concat(t,"/items/groups"),e.next=3,M.a.get(r,{headers:{Authorization:"Bearer ".concat(n)}});case 3:return a=e.sent,e.next=6,Promise.all(a.data.groups.map(function(){var e=Object(B.a)(_.a.mark(function e(n){var r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(t,n.external_id);case 2:return r=e.sent,e.abrupt("return",{groupID:n.external_id,groupName:n.name,items:r});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 6:return i=e.sent,o=Object(Ke.a)(i),c=o.slice(0),e.abrupt("return",c);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),tt=function(){var e=Object(B.a)(_.a.mark(function e(t,n){var r,a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://store.xsolla.com/api/v2/project/".concat(t,"/items/virtual_items/group/").concat(n),e.next=3,M.a.get(r);case 3:return a=e.sent,e.abrupt("return",a.data.items);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),nt=a.a.memo(function(e){var t=e.product,n=e.order,r=e.addToCart,i=e.buyByVC,o=t.virtual_prices&&t.virtual_prices.length>0,c=a.a.useMemo(function(){return o?"Buy now":a.a.createElement(Te.a,null)},[t]),u=a.a.useMemo(function(){return o?a.a.createElement(Me,{image:t.virtual_prices[0].image_url,value:t.virtual_prices[0].amount}):a.a.createElement(Me,{currency:t.price.currency,value:Math.round(100*t.price.amount)/100})},[t]);return a.a.createElement(re,{image:t.image_url,name:t.name,order:n,value:u,description:t.description,actionButtonContent:c,onAction:o?function(){return i(t,t.virtual_prices[0].sku)}:function(){return r(t)}})});function rt(){var e=Object(u.a)(["\n  color: ",";\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n"]);return rt=function(){return e},e}function at(){var e=Object(u.a)(["\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ",";\n  justify-content: center;\n"]);return at=function(){return e},e}function it(){var e=Object(u.a)(["\n  color: ",";\n  position: relative;\n  background-color: transparent;\n  z-index: 4;\n  height: 100%;\n"]);return it=function(){return e},e}var ot=function(){var e=a.a.useContext(W),t=e.logToken,n=e.virtualItems,r=e.addToCart,i=e.buyByVC,o=e.projectId,c=e.areVirtualItemsFetching,u=e.setVirtualItems,l=e.setVirtualItemsError,s=e.setStateFrom,m=e.updateVirtualCurrencyBalance,d=a.a.useMemo(function(){return n.map(function(e){return{id:e.groupID,label:e.groupName}})},[n]),p=a.a.useState(n[0]?n[0].groupID:null),h=Object(q.a)(p,2),g=h[0],v=h[1];a.a.useEffect(function(){v(n[0]?n[0].groupID:null)},[n]),a.a.useEffect(function(){!c&&t&&0===n.length&&(s("areVirtualItemsFetching",!0),et(o,t).then(function(e){u(e),m(),s("areVirtualItemsFetching",!1)}).catch(function(e){l(e.message),s("areVirtualItemsFetching",!1)}))},[n]);var y=a.a.useMemo(function(){return n.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Je,{groups:d,activeGroup:g,onGroupChange:v}),n.map(function(e){return g===e.groupID&&a.a.createElement(a.a.Fragment,{key:e.groupID},a.a.createElement(lt,null,e.groupName),a.a.createElement(ut,null,e.items.map(function(e,t){return a.a.createElement(nt,{order:t,key:e.sku,product:e,addToCart:r,buyByVC:i})})))}))},[g,n]);return a.a.createElement(ct,null,c?a.a.createElement(f,null):y)},ct=m.c.div(it(),function(e){return e.theme.colorText}),ut=m.c.div(at(),function(e){return"repeat(auto-fit, minmax(\n    ".concat(e.theme.cardWidth,", \n    ").concat(e.theme.cardWidth,"\n  ))")}),lt=m.c.div(rt(),function(e){return e.theme.colorText}),st=(n(173),n(228)),mt=n(4),dt=n(70),pt=n.n(dt),ht=n(69),ft=n.n(ht),gt=n(110),vt=n.n(gt),yt=n(68),bt=n.n(yt);function xt(){var e=Object(u.a)(["\n  flex-grow: 1;\n  font-size: 0.8em;\n  /* color: ","; */\n  /* font-weight: 600; */\n  opacity: 0.3;\n"]);return xt=function(){return e},e}function Et(){var e=Object(u.a)(["\n  flex-grow: 1;\n  color: ",";\n  font-weight: 600;\n"]);return Et=function(){return e},e}function wt(){var e=Object(u.a)(["\n  display: block;\n  /* height: 0; */\n  margin-top: 8px;\n  min-height: 120px;\n  flex-grow: 1;\n  /* padding-top: 56.25%; */\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(",");\n"]);return wt=function(){return e},e}function jt(){var e=Object(u.a)(["\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    "]);return jt=function(){return e},e}function Ct(){var e=Object(u.a)(["\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ",";\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    "]);return Ct=function(){return e},e}function kt(){var e=Object(u.a)(["\n  ","\n  ","\n"]);return kt=function(){return e},e}function It(){var e=Object(u.a)(["\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    "]);return It=function(){return e},e}function Ot(){var e=Object(u.a)(["\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ",";\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    "]);return Ot=function(){return e},e}function Tt(){var e=Object(u.a)(["\n  ","\n  ","\n"]);return Tt=function(){return e},e}function St(){var e=Object(u.a)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"]);return St=function(){return e},e}function _t(){var e=Object(u.a)(["\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0 !important;\n  margin-bottom: 8px;\n"]);return _t=function(){return e},e}function Bt(){var e=Object(u.a)(["\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  /* max-height: 120px; */\n  width: 100%;\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  max-width: 400px;\n  margin: 0 auto;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]);return Bt=function(){return e},e}function Ft(){var e=Object(u.a)(["\n          box-shadow: ",";\n        "]);return Ft=function(){return e},e}function Mt(){var e=Object(u.a)(["\n      display: grid;\n      grid-template-columns: 20% 50% 30%;\n      grid-template-rows: 160px;\n      place-content: center;\n    "]);return Mt=function(){return e},e}function Vt(){var e=Object(u.a)(["\n    display: flex;\n    flex-direction: column;\n    max-width: ",";\n    min-width: ",";\n    height: ",";\n    /* height: 360px; */\n    margin: ","px;\n    flex-shrink: 0;\n    flex-grow: 1;\n    flex-base: 50%;\n    background: transparent;\n    /* boxShadow: none; */\n    /* color: var(--mainWhite); */\n    transition: box-shadow ",";\n    border-radius: ","\n    padding: ",";\n  "]);return Vt=function(){return e},e}function Pt(){var e=Object(u.a)(["\n  color: ",";\n  ","\n\n  ","\n  &:hover {\n    ","\n  }\n"]);return Pt=function(){return e},e}function zt(){var e=Object(u.a)(["\n  position: relative;\n\n  /* transition: all "," ease-in-out; */\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  &.initialFlow1 {\n    opacity: 0;\n    transform: translateY(20px) scale(1);\n  }\n"]);return zt=function(){return e},e}function Nt(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n"]);return Nt=function(){return e},e}function Wt(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n"]);return Wt=function(){return e},e}var At=Object(st.a)({currencies:{height:24,width:24,marginRight:4}}),Gt=m.c.div(Wt()),Dt=m.c.div(Nt()),qt=m.c.div(zt(),function(e){return e.order+"s"}),Ut=m.c.div(Pt(),function(e){return e.getTheme("colorText")},function(e){return!e.cardType&&Object(m.b)(Vt(),function(e){return"".concat(e.getTheme("cardWidth"))},function(e){return"".concat(e.getTheme("cardWidth"))},function(e){return"".concat(e.getTheme("cardWidth"))},16,function(e){return e.getTheme("transitionStyle")},function(e){return e.getTheme("borderRadius")},function(e){return e.getTheme("padding")})},function(e){return e.cardType&&Object(m.b)(Mt())},function(e){return!e.cardType&&Object(m.b)(Ft(),function(e){return e.getTheme("boxShadow")})}),Rt=m.c.div(Bt()),Lt=Object(m.c)(X.a)(_t()),Qt=m.c.div(St()),Ht=m.c.div(Tt(),function(e){return!e.cardType&&Object(m.b)(Ot(),function(e){return R()(e.getTheme("colorText")).alpha(.1).string()})},function(e){return e.cardType&&Object(m.b)(It())}),Xt=m.c.div(kt(),function(e){return!e.cardType&&Object(m.b)(Ct(),function(e){return R()(e.getTheme("colorText")).alpha(.1).string()})},function(e){return e.cardType&&Object(m.b)(jt())}),Jt=m.c.div(wt(),function(e){return e.image}),Zt=m.c.div(Et(),function(e){return e.getTheme("colorAccent")}),Yt=m.c.div(xt(),function(e){return e.getTheme("colorAccent")}),$t=Object(mt.a)(function(e){return{paper:Object(y.a)({},e.mixins.gutters(),{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),cardTitle:{},card:{},h1:{fontWeight:"bold",fontSize:"1.2em",marginBottom:8,color:"var(--mainDark)"},p:{flexGrow:1,color:"var(--mainDark)"},price:{flexGrow:1,fontWeight:"600",color:"var(--mainBlue)"},media:{marginTop:8,height:0,paddingTop:"56.25%",backgroundSize:"contain"},actions:{display:"flex"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:vt.a[500]}}})(function(e){var t=e.addToCart,n=void 0===t?function(){}:t,r=(e.removeFromCart,e.changeItemQuantityInCart),i=void 0===r?function(){}:r,o=e.buyByVC,c=void 0===o?function(){}:o,u=(e.activeGroup,e.product),l=e.order,s=e.cardType,m=void 0===s?null:s,d=e.initClass,p=e.image_url,h=e.title,f=e.currency,g=e.price,v=e.description,y=e.getTheme,b=void 0===y?function(){}:y,x=e.quantity,E=a.a.useState({expanded:!1,favorited:!1,cardShown:!1}),w=Object(q.a)(E,2),j=w[0],C=w[1],k=At(),I=a.a.useState("cart"===m?x:0),O=Object(q.a)(I,2);O[0],O[1];a.a.useEffect(function(){j.cardShown||setTimeout(function(){C({cardShown:!0})},100*l)});var T=u.virtual_prices&&u.virtual_prices.length>0;return a.a.createElement(qt,{className:j.cardShown?"":d},a.a.createElement(Ut,{cardType:m,getTheme:b},a.a.createElement(Jt,{style:{},image:p,theme:"cart"===m||"buy_by_vc"===m?{width:140,height:140}:{}}),a.a.createElement(Lt,null,a.a.createElement(Qt,null,h),a.a.createElement(Rt,null,v)),"cart"!==m&&"buy_by_vc"!==m&&a.a.createElement(Xt,{cardType:m,getTheme:b},T&&a.a.createElement(Se.a,{src:u.virtual_prices[0].image_url,className:k.currencies}),a.a.createElement(Zt,{getTheme:b},T?u.virtual_prices[0].amount:"".concat(f," ").concat(Math.round(100*g)/100)),a.a.createElement(J.a,{getTheme:b,variant:"contained",onClick:T?function(e){c(u,e)}.bind(void 0,u.virtual_prices[0].sku):function(){n(u)}},T?"Buy now":a.a.createElement(Te.a,null))),"cart"===m&&a.a.createElement(Ht,{cardType:m,getTheme:b},a.a.createElement(Gt,null,x<=1&&a.a.createElement(bt.a,{style:{opacity:.4},onClick:function(){i(u,x-1)}}),x>1&&a.a.createElement(ft.a,{style:{opacity:.4},onClick:function(){i(u,x-1)}}),a.a.createElement(Dt,null,x),a.a.createElement(pt.a,{onClick:function(){i(u,x+1)}})),a.a.createElement("div",null,a.a.createElement(Zt,{getTheme:b},f," ",function(e,t){return Math.round(e*t*100)/100}(g,x))),x>1&&a.a.createElement(Yt,{getTheme:b},f," ",Math.round(100*g)/100," for one item")),a.a.createElement(H.a,{in:j.expanded,timeout:"auto",unmountOnExit:!0},a.a.createElement(X.a,null,v))))}),Kt=n(58),en=n.n(Kt),tn=n(111),nn=n(75);function rn(e){return{name:e,fractionSize:2,symbol:{grapheme:e,template:null,rtl:!1},uniqSymbol:null}}var an="en_US";function on(e,t,n){var r=parseFloat(e);if(!t||isNaN(r))return{formattedCurrency:e+" "+t,dir:"ltr"};var a=function(e){return e&&tn[e.toUpperCase()]||rn(e)}(t),i=function(e){return e&&nn[function(e){return[e.substr(0,2).toLowerCase(),e.substr(3,2).toUpperCase()].join("_")}(e)]||nn[an]}(n),o=r<0?"-":"",c=a.fractionSize,u=a.symbol,l=i.thousands,s=i.decimal;u&&!u.rtl||" "!==i.thousands||(l=",",s=".");var m=Math.abs(r).toFixed(c).split(".");m[0]=m[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+l);var d=m.join(s),p=o+d+" "+t,h=!1;return u&&u.template&&(p=o+u.template.replace("1",d).replace("$",u.grapheme),h=u.rtl),{formattedCurrency:p,dir:h?"rtl":"ltr"}}var cn=n(240);function un(){var e=Object(u.a)(["\n  display: flex;\n  padding: 0 24px 0 24px;\n  font-weight: bold;\n"]);return un=function(){return e},e}function ln(){var e=Object(u.a)(["\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  bottom: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  z-index: 10;\n  padding: 24px 0 24px 0;\n"]);return ln=function(){return e},e}function sn(){var e=Object(u.a)(["\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  top: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  z-index: 10;\n  padding: 24px 0 8px 0;\n"]);return sn=function(){return e},e}function mn(){var e=Object(u.a)(["\n  background-color: rgba(0, 0, 0, 0.8);\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n"]);return mn=function(){return e},e}function dn(){var e=Object(u.a)(["\n  flex: 1;\n  position: absolute;\n  max-width: 680px;\n  z-index: 1;\n  max-height: 80vh;\n  overflow-y: auto;\n  padding-top: 64px;\n"]);return dn=function(){return e},e}function pn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 100;\n"]);return pn=function(){return e},e}function hn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 600px;\n  padding-top: 16px;\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* position: fixed; */\n  /* left: 0; */\n  /* right: 0; */\n  /* top: 0; */\n  /* bottom: 0; */\n  /* z-index: 1; */\n"]);return hn=function(){return e},e}var fn,gn=m.c.div(hn()),vn=m.c.div(pn()),yn=m.c.div(dn()),bn=m.c.div(mn()),xn=m.c.div(sn()),En=m.c.div(ln()),wn=m.c.div(un()),jn=(Object(cn.a)(function(e){var t=this,n=(e.style,e.history),r=a.a.useState(!1),i=Object(q.a)(r,2),o=i[0],c=i[1],u=a.a.useContext(W),l=function(){u.hideCart()},s=function(e,n){c(!0),function(e,t,n){var r={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/payment/item/"+e.sku+"/virtual/"+t,method:"POST",headers:{Authorization:"Bearer "+n}};return M()(r)}(e,n,u.logToken).then(function(e){u.clearVCCart(),c(!1),t.props.updateVirtualCurrencyBalance()}).catch(function(e){c(!1)})};return a.a.createElement("div",null,u.cartShown&&a.a.createElement(vn,null,a.a.createElement(yn,{style:{padding:"0 32px 0 32px",borderRadius:u.getTheme("borderRadius"),backgroundColor:u.getTheme("colorBg"),color:u.getTheme("colorText")}},a.a.createElement("div",{style:{backgroundColor:u.getTheme("colorBg"),color:u.getTheme("colorText")}},a.a.createElement(xn,{style:{backgroundColor:"".concat(u.getTheme("colorBg")),borderBottom:"1px solid ".concat(R()(u.getTheme("colorText")).alpha(.1).string())}},a.a.createElement("h4",null,"Cart "),a.a.createElement(en.a,{style:{cursor:"pointer"},onClick:function(e){return l()}})),a.a.createElement(gn,null,u.cart&&u.cart.items.map(function(e,t){return a.a.createElement("div",{key:"cartitem".concat(t)},a.a.createElement($t,{product:e,key:e.sku,order:t,initClass:"initialFlow1",sku:e.sku,title:e.name,description:e.description,price:e.price.amount,image_url:e.image_url,currency:e.price.currency,cardType:"cart",cartId:u.cart.cartId,logToken:u.logToken,removeFromCart:u.removeFromCart,changeItemQuantityInCart:u.changeItemQuantityInCart,quantity:e.quantity}))}),u.cart&&u.cart.items.length<=0&&a.a.createElement("p",null,"Empty cart")),a.a.createElement(En,{style:{backgroundColor:"".concat(u.getTheme("colorBg")),borderTop:"1px solid ".concat(R()(u.getTheme("colorText")).alpha(.1).string())}},a.a.createElement("div",{className:""}),u.cart&&u.cart.items.length>0&&a.a.createElement(wn,null,"Subtotal:",a.a.createElement("div",{style:{minWidth:80,textAlign:"right"}},u.isFetching&&on(function(e){var t=0;return e.forEach(function(e){t+=e.price.amount*e.quantity}),Math.round(100*t)/100}(u.cart.items),u.cart.items[0].price.currency).formattedCurrency,!u.isFetching&&on(u.cart.price.amount,u.cart.price.currency).formattedCurrency)),a.a.createElement(J.a,{variant:"contained",style:{marginRight:"5px"},onClick:function(){!(o||u.cart.items.length<=0)&&(o||u.cart.items.length<=0||(n.push("/purchase"),l()))}},"Buy on PS4"),a.a.createElement(J.a,{variant:"contained",onClick:function(){!(o||u.cart.items.length<=0)&&(c(!0),z(u.cart.cartId,u.logToken).then(function(e){window.xPayStationInit(e.data.token),window.XPayStationWidget.open(),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.CLOSE,function(e,t){c(!1)}),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.STATUS_DONE,function(e,t){return u.payStationHandler(e,t)})}).catch(function(e){}))}},"Buy on Xsolla")))),a.a.createElement(bn,{onClick:function(e){return l()}})),u.cartWithItemsBuyingByVCShown&&a.a.createElement(vn,null,a.a.createElement(yn,{style:{padding:"0 32px 0 32px",borderRadius:u.getTheme("borderRadius"),backgroundColor:u.getTheme("colorBg"),color:u.getTheme("colorText")}},a.a.createElement("div",{style:{backgroundColor:u.getTheme("colorBg"),color:u.getTheme("colorText")}},a.a.createElement(xn,{style:{backgroundColor:"".concat(u.getTheme("colorBg")),borderBottom:"1px solid ".concat(R()(u.getTheme("colorText")).alpha(.1).string())}},a.a.createElement("h4",null,"Confirm"),a.a.createElement(en.a,{style:{cursor:"pointer"},onClick:function(e){return l()}})),a.a.createElement(gn,null,u.cartWithItemsBuyingByVC&&u.cartWithItemsBuyingByVC.items.map(function(e,t){return a.a.createElement("div",{key:"cartitem".concat(t)},a.a.createElement($t,{product:e,key:e.sku,order:t,initClass:"initialFlow1",sku:e.sku,title:e.name,description:e.description,price:e.price.amount,image_url:e.image_url,currency:e.price.currency,cardType:"buy_by_vc",cartId:u.cart.cartId,logToken:u.logToken,removeFromCart:u.removeFromCart,changeItemQuantityInCart:u.changeItemQuantityInCart,quantity:e.quantity}))}),u.cartWithItemsBuyingByVC&&u.cartWithItemsBuyingByVC.items.length<=0&&a.a.createElement("p",null,"Empty cart")),a.a.createElement(En,{style:{backgroundColor:"".concat(u.getTheme("colorBg")),borderTop:"1px solid ".concat(R()(u.getTheme("colorText")).alpha(.1).string())}},a.a.createElement("div",{className:""}),o?a.a.createElement(f,null):a.a.createElement(J.a,{variant:"contained",onClick:function(){!(o||u.cartWithItemsBuyingByVC.items.length<=0)&&s(u.cartWithItemsBuyingByVC.items[0],u.cartWithItemsBuyingByVC.vcPriceSku)}},"Buy")))),a.a.createElement(bn,{onClick:function(e){return l()}})))}),function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).calculateSubtotal=function(e){var t=0;return e.forEach(function(e){t+=e.price.amount*e.quantity}),Math.round(100*t)/100},n.state={showToast:!1,statusToast:"processing",operations:null},n}return Object(C.a)(t,e),Object(E.a)(t,[{key:"generateUUID",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"setShowToast",value:function(e){this.setState({showToast:e})}},{key:"purchase",value:function(){var e=this,t=this.props.cart,n={type:"purchase",user:"d342dad2-9d59-11e9-a384-42010aa8003f",platform:"playstation_network",purchase:{amount:t.price.amount,currency:t.price.currency,external_purchase_id:this.generateUUID(),external_purchase_date:(new Date).toISOString()},items:t.items.map(function(e){return{sku:e.sku,quantity:e.quantity}})};this.setState({showToast:!0,statusToast:"processing",operationDetails:null}),function(e){var t={url:"https://livedemo.xsolla.com/store-demo/api/index.php",method:"POST",data:e};return M()(t).then(function(e){return e.data})}(n).then(function(t){e.setState({showToast:!0,statusToast:"complete",operations:t.operations})}).catch(function(){})}},{key:"render",value:function(){var e=this,t=this.props,n=t.cart,r=t.logToken,i=t.removeFromCart,o=t.changeItemQuantityInCart,c=t.isFetching,u=this.state,l=u.operations,s=u.showToast,m=u.statusToast;return a.a.createElement("div",null,a.a.createElement("div",{className:"server-purchase__alert"},a.a.createElement(Re.a,{onClose:function(t){return e.setShowToast(!1)},open:s,variant:"processing"===m?"primary":"success",dismissible:!0},a.a.createElement(Re.a.Heading,null,"processing"===m?"Operation is processing":"Operation complete!"),l&&l.length?l.map(function(e){return e.items.map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("div",null,"Item: ",a.a.createElement("b",null,e.sku)),a.a.createElement("div",null,"Quantity: ",a.a.createElement("b",null,null===e.quantity?0:e.quantity)))})}):"")),a.a.createElement("div",{className:"server-purchase"},a.a.createElement(gn,null,n&&n.items.map(function(e,t){return a.a.createElement("div",{key:"cartitem".concat(t)},a.a.createElement($t,{product:e,key:e.sku,order:t,initClass:"initialFlow1",sku:e.sku,title:e.name,description:e.description,price:e.price.amount,image_url:e.image_url,currency:e.price.currency,cardType:"cart",cartId:n.cartId,logToken:r,removeFromCart:i,changeItemQuantityInCart:o,quantity:e.quantity}))}),n&&n.items.length<=0&&a.a.createElement("div",null,"Oops, you have empty cart!")),a.a.createElement("div",{className:""}),n&&n.items.length>0&&a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.a.createElement(wn,{style:{paddingTop:"7px"}},"Subtotal:",a.a.createElement("div",{style:{minWidth:80,textAlign:"right"}},c&&on(this.calculateSubtotal(n.items),n.items[0].price.currency).formattedCurrency,!c&&on(n.price.amount,n.price.currency).formattedCurrency)),a.a.createElement(J.a,{variant:"contained",onClick:function(){e.purchase(n)}},"Grant purchase"))))}}]),t}(r.PureComponent)),Cn=n(40),kn=(n(176),function(e){function t(){var e;return Object(x.a)(this,t),(e=Object(w.a)(this,Object(j.a)(t).call(this))).state={expanded:!1,cardShown:!1},e}return Object(C.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.order;this.state.cardShown||setTimeout(function(){e.setState({cardShown:!0})},100*t)}},{key:"render",value:function(){var e=this.props,t=e.initClass,n=e.imageUrl,r=e.title,i=e.description;return a.a.createElement("div",{className:"entitlement-item ".concat(this.state.cardShown?"":t)},a.a.createElement("div",{className:"entitlement-item-card"},a.a.createElement("div",{className:"entitlement-item-card-media",style:{backgroundImage:"url(".concat(n,")")}}),a.a.createElement("div",{className:"entitlement-item-card-content"},a.a.createElement("div",{className:"entitlement-item-card-content-title"},r),a.a.createElement("div",{className:"entitlement-item-card-content-description"},i)),a.a.createElement(H.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},a.a.createElement(X.a,null,i))))}}]),t}(r.Component)),In=M.a.CancelToken,On=(n(178),n(180),function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).state={code:"",sku:"",hasRedeemError:!1,isFetching:!1},n.handleChangeCode=n.handleChangeCode.bind(Object(Cn.a)(Object(Cn.a)(n))),n.handleChangeSku=n.handleChangeSku.bind(Object(Cn.a)(Object(Cn.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(Cn.a)(Object(Cn.a)(n))),n}return Object(C.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.logToken&&0===this.props.entitlementItems.length&&(this.updateEntitlement(),this.props.setStateFrom("isFetching",!0))}},{key:"componentWillUnmount",value:function(){null!==this.props.entitlementItems&&this.props.setEntitlementItems([])}},{key:"updateEntitlement",value:function(){var e=this;Object(pe.b)({projectId:window.xProjectId,version:"v2"}),this.props.setStateFrom("isFetching",!0),function(e,t){fn&&fn();var n={url:"https://store.xsolla.com/api/v2/projects/entitlement",method:"GET",headers:{Authorization:"Bearer "+t},cancelToken:new In(function(e){fn=e})};return M()(n).then(function(e){return e.data})}(window.xProjectId,this.props.logToken).then(function(t){e.props.setEntitlementItems(t)}).catch(function(){e.props.setEntitlementItems([])})}},{key:"handleChangeCode",value:function(e){this.setState({code:e.target.value})}},{key:"handleChangeSku",value:function(e){this.setState({sku:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;this.setState(Object(y.a)({},this.state,{isFetching:!0})),function(e,t,n,r){fn&&fn();var a={url:"https://store.xsolla.com/api/v1/game_delivery/xsolla_login/redeem_key",method:"POST",headers:{Authorization:"Bearer "+t},data:{project_id:e,digital_content_sku:r,language:"en",key:n},cancelToken:new In(function(e){fn=e})};return M()(a)}(window.xProjectId,this.props.logToken,this.state.code,this.state.sku).then(function(e,n){t.updateEntitlement(),t.setState(Object(y.a)({},t.state,{hasRedeemError:!1,isFetching:!1}))}).catch(function(){console.log("error"),t.setState(Object(y.a)({},t.state,{hasRedeemError:!0,isFetching:!1}))}),e.preventDefault()}},{key:"render",value:function(){var e=this.props.entitlementItems;return a.a.createElement("div",{className:""},a.a.createElement("form",{className:"entitlement-redeem-form",onSubmit:this.handleSubmit},a.a.createElement("input",{className:"entitlement-redeem-input",type:"text",size:"40",placeholder:"Enter your code",onChange:this.handleChangeCode,value:this.state.code}),a.a.createElement("input",{className:"entitlement-redeem-input",type:"text",size:"40",placeholder:"Enter sku of your game",onChange:this.handleChangeSku,value:this.state.sku}),this.state.hasRedeemError&&!this.state.isFetching&&a.a.createElement("span",{className:"entitlement-redeem-error"},"Wrong code"),this.state.isFetching&&a.a.createElement("div",{className:"entitlement-redeem-loader"},a.a.createElement(p.a,null)),a.a.createElement(J.a,{type:"submit",className:"entitlement-redeem-button",variant:"contained"},"Redeem Code")),a.a.createElement("div",{className:"entitlement-list"},e&&e.length?e.map(function(e,t){return a.a.createElement(kn,{key:e.digital_content_sku,order:t,initClass:"initialFlow1",title:e.name,description:e.description,imageUrl:e.image_url})}):a.a.createElement("div",null,"Oops, you have no games yet!")))}}]),t}(r.PureComponent)),Tn=n(234),Sn=n(226),_n=n(243),Bn="375px",Fn="425px",Mn="768px",Vn="1024px",Pn="1440px",zn="1920px",Nn="2560px",Wn={mobileS:"(max-width: ".concat("320px",")"),mobileM:"(max-width: ".concat(Bn,")"),mobileL:"(max-width: ".concat(Fn,")"),tablet:"(max-width: ".concat(Mn,")"),laptop:"(max-width: ".concat(Vn,")"),laptopL:"(max-width: ".concat(Pn,")"),desktop:"(max-width: ".concat(zn,")"),retina:"(max-width: ".concat(Nn,")")},An=n(229);function Gn(){var e=Object(u.a)(["\n  @media "," {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n"]);return Gn=function(){return e},e}function Dn(){var e=Object(u.a)(["\n  @media "," {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n"]);return Dn=function(){return e},e}function qn(){var e=Object(u.a)(["\n  @media "," {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n"]);return qn=function(){return e},e}function Un(){var e=Object(u.a)(["\n  font-size: 0.8em;\n  opacity: 0.3;\n"]);return Un=function(){return e},e}function Rn(){var e=Object(u.a)(["\n  color: ",";\n  font-weight: 600;\n"]);return Rn=function(){return e},e}function Ln(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n\n  @media "," {\n    flex-grow: 1;\n  }\n"]);return Ln=function(){return e},e}function Qn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  @media "," {\n    grid-column: 2 / 2;\n  }\n"]);return Qn=function(){return e},e}function Hn(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n"]);return Hn=function(){return e},e}function Xn(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n"]);return Xn=function(){return e},e}function Jn(){var e=Object(u.a)(["\n  font-weight: bolder;\n  margin-bottom: 5px;\n"]);return Jn=function(){return e},e}function Zn(){var e=Object(u.a)(["  \n  padding: 10px;\n"]);return Zn=function(){return e},e}function Yn(){var e=Object(u.a)(["\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(",");\n"]);return Yn=function(){return e},e}function $n(){var e=Object(u.a)(["\n  display: grid;\n  grid-template-columns: 0.7fr 1.3fr 1fr;\n  overflow: hidden;\n  height: 130px;\n\n  @media "," {\n    height: 185px;\n    grid-template-columns: 0.9fr 1.1fr;\n    grid-template-rows: 120px 1fr;\n  }\n"]);return $n=function(){return e},e}var Kn=function(e){var t=e.item,n=e.changeItemQuantity,r=function(e,t){return Math.round(e*t*100)/100},i=function(){return n(t,t.quantity-1)};return a.a.createElement(er,null,a.a.createElement(tr,{image:t.image_url}),a.a.createElement(nr,null,a.a.createElement(rr,null,t.name),a.a.createElement(cr,null,a.a.createElement(ur,null,t.price.currency," ",r(t.price.amount,t.quantity)),t.quantity>1&&a.a.createElement(lr,null,t.price.currency," ",r(t.price.amount,1)," for one item"))),a.a.createElement(or,null,a.a.createElement(ar,null,t.quantity>1?a.a.createElement(An.a,{color:"inherit",onClick:i},a.a.createElement(mr,null)):a.a.createElement(An.a,{color:"inherit",onClick:i},a.a.createElement(sr,null)),a.a.createElement(ir,null,t.quantity),a.a.createElement(An.a,{color:"inherit",onClick:function(){return n(t,t.quantity+1)}},a.a.createElement(dr,null)))))},er=m.c.div($n(),Wn.mobileL),tr=m.c.div(Yn(),function(e){return e.image}),nr=m.c.div(Zn()),rr=m.c.div(Jn()),ar=m.c.div(Xn()),ir=m.c.div(Hn()),or=m.c.div(Qn(),Wn.mobileL),cr=m.c.div(Ln(),Wn.mobileL),ur=m.c.div(Rn(),function(e){return e.theme.colorAccent}),lr=m.c.div(Un()),sr=Object(m.c)(bt.a)(qn(),Wn.mobileL),mr=Object(m.c)(ft.a)(Dn(),Wn.mobileL),dr=Object(m.c)(pt.a)(Gn(),Wn.mobileL);function pr(){var e=Object(u.a)(["\n  min-width: 80px;\n  text-align: right;\n"]);return pr=function(){return e},e}function hr(){var e=Object(u.a)(["\n  display: flex;\n  font-weight: bold;\n  margin-right: 10px;\n\n  @media "," {\n    justify-content: flex-end;\n    width: 100%;\n    margin-bottom: 15px;\n    margin-right: 0;\n  }\n"]);return hr=function(){return e},e}function fr(){var e=Object(u.a)(["\n  display: flex;\n\n  @media "," {\n    justify-content: flex-end;\n    width: 100%;\n  }\n"]);return fr=function(){return e},e}function gr(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  background-color: ",";\n  border-top: 1px solid ",";\n  padding: 24px 0 24px 0;\n"]);return gr=function(){return e},e}function vr(){var e=Object(u.a)(["\n  display: grid;\n  grid-row-gap: 30px;\n  flex-grow: 1;\n  padding: 16px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]);return vr=function(){return e},e}function yr(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  z-index: 10;\n  padding: 24px 0 8px 0;\n"]);return yr=function(){return e},e}function br(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-radius: ",";\n  background-color: ",";\n  color: ",";\n  padding: 0 32px;\n  width: 680px;\n  max-height: 80vh;\n\n  @media "," {\n    padding: 0 16px;\n    max-height: none;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n"]);return br=function(){return e},e}function xr(){var e=Object(u.a)(["\n  cursor: pointer;\n"]);return xr=function(){return e},e}function Er(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Er=function(){return e},e}var wr=Object(m.c)(Tn.a)(Er()),jr=Object(m.c)(en.a)(xr()),Cr=m.c.div(br(),function(e){return"".concat(e.theme.borderRadius,"px")},function(e){return e.theme.colorBg},function(e){return e.theme.colorText},Wn.tablet),kr=m.c.div(yr(),function(e){return e.theme.colorBg},function(e){return R()(e.theme.colorText).alpha(.1).string()}),Ir=m.c.div(vr()),Or=m.c.div(gr(),function(e){return e.theme.colorBg},R()(function(e){return e.theme.colorText}).alpha(.1).string()),Tr=m.c.div(fr(),Wn.tablet),Sr=m.c.div(hr(),Wn.tablet),_r=m.c.div(pr()),Br=Object(cn.a)(function(e){var t=e.history,n=a.a.useState(!1),r=Object(q.a)(n,2),i=r[0],o=r[1],c=a.a.useContext(W),u=c.cart,l=c.hideCart,s=c.logToken,m=c.payStationHandler,d=c.cartShown,p=c.changeItemQuantityInCart;return a.a.createElement(wr,{open:d,onClose:l,closeAfterTransition:!0,BackdropComponent:_n.a,BackdropProps:{timeout:250}},a.a.createElement(Sn.a,{in:d,timeout:250},a.a.createElement(Cr,null,a.a.createElement(kr,null,a.a.createElement("h4",null,"Cart"),a.a.createElement(jr,{onClick:l})),a.a.createElement(Ir,null,u.items.length>0?u.items.map(function(e){return a.a.createElement(Kn,{item:e,changeItemQuantity:p})}):a.a.createElement("p",null,"Empty cart")),a.a.createElement(Or,null,u.items.length>0&&a.a.createElement(Sr,null,"Subtotal:",a.a.createElement(_r,null,on(function(e){var t=e.reduce(function(e,t){return e+t.price.amount*t.quantity},0);return Math.round(100*t)/100}(u.items),u.price.currency||u.items[0].price.currency).formattedCurrency)),a.a.createElement(Tr,null,a.a.createElement(J.a,{variant:"contained",disabled:0===u.items.length,style:{marginRight:"7px"},onClick:function(){i||u.items.length<=0||(t.push("/purchase"),l())}},"Buy on PS4"),a.a.createElement(J.a,{variant:"contained",disabled:0===u.items.length,onClick:function(){l(),z(u.cartId,s).then(function(e){o(!0),window.xPayStationInit(e.data.token),window.XPayStationWidget.open(),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.CLOSE,function(){return o(!1)}),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.STATUS_DONE,m)}).catch(function(){return o(!1)})}},"Buy on Xsolla"))))))}),Fr=a.a.memo(function(e){var t=e.product,n=e.order,r=e.addToCart,i=a.a.useMemo(function(){return a.a.createElement(Me,{currency:t.price.currency,value:Math.round(100*t.price.amount)/100})},[t]);return a.a.createElement(re,{image:t.image_url,name:t.name,order:n,value:i,description:t.description,actionButtonContent:a.a.createElement(Te.a,null),onAction:function(){return r(t)}})}),Mr=function(){var e=Object(B.a)(_.a.mark(function e(t,n){var r,a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://store.xsolla.com/api/v2/project/".concat(t,"/items/virtual_currency/package"),e.next=3,M.a.get(r,{headers:{Authorization:"Bearer ".concat(n)}});case 3:return a=e.sent,e.abrupt("return",a.data.items);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}();function Vr(){var e=Object(u.a)(["\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ",";\n  justify-content: center;\n"]);return Vr=function(){return e},e}function Pr(){var e=Object(u.a)(["\n  color: ",";\n  position: relative;\n  background-color: transparent;\n  z-index: 1;\n  height: 100%;\n"]);return Pr=function(){return e},e}var zr=function(){var e=a.a.useContext(W),t=e.logToken,n=e.projectId,r=e.addToCart,i=e.setStateFrom,o=e.virtualCurrencies,c=e.areVirtualCurrenciesFetching,u=e.setVirtualCurrencies,l=e.setVirtualCurrenciesError;a.a.useEffect(function(){t&&0===o.length&&(i("areVirtualCurrenciesFetching",!0),Mr(n,t).then(function(e){u(e),i("areVirtualCurrenciesFetching",!1)}).catch(function(e){l(e.message),i("areVirtualCurrenciesFetching",!1)}))},[o]);var s=a.a.useMemo(function(){return o.length>0&&a.a.createElement(Wr,null,o.map(function(e,t){return a.a.createElement(Fr,{order:t,key:e.sku,product:e,addToCart:r})}))},[o]);return a.a.createElement(Nr,null,c?a.a.createElement(f,null):s)},Nr=m.c.div(Pr(),function(e){return e.theme.colorText}),Wr=m.c.div(Vr(),function(e){return"repeat(auto-fit, minmax(\n    ".concat(e.theme.cardWidth,", \n    ").concat(e.theme.cardWidth,"\n  ))")}),Ar={items:"/",currencies:"/crystals",physical:"/physical",inventory:"/inventory",entitlement:"/entitlement",manage:"/manage",purchase:"/purchase"},Gr=[{route:Ar.items,label:"Items"},{route:Ar.currencies,label:"Currencies"},{route:Ar.physical,label:"Merchandise"},{route:Ar.inventory,label:"Inventory"},{route:Ar.entitlement,label:"Entitlement"},{route:Ar.manage,label:"Manage"},{route:Ar.purchase,label:"Server purchase"}],Dr=function(e){return Gr.filter(function(t){return e.includes(t.route)}).sort(function(t,n){return e.indexOf(t.route)-e.indexOf(n.route)})},qr=n(241),Ur=n(184),Rr=n(115),Lr=n.n(Rr),Qr=n(73),Hr=n.n(Qr);function Xr(){var e=Object(u.a)(["\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  text-align: center;\n  padding: 36px;\n  overflow: hidden;\n  margin: 0 70px;\n  border-radius: 8px;\n"]);return Xr=function(){return e},e}function Jr(){var e=Object(u.a)(["\n  padding: 20px 70px;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n  flex-grow: 1;\n  font-size: 22px;\n  width: 600px;\n  & a {\n    /* font-family: 'PS Mono', Courier, monospace; */\n    text-decoration: underline;\n    font-size: 28px;\n    line-height: 0px;\n  }\n"]);return Jr=function(){return e},e}function Zr(){var e=Object(u.a)(["\n  position: fixed;\n  z-index: 99;\n  background: rgba(0, 0, 0, 0.8);\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n"]);return Zr=function(){return e},e}function Yr(){var e=Object(u.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  min-height: 100%;\n  z-index: 100;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return Yr=function(){return e},e}function $r(){var e=Object(u.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  min-height: 100%;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  overflow-y: scroll;\n  padding: 40px 0;\n"]);return $r=function(){return e},e}var Kr=function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(w.a)(this,Object(j.a)(t).call(this,e))).unauthorizedFlow=function(){n.setState({logToken:null}),n.setState({shown:!0})},n.authorizedFlow=function(e){n.setState({logToken:e,shown:!1}),n.user=function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}(e),n.setStateFrom("user",n.user),n.createCart()},n.state={shown:!0,logToken:null,psToken:null},n}return Object(C.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(D,null,function(t){return e.setStateFrom=t.setStateFrom,e.createCart=t.createCart,a.a.createElement("div",null,a.a.createElement(ea,{style:{display:e.state.shown?"flex":"none"}},a.a.createElement(ta,null,a.a.createElement(ra,null,"Current project: ",a.a.createElement("b",null,window.xProjectId)),a.a.createElement(aa,null,a.a.createElement("div",{id:"xl_auth"})),a.a.createElement(ra,null,ia.map(function(e,t){var n=e.project_id,r=e.login_id,i="".concat("https://xsolla.github.io/store-demo/#/","?project_id=").concat(n,"&login_id=").concat(r);return a.a.createElement("div",{key:n+t,style:{marginBottom:"1em"}},a.a.createElement("div",{style:{fontSize:"0.4em"}},a.a.createElement("a",{href:i},n,": ",e.projectName)))}),a.a.createElement("p",null,"Open any Xsolla Store using GET parameters ",a.a.createElement("br",null),a.a.createElement("b",null,"project_id")," and ",a.a.createElement("b",null,"login_id")," (login must point back to https://xsolla.github.io/store-demo/#/)"))),a.a.createElement(na,null)))})}},{key:"componentDidMount",value:function(){window.XloginInit();var e=I();e?this.authorizedFlow(e):this.unauthorizedFlow()}}]),t}(r.Component),ea=m.c.div($r()),ta=m.c.div(Yr()),na=m.c.div(Zr()),ra=m.c.div(Jr()),aa=m.c.div(Xr()),ia=[{projectName:"Xsolla Store Demo",project_id:47278,login_id:"fb2d7c69-bf25-11e9-9244-42010aa80004"}];function oa(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 50px;\n  padding: 0 15px;\n  font-family: 'Helvetica Neue', 'Roboto', Arial, Helvetica, sans-serif;\n  color: ",";\n  background-color: ",";\n"]);return oa=function(){return e},e}function ca(){var e=Object(u.a)(["\n  cursor: pointer;\n  font-family: 'Roboto';\n  text-transform: uppercase;\n  color: #ff005b;\n  margin: 0 1rem;\n"]);return ca=function(){return e},e}function ua(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: row;\n  font-size: 0.8rem;\n  line-height: 2em;\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  font-family: 'Roboto';\n  color: black;\n  border-radius: 4px;\n  padding: 0 0.6rem;\n  cursor: pointer;\n"]);return ua=function(){return e},e}function la(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: flex-end;\n  flex-grow: 1;\n\n  @media "," {\n    justify-content: center;\n  }\n"]);return la=function(){return e},e}function sa(){var e=Object(u.a)(["\n  margin-right: 10px;\n"]);return sa=function(){return e},e}function ma(){var e=Object(u.a)(["\n  &.MuiIconButton-root {\n    color: ",";\n  }\n"]);return ma=function(){return e},e}function da(){var e=Object(u.a)(["\n  display: flex;\n  padding: 15px 20px;\n  min-width: 200px;\n  align-items: center;\n  text-transform: uppercase;\n  text-decoration: none;\n  font-family: ",";\n  font-size: 1.2rem;\n  font-weight: 700;\n  line-height: 1.2rem;\n  height: 100%;\n  color: #d6e0e7;\n  border: none;\n\n  &:hover {\n    color: #ff005b;\n    text-decoration: none;\n  }\n\n  &.active {\n    color: #ff005b;\n  }\n"]);return da=function(){return e},e}function pa(){var e=Object(u.a)(["\n  &.MuiTab-root {\n    text-transform: uppercase;\n    font-family: ",";\n    font-size: 1.4rem;\n    font-weight: 700;\n    line-height: 1.4rem;\n  }\n"]);return pa=function(){return e},e}function ha(){var e=Object(u.a)(["\n  &.MuiTabs-root {\n    height: 100%\n  }\n"]);return ha=function(){return e},e}function fa(){var e=Object(u.a)(["\n  .MuiMenu-list {\n    background-color: ",";\n  }\n"]);return fa=function(){return e},e}var ga=Object(m.c)(Ur.a)(fa(),function(e){return e.theme.colorBg}),va=Object(m.c)(Le.a)(ha()),ya=Object(m.c)(Qe.a)(pa(),function(e){return e.theme.fontFamily}),ba=Object(m.c)(qr.a)(da(),function(e){return e.theme.fontFamily}),xa=Object(m.c)(An.a)(ma(),function(e){return e.theme.colorAccentText}),Ea=m.c.div(sa()),wa=m.c.div(la(),Wn.mobileL),ja=m.c.div(ua()),Ca=m.c.div(ca()),ka=m.c.header(oa(),function(e){return e.theme.colorAccentText},function(e){return e.theme.colorBg}),Ia=Object(cn.a)(function(e){var t=e.location,n=a.a.useContext(W),r=n.logToken,i=n.user,o=n.userBalanceVirtualCurrency,c=n.projectId,u=n.showCart,l=n.setSideMenuVisibility,s=n.isSideMenuShown,m=a.a.useState(null),p=Object(q.a)(m,2),h=p[0],f=p[1],g=function(){return f(null)},y=r&&i,b=Dr([Ar.items,Ar.currencies].concat(Object(v.a)(44056===c?[Ar.physical]:[]))),x=Dr([Ar.inventory,Ar.entitlement,Ar.manage,Ar.purchase]);return a.a.createElement(ka,null,a.a.createElement(d.a,{mdDown:!0},a.a.createElement(va,{value:t.pathname,component:"nav"},b.map(function(e){return a.a.createElement(ya,{key:e.route,component:qr.a,label:e.label,value:e.route,to:e.route})}))),a.a.createElement(d.a,{lgUp:!0},a.a.createElement(xa,{onClick:function(){return l(!s)}},a.a.createElement(Lr.a,null))),y&&a.a.createElement(wa,null,o.map(function(e){return a.a.createElement(Ea,{key:e.sku},a.a.createElement(Me,{image:e.image_url,value:e.amount}))}),a.a.createElement(d.a,{mdDown:!0},a.a.createElement(Ca,{onClick:function(e){return f(e.currentTarget)}},i.email))),a.a.createElement(Kr,null),!r&&a.a.createElement(ja,null,"Log In"),y&&44056!==c&&a.a.createElement(J.a,{variant:"outlined",color:"secondary",size:"small",onClick:function(){O("xsolla_login_token"),O("xsolla_last_click_id"),window.location.reload()}},a.a.createElement(Hr.a,{size:"inherit"})),a.a.createElement(J.a,{variant:"contained",color:"secondary",size:"small",onClick:u},a.a.createElement(Te.a,{size:"inherit"}),a.a.createElement(d.a,{xsDown:!0},"cart")),a.a.createElement(ga,{anchorEl:h,getContentAnchorEl:null,transformOrigin:{vertical:"top",horizontal:"center"},anchorOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(h),onClose:g},x.map(function(e){return a.a.createElement(ba,{key:e.route,onClick:g,activeClassName:"active",to:e.route},e.label)})))}),Oa=n(237),Ta=n(116),Sa=n.n(Ta),_a=n(230);function Ba(){var e=Object(u.a)(["\n  flex-grow: 1;\n  padding: 0 15px;\n  text-transform: uppercase;\n  font-family: Roboto;\n  color: ",";\n"]);return Ba=function(){return e},e}function Fa(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 49px;\n"]);return Fa=function(){return e},e}function Ma(){var e=Object(u.a)(["\n  &.MuiTab-root {\n    color: ",";\n    padding: 15px;\n    font-family: ",";\n    font-size: 1.3rem;\n    line-height: 1.3rem;\n    font-weight: 700;\n  }\n\n  & .MuiTab-wrapper {\n    align-items: flex-start;\n  }\n"]);return Ma=function(){return e},e}function Va(){var e=Object(u.a)(["\n  color: ",";\n"]);return Va=function(){return e},e}function Pa(){var e=Object(u.a)(["\n  &.MuiIconButton-root {\n    color: ",";\n  }\n"]);return Pa=function(){return e},e}function za(){var e=Object(u.a)(["\n  &.MuiDivider-root {\n    margin: 5px 0;\n  }\n"]);return za=function(){return e},e}function Na(){var e=Object(u.a)(["\n  &.MuiDivider-root {\n    background-color: ",";\n    opacity: 0.1;\n    margin-bottom: 5px;\n  }\n"]);return Na=function(){return e},e}function Wa(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  height: 100%;\n  background-color: ",";\n"]);return Wa=function(){return e},e}var Aa=m.c.div(Wa(),function(e){return e.theme.colorBg}),Ga=Object(m.c)(_a.a)(Na(),function(e){return e.theme.colorAccentText}),Da=Object(m.c)(Ga)(za()),qa=Object(m.c)(An.a)(Pa(),function(e){return e.theme.colorAccentText}),Ua=Object(m.c)(Le.a)(Va(),function(e){return e.theme.colorAccent}),Ra=Object(m.c)(Qe.a)(Ma(),function(e){return e.theme.colorAccentText},function(e){return e.theme.fontFamily}),La=m.c.div(Fa()),Qa=m.c.div(Ba(),function(e){return e.theme.colorAccent}),Ha=Object(cn.a)(function(e){var t=e.location,n=a.a.useContext(W),r=n.isSideMenuShown,i=n.user,o=n.logToken,c=n.projectId,u=n.setSideMenuVisibility,l=function(){return u(!1)};a.a.useEffect(function(){return l},[]);var s=o&&i,m=a.a.useMemo(function(){return Dr([Ar.items,Ar.currencies].concat(Object(v.a)(44056===c?[Ar.physical]:[])))},[c]),d=a.a.useMemo(function(){return Dr([Ar.inventory,Ar.entitlement,Ar.manage,Ar.purchase])},[]);return a.a.createElement(Oa.a,{open:r,anchor:"left",onOpen:function(){return u(!0)},onClose:l},a.a.createElement(Aa,null,a.a.createElement(La,null,s&&44056!==c&&a.a.createElement(qa,{onClick:function(){O("xsolla_login_token"),O("xsolla_last_click_id"),window.location.reload()}},a.a.createElement(Hr.a,{size:"inherit"})),a.a.createElement(Qa,null,i.email),a.a.createElement(qa,{onClick:l},a.a.createElement(Sa.a,null))),a.a.createElement(Ga,null),a.a.createElement(Ua,{value:t.pathname,onChange:l,component:"nav",variant:"scrollable",orientation:"vertical"},m.map(function(e){return a.a.createElement(Ra,{component:qr.a,label:e.label,value:e.route,to:e.route})}),a.a.createElement(Da,null),d.map(function(e){return a.a.createElement(Ra,{component:qr.a,label:e.label,value:e.route,to:e.route})}))))});function Xa(){var e=Object(u.a)(["\n  position: absolute;\n  background-color: ",";\n  opacity: 0.8;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"]);return Xa=function(){return e},e}function Ja(){var e=Object(u.a)(["\n  background-image: url(",");\n  z-index: -1;\n  background-size: cover;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"]);return Ja=function(){return e},e}var Za=m.c.div(Ja(),function(e){return e.theme.backgroundUrl}),Ya=m.c.div(Xa(),function(e){return e.theme.colorBg}),$a=function(){var e=a.a.useContext(W);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ia,null),a.a.createElement(d.a,{lgUp:!0},a.a.createElement(Ha,null)),a.a.createElement(Br,null),a.a.createElement(l.a,null,a.a.createElement(s.a,{path:Ar.items,exact:!0,component:ot}),a.a.createElement(s.a,{path:Ar.currencies,component:zr}),a.a.createElement(s.a,{path:Ar.physical,component:Ge}),a.a.createElement(s.a,{path:Ar.inventory,component:Ee}),a.a.createElement(s.a,{path:Ar.entitlement,render:function(){return a.a.createElement(On,e)}}),a.a.createElement(s.a,{path:Ar.manage,render:function(){return a.a.createElement($e,e)}}),a.a.createElement(s.a,{path:Ar.purchase,render:function(){return a.a.createElement(jn,e)}})),a.a.createElement(Za,null,a.a.createElement(Ya,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(G,{projectId:window.xProjectId},a.a.createElement(c.a,{basename:"/"},a.a.createElement($a,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[127,2,1]]]);
//# sourceMappingURL=main.77dd7a1a.chunk.js.map