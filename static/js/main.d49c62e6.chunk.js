(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,n){e.exports=n(184)},107:function(e,t,n){},109:function(e,t,n){},113:function(e,t,n){},138:function(e,t,n){},158:function(e,t,n){},160:function(e,t,n){},162:function(e,t,n){},168:function(e,t,n){},178:function(e,t,n){},180:function(e,t,n){},182:function(e,t,n){},184:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(27),c=n.n(o),l=(n(107),n(3)),s=n(8),u=n(9),m=n(11),d=n(10),p=n(12),h=n(213),f=n(186),v=n(4),g=(n(109),n(111),n(205)),y=n(216),b=(n(113),n(203)),x=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={expanded:!1,cardShown:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.order;this.state.cardShown||setTimeout(function(){e.setState({cardShown:!0})},100*t)}},{key:"render",value:function(){var e=this.props,t=e.initClass,n=e.imageUrl,a=e.title,r=e.description,o=e.quantity,c=e.handleConsumeItem,l=e.remainingUses;return i.a.createElement("div",{className:"inventory-item ".concat(this.state.cardShown?"":t)},i.a.createElement("div",{className:"inventory-item-card"},i.a.createElement("div",{className:"inventory-item-card-media",style:{backgroundImage:"url(".concat(n,")")}}),i.a.createElement("div",{className:"inventory-item-card-content"},i.a.createElement("div",{className:"inventory-item-card-content-title"},a),i.a.createElement("div",{className:"inventory-item-card-content-description"},r)),i.a.createElement("div",{className:"inventory-item-card-actions"},i.a.createElement("div",{className:"inventory-item-card-actions-quantity"},"Quantity: ".concat(o)),l?i.a.createElement(b.a,{variant:"contained",onClick:c},"Consume"):""),i.a.createElement(y.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},i.a.createElement(g.a,null,r))))}}]),t}(r.Component),E=n(13),k=n.n(E),j=k.a.CancelToken,C=n(17),w=(n(138),n(86)),I=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.logToken&&null===this.props.inventoryItems&&(this.updateInventory(),this.props.updateVirtualCurrencyBalance())}},{key:"componentWillUnmount",value:function(){null!==this.props.inventoryItems&&this.props.setInventoryItems(null)}},{key:"componentDidUpdate",value:function(e,t,n){(e.cart.cartId!==this.props.cart.cartId&&e.cart.items.length>0||this.props.cartWithItemsBuyingByVC.items.length!==e.cartWithItemsBuyingByVC.items.length)&&this.updateInventory()}},{key:"updateInventory",value:function(){var e=this;this.props.setStateFrom("fetching",!0);this.props.logToken;Object(C.b)({projectId:window.xProjectId,version:"v2"}),function(e,t){a&&a();var n={url:"https://store.xsolla.com/api/v2/project/".concat(e,"/user/inventory/items"),method:"GET",headers:{Authorization:"Bearer "+t},cancelToken:new j(function(e){a=e})};return k()(n).then(function(e){return e.data.items})}(window.xProjectId,this.props.logToken).then(function(t){e.props.setInventoryItems(t)}).catch(function(){e.props.setInventoryItems([])})}},{key:"consumeItem",value:function(e){var t=this,n=this.props.logToken;Object(C.b)({projectId:window.xProjectId,version:"v2"}),new w.a(n).consumeItem(e.sku,1,e.instance_id).finally(function(){t.props.setStateFrom("fetching",!0)})}},{key:"render",value:function(){var e=this,t=this.props.inventoryItems;return i.a.createElement("div",null,i.a.createElement("div",{className:""},i.a.createElement("div",{className:"inventory-list"},t&&t.length?t.filter(function(e){return"virtual_good"===e.type}).map(function(t,n){return i.a.createElement(x,{key:t.sku,order:n,initClass:"initialFlow1",title:t.name,description:t.description,imageUrl:t.image_url,quantity:t.quantity,remainingUses:t.remaining_uses,handleConsumeItem:function(){return e.consumeItem(t)}})}):i.a.createElement("div",null,"Oops, you have nothing bought yet!"))))}}]),t}(r.PureComponent),O=(n(158),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={expanded:!1,cardShown:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.order;this.state.cardShown||setTimeout(function(){e.setState({cardShown:!0})},100*t)}},{key:"render",value:function(){var e=this.props,t=e.initClass,n=e.imageUrl,a=e.title,r=e.description,o=e.price,c=e.currency,l=e.handleBuyByRealCurrency;return i.a.createElement("div",{className:"physical-item ".concat(this.state.cardShown?"":t)},i.a.createElement("div",{className:"physical-item-card"},i.a.createElement("div",{className:"physical-item-card-media",style:{backgroundImage:"url(".concat(n,")")}}),i.a.createElement("div",{className:"physical-item-card-content"},i.a.createElement("div",{className:"physical-item-card-content-title"},a),i.a.createElement("div",{className:"physical-item-card-content-description"},r)),i.a.createElement("div",{className:"physical-item-card-actions"},i.a.createElement("div",{className:"physical-item-card-actions-price"},c," ",Math.round(100*o)/100),i.a.createElement(b.a,{variant:"contained",onClick:l},"Buy now")),i.a.createElement(y.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},i.a.createElement(g.a,null,r))))}}]),t}(r.Component));var T=n(87),S=(n(160),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={isPurchasing:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.logToken&&null===this.props.physicalItems&&(this.updateCatalogue(),this.props.updateVirtualCurrencyBalance())}},{key:"componentWillUnmount",value:function(){null!==this.props.physicalItems&&this.props.setPhysicalItems(null)}},{key:"updateCatalogue",value:function(){var e,t,n=this;(e=window.xProjectId,t=this.props.logToken,Object(C.b)({projectId:e,version:"v2"}),new T.a(t).getPhysicalGoodList().then(function(e){return e.data.items})).then(function(e){n.props.setPhysicalItems(e)}).catch(function(){n.props.setPhysicalItems([])})}},{key:"buyItem",value:function(e){var t=this;if(!this.state.isPurchasing){var n=this.props.logToken;this.setState({isPurchasing:!0}),function(e,t){var n={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/payment/item/"+e.sku,method:"POST",headers:{Authorization:"Bearer "+t}};return k()(n)}(e,n).then(function(e){window.xPayStationInit(e.data.token,{height:680}),window.XPayStationWidget.open(),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.CLOSE,function(){t.setState({isPurchasing:!1})})}).catch(function(e){t.setState({isPurchasing:!1})})}}},{key:"render",value:function(){var e=this,t=this.props.physicalItems;return i.a.createElement("div",null,i.a.createElement("div",{className:""},i.a.createElement("div",{className:"physical-list"},t&&t.length&&t.map(function(t,n){return i.a.createElement(O,{key:t.sku,order:n,initClass:"initialFlow1",title:t.name,description:t.description,imageUrl:t.image_url,quantity:t.quantity,currency:t.price.currency,price:t.price.amount,handleBuyByRealCurrency:function(){return e.buyItem(t)}})}))))}}]),t}(r.PureComponent)),_=n(49),N=n.n(_),B=n(48),P=n.n(B),F=n(63);n(162);function z(){var e=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n"]);return z=function(){return e},e}var G=function(e){function t(){var e;Object(s.a)(this,t);return(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={isPurchasing:!1,inventoryItem:"helmet_1",quantity:1,users:[{id:"d342dad2-9d59-11e9-a384-42010aa8003f",name:"support@xsolla.com"},{id:"7d8b1f52-7d3f-400b-acd8-46e3a4368596",name:"v.legotkin@xsolla.com"},{id:"27bc1227-48a3-4da8-bb86-f8d093f68805",name:"r.ushakov@xsolla.com"},{id:"a7d10a4e-3f68-43cc-a6b2-893d2c68fd14",name:"p.sanachev@xsolla.com"}],user:"d342dad2-9d59-11e9-a384-42010aa8003f",showToast:!1,statusToast:"processing",operationDetails:null},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){null===this.props.manageInventoryItems&&(this.getItems(),this.props.updateVirtualCurrencyBalance())}},{key:"getItems",value:function(){var e=this;this.props.setStateFrom("fetching",!0),function(e){var t={url:"https://store.xsolla.com/api/v2/project/".concat(e,"/items/virtual_items"),method:"GET"};return k()(t).then(function(e){return e.data.items})}(window.xProjectId).then(function(t){e.props.setManageInventoryItems(t)}).catch(function(){})}},{key:"changeInventoryItem",value:function(e){this.setState({inventoryItem:e.target.value})}},{key:"changeUser",value:function(e){this.setState({user:e.target.value})}},{key:"setItemQuantity",value:function(e){e>=1&&this.setState({quantity:e})}},{key:"setShowToast",value:function(e){this.setState({showToast:e})}},{key:"itemOperation",value:function(e){var t=this,n={type:e,user:this.state.user,item:this.state.inventoryItem,count:this.state.quantity};this.setState({showToast:!0,statusToast:"processing",operationDetails:null}),function(e){var t={url:"https://alexanderlab.club:4093",method:"POST",data:e};return k()(t).then(function(e){return e.data})}(n).then(function(e){t.setState({showToast:!0,statusToast:"complete",operationDetails:e.operations[0].items})}).catch(function(){})}},{key:"rewardItem",value:function(e){this.itemOperation("reward")}},{key:"revokeItem",value:function(){this.itemOperation("revoke")}},{key:"render",value:function(){var e=this,t=this.props.manageInventoryItems,n=this.state,a=n.quantity,r=n.users,o=n.showToast,c=n.statusToast,l=n.operationDetails;return i.a.createElement("div",{className:"manage-inventory__row"},i.a.createElement("div",{className:"manage-inventory__alert"},i.a.createElement(F.a,{onClose:function(t){return e.setShowToast(!1)},show:o,variant:"processing"===c?"primary":"success",dismissible:!0},i.a.createElement(F.a.Heading,null,"processing"===c?"Operation is processing":"Operation complete!"),i.a.createElement("p",null,l&&l.length?l.map(function(e){return i.a.createElement("div",null,i.a.createElement("div",null,"Item: ",i.a.createElement("b",null,t.filter(function(t){return t.sku===e.sku}).map(function(e){return e.name}))),i.a.createElement("div",null,"Quantity: ",i.a.createElement("b",null,null===e.quantity?0:e.quantity)))}):""))),i.a.createElement("div",{className:""},i.a.createElement("div",{className:"manage-inventory"},i.a.createElement("div",{className:"manage-inventory__user-list"},i.a.createElement("div",{className:"manage-inventory__title"},"User"),i.a.createElement("div",null,i.a.createElement("select",{value:this.state.user,onChange:function(t){return e.changeUser(t)}},r.map(function(e){return i.a.createElement("option",{value:e.id},e.name)})))),i.a.createElement("div",{className:"manage-inventory-item-container"},i.a.createElement("div",{className:"manage-inventory-list"},i.a.createElement("div",{className:"manage-inventory__title"},"Item"),i.a.createElement("div",null,t&&t.length?i.a.createElement("select",{value:this.state.inventoryItem,onChange:function(t){return e.changeInventoryItem(t)}},t.map(function(e){return i.a.createElement("option",{value:e.sku},e.name)})):i.a.createElement("div",null,"Nothing to show"))),i.a.createElement("div",{className:"manage-inventory__quantity"},i.a.createElement("div",{className:"manage-inventory__title"},"Quantity"),i.a.createElement("div",{className:"manage-inventory__quantity-change"},i.a.createElement(P.a,{style:a<2?{opacity:.4}:{},onClick:function(){e.setItemQuantity(a-1)}}),i.a.createElement(W,null,a),i.a.createElement(N.a,{onClick:function(){e.setItemQuantity(a+1)}})))),i.a.createElement("div",{className:"manage-inventory-actions"},i.a.createElement(b.a,{type:"submit",variant:"contained",onClick:function(t){return e.rewardItem(t)}},"Reward"),i.a.createElement(b.a,{variant:"contained",onClick:function(t){return e.revokeItem(t)}},"Revoke")))))}}]),t}(r.PureComponent),W=v.b.div(z()),V=n(33),M=n(215),R=(n(166),function(){var e;return window.location.search&&(e=function(e){e=e.split("+").join(" ");for(var t,n={},a=/[?&]?([^=]+)=([^&]*)/g;t=a.exec(e);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return n}(window.location.search).token),e?(!function(e,t){var n=new Date;n.setTime(n.getTime()+864e5);var a="expires="+n.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}("xsolla_login_token",e),window.history.pushState("","",document.location.pathname)):e=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var r=n[a];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}("xsolla_login_token"),e&&"undefined"!==e?e:null});function U(){return 44056===window.xProjectId?"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE5NjIyMzQwNDgsImlzcyI6Imh0dHBzOi8vbG9naW4ueHNvbGxhLmNvbSIsImlhdCI6MTU2MjE0NzY0OCwidXNlcm5hbWUiOiJ4c29sbGEiLCJ4c29sbGFfbG9naW5fYWNjZXNzX2tleSI6IjA2SWF2ZHpDeEVHbm5aMTlpLUc5TmMxVWFfTWFZOXhTR3ZEVEY4OFE3RnMiLCJzdWIiOiJkMzQyZGFkMi05ZDU5LTExZTktYTM4NC00MjAxMGFhODAwM2YiLCJlbWFpbCI6InN1cHBvcnRAeHNvbGxhLmNvbSIsInR5cGUiOiJ4c29sbGFfbG9naW4iLCJ4c29sbGFfbG9naW5fcHJvamVjdF9pZCI6ImU2ZGZhYWM2LTc4YTgtMTFlOS05MjQ0LTQyMDEwYWE4MDAwNCIsInB1Ymxpc2hlcl9pZCI6MTU5MjR9.GCrW42OguZbLZTaoixCZgAeNLGH2xCeJHxl8u8Xn2aI":R()}function A(e){return document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;"}var D,H=n(206),q=n(96),Q=n(50),L=n(14),J=n(7),X=n(26),Z=n.n(X),Y=n(38),$=k.a.CancelToken;function K(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(Y.a)(Z.a.mark(function e(t,n){var a,r,i,o,c,l,s;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,fetch("https://store.xsolla.com/api/v1/project/"+t+"/items/groups",{method:"GET",headers:{Authorization:"Bearer "+n}});case 3:return i=e.sent,e.next=6,fetch("https://store.xsolla.com/api/v2/project/"+t+"/items/virtual_currency/package",{method:"GET"});case 6:return o=e.sent,e.next=9,o.json();case 9:if(c=e.sent,!i){e.next=19;break}return e.next=13,i.json();case 13:return l=(l=e.sent).groups,e.next=17,Promise.all(l.map(function(e,n){return te(t,e)})).then(function(e){return e});case 17:s=e.sent,r=r.concat(s);case 19:return a={virtualItems:r,virtualCurrencyPackages:c.items},e.abrupt("return",a);case 21:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function te(e,t){return new Promise(function(n,a){fetch("https://store.xsolla.com/api/v2/project/"+e+"/items/virtual_items/group/"+t.external_id).then(function(e){return e.json()}).then(function(e){var a=e.items;t.products=a,n(t)}).catch(function(e){a(e.message)})})}function ne(e,t,n,a){var r=e.sku,i=void 0===r?"sku":r;D&&D();var o={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/cart/"+n+"/item/"+i,method:"PUT",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+a},data:JSON.stringify({quantity:t})};return k()(o).then(function(e){e.data}).catch(function(e){})}var ae=i.a.createContext(),re={colorText:"#D6E0E7",colorAccent:"#FF005B",colorAccentText:"#F6FAFF",colorBg:"#011627",colorSecondary:"#495C6B",borderRadius:8,backgroundUrl:"https://res.cloudinary.com/maiik/image/upload/v1549624607/Xsolla/HomePage_Hero_Illustration_1440_oabqmk.jpg",cardWidth:"300",boxShadow:"0 5px 12px 0px rgba(0,0,0,0.2)",padding:"8px",transitionTime:"0.3s",transitionEasing:"ease-in-out",transition:"all 0.3s ease-in-out",transitionStyle:"0.3s ease-in-out",fontFamily:'"Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"'},ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).showCart=function(){n.setState({cartShown:!n.state.cartShown})},n.setInventoryItems=function(e){n.setState({inventoryItems:e,fetching:!1})},n.setEntitlementItems=function(e){n.setState({entitlementItems:e,fetching:!1})},n.setManageInventoryItems=function(e){n.setState({manageInventoryItems:e,fetching:!1})},n.setPhysicalItems=function(e){n.setState({physicalItems:e,fetching:!1})},n.getCart=function(){var e=function(e,t){D&&D();var n={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/cart/"+e,method:"GET",headers:{Authorization:"Bearer "+t},cancelToken:new $(function(e){D=e})};return k()(n).then(function(e){return e}).catch(function(e){})}(n.state.cart.cartId,n.state.logToken);e.then(function(t){!e.isCancel&&t&&n.setState(function(e){return{cart:{cartId:t.data.cart_id,items:t.data.items.sort(n.compareItems),price:t.data.price},isFetching:!1}})})},n.createCart=function(){var e=this;(function(e){var t={url:"https://store.xsolla.com/api/v1/project/"+window.xProjectId+"/cart",method:"POST",headers:{Authorization:"Bearer "+e}};return k()(t).then(function(e){return e}).catch(function(e){})})(this.state.logToken).then(function(t){e.setState(function(e){return{cart:{cartId:t.data.id,items:[],price:{amount:0,amount_without_discount:0}}}})})}.bind(Object(J.a)(Object(J.a)(n))),n.changeTheme=function(e){var t=null;"string"===typeof e?(t=e,n.setState(Object(L.a)({},n.state,{theme:Object(L.a)({},n.state.theme,{colorBg:t})}))):n.setState(Object(L.a)({},n.state,{theme:Object(L.a)({},n.state.theme,e)}),function(){})},n.changeCardSize=function(e){var t=n.state.theme;t.cardWidth=e,n.changeTheme(t)},n.clearCart=function(){n.showCart(),n.createCart(),n.updateVirtualCurrencyBalance()},n.payStationHandler=function(e,t){n.clearCart()},n.setPsToken=function(e){this.setState({psToken:e})}.bind(Object(J.a)(Object(J.a)(n))),n.handleDetail=function(){console.log("hello from handleDetail")},n.setStateFrom=function(e,t){this.setState(Object(L.a)({},this.state,Object(Q.a)({},e,t)))}.bind(Object(J.a)(Object(J.a)(n))),n.compareItems=function(e,t){return e.sku>t.sku?1:e.sku<t.sku?-1:0},n.buyByVC=function(e,t){n.setState({cartWithItemsBuyingByVCShown:!0,cartWithItemsBuyingByVC:{items:[e],vcPriceSku:t}})},n.clearVCCart=function(){n.setState({cartWithItemsBuyingByVCShown:!1,cartWithItemsBuyingByVC:{items:[],vcPriceSku:null}}),n.updateVirtualCurrencyBalance()},n.addToCart=function(e){n.state.cart?-1!==n.state.cart.items.findIndex(function(t){return t.sku===e.sku})?(n.getCart(),n.setState({cartShown:!0})):(n.setState({isFetching:!0,cart:Object(L.a)({},n.state.cart,{items:[Object(L.a)({},e,{quantity:1})].concat(Object(q.a)(n.state.cart.items)).sort(n.compareItems),price:Object(L.a)({},n.state.cart.price,{amount:n.state.cart.price&&n.state.cart.price.amount+e.price.amount,amount_without_discount:n.state.cart.price&&n.state.cart.price.amount_without_discount+e.price.amount_without_discount})})}),ne(e,1,n.state.cart.cartId,n.state.logToken).then(function(e){n.getCart()}),n.showCart()):(n.setState({isFetching:!0}),ne(e,1,n.state.cart.cartId,n.state.logToken).then(function(e){n.getCart()}),n.showCart())},n.removeFromCart=function(e){n.state.cart&&n.setState({isFetching:!0,cart:Object(L.a)({},n.state.cart,{items:n.state.cart.items.filter(function(t){return t.sku!==e.sku}).sort(n.compareItems),price:Object(L.a)({},n.state.cart.price,{amount:n.state.cart.price.amount-e.price.amount*e.quantity,amount_without_discount:n.state.cart.price.amount_without_discount-e.price.amount_without_discount*e.quantity})})})},n.changeItemQuantityInCart=function(e,t){if(t<=0)n.removeFromCart(e),function(e,t,n){var a=e.sku,r=void 0===a?"sku":a;D&&D();var i={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/cart/"+t+"/item/"+r,method:"DELETE",headers:{Authorization:"Bearer "+n}};return k()(i).then(function(e){e.data}).catch(function(e){})}(e,n.state.cart.cartId,n.state.logToken).then(function(){n.getCart()});else{var a=n.state.cart.items.findIndex(function(t){return t.sku===e.sku}),r=n.state.cart.items;r.splice(a,1,Object(L.a)({},e,{quantity:t})),n.setState({isFetching:!0,cart:Object(L.a)({},n.state.cart,{items:r.sort(n.compareItems)})}),ne(e,t,n.state.cart.cartId,n.state.logToken).then(function(){n.getCart()})}},n.hideCart=function(){this.setState({cartShown:!1,cartWithItemsBuyingByVCShown:!1})}.bind(Object(J.a)(Object(J.a)(n))),n.setGroups=function(e){this.setState({virtualItems:e,fetching:!1})}.bind(Object(J.a)(Object(J.a)(n))),n.setCurrs=function(e){this.setState({fetching:!1,virtualItems:e.virtualItems,currency:e.currency,subscriptions:e.subscriptions,virtualCurrencyPackages:e.virtualCurrencyPackages})}.bind(Object(J.a)(Object(J.a)(n))),n.getTheme=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return"all"===e?n.state.theme:"".concat(n.state.theme[e]).concat("borderRadius"===e?"px":"")},n.setProducts=function(e){this.setState({storeProducts:e})}.bind(Object(J.a)(Object(J.a)(n))),n.updateVirtualCurrencyBalance=function(){(function(e){var t={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/user/virtual_currency_balance",method:"GET",headers:{Authorization:"Bearer "+e}};return k()(t)})(n.state.logToken).then(function(e){n.setState({userBalanceVirtualCurrency:e.data.items})})},n.state={projectId:e.projectId,logToken:U(),userBalanceVirtualCurrency:[],activeGroup:"first",loginShown:!0,activeModule:"virtualItems",virtualItems:null,virtualCurrencyPackages:null,currency:null,subscriptions:null,inventoryItems:null,entitlementItems:null,manageInventoryItems:null,physicalItems:null,cartShown:!1,cart:{cartId:null,items:[],price:{amount:0,amount_without_discount:0}},cartWithItemsBuyingByVCShown:!1,cartWithItemsBuyingByVC:{items:[]},isFetching:!1,psToken:"",theme:re},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUpdate",value:function(e,t){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement(ae.Provider,{value:Object(L.a)({},this.state,{handleDetail:this.handleDetail,setPsToken:this.setPsToken,setGroups:this.setGroups,setProducts:this.setProducts,setStateFrom:this.setStateFrom,setCurrs:this.setCurrs,setInventoryItems:this.setInventoryItems,setEntitlementItems:this.setEntitlementItems,setManageInventoryItems:this.setManageInventoryItems,setPhysicalItems:this.setPhysicalItems,addToCart:this.addToCart,buyByVC:this.buyByVC,clearVCCart:this.clearVCCart,getTheme:this.getTheme.bind(this),changeTheme:this.changeTheme,changeCardSize:this.changeCardSize,createCart:this.createCart,showCart:this.showCart,changeItemQuantityInCart:this.changeItemQuantityInCart,buyCart:this.buyCart,payStationHandler:this.payStationHandler,updateVirtualCurrencyBalance:this.updateVirtualCurrencyBalance,hideCart:this.hideCart})},this.props.children)}}]),t}(r.Component),oe=ae.Consumer;function ce(){var e=Object(l.a)(["\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  text-align: center;\n  padding: 36px;\n  overflow: hidden;\n  margin: 0 70px;\n  border-radius: 8px;\n"]);return ce=function(){return e},e}function le(){var e=Object(l.a)(["\n  padding: 20px 70px;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n  flex-grow: 1;\n  font-size: 22px;\n  width: 600px;\n  & a {\n    /* font-family: 'PS Mono', Courier, monospace; */\n    text-decoration: underline;\n    font-size: 28px;\n    line-height: 0px;\n  }\n"]);return le=function(){return e},e}function se(){var e=Object(l.a)(["\n  position: fixed;\n  z-index: 99;\n  background: rgba(0, 0, 0, 0.8);\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n"]);return se=function(){return e},e}function ue(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  min-height: 100%;\n  z-index: 100;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return ue=function(){return e},e}function me(){var e=Object(l.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  min-height: 100%;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  overflow-y: scroll;\n  padding: 40px 0;\n"]);return me=function(){return e},e}var de=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).unauthorizedFlow=function(){n.setState({logToken:null}),n.setState({shown:!0})},n.authorizedFlow=function(e){n.setState({logToken:e,shown:!1}),n.user=function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}(e),n.setStateFrom("user",n.user),n.createCart()},n.state={shown:!0,logToken:null,psToken:null},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{flexGrow:1}},i.a.createElement(oe,null,function(t){return e.setStateFrom=t.setStateFrom,e.createCart=t.createCart,i.a.createElement("div",null,i.a.createElement(pe,{style:{display:e.state.shown?"flex":"none"}},i.a.createElement(he,null,i.a.createElement(ve,null,"Current project: ",i.a.createElement("b",null,window.xProjectId)),i.a.createElement(ge,null,i.a.createElement("div",{id:"xl_auth"})),i.a.createElement(ve,null,ye.map(function(e,t){var n=e.project_id,a=e.login_id,r="".concat("https://xsolla.github.io/store-demo/#/","?project_id=").concat(n,"&login_id=").concat(a);return i.a.createElement("div",{key:n+t,style:{marginBottom:"1em"}},i.a.createElement("div",{style:{fontSize:"0.4em"}},i.a.createElement("a",{href:r},n,": ",e.projectName)))}),i.a.createElement("p",null,"Open any Xsolla Store using GET parameters ",i.a.createElement("br",null),i.a.createElement("b",null,"project_id")," and ",i.a.createElement("b",null,"login_id")," (login must point back to https://xsolla.github.io/store-demo/#/)"))),i.a.createElement(fe,null)))}))}},{key:"componentDidMount",value:function(){window.XloginInit();var e=U();e?this.authorizedFlow(e):this.unauthorizedFlow()}}]),t}(r.Component),pe=v.b.div(me()),he=v.b.div(ue()),fe=v.b.div(se()),ve=v.b.div(le()),ge=v.b.div(ce()),ye=[{projectName:"Xsolla Store Demo",project_id:47278,login_id:"fb2d7c69-bf25-11e9-9244-42010aa80004"}],be=(n(168),n(207));function xe(){var e=Object(l.a)(["\n  display: flex;\n  flex-grow: 1;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: flex-end;\n  color: var(--mainWhite);\n  list-style-type: none;\n  position: relative;\n  z-index: 10;\n  margin-bottom: 0;\n"]);return xe=function(){return e},e}function Ee(){var e=Object(l.a)(['\n  display: flex;\n  flex-direction: row;\n  font-family: "Helvetica Neue", "Roboto", Arial, Helvetica, sans-serif;\n']);return Ee=function(){return e},e}function ke(){var e=Object(l.a)(['\n  font-family: "Helvetica Neue", "Roboto", Arial, Helvetica, sans-serif;\n  color: var(--mainWhite);\n  position: relative;\n  display: flex;\n  align-items: center;\n  z-index: 10;\n']);return ke=function(){return e},e}function je(){var e=Object(l.a)(['\n  font-family: "Roboto";\n  color: #ff005b;\n  margin: 0 1rem;\n']);return je=function(){return e},e}function Ce(){var e=Object(l.a)(['\n  display: flex;\n  flex-direction: row;\n  font-size: 0.8rem;\n  line-height: 2em;\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  font-family: "Roboto";\n  color: black;\n  background: var(--mainWhite);\n  border-radius: 4px;\n  padding: 0 0.6rem;\n  cursor: pointer;\n']);return Ce=function(){return e},e}function we(){var e=Object(l.a)(['\n  flex-grow: 1;\n  text-transform: uppercase;\n  font-family: "Roboto";\n  color: "var(--mainWhite)";\n']);return we=function(){return e},e}var Ie=Object(H.a)({currencies:{marginLeft:10,marginRight:4,height:18,width:18}});function Oe(e){var t=e.showCart,n=void 0===t?function(){}:t,a=i.a.useContext(ae),r=Ie(),o=i.a.useState({shown:!1}),c=Object(V.a)(o,2),l=(c[0],c[1]);return i.a.createElement(Ne,{style:{zIndex:100,color:a.getTheme("colorAccentText"),backgroundColor:"#011627"}},i.a.createElement("div",{className:"navbar-links"},i.a.createElement(M.a,{activeClassName:"navbar-link_active",exact:!0,to:"/"},i.a.createElement("span",{className:"navbar-link"},"Items")),i.a.createElement(M.a,{activeClassName:"navbar-link_active",to:"/crystals"},i.a.createElement("span",{className:"navbar-link"},"Currencies")),44056===a.projectId&&i.a.createElement(M.a,{activeClassName:"navbar-link_active",to:"/physical"},i.a.createElement("span",{className:"navbar-link"},"Merchandise")),i.a.createElement(M.a,{activeClassName:"navbar-link_active",to:"/inventory"},i.a.createElement("span",{className:"navbar-link"},"Inventory")),i.a.createElement(M.a,{activeClassName:"navbar-link_active",to:"/entitlement"},i.a.createElement("span",{className:"navbar-link"},"Entitlement")),i.a.createElement(M.a,{activeClassName:"navbar-link_active",to:"/manage"},i.a.createElement("span",{className:"navbar-link"},"Manage"))),i.a.createElement(Pe,null,i.a.createElement("li",{style:{display:"flex",justifyContent:"center"}},i.a.createElement(Te,null,!a.logToken&&i.a.createElement(Se,{onClick:function(){l({shown:!0})}},"Log In"),a.logToken&&a.user&&i.a.createElement(Be,null,a.userBalanceVirtualCurrency&&a.userBalanceVirtualCurrency.map(function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(be.a,{src:e.image_url,className:r.currencies}),e.amount)}),i.a.createElement(_e,null,a.user.email))),i.a.createElement(de,null))),a.logToken&&a.user&&44056!==a.projectId&&i.a.createElement("div",{className:"navbar-logout",onClick:function(){A("xsolla_login_token"),A("xsolla_last_click_id"),window.location.reload()}},i.a.createElement("span",{className:"mr-10"},i.a.createElement("i",{className:"fas fa-sign-out-alt"}))),i.a.createElement("div",{className:"navbar-cart",onClick:function(e){return n(e)}},i.a.createElement("span",{className:"mr-10"},i.a.createElement("i",{className:"fas fa-cart-plus"})," cart")))}var Te=v.b.div(we()),Se=v.b.div(Ce()),_e=v.b.div(je()),Ne=v.b.div(ke()),Be=v.b.div(Ee()),Pe=v.b.ul(xe()),Fe=n(19),ze=n(92),Ge=n.n(ze),We=n(93),Ve=n.n(We),Me=n(94),Re=n.n(Me),Ue=n(30),Ae=n.n(Ue);function De(){var e=Object(l.a)(["\n  flex-grow: 1;\n  font-size: 0.8em;\n  /* color: ","; */\n  /* font-weight: 600; */\n  opacity: 0.3;\n"]);return De=function(){return e},e}function He(){var e=Object(l.a)(["\n  flex-grow: 1;\n  color: ",";\n  font-weight: 600;\n"]);return He=function(){return e},e}function qe(){var e=Object(l.a)(["\n  display: block;\n  /* height: 0; */\n  margin-top: 8px;\n  min-height: 120px;\n  flex-grow: 1;\n  /* padding-top: 56.25%; */\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(",");\n"]);return qe=function(){return e},e}function Qe(){var e=Object(l.a)(["\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    "]);return Qe=function(){return e},e}function Le(){var e=Object(l.a)(["\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ",";\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    "]);return Le=function(){return e},e}function Je(){var e=Object(l.a)(["\n  ","\n  ","\n"]);return Je=function(){return e},e}function Xe(){var e=Object(l.a)(["\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    "]);return Xe=function(){return e},e}function Ze(){var e=Object(l.a)(["\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ",";\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    "]);return Ze=function(){return e},e}function Ye(){var e=Object(l.a)(["\n  ","\n  ","\n"]);return Ye=function(){return e},e}function $e(){var e=Object(l.a)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"]);return $e=function(){return e},e}function Ke(){var e=Object(l.a)(["\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0 !important;\n  margin-bottom: 8px;\n"]);return Ke=function(){return e},e}function et(){var e=Object(l.a)(["\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  /* max-height: 120px; */\n  width: 100%;\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  max-width: 400px;\n  margin: 0 auto;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]);return et=function(){return e},e}function tt(){var e=Object(l.a)(["\n          box-shadow: ",";\n        "]);return tt=function(){return e},e}function nt(){var e=Object(l.a)(["\n      display: grid;\n      grid-template-columns: 20% 50% 30%;\n      grid-template-rows: 160px;\n      place-content: center;\n    "]);return nt=function(){return e},e}function at(){var e=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    max-width: ",";\n    min-width: ",";\n    height: ",";\n    /* height: 360px; */\n    margin: ","px;\n    flex-shrink: 0;\n    flex-grow: 1;\n    flex-base: 50%;\n    background: transparent;\n    /* boxShadow: none; */\n    /* color: var(--mainWhite); */\n    transition: box-shadow ",";\n    border-radius: ","\n    padding: ",";\n  "]);return at=function(){return e},e}function rt(){var e=Object(l.a)(["\n  color: ",";\n  ","\n\n  ","\n  &:hover {\n    ","\n  }\n"]);return rt=function(){return e},e}function it(){var e=Object(l.a)(["\n  position: relative;\n\n  /* transition: all "," ease-in-out; */\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  &.initialFlow1 {\n    opacity: 0;\n    transform: translateY(20px) scale(1);\n  }\n"]);return it=function(){return e},e}function ot(){var e=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n"]);return ot=function(){return e},e}function ct(){var e=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n"]);return ct=function(){return e},e}var lt=Object(H.a)({currencies:{height:24,width:24,marginRight:4}}),st=v.b.div(ct()),ut=v.b.div(ot()),mt=v.b.div(it(),function(e){return e.order+"s"}),dt=v.b.div(rt(),function(e){return e.getTheme("colorText")},function(e){return!e.cardType&&Object(v.a)(at(),function(e){return"".concat(e.getTheme("cardWidth"),"px")},function(e){return"".concat(e.getTheme("cardWidth"),"px")},function(e){return"".concat(e.getTheme("cardWidth"),"px")},16,function(e){return e.getTheme("transitionStyle")},function(e){return e.getTheme("borderRadius")},function(e){return e.getTheme("padding")})},function(e){return e.cardType&&Object(v.a)(nt())},function(e){return!e.cardType&&Object(v.a)(tt(),function(e){return e.getTheme("boxShadow")})}),pt=v.b.div(et()),ht=Object(v.b)(g.a)(Ke()),ft=v.b.div($e()),vt=v.b.div(Ye(),function(e){return!e.cardType&&Object(v.a)(Ze(),function(e){return Ae()(e.getTheme("colorText")).alpha(.1).string()})},function(e){return e.cardType&&Object(v.a)(Xe())}),gt=v.b.div(Je(),function(e){return!e.cardType&&Object(v.a)(Le(),function(e){return Ae()(e.getTheme("colorText")).alpha(.1).string()})},function(e){return e.cardType&&Object(v.a)(Qe())}),yt=v.b.div(qe(),function(e){return e.image}),bt=v.b.div(He(),function(e){return e.getTheme("colorAccent")}),xt=v.b.div(De(),function(e){return e.getTheme("colorAccent")}),Et=Object(Fe.a)(function(e){return{paper:Object(L.a)({},e.mixins.gutters(),{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),cardTitle:{},card:{},h1:{fontWeight:"bold",fontSize:"1.2em",marginBottom:8,color:"var(--mainDark)"},p:{flexGrow:1,color:"var(--mainDark)"},price:{flexGrow:1,fontWeight:"600",color:"var(--mainBlue)"},media:{marginTop:8,height:0,paddingTop:"56.25%",backgroundSize:"contain"},actions:{display:"flex"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Ge.a[500]}}})(function(e){var t=e.addToCart,n=void 0===t?function(){}:t,a=(e.removeFromCart,e.changeItemQuantityInCart),r=void 0===a?function(){}:a,o=e.buyByVC,c=void 0===o?function(){}:o,l=(e.activeGroup,e.product),s=e.order,u=e.cardType,m=void 0===u?null:u,d=e.initClass,p=e.image_url,h=e.title,f=e.currency,v=e.price,x=e.description,E=e.getTheme,k=void 0===E?function(){}:E,j=e.quantity,C=i.a.useState({expanded:!1,favorited:!1,cardShown:!1}),w=Object(V.a)(C,2),I=w[0],O=w[1],T=lt(),S=i.a.useState("cart"===m?j:0),_=Object(V.a)(S,2);_[0],_[1];i.a.useEffect(function(){I.cardShown||setTimeout(function(){O({cardShown:!0})},100*s)});var B=l.virtual_prices&&l.virtual_prices.length>0;return i.a.createElement(mt,{className:I.cardShown?"":d},i.a.createElement(dt,{cardType:m,getTheme:k},i.a.createElement(yt,{style:{},image:p,theme:"cart"===m||"buy_by_vc"===m?{width:140,height:140}:{}}),i.a.createElement(ht,null,i.a.createElement(ft,null,h),i.a.createElement(pt,null,x)),"cart"!==m&&"buy_by_vc"!==m&&i.a.createElement(gt,{cardType:m,getTheme:k},B&&i.a.createElement(be.a,{src:l.virtual_prices[0].image_url,className:T.currencies}),i.a.createElement(bt,{getTheme:k},B?l.virtual_prices[0].amount:"".concat(f," ").concat(Math.round(100*v)/100)),i.a.createElement(b.a,{getTheme:k,variant:"contained",onClick:B?function(e){c(l,e)}.bind(void 0,l.virtual_prices[0].sku):function(){n(l)}},B?"Buy now":i.a.createElement(Ve.a,null))),"cart"===m&&i.a.createElement(vt,{cardType:m,getTheme:k},i.a.createElement(st,null,j<=1&&i.a.createElement(Re.a,{style:{opacity:.4},onClick:function(){r(l,j-1)}}),j>1&&i.a.createElement(P.a,{style:{opacity:.4},onClick:function(){r(l,j-1)}}),i.a.createElement(ut,null,j),i.a.createElement(N.a,{onClick:function(){r(l,j+1)}})),i.a.createElement("div",null,i.a.createElement(bt,{getTheme:k},f," ",function(e,t){return Math.round(e*t*100)/100}(v,j))),j>1&&i.a.createElement(xt,{getTheme:k},f," ",Math.round(100*v)/100," for one item")),i.a.createElement(y.a,{in:I.expanded,timeout:"auto",unmountOnExit:!0},i.a.createElement(g.a,null,x))))}),kt=n(62),jt=n.n(kt),Ct=n(95),wt=n(53);function It(e){return{name:e,fractionSize:2,symbol:{grapheme:e,template:null,rtl:!1},uniqSymbol:null}}var Ot="en_US";function Tt(e,t,n){var a=parseFloat(e);if(!t||isNaN(a))return{formattedCurrency:e+" "+t,dir:"ltr"};var r=function(e){return e&&Ct[e.toUpperCase()]||It(e)}(t),i=function(e){return e&&wt[function(e){return[e.substr(0,2).toLowerCase(),e.substr(3,2).toUpperCase()].join("_")}(e)]||wt[Ot]}(n),o=a<0?"-":"",c=r.fractionSize,l=r.symbol,s=i.thousands,u=i.decimal;l&&!l.rtl||" "!==i.thousands||(s=",",u=".");var m=Math.abs(a).toFixed(c).split(".");m[0]=m[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+s);var d=m.join(u),p=o+d+" "+t,h=!1;return l&&l.template&&(p=o+l.template.replace("1",d).replace("$",l.grapheme),h=l.rtl),{formattedCurrency:p,dir:h?"rtl":"ltr"}}var St=n(208);function _t(){var e=Object(l.a)(["\n  z-index: 9;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n"]);return _t=function(){return e},e}var Nt=Object(Fe.a)(function(e){return{progress:{margin:e.spacing(2)}}})(function(e){var t=e.classes;return i.a.createElement(Bt,null,i.a.createElement(St.a,{className:t.progress}))}),Bt=v.b.div(_t());function Pt(){var e=Object(l.a)(["\n  display: flex;\n  padding: 0 24px 0 24px;\n  font-weight: bold;\n"]);return Pt=function(){return e},e}function Ft(){var e=Object(l.a)(["\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  bottom: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  z-index: 10;\n  padding: 24px 0 24px 0;\n"]);return Ft=function(){return e},e}function zt(){var e=Object(l.a)(["\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  top: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  z-index: 10;\n  padding: 24px 0 8px 0;\n"]);return zt=function(){return e},e}function Gt(){var e=Object(l.a)(["\n  background-color: rgba(0, 0, 0, 0.8);\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n"]);return Gt=function(){return e},e}function Wt(){var e=Object(l.a)(["\n  flex: 1;\n  position: absolute;\n  max-width: 680px;\n  z-index: 1;\n  max-height: 80vh;\n  overflow-y: auto;\n  padding-top: 64px;\n"]);return Wt=function(){return e},e}function Vt(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 100;\n"]);return Vt=function(){return e},e}function Mt(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 600px;\n  padding-top: 16px;\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* position: fixed; */\n  /* left: 0; */\n  /* right: 0; */\n  /* top: 0; */\n  /* bottom: 0; */\n  /* z-index: 1; */\n"]);return Mt=function(){return e},e}var Rt=v.b.div(Mt()),Ut=v.b.div(Vt()),At=v.b.div(Wt()),Dt=v.b.div(Gt()),Ht=v.b.div(zt()),qt=v.b.div(Ft()),Qt=v.b.div(Pt()),Lt=function(e){var t=this,n=(e.style,i.a.useState(!1)),a=Object(V.a)(n,2),r=a[0],o=a[1],c=i.a.useContext(ae),l=function(){c.hideCart()},s=function(){o(!0),function(e,t){var n={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/payment/cart/"+e,method:"POST",headers:{Authorization:"Bearer "+t}};return k()(n).then(function(e){return e}).catch(function(e){})}(c.cart.cartId,c.logToken).then(function(e){window.xPayStationInit(e.data.token),window.XPayStationWidget.open(),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.CLOSE,function(e,t){o(!1)}),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.STATUS_DONE,function(e,t){return c.payStationHandler(e,t)})}).catch(function(e){})},u=function(e,n){o(!0),function(e,t,n){var a={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/payment/item/"+e.sku+"/virtual/"+t,method:"POST",headers:{Authorization:"Bearer "+n}};return k()(a)}(e,n,c.logToken).then(function(e){c.clearVCCart(),o(!1),t.props.updateVirtualCurrencyBalance()}).catch(function(e){o(!1)})};return i.a.createElement("div",null,c.cartShown&&i.a.createElement(Ut,null,i.a.createElement(At,{style:{padding:"0 32px 0 32px",borderRadius:c.getTheme("borderRadius"),backgroundColor:c.getTheme("colorBg"),color:c.getTheme("colorText")}},i.a.createElement("div",{style:{backgroundColor:c.getTheme("colorBg"),color:c.getTheme("colorText")}},i.a.createElement(Ht,{style:{backgroundColor:"".concat(c.getTheme("colorBg")),borderBottom:"1px solid ".concat(Ae()(c.getTheme("colorText")).alpha(.1).string())}},i.a.createElement("h4",null,"Cart "),i.a.createElement(jt.a,{style:{cursor:"pointer"},onClick:function(e){return l()}})),i.a.createElement(Rt,null,c.cart&&c.cart.items.map(function(e,t){return i.a.createElement("div",{key:"cartitem".concat(t)},i.a.createElement(Et,{product:e,key:e.sku,order:t,initClass:"initialFlow1",sku:e.sku,title:e.name,description:e.description,price:e.price.amount,image_url:e.image_url,currency:e.price.currency,cardType:"cart",cartId:c.cart.cartId,logToken:c.logToken,removeFromCart:c.removeFromCart,changeItemQuantityInCart:c.changeItemQuantityInCart,quantity:e.quantity}))}),c.cart&&c.cart.items.length<=0&&i.a.createElement("p",null,"Empty cart")),i.a.createElement(qt,{style:{backgroundColor:"".concat(c.getTheme("colorBg")),borderTop:"1px solid ".concat(Ae()(c.getTheme("colorText")).alpha(.1).string())}},i.a.createElement("div",{className:""}),c.cart&&c.cart.items.length>0&&i.a.createElement(Qt,null,"Subtotal:",i.a.createElement("div",{style:{minWidth:80,textAlign:"right"}},c.isFetching&&Tt(function(e){var t=0;return e.forEach(function(e){t+=e.price.amount*e.quantity}),Math.round(100*t)/100}(c.cart.items),c.cart.items[0].price.currency).formattedCurrency,!c.isFetching&&Tt(c.cart.price.amount,c.cart.price.currency).formattedCurrency)),i.a.createElement(b.a,{variant:"contained",onClick:function(){!(r||c.cart.items.length<=0)&&s()}},"Check out")))),i.a.createElement(Dt,{onClick:function(e){return l()}})),c.cartWithItemsBuyingByVCShown&&i.a.createElement(Ut,null,i.a.createElement(At,{style:{padding:"0 32px 0 32px",borderRadius:c.getTheme("borderRadius"),backgroundColor:c.getTheme("colorBg"),color:c.getTheme("colorText")}},i.a.createElement("div",{style:{backgroundColor:c.getTheme("colorBg"),color:c.getTheme("colorText")}},i.a.createElement(Ht,{style:{backgroundColor:"".concat(c.getTheme("colorBg")),borderBottom:"1px solid ".concat(Ae()(c.getTheme("colorText")).alpha(.1).string())}},i.a.createElement("h4",null,"Confirm"),i.a.createElement(jt.a,{style:{cursor:"pointer"},onClick:function(e){return l()}})),i.a.createElement(Rt,null,c.cartWithItemsBuyingByVC&&c.cartWithItemsBuyingByVC.items.map(function(e,t){return i.a.createElement("div",{key:"cartitem".concat(t)},i.a.createElement(Et,{product:e,key:e.sku,order:t,initClass:"initialFlow1",sku:e.sku,title:e.name,description:e.description,price:e.price.amount,image_url:e.image_url,currency:e.price.currency,cardType:"buy_by_vc",cartId:c.cart.cartId,logToken:c.logToken,removeFromCart:c.removeFromCart,changeItemQuantityInCart:c.changeItemQuantityInCart,quantity:e.quantity}))}),c.cartWithItemsBuyingByVC&&c.cartWithItemsBuyingByVC.items.length<=0&&i.a.createElement("p",null,"Empty cart")),i.a.createElement(qt,{style:{backgroundColor:"".concat(c.getTheme("colorBg")),borderTop:"1px solid ".concat(Ae()(c.getTheme("colorText")).alpha(.1).string())}},i.a.createElement("div",{className:""}),r?i.a.createElement(Nt,null):i.a.createElement(b.a,{variant:"contained",onClick:function(){!(r||c.cartWithItemsBuyingByVC.items.length<=0)&&u(c.cartWithItemsBuyingByVC.items[0],c.cartWithItemsBuyingByVC.vcPriceSku)}},"Buy")))),i.a.createElement(Dt,{onClick:function(e){return l()}})))},Jt=n(211),Xt=n(209),Zt=n(214),Yt=n(185),$t=Object(H.a)({root:{justifyContent:"center"},scroller:{flexGrow:"0"}});var Kt=function(e){var t=e.virtualItems,n=void 0===t?[]:t,a=e.activeGroup,r=e.changeGroupHandler,o=void 0===r?function(){}:r;a="first"===a?n&&n[0]&&n[0].id:a;var c=$t();return i.a.createElement(Zt.a,{theme:Object(Yt.a)({palette:{primary:{main:i.a.useContext(ae).getTheme("colorAccent")}}})},i.a.createElement(Jt.a,{value:a,indicatorColor:"primary",textColor:"primary",style:{color:i.a.useContext(ae).getTheme("colorAccent")},centered:!0,classes:{root:c.root,scroller:c.scroller},variant:"scrollable",scrollButtons:"on"},n&&n.map(function(e){return i.a.createElement(Xt.a,{value:e.id,key:e.id,color:"secondary",textColor:"secondary",label:e.name,onClick:function(t){o(e.id)},style:{color:i.a.useContext(ae).getTheme("colorText")}})})))};function en(){var e=Object(l.a)(["\n  color: ",";\n  padding-top: 2em;\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n"]);return en=function(){return e},e}function tn(){var e=Object(l.a)(["\n  /* width: '100%'; */\n  display: flex;\n  flex-wrap: wrap;\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* display: grid; */\n  /* grid-template-columns: repeat( auto-fit, minmax(260px, 320px)); */\n  /* grid-row-gap: 24px; */\n  place-content: center;\n"]);return tn=function(){return e},e}function nn(){var e=Object(l.a)(["\n  /* display: flex; */\n  align-items: center;\n  flex-grow: 1;\n  margin: 24px 0;\n"]);return nn=function(){return e},e}function an(){var e=Object(l.a)(["\n  /* position: relative;\n  z-index: 4; */\n"]);return an=function(){return e},e}function rn(){var e=Object(l.a)(["\n  position: relative;\n  z-index: 4;\n"]);return rn=function(){return e},e}var on=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).changeGroupHandler=function(e){n.props.setStateFrom("activeGroup",e)},n.ProductRef=i.a.createRef(),n.state={},n.changeGroupHandler=n.changeGroupHandler.bind(Object(J.a)(Object(J.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.logToken&&!this.props.virtualItems&&(this.props.setStateFrom("fetching",!0),K(window.xProjectId,this.props.logToken).then(function(t){e.props.setCurrs(t)}),this.props.updateVirtualCurrencyBalance())}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(oe,null,function(t){return i.a.createElement("div",null,i.a.createElement(cn,{style:{backgroundColor:"transparent",color:t.theme.colorText}},"virtualItems"===t.activeModule&&t.virtualItems&&i.a.createElement(ln,null,i.a.createElement(sn,null,i.a.createElement(Kt,{virtualItems:t.virtualItems,activeGroup:t.activeGroup,changeGroupHandler:e.changeGroupHandler})),"virtualItems"===t.activeModule&&t.virtualItems.map(function(n,a){if("first"===e.props.activeGroup&&0===a||"all"===e.props.activeGroup||e.props.activeGroup===n.id||e.props.activeGroup===n.name)return i.a.createElement("div",{key:e.ProductRef},i.a.createElement(mn,{getTheme:t.getTheme.bind(e)},n.name),i.a.createElement(un,null,n.products&&n.products.map(function(n,a){return i.a.createElement(Et,{ref:e.ProductRef,key:n.sku,order:a,initClass:"initialFlow1",sku:n.sku,title:n.name,description:n.description,price:n.price.amount,image_url:n.image_url,currency:n.price.currency,product:n,addToCart:t.addToCart,getTheme:t.getTheme.bind(e),cartId:t.cartId,logToken:t.logToken,changeItemQuantityInCart:t.changeItemQuantityInCart,activeGroup:e.props.activeGroup,buyByVC:t.buyByVC})})))}))))}))}}]),t}(r.Component),cn=v.b.div(rn()),ln=v.b.div(an()),sn=v.b.div(nn()),un=v.b.div(tn()),mn=v.b.div(en(),function(e){return e.getTheme("colorText")}),dn=on;function pn(){var e=Object(l.a)(["\n  color: ",";\n  padding-top: 2em;\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n"]);return pn=function(){return e},e}function hn(){var e=Object(l.a)(["\n  /* width: '100%'; */\n  display: flex;\n  flex-wrap: wrap;\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* display: grid; */\n  /* grid-template-columns: repeat( auto-fit, minmax(260px, 320px)); */\n  /* grid-row-gap: 24px; */\n  place-content: center;\n"]);return hn=function(){return e},e}function fn(){var e=Object(l.a)(["\n  /* display: flex; */\n  align-items: center;\n  flex-grow: 1;\n  margin: 24px 0;\n"]);return fn=function(){return e},e}function vn(){var e=Object(l.a)(["\n  /* position: relative;\n  z-index: 4; */\n"]);return vn=function(){return e},e}function gn(){var e=Object(l.a)(["\n  position: relative;\n  z-index: 4;\n"]);return gn=function(){return e},e}var yn,bn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).changeGroupHandler=function(e){n.props.setStateFrom("activeGroup",e)},n.ProductRef=i.a.createRef(),n.state={},n.changeGroupHandler=n.changeGroupHandler.bind(Object(J.a)(Object(J.a)(n))),n.changeGroupHandler(10),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.logToken&&!this.props.virtualItems&&(this.props.setStateFrom("fetching",!0),K(window.xProjectId,this.props.logToken).then(function(t){e.props.setCurrs(t)}),this.props.updateVirtualCurrencyBalance())}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(oe,null,function(t){return i.a.createElement("div",null,i.a.createElement(xn,{style:{backgroundColor:"transparent",color:t.theme.colorText}},"virtualItems"===t.activeModule&&t.virtualCurrencyPackages&&i.a.createElement(En,null,i.a.createElement(kn,null,t.virtualCurrencyPackages.map(function(n,a){return i.a.createElement(Et,{ref:e.ProductRef,key:n.sku,order:a,initClass:"initialFlow1",sku:n.sku,title:n.name,description:n.description,price:n.price.amount,image_url:n.image_url,currency:n.price.currency,product:n,addToCart:t.addToCart,getTheme:t.getTheme.bind(e),cartId:t.cartId,logToken:t.logToken,changeItemQuantityInCart:t.changeItemQuantityInCart,activeGroup:e.props.activeGroup,buyByVC:t.buyByVC})})))))}))}}]),t}(r.Component),xn=v.b.div(gn()),En=v.b.div(vn()),kn=(v.b.div(fn()),v.b.div(hn())),jn=(v.b.div(pn(),function(e){return e.getTheme("colorText")}),bn),Cn=(n(178),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={expanded:!1,cardShown:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.order;this.state.cardShown||setTimeout(function(){e.setState({cardShown:!0})},100*t)}},{key:"render",value:function(){var e=this.props,t=e.initClass,n=e.imageUrl,a=e.title,r=e.description;return i.a.createElement("div",{className:"entitlement-item ".concat(this.state.cardShown?"":t)},i.a.createElement("div",{className:"entitlement-item-card"},i.a.createElement("div",{className:"entitlement-item-card-media",style:{backgroundImage:"url(".concat(n,")")}}),i.a.createElement("div",{className:"entitlement-item-card-content"},i.a.createElement("div",{className:"entitlement-item-card-content-title"},a),i.a.createElement("div",{className:"entitlement-item-card-content-description"},r)),i.a.createElement(y.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},i.a.createElement(g.a,null,r))))}}]),t}(r.Component)),wn=k.a.CancelToken,In=(n(180),n(182),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={code:"",sku:"",hasRedeemError:!1,isFetching:!1},n.handleChangeCode=n.handleChangeCode.bind(Object(J.a)(Object(J.a)(n))),n.handleChangeSku=n.handleChangeSku.bind(Object(J.a)(Object(J.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(J.a)(Object(J.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.logToken&&null===this.props.entitlementItems&&(this.updateEntitlement(),this.props.setStateFrom("fetching",!0))}},{key:"componentWillUnmount",value:function(){null!==this.props.entitlementItems&&this.props.setEntitlementItems(null)}},{key:"updateEntitlement",value:function(){var e=this;Object(C.b)({projectId:window.xProjectId,version:"v2"}),this.props.setStateFrom("fetching",!0),function(e,t){yn&&yn();var n={url:"https://store.xsolla.com/api/v2/projects/entitlement",method:"GET",headers:{Authorization:"Bearer "+t},cancelToken:new wn(function(e){yn=e})};return k()(n).then(function(e){return e.data})}(window.xProjectId,this.props.logToken).then(function(t){e.props.setEntitlementItems(t)}).catch(function(){e.props.setEntitlementItems([])})}},{key:"handleChangeCode",value:function(e){this.setState({code:e.target.value})}},{key:"handleChangeSku",value:function(e){this.setState({sku:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;this.setState(Object(L.a)({},this.state,{isFetching:!0})),function(e,t,n,a){yn&&yn();var r={url:"https://store.xsolla.com/api/v1/game_delivery/xsolla_login/redeem_key",method:"POST",headers:{Authorization:"Bearer "+t},data:{project_id:e,digital_content_sku:a,language:"en",key:n},cancelToken:new wn(function(e){yn=e})};return k()(r)}(window.xProjectId,this.props.logToken,this.state.code,this.state.sku).then(function(e,n){t.updateEntitlement(),t.setState(Object(L.a)({},t.state,{hasRedeemError:!1,isFetching:!1}))}).catch(function(){console.log("error"),t.setState(Object(L.a)({},t.state,{hasRedeemError:!0,isFetching:!1}))}),e.preventDefault()}},{key:"render",value:function(){var e=this.props.entitlementItems;return i.a.createElement("div",{className:""},i.a.createElement("form",{className:"entitlement-redeem-form",onSubmit:this.handleSubmit},i.a.createElement("input",{className:"entitlement-redeem-input",type:"text",size:"40",placeholder:"Enter your code",onChange:this.handleChangeCode,value:this.state.code}),i.a.createElement("input",{className:"entitlement-redeem-input",type:"text",size:"40",placeholder:"Enter sku of your game",onChange:this.handleChangeSku,value:this.state.sku}),this.state.hasRedeemError&&!this.state.isFetching&&i.a.createElement("span",{className:"entitlement-redeem-error"},"Wrong code"),this.state.isFetching&&i.a.createElement("div",{className:"entitlement-redeem-loader"},i.a.createElement(St.a,null)),i.a.createElement(b.a,{type:"submit",className:"entitlement-redeem-button",variant:"contained"},"Redeem Code")),i.a.createElement("div",{className:"entitlement-list"},e&&e.length?e.map(function(e,t){return i.a.createElement(Cn,{key:e.digital_content_sku,order:t,initClass:"initialFlow1",title:e.name,description:e.description,imageUrl:e.image_url})}):i.a.createElement("div",null,"Oops, you have no games yet!")))}}]),t}(r.PureComponent));function On(){var e=Object(l.a)(["\n  left: 0;\n  top: 0;\n  height: 100vh;\n  display: grid;\n  align-items: center;\n  position: relative;\n  z-index: 100;\n"]);return On=function(){return e},e}function Tn(){var e=Object(l.a)(["\n  overflow-y: auto;\n  z-index: 1;\n"]);return Tn=function(){return e},e}var Sn=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(h.a,{basename:"/"},i.a.createElement(oe,null,function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:""},i.a.createElement(Oe,{showCart:e.showCart}),i.a.createElement("div",null,i.a.createElement(_n,null,i.a.createElement(Nn,null),i.a.createElement(f.a,{path:"/",exact:!0,render:function(){return!e.fetching&&i.a.createElement(dn,e)}}),i.a.createElement(f.a,{path:"/inventory",render:function(){return!e.fetching&&i.a.createElement(I,e)}}),i.a.createElement(f.a,{path:"/crystals",render:function(){return!e.fetching&&i.a.createElement(jn,e)}}),i.a.createElement(f.a,{path:"/physical",render:function(){return!e.fetching&&i.a.createElement(S,e)}}),i.a.createElement(f.a,{path:"/entitlement",render:function(){return!e.fetching&&i.a.createElement(In,e)}}),i.a.createElement(f.a,{path:"/manage",render:function(){return!e.fetching&&i.a.createElement(G,e)}}),e.fetching&&i.a.createElement(Nt,null)))),i.a.createElement("div",{className:"global-background"},i.a.createElement("div",{className:"global-background-tint"})))}))}}]),t}(r.Component),_n=v.b.div(Tn()),Nn=Object(v.b)(Lt)(On()),Bn=Sn;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(ie,{projectId:window.xProjectId},i.a.createElement(Bn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[102,2,1]]]);
//# sourceMappingURL=main.d49c62e6.chunk.js.map