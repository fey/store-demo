(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,n){e.exports=n(207)},142:function(e,t,n){},161:function(e,t,n){},182:function(e,t,n){},184:function(e,t,n){},192:function(e,t,n){},197:function(e,t,n){},200:function(e,t,n){},202:function(e,t,n){},204:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),o=n(9),c=n.n(o),u=(n(142),n(4)),l=n(263),s=n(265),m=n(206),d=n(261),h=n(5),p=n(12),f=n(13),g=n(19),v=n(18),b=n(20),y=n(112),x=n(247),E=n(246),w=(n(161),n(240)),T=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).state={expanded:!1,cardShown:!1},e}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.order;this.state.cardShown||setTimeout(function(){e.setState({cardShown:!0})},100*t)}},{key:"render",value:function(){var e=this.props,t=e.initClass,n=e.imageUrl,r=e.title,a=e.description,o=e.quantity,c=e.handleConsumeItem,u=e.remainingUses;return i.a.createElement("div",{className:"inventory-item ".concat(this.state.cardShown?"":t)},i.a.createElement("div",{className:"inventory-item-card"},i.a.createElement("div",{className:"inventory-item-card-media",style:{backgroundImage:"url(".concat(n,")")}}),i.a.createElement("div",{className:"inventory-item-card-content"},i.a.createElement("div",{className:"inventory-item-card-content-title"},r),i.a.createElement("div",{className:"inventory-item-card-content-description"},a)),i.a.createElement("div",{className:"inventory-item-card-actions"},i.a.createElement("div",{className:"inventory-item-card-actions-quantity"},"Quantity: ".concat(o)),u?i.a.createElement(w.a,{variant:"contained",onClick:c},"Consume"):""),i.a.createElement(E.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},i.a.createElement(x.a,null,a))))}}]),t}(a.Component),j=n(15),k=n.n(j),C=k.a.CancelToken,O=n(28),I=(n(182),function(e){function t(){return Object(p.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.logToken&&null===this.props.inventoryItems&&(this.updateInventory(),this.props.updateVirtualCurrencyBalance())}},{key:"componentWillUnmount",value:function(){null!==this.props.inventoryItems&&this.props.setInventoryItems(null)}},{key:"componentDidUpdate",value:function(e){(e.cart.cartId!==this.props.cart.cartId&&e.cart.items.length>0||this.props.cartWithItemsBuyingByVC.items.length!==e.cartWithItemsBuyingByVC.items.length)&&this.updateInventory()}},{key:"updateInventory",value:function(){var e=this;this.props.setStateFrom("fetching",!0),Object(O.b)({projectId:window.xProjectId,version:"v2"}),function(e,t){r&&r();var n={url:"https://store.xsolla.com/api/v2/project/".concat(e,"/user/inventory/items"),method:"GET",headers:{Authorization:"Bearer "+t},cancelToken:new C(function(e){r=e})};return k()(n).then(function(e){return e.data.items})}(window.xProjectId,this.props.logToken).then(function(t){e.props.setInventoryItems(t)}).catch(function(){e.props.setInventoryItems([])})}},{key:"consumeItem",value:function(e){var t=this,n=this.props.logToken;Object(O.b)({projectId:window.xProjectId,version:"v2"}),new y.a(n).consumeItem(e.sku,1,e.instance_id).finally(function(){t.props.setStateFrom("fetching",!0)})}},{key:"render",value:function(){var e=this,t=this.props.inventoryItems;return i.a.createElement("div",null,i.a.createElement("div",{className:""},i.a.createElement("div",{className:"inventory-list"},t&&t.length?t.filter(function(e){return"virtual_good"===e.type}).map(function(t,n){return i.a.createElement(T,{key:t.sku,order:n,initClass:"initialFlow1",title:t.name,description:t.description,imageUrl:t.image_url,quantity:t.quantity,remainingUses:t.remaining_uses,handleConsumeItem:function(){return e.consumeItem(t)}})}):i.a.createElement("div",null,"Oops, you have nothing bought yet!"))))}}]),t}(a.PureComponent));var S=n(114),_=(n(184),n(35)),B=n(24),P=n(248),F=n(7),N=n(72),z=n.n(N),M=n(71),W=n.n(M),G=n(115),V=n.n(G),A=n(53),D=n.n(A),U=n(70),q=n.n(U),R=n(268),L=n(29),Q=n.n(L);function H(){var e=Object(u.a)(["\n  flex-grow: 1;\n  font-size: 0.8em;\n  /* color: ","; */\n  /* font-weight: 600; */\n  opacity: 0.3;\n"]);return H=function(){return e},e}function X(){var e=Object(u.a)(["\n  flex-grow: 1;\n  color: ",";\n  font-weight: 600;\n"]);return X=function(){return e},e}function J(){var e=Object(u.a)(["\n  display: block;\n  /* height: 0; */\n  margin-top: 8px;\n  min-height: 120px;\n  flex-grow: 1;\n  /* padding-top: 56.25%; */\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(",");\n"]);return J=function(){return e},e}function Z(){var e=Object(u.a)(["\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    "]);return Z=function(){return e},e}function Y(){var e=Object(u.a)(["\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ",";\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    "]);return Y=function(){return e},e}function $(){var e=Object(u.a)(["\n  ","\n  ","\n"]);return $=function(){return e},e}function K(){var e=Object(u.a)(["\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    "]);return K=function(){return e},e}function ee(){var e=Object(u.a)(["\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ",";\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    "]);return ee=function(){return e},e}function te(){var e=Object(u.a)(["\n  ","\n  ","\n"]);return te=function(){return e},e}function ne(){var e=Object(u.a)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"]);return ne=function(){return e},e}function re(){var e=Object(u.a)(["\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0 !important;\n  margin-bottom: 8px;\n"]);return re=function(){return e},e}function ae(){var e=Object(u.a)(["\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  /* max-height: 120px; */\n  width: 100%;\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  max-width: 400px;\n  margin: 0 auto;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]);return ae=function(){return e},e}function ie(){var e=Object(u.a)(["\n          box-shadow: ",";\n        "]);return ie=function(){return e},e}function oe(){var e=Object(u.a)(["\n      display: grid;\n      grid-template-columns: 20% 50% 30%;\n      grid-template-rows: 160px;\n      place-content: center;\n    "]);return oe=function(){return e},e}function ce(){var e=Object(u.a)(["\n    display: flex;\n    flex-direction: column;\n    max-width: ",";\n    min-width: ",";\n    height: ",";\n    /* height: 360px; */\n    margin: ","px;\n    flex-shrink: 0;\n    flex-grow: 1;\n    flex-base: 50%;\n    background: transparent;\n    /* boxShadow: none; */\n    /* color: var(--mainWhite); */\n    transition: box-shadow ",";\n    border-radius: ","\n    padding: ",";\n  "]);return ce=function(){return e},e}function ue(){var e=Object(u.a)(["\n  color: ",";\n  ","\n\n  ","\n  &:hover {\n    ","\n  }\n"]);return ue=function(){return e},e}function le(){var e=Object(u.a)(["\n  position: relative;\n\n  /* transition: all "," ease-in-out; */\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  &.initialFlow1 {\n    opacity: 0;\n    transform: translateY(20px) scale(1);\n  }\n"]);return le=function(){return e},e}function se(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n"]);return se=function(){return e},e}function me(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n"]);return me=function(){return e},e}var de=Object(P.a)({currencies:{height:24,width:24,marginRight:4}}),he=h.b.div(me()),pe=h.b.div(se()),fe=h.b.div(le(),function(e){return e.order+"s"}),ge=h.b.div(ue(),function(e){return e.getTheme("colorText")},function(e){return!e.cardType&&Object(h.a)(ce(),function(e){return"".concat(e.getTheme("cardWidth"),"px")},function(e){return"".concat(e.getTheme("cardWidth"),"px")},function(e){return"".concat(e.getTheme("cardWidth"),"px")},16,function(e){return e.getTheme("transitionStyle")},function(e){return e.getTheme("borderRadius")},function(e){return e.getTheme("padding")})},function(e){return e.cardType&&Object(h.a)(oe())},function(e){return!e.cardType&&Object(h.a)(ie(),function(e){return e.getTheme("boxShadow")})}),ve=h.b.div(ae()),be=Object(h.b)(x.a)(re()),ye=h.b.div(ne()),xe=h.b.div(te(),function(e){return!e.cardType&&Object(h.a)(ee(),function(e){return Q()(e.getTheme("colorText")).alpha(.1).string()})},function(e){return e.cardType&&Object(h.a)(K())}),Ee=h.b.div($(),function(e){return!e.cardType&&Object(h.a)(Y(),function(e){return Q()(e.getTheme("colorText")).alpha(.1).string()})},function(e){return e.cardType&&Object(h.a)(Z())}),we=h.b.div(J(),function(e){return e.image}),Te=h.b.div(X(),function(e){return e.getTheme("colorAccent")}),je=h.b.div(H(),function(e){return e.getTheme("colorAccent")}),ke=Object(F.a)(function(e){return{paper:Object(B.a)({},e.mixins.gutters(),{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),cardTitle:{},card:{},h1:{fontWeight:"bold",fontSize:"1.2em",marginBottom:8,color:"var(--mainDark)"},p:{flexGrow:1,color:"var(--mainDark)"},price:{flexGrow:1,fontWeight:"600",color:"var(--mainBlue)"},media:{marginTop:8,height:0,paddingTop:"56.25%",backgroundSize:"contain"},actions:{display:"flex"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:V.a[500]}}})(function(e){var t=e.addToCart,n=void 0===t?function(){}:t,r=(e.removeFromCart,e.changeItemQuantityInCart),a=void 0===r?function(){}:r,o=e.buyByVC,c=void 0===o?function(){}:o,u=(e.activeGroup,e.product),l=e.order,s=e.cardType,m=void 0===s?null:s,d=e.initClass,h=e.image_url,p=e.title,f=e.currency,g=e.price,v=e.description,b=e.getTheme,y=void 0===b?function(){}:b,T=e.quantity,j=i.a.useState({expanded:!1,favorited:!1,cardShown:!1}),k=Object(_.a)(j,2),C=k[0],O=k[1],I=de(),S=i.a.useState("cart"===m?T:0),B=Object(_.a)(S,2);B[0],B[1];i.a.useEffect(function(){C.cardShown||setTimeout(function(){O({cardShown:!0})},100*l)});var P=u.virtual_prices&&u.virtual_prices.length>0;return i.a.createElement(fe,{className:C.cardShown?"":d},i.a.createElement(ge,{cardType:m,getTheme:y},i.a.createElement(we,{style:{},image:h,theme:"cart"===m||"buy_by_vc"===m?{width:140,height:140}:{}}),i.a.createElement(be,null,i.a.createElement(ye,null,p),i.a.createElement(ve,null,v)),"cart"!==m&&"buy_by_vc"!==m&&i.a.createElement(Ee,{cardType:m,getTheme:y},P&&i.a.createElement(R.a,{src:u.virtual_prices[0].image_url,className:I.currencies}),i.a.createElement(Te,{getTheme:y},P?u.virtual_prices[0].amount:"".concat(f," ").concat(Math.round(100*g)/100)),i.a.createElement(w.a,{getTheme:y,variant:"contained",onClick:P?function(e){c(u,e)}.bind(void 0,u.virtual_prices[0].sku):function(){n(u)}},P?"Buy now":i.a.createElement(D.a,null))),"cart"===m&&i.a.createElement(xe,{cardType:m,getTheme:y},i.a.createElement(he,null,T<=1&&i.a.createElement(q.a,{style:{opacity:.4},onClick:function(){a(u,T-1)}}),T>1&&i.a.createElement(W.a,{style:{opacity:.4},onClick:function(){a(u,T-1)}}),i.a.createElement(pe,null,T),i.a.createElement(z.a,{onClick:function(){a(u,T+1)}})),i.a.createElement("div",null,i.a.createElement(Te,{getTheme:y},f," ",function(e,t){return Math.round(e*t*100)/100}(g,T))),T>1&&i.a.createElement(je,{getTheme:y},f," ",Math.round(100*g)/100," for one item")),i.a.createElement(E.a,{in:C.expanded,timeout:"auto",unmountOnExit:!0},i.a.createElement(x.a,null,v))))}),Ce=n(42),Oe=n(68),Ie=function(){var e;return window.location.search&&(e=function(e){e=e.split("+").join(" ");for(var t,n={},r=/[?&]?([^=]+)=([^&]*)/g;t=r.exec(e);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return n}(window.location.search).token),e?(!function(e,t){var n=new Date;n.setTime(n.getTime()+864e5);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}("xsolla_login_token",e),window.history.pushState("","",document.location.pathname)):e=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var a=n[r];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}("xsolla_login_token"),e&&"undefined"!==e?e:null};function Se(){return 44056===window.xProjectId?"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE5NjIyMzQwNDgsImlzcyI6Imh0dHBzOi8vbG9naW4ueHNvbGxhLmNvbSIsImlhdCI6MTU2MjE0NzY0OCwidXNlcm5hbWUiOiJ4c29sbGEiLCJ4c29sbGFfbG9naW5fYWNjZXNzX2tleSI6IjA2SWF2ZHpDeEVHbm5aMTlpLUc5TmMxVWFfTWFZOXhTR3ZEVEY4OFE3RnMiLCJzdWIiOiJkMzQyZGFkMi05ZDU5LTExZTktYTM4NC00MjAxMGFhODAwM2YiLCJlbWFpbCI6InN1cHBvcnRAeHNvbGxhLmNvbSIsInR5cGUiOiJ4c29sbGFfbG9naW4iLCJ4c29sbGFfbG9naW5fcHJvamVjdF9pZCI6ImU2ZGZhYWM2LTc4YTgtMTFlOS05MjQ0LTQyMDEwYWE4MDAwNCIsInB1Ymxpc2hlcl9pZCI6MTU5MjR9.GCrW42OguZbLZTaoixCZgAeNLGH2xCeJHxl8u8Xn2aI":Ie()}function _e(e){return document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;"}var Be,Pe=n(43),Fe=n.n(Pe),Ne=n(51),ze=k.a.CancelToken;function Me(e,t){return We.apply(this,arguments)}function We(){return(We=Object(Ne.a)(Fe.a.mark(function e(t,n){var r,a,i,o,c,u,l;return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,fetch("https://store.xsolla.com/api/v1/project/"+t+"/items/groups",{method:"GET",headers:{Authorization:"Bearer "+n}});case 3:return i=e.sent,e.next=6,fetch("https://store.xsolla.com/api/v2/project/"+t+"/items/virtual_currency/package",{method:"GET"});case 6:return o=e.sent,e.next=9,o.json();case 9:if(c=e.sent,!i){e.next=19;break}return e.next=13,i.json();case 13:return u=(u=e.sent).groups,e.next=17,Promise.all(u.map(function(e,n){return Ge(t,e)})).then(function(e){return e});case 17:l=e.sent,a=a.concat(l);case 19:return r={virtualItems:a,virtualCurrencyPackages:c.items},e.abrupt("return",r);case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ge(e,t){return new Promise(function(n,r){fetch("https://store.xsolla.com/api/v2/project/"+e+"/items/virtual_items/group/"+t.external_id).then(function(e){return e.json()}).then(function(e){var r=e.items;t.products=r,n(t)}).catch(function(e){r(e.message)})})}function Ve(e,t,n,r){var a=e.sku,i=void 0===a?"sku":a;Be&&Be();var o={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/cart/"+n+"/item/"+i,method:"PUT",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+r},data:JSON.stringify({quantity:t})};return k()(o).then(function(e){e.data})}function Ae(e,t){var n={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/payment/cart/"+e,method:"POST",headers:{Authorization:"Bearer "+t}};return k()(n).then(function(e){return e}).catch(function(e){})}function De(e,t){Be&&Be();var n={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/cart/"+e,method:"GET",headers:{Authorization:"Bearer "+t},cancelToken:new ze(function(e){Be=e})};return k()(n).then(function(e){return e}).catch(function(e){return console.error(e)})}var Ue=i.a.createContext(),qe={colorText:"#D6E0E7",colorAccent:"#FF005B",colorAccentText:"#F6FAFF",colorBg:"#011627",borderRadius:8,backgroundUrl:"https://res.cloudinary.com/maiik/image/upload/v1549624607/Xsolla/HomePage_Hero_Illustration_1440_oabqmk.jpg",cardWidth:"300",boxShadow:"0 5px 12px 0px rgba(0,0,0,0.2)",padding:"8px",transitionTime:"0.3s",transitionEasing:"ease-in-out",transition:"all 0.3s ease-in-out",transitionStyle:"0.3s ease-in-out",fontFamily:"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif"},Re=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(g.a)(this,Object(v.a)(t).call(this,e))).showCart=function(){return n.setState({cartShown:!n.state.cartShown})},n.showCartError=function(e,t){n.setState({showCartError:!0,cartError:{title:e,message:t}}),n.getCart()},n.setSideMenuVisibility=function(e){return n.setState({isSideMenuShown:e})},n.hideCartError=function(){n.setState({showCartError:!1,cartError:null})},n.setInventoryItems=function(e){n.setState({inventoryItems:e,isFetching:!1})},n.setEntitlementItems=function(e){n.setState({entitlementItems:e,isFetching:!1})},n.setPhysicalItems=function(e){n.setState({physicalItems:e,isFetching:!1})},n.getCart=function(){var e=De(n.state.cart.cartId,n.state.logToken);e.then(function(t){!e.isCancel&&t&&n.setState({cart:{cartId:t.data.cart_id,items:t.data.items.sort(n.compareItems),price:t.data.price},isFetching:!1})})},n.createCart=function(){(function(e){var t={url:"https://store.xsolla.com/api/v1/project/"+window.xProjectId+"/cart",method:"POST",headers:{Authorization:"Bearer "+e}};return k()(t).then(function(e){return e}).catch(function(e){})})(n.state.logToken).then(function(e){n.setState({cart:{cartId:e.data.id,items:[],price:{amount:0,amount_without_discount:0}}})})},n.changeTheme=function(e){"string"===typeof e?n.setState({theme:Object(B.a)({},n.state.theme,{colorBg:e})}):n.setState({theme:Object(B.a)({},n.state.theme,e)})},n.changeCardSize=function(e){var t=n.state.theme;t.cardWidth=e,n.changeTheme(t)},n.clearCart=function(){n.showCart(),n.createCart(),n.updateVirtualCurrencyBalance()},n.payStationHandler=function(){n.clearCart()},n.setPsToken=function(e){n.setState({psToken:e})},n.handleDetail=function(){console.log("hello from handleDetail")},n.setStateFrom=function(e,t){n.setState(Object(Oe.a)({},e,t))},n.compareItems=function(e,t){return e.sku>t.sku?1:e.sku<t.sku?-1:0},n.buyByVC=function(e,t){n.setState({cartWithItemsBuyingByVCShown:!0,cartWithItemsBuyingByVC:{items:[e],vcPriceSku:t}})},n.clearVCCart=function(){n.setState({cartWithItemsBuyingByVCShown:!1,cartWithItemsBuyingByVC:{items:[],vcPriceSku:null}}),n.updateVirtualCurrencyBalance()},n.addToCart=function(e){n.state.cart?-1!==n.state.cart.items.findIndex(function(t){return t.sku===e.sku})?(n.getCart(),n.setState({cartShown:!0})):(n.setState({isFetching:!0,cart:Object(B.a)({},n.state.cart,{items:[Object(B.a)({},e,{quantity:1})].concat(Object(Ce.a)(n.state.cart.items)).sort(n.compareItems),price:Object(B.a)({},n.state.cart.price,{amount:n.state.cart.price&&n.state.cart.price.amount+e.price.amount,amount_without_discount:n.state.cart.price&&n.state.cart.price.amount_without_discount+e.price.amount_without_discount})})}),Ve(e,1,n.state.cart.cartId,n.state.logToken).then(function(e){n.getCart()}).catch(function(e){n.showCartError("Change Item Quantity Error",e.response.data.errorMessage)}),n.showCart()):(n.setState({isFetching:!0}),Ve(e,1,n.state.cart.cartId,n.state.logToken).then(De).catch(function(e){n.showCartError("Change Item Quantity Error",e.response.data.errorMessage)}),n.showCart())},n.removeFromCart=function(e){n.state.cart&&n.setState({isFetching:!0,cart:Object(B.a)({},n.state.cart,{items:n.state.cart.items.filter(function(t){return t.sku!==e.sku}).sort(n.compareItems),price:Object(B.a)({},n.state.cart.price,{amount:n.state.cart.price.amount-e.price.amount*e.quantity,amount_without_discount:n.state.cart.price.amount_without_discount-e.price.amount_without_discount*e.quantity})})})},n.changeItemQuantityInCart=function(e,t){if(t<=0)n.removeFromCart(e),function(e,t,n){var r=e.sku,a=void 0===r?"sku":r;Be&&Be();var i={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/cart/"+t+"/item/"+a,method:"DELETE",headers:{Authorization:"Bearer "+n}};return k()(i).then(function(e){e.data}).catch(function(e){})}(e,n.state.cart.cartId,n.state.logToken).then(function(){n.getCart()});else{var r=n.state.cart.items.findIndex(function(t){return t.sku===e.sku}),a=n.state.cart.items;a.splice(r,1,Object(B.a)({},e,{quantity:t})),n.setState({isFetching:!0,cart:Object(B.a)({},n.state.cart,{items:a.sort(n.compareItems)})}),Ve(e,t,n.state.cart.cartId,n.state.logToken).then(function(){n.getCart()}).catch(function(e){n.showCartError("Change Item Quantity Error",e.response.data.errorMessage)})}},n.hideCart=function(){n.setState({cartShown:!1,cartWithItemsBuyingByVCShown:!1})},n.setGroups=function(e){return n.setState({virtualItems:e,isFetching:!1})},n.setCurrs=function(e){n.setState({isFetching:!1,virtualItems:e.virtualItems,currency:e.currency,subscriptions:e.subscriptions,virtualCurrencyPackages:e.virtualCurrencyPackages})},n.getTheme=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return"all"===e?n.state.theme:"".concat(n.state.theme[e]).concat("borderRadius"===e?"px":"")},n.setProducts=function(e){return n.setState({storeProducts:e})},n.updateVirtualCurrencyBalance=function(){(function(e){var t={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/user/virtual_currency_balance",method:"GET",headers:{Authorization:"Bearer "+e}};return k()(t)})(n.state.logToken).then(function(e){n.setState({userBalanceVirtualCurrency:e.data.items})})},n.state={projectId:e.projectId,logToken:Se(),userBalanceVirtualCurrency:[],activeGroup:"first",loginShown:!0,activeModule:"virtualItems",virtualItems:[],physicalItems:[],virtualCurrencyPackages:null,currency:null,subscriptions:null,inventoryItems:null,entitlementItems:null,cartShown:!1,isSideMenuShown:!1,cart:{cartId:null,items:[],price:{amount:0,amount_without_discount:0}},cartWithItemsBuyingByVCShown:!1,cartWithItemsBuyingByVC:{items:[]},showCartError:!1,cartError:!1,isFetching:!1,psToken:"",theme:qe},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return i.a.createElement(Ue.Provider,{value:Object(B.a)({},this.state,{handleDetail:this.handleDetail,setPsToken:this.setPsToken,setGroups:this.setGroups,setProducts:this.setProducts,setStateFrom:this.setStateFrom,setCurrs:this.setCurrs,setInventoryItems:this.setInventoryItems,setEntitlementItems:this.setEntitlementItems,setPhysicalItems:this.setPhysicalItems,addToCart:this.addToCart,buyByVC:this.buyByVC,clearVCCart:this.clearVCCart,getTheme:this.getTheme,changeTheme:this.changeTheme,changeCardSize:this.changeCardSize,createCart:this.createCart,showCart:this.showCart,changeItemQuantityInCart:this.changeItemQuantityInCart,buyCart:this.buyCart,payStationHandler:this.payStationHandler,updateVirtualCurrencyBalance:this.updateVirtualCurrencyBalance,hideCart:this.hideCart,hideCartError:this.hideCartError,setSideMenuVisibility:this.setSideMenuVisibility})},this.props.children)}}]),t}(i.a.PureComponent),Le=Ue.Consumer,Qe=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).state={isPurchasing:!1},e}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.logToken&&null===this.props.physicalItems&&(this.updateCatalogue(),this.props.updateVirtualCurrencyBalance())}},{key:"componentWillUnmount",value:function(){null!==this.props.physicalItems&&this.props.setPhysicalItems(null)}},{key:"updateCatalogue",value:function(){var e,t,n=this;(e=window.xProjectId,t=this.props.logToken,Object(O.b)({projectId:e,version:"v2"}),new S.a(t).getPhysicalGoodList().then(function(e){return e.data.items})).then(function(e){n.props.setPhysicalItems(e)}).catch(function(){n.props.setPhysicalItems([])})}},{key:"buyItem",value:function(e){var t=this;if(!this.state.isPurchasing){var n=this.props.logToken;this.setState({isPurchasing:!0}),function(e,t){var n={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/payment/item/"+e.sku,method:"POST",headers:{Authorization:"Bearer "+t}};return k()(n)}(e,n).then(function(e){window.xPayStationInit(e.data.token,{height:680}),window.XPayStationWidget.open(),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.CLOSE,function(){t.setState({isPurchasing:!1})})}).catch(function(e){t.setState({isPurchasing:!1})})}}},{key:"render",value:function(){var e=this,t=this.props.physicalItems;return i.a.createElement("div",null,i.a.createElement(Le,null,function(n){return i.a.createElement("div",{className:""},i.a.createElement("div",{className:"physical-list"},t&&t.length&&t.map(function(t,r){return i.a.createElement(ke,{ref:e.ProductRef,key:t.sku,order:r,initClass:"initialFlow1",sku:t.sku,title:t.name,description:t.description,price:t.price.amount,image_url:t.image_url,currency:t.price.currency,product:t,addToCart:n.addToCart,getTheme:n.getTheme.bind(e),cartId:n.cartId,logToken:n.logToken,changeItemQuantityInCart:n.changeItemQuantityInCart,activeGroup:e.props.activeGroup,buyByVC:n.buyByVC})})))}))}}]),t}(a.PureComponent),He=n(256),Xe=n(56),Je=(n(192),n(258)),Ze=n(250),Ye=n(249),$e=n(208),Ke=Object(P.a)({root:{justifyContent:"center"},scroller:{flexGrow:"0"}});var et=function(e){var t=e.virtualItems,n=e.activeGroup,r=e.changeGroupHandler;n="first"===n?t&&t[0]&&t[0].id:n;var a=Ke();return i.a.createElement(Ye.a,{theme:Object($e.a)({palette:{primary:{main:i.a.useContext(Ue).getTheme("colorAccent")}}})},i.a.createElement(Je.a,{value:n,indicatorColor:"primary",textColor:"primary",style:{color:i.a.useContext(Ue).getTheme("colorAccent")},classes:{root:a.root,scroller:a.scroller},variant:"scrollable",scrollButtons:"on"},t&&t.map(function(e){return i.a.createElement(Ze.a,{value:e.id,key:e.id,color:"secondary",textColor:"secondary",label:e.name,onClick:function(t){r(e.id)},style:{color:i.a.useContext(Ue).getTheme("colorText")}})})))},tt=function(e){function t(e){var n;Object(p.a)(this,t),(n=Object(g.a)(this,Object(v.a)(t).call(this,e))).changeGroupHandler=function(e){var t=n.state.manageInventoryGroups;n.setState({activeInventoryGroup:e});var r=t.find(function(t){return t.id===e}),a=r&&r.items.length>0?r.items[0].sku:"helmet_1";n.setState({inventoryItem:a}),n.setItemQuantity(1)},n.setManageInventoryItems=function(e){n.setState({manageInventoryItems:e,fetching:!1,manageInventoryGroups:[].concat(Object(Ce.a)(n.state.manageInventoryGroups),[{id:1,name:"items",items:e,singleItemName:"Item"}])})},n.setManageInventoryCurrencies=function(e){n.setState({manageInventoryCurrencies:e,fetching:!1,manageInventoryGroups:[].concat(Object(Ce.a)(n.state.manageInventoryGroups),[{id:2,name:"currencies",items:e,singleItemName:"Currency"}])})};return n.state={fetching:!1,isPurchasing:!1,inventoryItem:null,quantity:1,users:[{id:"d342dad2-9d59-11e9-a384-42010aa8003f",name:"support@xsolla.com"},{id:"7d8b1f52-7d3f-400b-acd8-46e3a4368596",name:"v.legotkin@xsolla.com"},{id:"27bc1227-48a3-4da8-bb86-f8d093f68805",name:"r.ushakov@xsolla.com"},{id:"a7d10a4e-3f68-43cc-a6b2-893d2c68fd14",name:"p.sanachev@xsolla.com"}],user:"d342dad2-9d59-11e9-a384-42010aa8003f",showToast:!1,statusToast:"processing",operationDetails:null,manageInventoryGroups:[],activeInventoryGroup:"first",manageInventoryItems:null,manageInventoryCurrencies:null,invoice:null,date:null},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){null===this.state.manageInventoryItems&&(this.getItems(),this.props.updateVirtualCurrencyBalance()),null===this.state.manageInventoryCurrencies&&this.getCurrencies()}},{key:"getItems",value:function(){var e=this;this.setState({fetching:!0}),function(e){var t={url:"https://store.xsolla.com/api/v2/project/".concat(e,"/items/virtual_items"),method:"GET"};return k()(t).then(function(e){return e.data.items})}(window.xProjectId).then(function(t){e.setManageInventoryItems(t)}).catch(function(){})}},{key:"getCurrencies",value:function(){var e=this;this.setState({fetching:!0}),function(e){var t={url:"https://store.xsolla.com/api/v2/project/".concat(e,"/items/virtual_currency"),method:"GET"};return k()(t).then(function(e){return e.data.items})}(window.xProjectId).then(function(t){e.setManageInventoryCurrencies(t)}).catch(function(){})}},{key:"changeInventoryItem",value:function(e){this.setState({inventoryItem:e.target.value})}},{key:"changeUser",value:function(e){this.setState({user:e.target.value})}},{key:"setItemQuantity",value:function(e){parseInt(e)>=1&&this.setState({quantity:parseInt(e)})}},{key:"setShowToast",value:function(e){this.setState({showToast:e})}},{key:"itemOperation",value:function(e){var t=this,n=this.state,r=n.user,a=n.activeInventoryGroup,i=n.quantity,o=n.inventoryItem,c=n.manageInventoryGroups,u=n.invoice,l=n.date;if(null===o&&c&&c.length){var s="first"!==a?c.find(function(e){return e.id===a}):c[0];o=s&&s.items.length>0?s.items[0].sku:"helmet_1"}var m={type:e,user:r,item:o,count:i};u&&l&&(m.purchase.external_purchase_id=u,m.purchase.external_purchase_date=l),this.setState({showToast:!0,statusToast:"processing",operationDetails:null}),function(e){var t={url:"https://livedemo.xsolla.com/store-demo/api/index.php",method:"POST",data:e};return k()(t).then(function(e){return e.data})}(m).then(function(e){t.setState({showToast:!0,statusToast:"complete",operationDetails:e.operations[0].items}),t.props.updateVirtualCurrencyBalance()}).catch(function(){})}},{key:"rewardItem",value:function(e){this.itemOperation("reward")}},{key:"revokeItem",value:function(){this.itemOperation("revoke")}},{key:"render",value:function(){var e=this,t=this.state,n=t.quantity,r=t.users,a=t.showToast,o=t.statusToast,c=t.operationDetails,u=t.manageInventoryGroups,l=t.activeInventoryGroup,s="first"!==l?u.find(function(e){return e.id===l}):u[0];return i.a.createElement("div",{className:"manage-inventory__row"},i.a.createElement("div",{className:"manage-inventory__alert"},i.a.createElement(Xe.a,{onClose:function(t){return e.setShowToast(!1)},show:a,variant:"processing"===o?"primary":"success",dismissible:!0},i.a.createElement(Xe.a.Heading,null,"processing"===o?"Operation is processing":"Operation complete!"),i.a.createElement("p",null,s&&s.items.length&&c&&c.length?c.map(function(e){return i.a.createElement("div",null,i.a.createElement("div",null,"Item: ",i.a.createElement("b",null,s.items.filter(function(t){return t.sku===e.sku}).map(function(e){return e.name}))),i.a.createElement("div",null,"Quantity: ",i.a.createElement("b",null,null===e.quantity?0:e.quantity)))}):""))),i.a.createElement("div",{className:""},i.a.createElement("div",{className:"manage-inventory"},i.a.createElement("div",{className:"manage-inventory__user-list"},i.a.createElement("div",{className:"manage-inventory__title"},"User"),i.a.createElement("div",null,i.a.createElement("select",{value:this.state.user,onChange:function(t){return e.changeUser(t)}},r.map(function(e){return i.a.createElement("option",{key:e.id,value:e.id},e.name)})))),i.a.createElement(et,{virtualItems:u,activeGroup:l,changeGroupHandler:this.changeGroupHandler}),i.a.createElement("div",{className:"manage-inventory-item-container"},i.a.createElement("div",{className:"manage-inventory-list"},i.a.createElement("div",{className:"manage-inventory__title"},s?s.singleItemName:"Item"),i.a.createElement("div",null,s&&s.items.length>0?i.a.createElement("select",{value:this.state.inventoryItem,onChange:function(t){return e.changeInventoryItem(t)}},s.items.map(function(e){return i.a.createElement("option",{key:e.sku,value:e.sku},e.name)})):i.a.createElement("div",null,"Nothing to show"))),i.a.createElement("div",{className:"manage-inventory__quantity"},i.a.createElement("div",{className:"manage-inventory__quantity-change"},i.a.createElement(He.a,{label:"Quantity",type:"number",inputProps:{style:{color:"white"},min:"0",step:"1"},defaultValue:n,InputLabelProps:{className:"manage-inventory__quantity-input-label"},onChange:function(t){return e.setItemQuantity(t.target.value)}})))),i.a.createElement("div",{className:"manage-inventory-actions"},i.a.createElement(w.a,{type:"submit",variant:"contained",onClick:function(t){return e.rewardItem(t)}},"Reward"),i.a.createElement(w.a,{variant:"contained",onClick:function(t){return e.revokeItem(t)}},"Revoke")))))}}]),t}(a.PureComponent),nt=n(121),rt=n.n(nt),at=n(251);function it(){var e=Object(u.a)(["\n  flex-grow: 1;\n  color: ",";\n  font-weight: 600;\n"]);return it=function(){return e},e}function ot(){var e=Object(u.a)(["\n  display: block;\n  margin-top: 8px;\n  height: 120px;\n  flex-shrink: 1;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(",");\n"]);return ot=function(){return e},e}function ct(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  border-top: 1px solid ",";\n  padding: 8px 0;\n  margin: 0px 16px 0 16px;\n"]);return ct=function(){return e},e}function ut(){var e=Object(u.a)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  font-weight: bolder;\n"]);return ut=function(){return e},e}function lt(){var e=Object(u.a)(["\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0;\n  margin-bottom: 8px;\n"]);return lt=function(){return e},e}function st(){var e=Object(u.a)(["\n  position: absolute;\n  color: ",";\n  display: flex;\n  flex-direction: column;\n  width: ",";\n  min-height: ",";\n  background-color: ",";\n  box-shadow: ",";\n  transition: box-shadow, background-color ",";\n  border-radius: ",";\n"]);return st=function(){return e},e}function mt(){var e=Object(u.a)(["\n  position: relative;\n  z-index: ",";\n  width: ",";\n  height: ",";\n"]);return mt=function(){return e},e}var dt=function(e){var t=e.image,n=e.name,r=e.value,a=e.description,o=e.actionButtonContent,c=e.getTheme,u=e.onAction,l=i.a.useState(!1),s=Object(_.a)(l,2),m=s[0],d=s[1];return i.a.createElement(at.a,{in:!0},i.a.createElement(ht,{hovered:m,getTheme:c},i.a.createElement(pt,{getTheme:c,hovered:m,onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)}},i.a.createElement(bt,{image:t}),i.a.createElement(ft,null,i.a.createElement(gt,null,n),i.a.createElement(E.a,{in:m,timeout:"auto",collapsedHeight:"50px"},m?a:i.a.createElement(rt.a,{animate:!0,clamp:2},a))),i.a.createElement(vt,{getTheme:c},i.a.createElement(yt,{getTheme:c},r),i.a.createElement(w.a,{getTheme:c,variant:"contained",onClick:u},o)))))},ht=h.b.div(mt(),function(e){return e.hovered?1:0},function(e){return"".concat(e.getTheme("cardWidth"),"px")},function(e){return"".concat(e.getTheme("cardWidth"),"px")}),pt=h.b.div(st(),function(e){return e.getTheme("colorText")},function(e){return"".concat(e.getTheme("cardWidth"),"px")},function(e){return"".concat(e.getTheme("cardWidth"),"px")},function(e){return e.hovered?e.getTheme("colorBg"):"transparent"},function(e){return e.hovered?e.getTheme("boxShadow"):"none"},function(e){return e.getTheme("transitionStyle")},function(e){return e.getTheme("borderRadius")}),ft=Object(h.b)(x.a)(lt()),gt=h.b.div(ut()),vt=h.b.div(ct(),function(e){return Q()(e.getTheme("colorText")).alpha(.1).string()}),bt=h.b.div(ot(),function(e){return e.image}),yt=h.b.div(it(),function(e){return e.getTheme("colorAccent")});function xt(){var e=Object(u.a)(["\n  && {\n    height: 1em;\n    width: 1em;\n    margin-right: 5px;\n  }\n"]);return xt=function(){return e},e}function Et(){var e=Object(u.a)(["\n  margin-right: 5px;\n"]);return Et=function(){return e},e}function wt(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n"]);return wt=function(){return e},e}var Tt=function(e){var t=e.image,n=e.value,r=e.currency;return i.a.createElement(jt,null,t&&i.a.createElement(Ct,{src:t}),r&&i.a.createElement(kt,null,r),n)},jt=h.b.div(wt()),kt=h.b.span(Et()),Ct=Object(h.b)(R.a)(xt()),Ot=function(e){var t=e.product,n=e.getTheme,r=e.addToCart,a=e.buyByVC,o=t.virtual_prices&&t.virtual_prices.length>0;return i.a.createElement(dt,{image:t.image_url,name:t.name,value:o?i.a.createElement(Tt,{image:t.virtual_prices[0].image_url,value:t.virtual_prices[0].amount}):i.a.createElement(Tt,{currency:t.price.currency,value:Math.round(100*t.price.amount)/100}),description:t.description,actionButtonContent:o?"Buy now":i.a.createElement(D.a,null),getTheme:n,onAction:o?function(){return a(t,t.virtual_prices[0].sku)}:function(){return r(t)}})};function It(){var e=Object(u.a)(["\n  &.MuiTab-root {\n    color: ",";\n    font-family: ",";\n  };\n"]);return It=function(){return e},e}function St(){var e=Object(u.a)(["\n  padding: 30px 0;\n  color: ",";\n  \n  & .MuiTabs-flexContainer {\n    justify-content: center;\n  };\n"]);return St=function(){return e},e}function _t(){var e=Object(u.a)(["\n  color: ",";\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n"]);return _t=function(){return e},e}function Bt(){var e=Object(u.a)(["\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ",";\n  justify-content: center;\n"]);return Bt=function(){return e},e}function Pt(){var e=Object(u.a)(["\n  color: ",";\n  position: relative;\n  background-color: transparent;\n  z-index: 4;\n"]);return Pt=function(){return e},e}var Ft=function(){var e=i.a.useContext(Ue),t=e.logToken,n=e.virtualItems,r=e.activeGroup,a=e.getTheme,o=e.addToCart,c=e.buyByVC,u=e.setStateFrom,l=e.setCurrs,s=e.isFetching,m=e.updateVirtualCurrencyBalance,d=n.length>0&&"first"===r?n[0].id:r;return i.a.useEffect(function(){!s&&t&&0===n.length&&(u("isFetching",!0),Me(window.xProjectId,t).then(l),m())}),i.a.createElement(Nt,{color:a("colorText")},n.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Wt,{getTheme:a,value:d,onChange:function(e,t){return u("activeGroup",t)},variant:"scrollable"},n.map(function(e){return i.a.createElement(Gt,{getTheme:a,value:e.id,key:e.id,color:"secondary",textColor:"secondary",label:e.name})})),n.map(function(e){return d===e.id?i.a.createElement(i.a.Fragment,null,i.a.createElement(Mt,{color:a("colorText")},e.name),i.a.createElement(zt,{getTheme:a},e.products&&e.products.map(function(e){return i.a.createElement(Ot,{key:e.sku,product:e,addToCart:o,getTheme:a,buyByVC:c})}))):null})))},Nt=h.b.div(Pt(),function(e){return e.color}),zt=h.b.div(Bt(),function(e){return"repeat(auto-fit, minmax(\n    ".concat(e.getTheme("cardWidth"),"px, \n    ").concat(e.getTheme("cardWidth"),"px)\n  )")}),Mt=h.b.div(_t(),function(e){return e.color}),Wt=Object(h.b)(Je.a)(St(),function(e){return e.getTheme("colorAccent")}),Gt=Object(h.b)(Ze.a)(It(),function(e){return e.getTheme("colorAccentText")},function(e){return e.getTheme("fontFamily")}),Vt=(n(197),n(60)),At=n.n(Vt),Dt=n(122),Ut=n(78);function qt(e){return{name:e,fractionSize:2,symbol:{grapheme:e,template:null,rtl:!1},uniqSymbol:null}}var Rt="en_US";function Lt(e,t,n){var r=parseFloat(e);if(!t||isNaN(r))return{formattedCurrency:e+" "+t,dir:"ltr"};var a=function(e){return e&&Dt[e.toUpperCase()]||qt(e)}(t),i=function(e){return e&&Ut[function(e){return[e.substr(0,2).toLowerCase(),e.substr(3,2).toUpperCase()].join("_")}(e)]||Ut[Rt]}(n),o=r<0?"-":"",c=a.fractionSize,u=a.symbol,l=i.thousands,s=i.decimal;u&&!u.rtl||" "!==i.thousands||(l=",",s=".");var m=Math.abs(r).toFixed(c).split(".");m[0]=m[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+l);var d=m.join(s),h=o+d+" "+t,p=!1;return u&&u.template&&(h=o+u.template.replace("1",d).replace("$",u.grapheme),p=u.rtl),{formattedCurrency:h,dir:p?"rtl":"ltr"}}var Qt=n(266),Ht=n(253);function Xt(){var e=Object(u.a)(["\n  z-index: 9;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n"]);return Xt=function(){return e},e}var Jt=Object(F.a)(function(e){return{progress:{margin:e.spacing(2)}}})(function(e){var t=e.classes;return i.a.createElement(Zt,null,i.a.createElement(Ht.a,{className:t.progress}))}),Zt=h.b.div(Xt());function Yt(){var e=Object(u.a)(["\n  display: flex;\n  padding: 0 24px 0 24px;\n  font-weight: bold;\n"]);return Yt=function(){return e},e}function $t(){var e=Object(u.a)(["\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  bottom: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  z-index: 10;\n  padding: 24px 0 24px 0;\n"]);return $t=function(){return e},e}function Kt(){var e=Object(u.a)(["\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  top: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  z-index: 10;\n  padding: 24px 0 8px 0;\n"]);return Kt=function(){return e},e}function en(){var e=Object(u.a)(["\n  background-color: rgba(0, 0, 0, 0.8);\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n"]);return en=function(){return e},e}function tn(){var e=Object(u.a)(["\n  flex: 1;\n  position: absolute;\n  max-width: 680px;\n  z-index: 1;\n  max-height: 80vh;\n  overflow-y: auto;\n  padding-top: 64px;\n"]);return tn=function(){return e},e}function nn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 100;\n"]);return nn=function(){return e},e}function rn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 600px;\n  padding-top: 16px;\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* position: fixed; */\n  /* left: 0; */\n  /* right: 0; */\n  /* top: 0; */\n  /* bottom: 0; */\n  /* z-index: 1; */\n"]);return rn=function(){return e},e}var an,on=h.b.div(rn()),cn=h.b.div(nn()),un=h.b.div(tn()),ln=h.b.div(en()),sn=h.b.div(Kt()),mn=h.b.div($t()),dn=h.b.div(Yt()),hn=(Object(Qt.a)(function(e){var t=this,n=(e.style,e.history),r=i.a.useState(!1),a=Object(_.a)(r,2),o=a[0],c=a[1],u=i.a.useContext(Ue),l=function(){u.hideCart()},s=function(e,n){c(!0),function(e,t,n){var r={url:"https://store.xsolla.com/api/v2/project/"+window.xProjectId+"/payment/item/"+e.sku+"/virtual/"+t,method:"POST",headers:{Authorization:"Bearer "+n}};return k()(r)}(e,n,u.logToken).then(function(e){u.clearVCCart(),c(!1),t.props.updateVirtualCurrencyBalance()}).catch(function(e){c(!1)})};return i.a.createElement("div",null,u.cartShown&&i.a.createElement(cn,null,i.a.createElement(un,{style:{padding:"0 32px 0 32px",borderRadius:u.getTheme("borderRadius"),backgroundColor:u.getTheme("colorBg"),color:u.getTheme("colorText")}},i.a.createElement("div",{style:{backgroundColor:u.getTheme("colorBg"),color:u.getTheme("colorText")}},i.a.createElement(sn,{style:{backgroundColor:"".concat(u.getTheme("colorBg")),borderBottom:"1px solid ".concat(Q()(u.getTheme("colorText")).alpha(.1).string())}},i.a.createElement("h4",null,"Cart "),i.a.createElement(At.a,{style:{cursor:"pointer"},onClick:function(e){return l()}})),i.a.createElement(on,null,u.cart&&u.cart.items.map(function(e,t){return i.a.createElement("div",{key:"cartitem".concat(t)},i.a.createElement(ke,{product:e,key:e.sku,order:t,initClass:"initialFlow1",sku:e.sku,title:e.name,description:e.description,price:e.price.amount,image_url:e.image_url,currency:e.price.currency,cardType:"cart",cartId:u.cart.cartId,logToken:u.logToken,removeFromCart:u.removeFromCart,changeItemQuantityInCart:u.changeItemQuantityInCart,quantity:e.quantity}))}),u.cart&&u.cart.items.length<=0&&i.a.createElement("p",null,"Empty cart")),i.a.createElement(mn,{style:{backgroundColor:"".concat(u.getTheme("colorBg")),borderTop:"1px solid ".concat(Q()(u.getTheme("colorText")).alpha(.1).string())}},i.a.createElement("div",{className:""}),u.cart&&u.cart.items.length>0&&i.a.createElement(dn,null,"Subtotal:",i.a.createElement("div",{style:{minWidth:80,textAlign:"right"}},u.isFetching&&Lt(function(e){var t=0;return e.forEach(function(e){t+=e.price.amount*e.quantity}),Math.round(100*t)/100}(u.cart.items),u.cart.items[0].price.currency).formattedCurrency,!u.isFetching&&Lt(u.cart.price.amount,u.cart.price.currency).formattedCurrency)),i.a.createElement(w.a,{variant:"contained",style:{marginRight:"5px"},onClick:function(){!(o||u.cart.items.length<=0)&&(o||u.cart.items.length<=0||(n.push("/purchase"),l()))}},"Buy on PS4"),i.a.createElement(w.a,{variant:"contained",onClick:function(){!(o||u.cart.items.length<=0)&&(c(!0),Ae(u.cart.cartId,u.logToken).then(function(e){window.xPayStationInit(e.data.token),window.XPayStationWidget.open(),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.CLOSE,function(e,t){c(!1)}),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.STATUS_DONE,function(e,t){return u.payStationHandler(e,t)})}).catch(function(e){}))}},"Buy on Xsolla")))),i.a.createElement(ln,{onClick:function(e){return l()}})),u.cartWithItemsBuyingByVCShown&&i.a.createElement(cn,null,i.a.createElement(un,{style:{padding:"0 32px 0 32px",borderRadius:u.getTheme("borderRadius"),backgroundColor:u.getTheme("colorBg"),color:u.getTheme("colorText")}},i.a.createElement("div",{style:{backgroundColor:u.getTheme("colorBg"),color:u.getTheme("colorText")}},i.a.createElement(sn,{style:{backgroundColor:"".concat(u.getTheme("colorBg")),borderBottom:"1px solid ".concat(Q()(u.getTheme("colorText")).alpha(.1).string())}},i.a.createElement("h4",null,"Confirm"),i.a.createElement(At.a,{style:{cursor:"pointer"},onClick:function(e){return l()}})),i.a.createElement(on,null,u.cartWithItemsBuyingByVC&&u.cartWithItemsBuyingByVC.items.map(function(e,t){return i.a.createElement("div",{key:"cartitem".concat(t)},i.a.createElement(ke,{product:e,key:e.sku,order:t,initClass:"initialFlow1",sku:e.sku,title:e.name,description:e.description,price:e.price.amount,image_url:e.image_url,currency:e.price.currency,cardType:"buy_by_vc",cartId:u.cart.cartId,logToken:u.logToken,removeFromCart:u.removeFromCart,changeItemQuantityInCart:u.changeItemQuantityInCart,quantity:e.quantity}))}),u.cartWithItemsBuyingByVC&&u.cartWithItemsBuyingByVC.items.length<=0&&i.a.createElement("p",null,"Empty cart")),i.a.createElement(mn,{style:{backgroundColor:"".concat(u.getTheme("colorBg")),borderTop:"1px solid ".concat(Q()(u.getTheme("colorText")).alpha(.1).string())}},i.a.createElement("div",{className:""}),o?i.a.createElement(Jt,null):i.a.createElement(w.a,{variant:"contained",onClick:function(){!(o||u.cartWithItemsBuyingByVC.items.length<=0)&&s(u.cartWithItemsBuyingByVC.items[0],u.cartWithItemsBuyingByVC.vcPriceSku)}},"Buy")))),i.a.createElement(ln,{onClick:function(e){return l()}})))}),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(g.a)(this,Object(v.a)(t).call(this,e))).calculateSubtotal=function(e){var t=0;return e.forEach(function(e){t+=e.price.amount*e.quantity}),Math.round(100*t)/100},n.state={showToast:!1,statusToast:"processing",operations:null},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"generateUUID",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"setShowToast",value:function(e){this.setState({showToast:e})}},{key:"purchase",value:function(){var e=this,t=this.props.cart,n={type:"purchase",user:"d342dad2-9d59-11e9-a384-42010aa8003f",platform:"playstation_network",purchase:{amount:t.price.amount,currency:t.price.currency,external_purchase_id:this.generateUUID(),external_purchase_date:(new Date).toISOString()},items:t.items.map(function(e){return{sku:e.sku,quantity:e.quantity}})};this.setState({showToast:!0,statusToast:"processing",operationDetails:null}),function(e){var t={url:"https://livedemo.xsolla.com/store-demo/api/index.php",method:"POST",data:e};return k()(t).then(function(e){return e.data})}(n).then(function(t){e.setState({showToast:!0,statusToast:"complete",operations:t.operations})}).catch(function(){})}},{key:"render",value:function(){var e=this,t=this.props,n=t.cart,r=t.logToken,a=t.removeFromCart,o=t.changeItemQuantityInCart,c=t.isFetching,u=this.state,l=u.operations,s=u.showToast,m=u.statusToast;return i.a.createElement("div",null,i.a.createElement("div",{className:"server-purchase__alert"},i.a.createElement(Xe.a,{onClose:function(t){return e.setShowToast(!1)},show:s,variant:"processing"===m?"primary":"success",dismissible:!0},i.a.createElement(Xe.a.Heading,null,"processing"===m?"Operation is processing":"Operation complete!"),l&&l.length?l.map(function(e){return e.items.map(function(e,t){return i.a.createElement("div",{key:t},i.a.createElement("div",null,"Item: ",i.a.createElement("b",null,e.sku)),i.a.createElement("div",null,"Quantity: ",i.a.createElement("b",null,null===e.quantity?0:e.quantity)))})}):"")),i.a.createElement("div",{className:"server-purchase"},i.a.createElement(on,null,n&&n.items.map(function(e,t){return i.a.createElement("div",{key:"cartitem".concat(t)},i.a.createElement(ke,{product:e,key:e.sku,order:t,initClass:"initialFlow1",sku:e.sku,title:e.name,description:e.description,price:e.price.amount,image_url:e.image_url,currency:e.price.currency,cardType:"cart",cartId:n.cartId,logToken:r,removeFromCart:a,changeItemQuantityInCart:o,quantity:e.quantity}))}),n&&n.items.length<=0&&i.a.createElement("div",null,"Oops, you have empty cart!")),i.a.createElement("div",{className:""}),n&&n.items.length>0&&i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement(dn,{style:{paddingTop:"7px"}},"Subtotal:",i.a.createElement("div",{style:{minWidth:80,textAlign:"right"}},c&&Lt(this.calculateSubtotal(n.items),n.items[0].price.currency).formattedCurrency,!c&&Lt(n.price.amount,n.price.currency).formattedCurrency)),i.a.createElement(w.a,{variant:"contained",onClick:function(){e.purchase(n)}},"Grant purchase"))))}}]),t}(a.PureComponent)),pn=n(33),fn=(n(200),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).state={expanded:!1,cardShown:!1},e}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.order;this.state.cardShown||setTimeout(function(){e.setState({cardShown:!0})},100*t)}},{key:"render",value:function(){var e=this.props,t=e.initClass,n=e.imageUrl,r=e.title,a=e.description;return i.a.createElement("div",{className:"entitlement-item ".concat(this.state.cardShown?"":t)},i.a.createElement("div",{className:"entitlement-item-card"},i.a.createElement("div",{className:"entitlement-item-card-media",style:{backgroundImage:"url(".concat(n,")")}}),i.a.createElement("div",{className:"entitlement-item-card-content"},i.a.createElement("div",{className:"entitlement-item-card-content-title"},r),i.a.createElement("div",{className:"entitlement-item-card-content-description"},a)),i.a.createElement(E.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},i.a.createElement(x.a,null,a))))}}]),t}(a.Component)),gn=k.a.CancelToken,vn=(n(202),n(204),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={code:"",sku:"",hasRedeemError:!1,isFetching:!1},n.handleChangeCode=n.handleChangeCode.bind(Object(pn.a)(Object(pn.a)(n))),n.handleChangeSku=n.handleChangeSku.bind(Object(pn.a)(Object(pn.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(pn.a)(Object(pn.a)(n))),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.logToken&&null===this.props.entitlementItems&&(this.updateEntitlement(),this.props.setStateFrom("fetching",!0))}},{key:"componentWillUnmount",value:function(){null!==this.props.entitlementItems&&this.props.setEntitlementItems(null)}},{key:"updateEntitlement",value:function(){var e=this;Object(O.b)({projectId:window.xProjectId,version:"v2"}),this.props.setStateFrom("fetching",!0),function(e,t){an&&an();var n={url:"https://store.xsolla.com/api/v2/projects/entitlement",method:"GET",headers:{Authorization:"Bearer "+t},cancelToken:new gn(function(e){an=e})};return k()(n).then(function(e){return e.data})}(window.xProjectId,this.props.logToken).then(function(t){e.props.setEntitlementItems(t)}).catch(function(){e.props.setEntitlementItems([])})}},{key:"handleChangeCode",value:function(e){this.setState({code:e.target.value})}},{key:"handleChangeSku",value:function(e){this.setState({sku:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;this.setState(Object(B.a)({},this.state,{isFetching:!0})),function(e,t,n,r){an&&an();var a={url:"https://store.xsolla.com/api/v1/game_delivery/xsolla_login/redeem_key",method:"POST",headers:{Authorization:"Bearer "+t},data:{project_id:e,digital_content_sku:r,language:"en",key:n},cancelToken:new gn(function(e){an=e})};return k()(a)}(window.xProjectId,this.props.logToken,this.state.code,this.state.sku).then(function(e,n){t.updateEntitlement(),t.setState(Object(B.a)({},t.state,{hasRedeemError:!1,isFetching:!1}))}).catch(function(){console.log("error"),t.setState(Object(B.a)({},t.state,{hasRedeemError:!0,isFetching:!1}))}),e.preventDefault()}},{key:"render",value:function(){var e=this.props.entitlementItems;return i.a.createElement("div",{className:""},i.a.createElement("form",{className:"entitlement-redeem-form",onSubmit:this.handleSubmit},i.a.createElement("input",{className:"entitlement-redeem-input",type:"text",size:"40",placeholder:"Enter your code",onChange:this.handleChangeCode,value:this.state.code}),i.a.createElement("input",{className:"entitlement-redeem-input",type:"text",size:"40",placeholder:"Enter sku of your game",onChange:this.handleChangeSku,value:this.state.sku}),this.state.hasRedeemError&&!this.state.isFetching&&i.a.createElement("span",{className:"entitlement-redeem-error"},"Wrong code"),this.state.isFetching&&i.a.createElement("div",{className:"entitlement-redeem-loader"},i.a.createElement(Ht.a,null)),i.a.createElement(w.a,{type:"submit",className:"entitlement-redeem-button",variant:"contained"},"Redeem Code")),i.a.createElement("div",{className:"entitlement-list"},e&&e.length?e.map(function(e,t){return i.a.createElement(fn,{key:e.digital_content_sku,order:t,initClass:"initialFlow1",title:e.name,description:e.description,imageUrl:e.image_url})}):i.a.createElement("div",null,"Oops, you have no games yet!")))}}]),t}(a.PureComponent)),bn=n(259),yn=n(264),xn="375px",En="425px",wn="768px",Tn="1024px",jn="1440px",kn="1920px",Cn="2560px",On={mobileS:"(max-width: ".concat("320px",")"),mobileM:"(max-width: ".concat(xn,")"),mobileL:"(max-width: ".concat(En,")"),tablet:"(max-width: ".concat(wn,")"),laptop:"(max-width: ".concat(Tn,")"),laptopL:"(max-width: ".concat(jn,")"),desktop:"(max-width: ".concat(kn,")"),retina:"(max-width: ".concat(Cn,")")};function In(){var e=Object(u.a)(["\n  @media "," {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n"]);return In=function(){return e},e}function Sn(){var e=Object(u.a)(["\n  @media "," {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n"]);return Sn=function(){return e},e}function _n(){var e=Object(u.a)(["\n  @media "," {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n"]);return _n=function(){return e},e}function Bn(){var e=Object(u.a)(["\n  font-size: 0.8em;\n  opacity: 0.3;\n"]);return Bn=function(){return e},e}function Pn(){var e=Object(u.a)(["\n  color: ",";\n  font-weight: 600;\n"]);return Pn=function(){return e},e}function Fn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n\n  @media "," {\n    flex-grow: 1;\n  }\n"]);return Fn=function(){return e},e}function Nn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  @media "," {\n    grid-column: 2 / 2;\n  }\n"]);return Nn=function(){return e},e}function zn(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n"]);return zn=function(){return e},e}function Mn(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n"]);return Mn=function(){return e},e}function Wn(){var e=Object(u.a)(["\n  font-weight: bolder;\n  margin-bottom: 5px;\n"]);return Wn=function(){return e},e}function Gn(){var e=Object(u.a)(["  \n  padding: 10px;\n"]);return Gn=function(){return e},e}function Vn(){var e=Object(u.a)(["\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(",");\n"]);return Vn=function(){return e},e}function An(){var e=Object(u.a)(["\n  display: grid;\n  grid-template-columns: 0.7fr 1.3fr 1fr;\n  overflow: hidden;\n  height: 130px;\n\n  @media "," {\n    height: 185px;\n    grid-template-columns: 0.9fr 1.1fr;\n    grid-template-rows: 120px 1fr;\n  }\n"]);return An=function(){return e},e}var Dn=function(e){var t=e.item,n=e.getTheme,r=e.changeItemQuantity,a=function(e,t){return Math.round(e*t*100)/100},o=function(){return r(t,t.quantity-1)};return i.a.createElement(Un,null,i.a.createElement(qn,{image:t.image_url}),i.a.createElement(Rn,null,i.a.createElement(Ln,null,t.name),i.a.createElement(Jn,null,i.a.createElement(Zn,{getTheme:n},t.price.currency," ",a(t.price.amount,t.quantity)),t.quantity>1&&i.a.createElement(Yn,{getTheme:n},t.price.currency," ",a(t.price.amount,1)," for one item"))),i.a.createElement(Xn,null,i.a.createElement(Qn,null,t.quantity>1?i.a.createElement(Kn,{onClick:o}):i.a.createElement($n,{onClick:o}),i.a.createElement(Hn,null,t.quantity),i.a.createElement(er,{onClick:function(){return r(t,t.quantity+1)}}))))},Un=h.b.div(An(),On.mobileL),qn=h.b.div(Vn(),function(e){return e.image}),Rn=h.b.div(Gn()),Ln=h.b.div(Wn()),Qn=h.b.div(Mn()),Hn=h.b.div(zn()),Xn=h.b.div(Nn(),On.mobileL),Jn=h.b.div(Fn(),On.mobileL),Zn=h.b.div(Pn(),function(e){return e.getTheme("colorAccent")}),Yn=h.b.div(Bn()),$n=Object(h.b)(q.a)(_n(),On.mobileL),Kn=Object(h.b)(W.a)(Sn(),On.mobileL),er=Object(h.b)(z.a)(In(),On.mobileL);function tr(){var e=Object(u.a)(["\n  min-width: 80px;\n  text-align: right;\n"]);return tr=function(){return e},e}function nr(){var e=Object(u.a)(["\n  display: flex;\n  font-weight: bold;\n  margin-right: 10px;\n\n  @media "," {\n    justify-content: flex-end;\n    width: 100%;\n    margin-bottom: 15px;\n    margin-right: 0;\n  }\n"]);return nr=function(){return e},e}function rr(){var e=Object(u.a)(["\n  display: flex;\n\n  @media "," {\n    justify-content: flex-end;\n    width: 100%;\n  }\n"]);return rr=function(){return e},e}function ar(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  background-color: ",";\n  border-top: 1px solid ",";\n  padding: 24px 0 24px 0;\n"]);return ar=function(){return e},e}function ir(){var e=Object(u.a)(["\n  display: grid;\n  grid-row-gap: 30px;\n  flex-grow: 1;\n  padding: 16px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]);return ir=function(){return e},e}function or(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  z-index: 10;\n  padding: 24px 0 8px 0;\n"]);return or=function(){return e},e}function cr(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-radius: ",";\n  background-color: ",";\n  color: ",";\n  padding: 0 32px;\n  width: 680px;\n  max-height: 80vh;\n\n  @media "," {\n    padding: 0 16px;\n    max-height: none;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n"]);return cr=function(){return e},e}function ur(){var e=Object(u.a)(["\n  cursor: pointer;\n"]);return ur=function(){return e},e}function lr(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return lr=function(){return e},e}var sr=Object(h.b)(bn.a)(lr()),mr=Object(h.b)(At.a)(ur()),dr=h.b.div(cr(),function(e){return e.getTheme("borderRadius")},function(e){return e.getTheme("colorBg")},function(e){return e.getTheme("colorText")},On.tablet),hr=h.b.div(or(),function(e){return e.getTheme("colorBg")},function(e){return Q()(e.getTheme("colorText")).alpha(.1).string()}),pr=h.b.div(ir()),fr=h.b.div(ar(),function(e){return e.getTheme("colorBg")},Q()(function(e){return e.getTheme("colorText")}).alpha(.1).string()),gr=h.b.div(rr(),On.tablet),vr=h.b.div(nr(),On.tablet),br=h.b.div(tr()),yr=Object(Qt.a)(function(e){var t=e.history,n=i.a.useState(!1),r=Object(_.a)(n,2),a=r[0],o=r[1],c=i.a.useContext(Ue),u=c.cart,l=c.hideCart,s=c.logToken,m=c.payStationHandler,d=c.cartShown,h=c.getTheme,p=c.changeItemQuantityInCart,f=c.isFetching;return i.a.createElement(sr,{open:d,onClose:l,closeAfterTransition:!0,BackdropComponent:yn.a,BackdropProps:{timeout:250}},i.a.createElement(at.a,{in:d,timeout:250},i.a.createElement(dr,{getTheme:h},i.a.createElement(hr,{getTheme:h},i.a.createElement("h4",null,"Cart"),i.a.createElement(mr,{onClick:l})),i.a.createElement(pr,null,u.items.length>0?u.items.map(function(e){return i.a.createElement(Dn,{item:e,getTheme:h,changeItemQuantity:p})}):i.a.createElement("p",null,"Empty cart")),i.a.createElement(fr,{getTheme:h},u.items.length>0&&i.a.createElement(vr,null,"Subtotal:",i.a.createElement(br,null,f?Lt(function(e){var t=e.reduce(function(e,t){return e+t.price.amount*t.quantity},0);return Math.round(100*t)/100}(u.items),u.items[0].price.currency).formattedCurrency:Lt(u.price.amount,u.price.currency).formattedCurrency)),i.a.createElement(gr,null,i.a.createElement(w.a,{variant:"contained",disabled:a||0===u.items.length,style:{marginRight:"7px"},onClick:function(){a||u.items.length<=0||(t.push("/purchase"),l())}},"Buy on PS4"),i.a.createElement(w.a,{variant:"contained",disabled:a||0===u.items.length,onClick:function(){o(!0),Ae(u.cartId,s).then(function(e){window.xPayStationInit(e.data.token),window.XPayStationWidget.open(),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.CLOSE,function(){return o(!1)}),window.XPayStationWidget.on(window.XPayStationWidget.eventTypes.STATUS_DONE,m)}).catch(function(){return o(!1)})}},"Buy on Xsolla"))))))}),xr={items:"/",currencies:"/crystals",physical:"/physical",inventory:"/inventory",entitlement:"/entitlement",manage:"/manage",purchase:"/purchase"},Er=[{route:xr.items,label:"Items"},{route:xr.currencies,label:"Currencies"},{route:xr.physical,label:"Merchandise"},{route:xr.inventory,label:"Inventory"},{route:xr.entitlement,label:"Entitlement"},{route:xr.manage,label:"Manage"},{route:xr.purchase,label:"Server purchase"}],wr=function(e){return Er.filter(function(t){return e.includes(t.route)}).sort(function(t,n){return e.indexOf(t.route)-e.indexOf(n.route)})},Tr=n(267),jr=n(209),kr=n(254),Cr=n(125),Or=n.n(Cr),Ir=n(76),Sr=n.n(Ir);function _r(){var e=Object(u.a)(["\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  text-align: center;\n  padding: 36px;\n  overflow: hidden;\n  margin: 0 70px;\n  border-radius: 8px;\n"]);return _r=function(){return e},e}function Br(){var e=Object(u.a)(["\n  padding: 20px 70px;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n  flex-grow: 1;\n  font-size: 22px;\n  width: 600px;\n  & a {\n    /* font-family: 'PS Mono', Courier, monospace; */\n    text-decoration: underline;\n    font-size: 28px;\n    line-height: 0px;\n  }\n"]);return Br=function(){return e},e}function Pr(){var e=Object(u.a)(["\n  position: fixed;\n  z-index: 99;\n  background: rgba(0, 0, 0, 0.8);\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n"]);return Pr=function(){return e},e}function Fr(){var e=Object(u.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  min-height: 100%;\n  z-index: 100;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return Fr=function(){return e},e}function Nr(){var e=Object(u.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  min-height: 100%;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  overflow-y: scroll;\n  padding: 40px 0;\n"]);return Nr=function(){return e},e}var zr=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(g.a)(this,Object(v.a)(t).call(this,e))).unauthorizedFlow=function(){n.setState({logToken:null}),n.setState({shown:!0})},n.authorizedFlow=function(e){n.setState({logToken:e,shown:!1}),n.user=function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}(e),n.setStateFrom("user",n.user),n.createCart()},n.state={shown:!0,logToken:null,psToken:null},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(Le,null,function(t){return e.setStateFrom=t.setStateFrom,e.createCart=t.createCart,i.a.createElement("div",null,i.a.createElement(Mr,{style:{display:e.state.shown?"flex":"none"}},i.a.createElement(Wr,null,i.a.createElement(Vr,null,"Current project: ",i.a.createElement("b",null,window.xProjectId)),i.a.createElement(Ar,null,i.a.createElement("div",{id:"xl_auth"})),i.a.createElement(Vr,null,Dr.map(function(e,t){var n=e.project_id,r=e.login_id,a="".concat("https://xsolla.github.io/store-demo/#/","?project_id=").concat(n,"&login_id=").concat(r);return i.a.createElement("div",{key:n+t,style:{marginBottom:"1em"}},i.a.createElement("div",{style:{fontSize:"0.4em"}},i.a.createElement("a",{href:a},n,": ",e.projectName)))}),i.a.createElement("p",null,"Open any Xsolla Store using GET parameters ",i.a.createElement("br",null),i.a.createElement("b",null,"project_id")," and ",i.a.createElement("b",null,"login_id")," (login must point back to https://xsolla.github.io/store-demo/#/)"))),i.a.createElement(Gr,null)))})}},{key:"componentDidMount",value:function(){window.XloginInit();var e=Se();e?this.authorizedFlow(e):this.unauthorizedFlow()}}]),t}(a.Component),Mr=h.b.div(Nr()),Wr=h.b.div(Fr()),Gr=h.b.div(Pr()),Vr=h.b.div(Br()),Ar=h.b.div(_r()),Dr=[{projectName:"Xsolla Store Demo",project_id:47278,login_id:"fb2d7c69-bf25-11e9-9244-42010aa80004"}];function Ur(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 50px;\n  padding: 0 15px;\n  font-family: 'Helvetica Neue', 'Roboto', Arial, Helvetica, sans-serif;\n  color: ",";\n  background-color: ",";\n"]);return Ur=function(){return e},e}function qr(){var e=Object(u.a)(["\n  cursor: pointer;\n  font-family: 'Roboto';\n  text-transform: uppercase;\n  color: #ff005b;\n  margin: 0 1rem;\n"]);return qr=function(){return e},e}function Rr(){var e=Object(u.a)(["\n\n"]);return Rr=function(){return e},e}function Lr(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: row;\n  font-size: 0.8rem;\n  line-height: 2em;\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  font-family: 'Roboto';\n  color: black;\n  background: var(--mainWhite);\n  border-radius: 4px;\n  padding: 0 0.6rem;\n  cursor: pointer;\n"]);return Lr=function(){return e},e}function Qr(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: flex-end;\n  flex-grow: 1;\n\n  @media "," {\n    justify-content: center;\n  }\n"]);return Qr=function(){return e},e}function Hr(){var e=Object(u.a)(["\n  margin-right: 10px;\n"]);return Hr=function(){return e},e}function Xr(){var e=Object(u.a)(["\n  &.MuiIconButton-root {\n    color: ",";\n  }\n"]);return Xr=function(){return e},e}function Jr(){var e=Object(u.a)(["\n  display: flex;\n  padding: 15px 20px;\n  min-width: 200px;\n  align-items: center;\n  text-transform: uppercase;\n  text-decoration: none;\n  font-family: ",";\n  font-size: 1.2rem;\n  font-weight: 700;\n  line-height: 1.2rem;\n  height: 100%;\n  color: #d6e0e7;\n  border: none;\n\n  &:hover {\n    color: #ff005b;\n    text-decoration: none;\n  }\n\n  &.active {\n    color: #ff005b;\n  }\n"]);return Jr=function(){return e},e}function Zr(){var e=Object(u.a)(["\n  &.MuiTab-root {\n    text-transform: uppercase;\n    font-family: ",";\n    font-size: 1.4rem;\n    font-weight: 700;\n    line-height: 1.4rem;\n  }\n"]);return Zr=function(){return e},e}function Yr(){var e=Object(u.a)(["\n  &.MuiTabs-root {\n    height: 100%\n  }\n"]);return Yr=function(){return e},e}function $r(){var e=Object(u.a)(["\n  .MuiMenu-list {\n    background-color: ",";\n  }\n"]);return $r=function(){return e},e}var Kr=Object(h.b)(jr.a)($r(),function(e){return e.getTheme("colorBg")}),ea=Object(h.b)(Je.a)(Yr()),ta=Object(h.b)(Ze.a)(Zr(),function(e){return e.getTheme("fontFamily")}),na=Object(h.b)(Tr.a)(Jr(),function(e){return e.getTheme("fontFamily")}),ra=Object(h.b)(kr.a)(Xr(),function(e){return e.getTheme("colorAccentText")}),aa=h.b.div(Hr()),ia=h.b.div(Qr(),On.mobileL),oa=h.b.div(Lr()),ca=Object(h.b)(w.a)(Rr()),ua=h.b.div(qr()),la=h.b.header(Ur(),function(e){return e.getTheme("colorAccentText")},function(e){return e.getTheme("colorBg")}),sa=Object(Qt.a)(function(e){var t=e.location,n=i.a.useContext(Ue),r=n.getTheme,a=n.logToken,o=n.user,c=n.userBalanceVirtualCurrency,u=n.projectId,l=n.showCart,s=n.setSideMenuVisibility,m=n.isSideMenuShown,h=i.a.useState(null),p=Object(_.a)(h,2),f=p[0],g=p[1],v=function(){return g(null)},b=a&&o,y=wr([xr.items,xr.currencies].concat(Object(Ce.a)(44056===u?[xr.physical]:[]))),x=wr([xr.inventory,xr.entitlement,xr.manage,xr.purchase]);return i.a.createElement(la,{getTheme:r},i.a.createElement(d.a,{mdDown:!0},i.a.createElement(ea,{value:t.pathname,component:"nav"},y.map(function(e){return i.a.createElement(ta,{getTheme:r,component:Tr.a,label:e.label,value:e.route,to:e.route})}))),i.a.createElement(d.a,{lgUp:!0},i.a.createElement(ra,{getTheme:r,onClick:function(){return s(!m)}},i.a.createElement(Or.a,null))),b&&i.a.createElement(ia,null,c.map(function(e){return i.a.createElement(aa,{key:e.sku},i.a.createElement(Tt,{image:e.image_url,value:e.amount}))}),i.a.createElement(d.a,{mdDown:!0},i.a.createElement(ua,{onClick:function(e){return g(e.currentTarget)}},o.email))),i.a.createElement(zr,null),!a&&i.a.createElement(oa,null,"Log In"),b&&44056!==u&&i.a.createElement(w.a,{variant:"outlined",color:"secondary",size:"small",onClick:function(){_e("xsolla_login_token"),_e("xsolla_last_click_id"),window.location.reload()}},i.a.createElement(Sr.a,{size:"inherit"})),i.a.createElement(ca,{variant:"contained",color:"secondary",size:"small",onClick:l},i.a.createElement(D.a,{size:"inherit"}),i.a.createElement(d.a,{xsDown:!0},"cart")),i.a.createElement(Kr,{getTheme:r,anchorEl:f,getContentAnchorEl:null,transformOrigin:{vertical:"top",horizontal:"center"},anchorOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(f),onClose:v},x.map(function(e){return i.a.createElement(na,{getTheme:r,onClick:v,activeClassName:"active",to:e.route},e.label)})))}),ma=n(262),da=n(126),ha=n.n(da),pa=n(255);function fa(){var e=Object(u.a)(["\n  flex-grow: 1;\n  padding: 0 15px;\n  text-transform: uppercase;\n  font-family: Roboto;\n  color: ",";\n"]);return fa=function(){return e},e}function ga(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 49px;\n"]);return ga=function(){return e},e}function va(){var e=Object(u.a)(["\n  &.MuiTab-root {\n    color: ",";\n    padding: 15px;\n    font-family: ",";\n    font-size: 1.3rem;\n    line-height: 1.3rem;\n    font-weight: 700;\n  }\n\n  & .MuiTab-wrapper {\n    align-items: flex-start;\n  }\n"]);return va=function(){return e},e}function ba(){var e=Object(u.a)(["\n  color: ",";\n"]);return ba=function(){return e},e}function ya(){var e=Object(u.a)(["\n  &.MuiIconButton-root {\n    color: ",";\n  }\n"]);return ya=function(){return e},e}function xa(){var e=Object(u.a)(["\n  &.MuiDivider-root {\n    margin: 5px 0;\n  }\n"]);return xa=function(){return e},e}function Ea(){var e=Object(u.a)(["\n  &.MuiDivider-root {\n    background-color: ",";\n    opacity: 0.1;\n    margin-bottom: 5px;\n  }\n"]);return Ea=function(){return e},e}function wa(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  height: 100%;\n  background-color: ",";\n"]);return wa=function(){return e},e}var Ta=h.b.div(wa(),function(e){return e.getTheme("colorBg")}),ja=Object(h.b)(pa.a)(Ea(),function(e){return e.getTheme("colorAccentText")}),ka=Object(h.b)(ja)(xa()),Ca=Object(h.b)(kr.a)(ya(),function(e){return e.getTheme("colorAccentText")}),Oa=Object(h.b)(Je.a)(ba(),function(e){return e.getTheme("colorAccent")}),Ia=Object(h.b)(Ze.a)(va(),function(e){return e.getTheme("colorAccentText")},function(e){return e.getTheme("fontFamily")}),Sa=h.b.div(ga()),_a=h.b.div(fa(),function(e){return e.getTheme("colorAccent")}),Ba=Object(Qt.a)(function(e){var t=e.location,n=i.a.useContext(Ue),r=n.getTheme,a=n.isSideMenuShown,o=n.user,c=n.logToken,u=n.projectId,l=n.setSideMenuVisibility,s=function(){return l(!1)};i.a.useEffect(function(){return s},[]);var m=c&&o,d=wr([xr.items,xr.currencies].concat(Object(Ce.a)(44056===u?[xr.physical]:[]))),h=wr([xr.inventory,xr.entitlement,xr.manage,xr.purchase]);return i.a.createElement(ma.a,{open:a,anchor:"left",onClose:s,onOpen:function(){return l(!0)}},i.a.createElement(Ta,{getTheme:r},i.a.createElement(Sa,null,m&&44056!==u&&i.a.createElement(Ca,{getTheme:r,onClick:function(){_e("xsolla_login_token"),_e("xsolla_last_click_id"),window.location.reload()}},i.a.createElement(Sr.a,{size:"inherit"})),i.a.createElement(_a,{getTheme:r},o.email),i.a.createElement(Ca,{getTheme:r,onClick:s},i.a.createElement(ha.a,null))),i.a.createElement(ja,{getTheme:r}),i.a.createElement(Oa,{value:t.pathname,onChange:s,component:"nav",variant:"scrollable",orientation:"vertical",getTheme:r},d.map(function(e){return i.a.createElement(Ia,{getTheme:r,component:Tr.a,label:e.label,value:e.route,to:e.route})}),i.a.createElement(ka,{getTheme:r}),h.map(function(e){return i.a.createElement(Ia,{getTheme:r,component:Tr.a,label:e.label,value:e.route,to:e.route})}))))});function Pa(){var e=Object(u.a)(["\n  color: ",";\n  padding-top: 2em;\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n"]);return Pa=function(){return e},e}function Fa(){var e=Object(u.a)(["\n  /* width: '100%'; */\n  display: flex;\n  flex-wrap: wrap;\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* display: grid; */\n  /* grid-template-columns: repeat( auto-fit, minmax(260px, 320px)); */\n  /* grid-row-gap: 24px; */\n  place-content: center;\n"]);return Fa=function(){return e},e}function Na(){var e=Object(u.a)(["\n  /* display: flex; */\n  align-items: center;\n  flex-grow: 1;\n  margin: 24px 0;\n"]);return Na=function(){return e},e}function za(){var e=Object(u.a)(["\n  /* position: relative;\n  z-index: 4; */\n"]);return za=function(){return e},e}function Ma(){var e=Object(u.a)(["\n  position: relative;\n  z-index: 4;\n"]);return Ma=function(){return e},e}var Wa=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(g.a)(this,Object(v.a)(t).call(this,e))).changeGroupHandler=function(e){n.props.setStateFrom("activeGroup",e)},n.ProductRef=i.a.createRef(),n.state={},n.changeGroupHandler=n.changeGroupHandler.bind(Object(pn.a)(Object(pn.a)(n))),n.changeGroupHandler(10),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.logToken&&!this.props.virtualItems&&(this.props.setStateFrom("fetching",!0),Me(window.xProjectId,this.props.logToken).then(function(t){e.props.setCurrs(t)}),this.props.updateVirtualCurrencyBalance())}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(Le,null,function(t){return i.a.createElement("div",null,i.a.createElement(Ga,{style:{backgroundColor:"transparent",color:t.theme.colorText}},"virtualItems"===t.activeModule&&t.virtualCurrencyPackages&&i.a.createElement(Va,null,i.a.createElement(Aa,null,t.virtualCurrencyPackages.map(function(n,r){return i.a.createElement(ke,{ref:e.ProductRef,key:n.sku,order:r,initClass:"initialFlow1",sku:n.sku,title:n.name,description:n.description,price:n.price.amount,image_url:n.image_url,currency:n.price.currency,product:n,addToCart:t.addToCart,getTheme:t.getTheme.bind(e),cartId:t.cartId,logToken:t.logToken,changeItemQuantityInCart:t.changeItemQuantityInCart,activeGroup:e.props.activeGroup,buyByVC:t.buyByVC})})))))}))}}]),t}(a.Component),Ga=h.b.div(Ma()),Va=h.b.div(za()),Aa=(h.b.div(Na()),h.b.div(Fa())),Da=(h.b.div(Pa(),function(e){return e.getTheme("colorText")}),Wa);function Ua(){var e=Object(u.a)(["\n  position: absolute;\n  background-color: ",";\n  opacity: 0.8;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"]);return Ua=function(){return e},e}function qa(){var e=Object(u.a)(["\n  background-image: url(",");\n  z-index: -1;\n  background-size: cover;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"]);return qa=function(){return e},e}var Ra=h.b.div(qa(),function(e){return e.getTheme("backgroundUrl")}),La=h.b.div(Ua(),function(e){return e.getTheme("colorBg")}),Qa=function(){var e=i.a.useContext(Ue);return i.a.createElement(l.a,{basename:"/"},i.a.createElement(i.a.Fragment,null,i.a.createElement(sa,null),i.a.createElement(d.a,{lgUp:!0},i.a.createElement(Ba,null)),i.a.createElement(yr,null),e.isFetching?i.a.createElement(Jt,null):i.a.createElement(s.a,null,i.a.createElement(m.a,{path:xr.items,exact:!0,component:Ft}),i.a.createElement(m.a,{path:xr.inventory,render:function(){return i.a.createElement(I,e)}}),i.a.createElement(m.a,{path:xr.currencies,render:function(){return i.a.createElement(Da,e)}}),i.a.createElement(m.a,{path:xr.physical,render:function(){return i.a.createElement(Qe,e)}}),i.a.createElement(m.a,{path:xr.entitlement,render:function(){return i.a.createElement(vn,e)}}),i.a.createElement(m.a,{path:xr.manage,render:function(){return i.a.createElement(tt,e)}}),i.a.createElement(m.a,{path:xr.purchase,render:function(){return i.a.createElement(hn,e)}})),i.a.createElement(Ra,{getTheme:e.getTheme},i.a.createElement(La,{getTheme:e.getTheme}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(Re,{projectId:window.xProjectId},i.a.createElement(Qa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[137,2,1]]]);
//# sourceMappingURL=main.20c20644.chunk.js.map