{"version":3,"sources":["features/inventory/InventoryLoader.js","features/inventory/InventoryItem.js","features/inventory/InventoryList.js","features/physical/PhysicalItem.js","components/Cookie.js","components/StoreLoader.js","context.js","components/XLogin.js","components/Navbar.js","components/Product.js","features/physical/PhysicalList.js","features/physical/PhysicalListLoader.js","features/StoreLoader.js","components/MenuMaterial.js","features/manage/ManageInventory.js","features/manage/ManageInventoryLoader.js","components/formatCurrency.js","components/Preloader.js","components/Cart.js","components/ProductList.js","features/entitlement/EntitlementLoader.js","components/VCPackagesList.js","features/entitlement/EntitlementItem.js","features/entitlement/EntitlementList.js","features/serverPurchase/ServerPurchase.js","features/serverPurchase/ServerPurchaseLoader.js","App.js","serviceWorker.js","index.js"],"names":["cancel","InventoryItem","_Component","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","expanded","cardShown","inherits","createClass","key","value","_this2","order","props","setTimeout","setState","_this$props","initClass","imageUrl","title","description","quantity","handleConsumeItem","remainingUses","react_default","a","createElement","className","concat","style","backgroundImage","Button","variant","onClick","Collapse","in","timeout","unmountOnExit","CardContent","Component","CancelToken","axios","InventoryList","_PureComponent","apply","arguments","logToken","inventoryItems","updateInventory","updateVirtualCurrencyBalance","setInventoryItems","prevProps","prevState","snapshot","cart","cartId","items","length","cartWithItemsBuyingByVC","setStateFrom","init","projectId","window","xProjectId","version","loginToken","opts","url","method","headers","Authorization","cancelToken","c","then","response","data","getInventory","catch","item","token","Inventory","consumeItem","sku","instance_id","finally","_this3","filter","product","type","map","oneProduct","InventoryItem_InventoryItem","name","image_url","remaining_uses","PureComponent","eatCookie","o","location","search","split","join","e","n","t","exec","decodeURIComponent","getQueryParams","Date","setTime","getTime","toUTCString","document","cookie","setCookie","history","pushState","pathname","i","charAt","substring","indexOf","getCookie","Cookie","eraseCookie","StoreLoader","_x","_x2","_StoreLoader","_callee","result","all","responseGroups","virtualCurrency","virtualCurrencyPackages","resolvedGroups","fulfilledGroups","regenerator_default","wrap","_context","prev","next","fetch","sent","json","Promise","oneGroup","loadByGroup","virtualItems","abrupt","stop","group","resolve","reject","products","error","message","changeItemQuantityCart","_ref","_ref$sku","Content-Type","JSON","stringify","ProductContext","React","createContext","theme","colorText","colorAccent","colorAccentText","colorBg","colorSecondary","borderRadius","backgroundUrl","cardWidth","boxShadow","padding","transitionTime","transitionEasing","transition","transitionStyle","fontFamily","ProductProvider","showCart","cartShown","showCartError","cartError","getCart","hideCartError","fetching","setEntitlementItems","entitlementItems","setPhysicalItems","physicalItems","cartPromise","isCancel","sort","compareItems","price","isFetching","createCart","amount","amount_without_discount","bind","assertThisInitialized","changeTheme","newTheme","newColor","objectSpread","changeCardSize","newSize","clearCart","payStationHandler","event","setPsToken","psToken","handleDetail","console","log","stateName","stateValue","defineProperty","b","buyByVC","vcSku","cartWithItemsBuyingByVCShown","vcPriceSku","clearVCCart","addToCart","findIndex","elem","toConsumableArray","errorMessage","removeFromCart","prod","changeItemQuantityInCart","_ref2","_ref2$sku","removeItemFromCart","indexFind","cartItems","splice","hideCart","setGroups","setCurrs","resolvedData","currency","subscriptions","getTheme","what","undefined","setProducts","storeProducts","getVirtualCurrencyBalance","reps","userBalanceVirtualCurrency","activeGroup","loginShown","activeModule","nextProps","nextState","Provider","buyCart","children","ProductConsumer","Consumer","XLogin","unauthorizedFlow","shown","authorizedFlow","tkn","user","base64","replace","parse","atob","parseJwt","flexGrow","valueFromContext","CssXpop","display","CssXpopB","CssLoginInfo","CssLoginPop","id","myProjects","onePr","pr","login","urlFull","marginBottom","fontSize","href","projectName","CssXpopZ","XloginInit","cke","styled","div","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","project_id","login_id","useStyles","makeStyles","currencies","marginLeft","marginRight","height","width","Navbar","_ref$showCart","useContext","classes","_React$useState","useState","_React$useState2","slicedToArray","NavWrapper","zIndex","color","backgroundColor","NavLink","activeClassName","exact","to","NavUl","justifyContent","CssLoginPanel","CssLoginButton","CssLogin","vc","Fragment","Avatar","src","CssLoginEmail","email","XLogin_XLogin","reload","Navbar_templateObject","Navbar_templateObject2","Navbar_templateObject3","Navbar_templateObject4","Navbar_templateObject5","ul","_templateObject6","CssCartQs","Product_templateObject","CssCartQ","Product_templateObject2","CssCardAppear","Product_templateObject3","CssCard","Product_templateObject4","cardType","css","Product_templateObject5","Product_templateObject6","_templateObject7","CssDescEllipsis","_templateObject8","CssCardContent","_templateObject9","CssCardH1","_templateObject10","CssCardActions","_templateObject11","_templateObject12","Colorer","alpha","string","_templateObject13","CssCardVCActions","_templateObject14","_templateObject15","_templateObject16","CssCardMedia","_templateObject17","image","CssTypographyPrice","_templateObject18","CssTypographyPriceSm","_templateObject19","withStyles","paper","mixins","gutters","paddingTop","spacing","paddingBottom","cardTitle","card","h1","fontWeight","p","media","marginTop","backgroundSize","actions","expand","transform","transitions","create","duration","shortest","expandOpen","avatar","red","_ref$addToCart","_ref$changeItemQuanti","_ref$buyByVC","_ref$cardType","_ref$getTheme","favorited","_React$useState3","_React$useState4","useEffect","hasVirtualCurrencyPrice","virtual_prices","Math","round","ShoppingCart_default","Delete_default","opacity","IndeterminateCheckBox_default","AddBox_default","q","calcPrice","PhysicalList","isPurchasing","updateCatalogue","PhysicalGood","getPhysicalGoodList","sandbox","getPsTokenByItem","xPayStationInit","XPayStationWidget","open","on","eventTypes","CLOSE","_this4","Product","ref","ProductRef","useTabStyles","root","scroller","MenuMaterial","_ref$virtualItems","_ref$changeGroupHandl","changeGroupHandler","MuiThemeProvider","createMuiTheme","palette","primary","main","Tabs","indicatorColor","textColor","scrollButtons","Tab","label","ManageInventory","manageInventoryGroups","activeInventoryGroup","find","g","itemSku","inventoryItem","setItemQuantity","setManageInventoryItems","manageInventoryItems","singleItemName","setManageInventoryCurrencies","manageInventoryCurrencies","users","showToast","statusToast","operationDetails","invoice","date","getItems","getCurrencies","getVirtualItemList","virtualItemsList","getVirtualCurrencyList","virtualCurrencyList","target","parseInt","isVisible","_this$state","body","count","purchase","external_purchase_id","external_purchase_date","rewardItems","operations","itemOperation","_this5","_this$state2","Alert","onClose","setShowToast","show","dismissible","Heading","onChange","changeUser","components_MenuMaterial","changeInventoryItem","TextField","inputProps","min","step","defaultValue","InputLabelProps","rewardItem","revokeItem","defaultCurrency","fractionSize","symbol","grapheme","template","rtl","uniqSymbol","defaultLocale","getFormattedCurrency","locale","parsedAmount","parseFloat","isNaN","formattedCurrency","dir","currencyOptions","currencyFormat","toUpperCase","getCurrencyOptions","languageOptions","currencyNumberFormat","substr","toLowerCase","formatLocale","getLanguageOptions","signAmount","thousandSeparator","thousands","decimalSeparator","decimal","splittedAmount","abs","toFixed","formattedAmount","progress","margin","CssPreloader","CircularProgress","Preloader_templateObject","CssCartList","Cart_templateObject","Cart0","Cart_templateObject2","CartB","Cart_templateObject3","CartZ","Cart_templateObject4","CssCartH","Cart_templateObject5","CssCartB","Cart_templateObject6","CssSubtotal","Cart_templateObject7","withRouter","buyButtonDisabled","setBuyButtonDisabled","buyButtonAction","getPsTokenBuyCart","host","STATUS_DONE","buyByVirtualCurrencyButtonAction","quickPurchaseBuyVirtualCurrency","reason","borderBottom","Close_default","cursor","oneCartItem","borderTop","minWidth","textAlign","subtotal","forEach","element","calculateSubtotal","push","components_Preloader","ProductList","newActive","createRef","allData","CssStore00","CssProductList","CssMenu","СssTitle","СssGroup","ProductList_templateObject","ProductList_templateObject2","ProductList_templateObject3","ProductList_templateObject4","ProductList_templateObject5","VCPackagesList","VCPackagesList_CssStore00","VCPackagesList_CssProductList","VCPackagesList_ssGroup","VCPackagesList_templateObject","VCPackagesList_templateObject2","VCPackagesList_templateObject3","VCPackagesList_templateObject4","VCPackagesList_templateObject5","EntitlementItem","EntitlementList","code","hasRedeemError","handleChangeCode","handleChangeSku","handleSubmit","updateEntitlement","getEntitlement","redeemCode","digital_content_sku","language","redeem","k","preventDefault","onSubmit","size","placeholder","EntitlementItem_EntitlementItem","ServerPurchase","crypto","getRandomValues","Uint8Array","toString","platform","generateUUID","toISOString","cartItem","purchaseItems","operation","index","App","HashRouter","basename","Navbar_Navbar","CssStore0","CssCart","Route","path","render","components_ProductList","InventoryList_InventoryList","components_VCPackagesList","PhysicalList_PhysicalList","EntitlementList_EntitlementList","ManageInventory_ManageInventory","ServerPurchase_ServerPurchase","App_templateObject","Cart","App_templateObject2","Boolean","hostname","match","ReactDOM","context_ProductProvider","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1d2e5f03.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst CancelToken = axios.CancelToken;\nlet cancel;\n\nexport const getInventory = (projectId, loginToken) => {\n  cancel && cancel();\n  let opts = {\n    url:\n    `https://store.xsolla.com/api/v2/project/${projectId}/user/inventory/items`,\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(function executor(c) {\n      cancel = c;\n    })\n  };\n\n  return axios(opts)\n    .then(function(response) {\n      return response.data.items;\n    });\n}","import React, {Component} from \"react\";\n\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nimport './InventoryItem.css';\nimport Button from \"@material-ui/core/Button\";\n\nexport class InventoryItem extends Component {\n  constructor() {\n    super();\n    this.state = {\n      expanded: false,\n      cardShown: false\n    }\n  }\n  \n  componentDidMount() {\n    const {\n      order\n    } = this.props;\n    \n    if (!this.state.cardShown) {\n      setTimeout(() => {\n        this.setState({\n          cardShown: true\n        });\n      }, order * 100);\n    }\n  }\n  \n  render() {\n    const {\n      initClass,\n      imageUrl,\n      title,\n      description,\n      quantity,\n      handleConsumeItem,\n      remainingUses\n    } = this.props;\n    \n    return (\n      <div className={`inventory-item ${!this.state.cardShown ? initClass : \"\"}`}>\n        <div className=\"inventory-item-card\">\n          <div\n            className=\"inventory-item-card-media\"\n            style={{\n              backgroundImage: `url(${imageUrl})`\n            }}\n          />\n  \n          <div className=\"inventory-item-card-content\">\n            <div className=\"inventory-item-card-content-title\">{title}</div>\n            <div className=\"inventory-item-card-content-description\">{description}</div>\n          </div>\n          \n          <div className=\"inventory-item-card-actions\">\n            <div className=\"inventory-item-card-actions-quantity\">\n              {`Quantity: ${quantity}`}\n            </div>\n            {remainingUses ? (\n              <Button\n                  variant=\"contained\"\n                  onClick={handleConsumeItem}\n              >Consume</Button>\n            ) : ''}\n          </div>\n  \n          <Collapse in={this.state.expanded} timeout=\"auto\" unmountOnExit>\n            <CardContent>{description}</CardContent>\n          </Collapse>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from \"react\";\n\nimport {InventoryItem} from './InventoryItem';\nimport {getInventory} from './InventoryLoader';\nimport { init } from 'store-js-sdk/src/init';\n\nimport './InventoryList.css';\nimport {Inventory} from \"store-js-sdk/src/inventory/inventory\";\n\nexport class InventoryList extends PureComponent {\n  componentDidMount() {\n      if (this.props.logToken && null === this.props.inventoryItems) {\n        this.updateInventory();\n        this.props.updateVirtualCurrencyBalance();\n      }\n  }\n\n  componentWillUnmount() {\n    if (null !== this.props.inventoryItems) {\n      this.props.setInventoryItems(null);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (\n        (prevProps.cart.cartId !== this.props.cart.cartId\n        && prevProps.cart.items.length > 0)\n        || (\n            this.props.cartWithItemsBuyingByVC.items.length !== prevProps.cartWithItemsBuyingByVC.items.length\n        )\n    ) {\n      this.updateInventory();\n    }\n  }\n\n  updateInventory() {\n    this.props.setStateFrom(\"fetching\", true);\n\n    let token = this.props.logToken;\n    init({\n      projectId: window.xProjectId,\n      version: 'v2'\n    });\n\n    getInventory(window.xProjectId, this.props.logToken)\n        .then(inventoryItems => {\n          this.props.setInventoryItems(inventoryItems);\n        })\n        .catch(() => {\n          this.props.setInventoryItems([]);\n        });\n  }\n\n  consumeItem(item) {\n    let token = this.props.logToken;\n\n    init({\n      projectId: window.xProjectId,\n      version: 'v2'\n    });\n\n    const inventory = new Inventory(token);\n\n    inventory.consumeItem(item.sku, 1, item.instance_id)\n        .finally(() => {\n          this.props.setStateFrom(\"fetching\", true);\n        });\n  }\n\n  render() {\n    const {inventoryItems} = this.props;\n\n    return (\n      <div>\n        <div className=\"\">\n          <div className=\"inventory-list\">\n            {\n              inventoryItems && inventoryItems.length\n                ?\n                inventoryItems\n                    .filter(product => product.type === 'virtual_good')\n                    .map(\n                      (oneProduct, key) => {\n                        return (\n                          <InventoryItem\n                            key={oneProduct.sku}\n                            order={key}\n                            initClass=\"initialFlow1\"\n                            title={oneProduct.name}\n                            description={oneProduct.description}\n                            imageUrl={oneProduct.image_url}\n                            quantity={oneProduct.quantity}\n                            remainingUses={oneProduct.remaining_uses}\n                            handleConsumeItem={() => this.consumeItem(oneProduct)}\n                          />\n                        );\n                      }\n                    )\n                :\n                <div>\n                  Oops, you have nothing bought yet!\n                </div>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, {Component} from \"react\";\n\nimport Button from \"@material-ui/core/Button\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nimport './PhysicalItem.css';\n\nexport class PhysicalItem extends Component {\n  constructor() {\n    super();\n    this.state = {\n      expanded: false,\n      cardShown: false\n    }\n  }\n  \n  componentDidMount() {\n    const {\n      order\n    } = this.props;\n    \n    if (!this.state.cardShown) {\n      setTimeout(() => {\n        this.setState({\n          cardShown: true\n        });\n      }, order * 100);\n    }\n  }\n  \n  render() {\n    const {\n      initClass,\n      imageUrl,\n      title,\n      description,\n      price,\n      currency,\n      handleBuyByRealCurrency\n    } = this.props;\n    \n    return (\n      <div className={`physical-item ${!this.state.cardShown ? initClass : \"\"}`}>\n        <div className=\"physical-item-card\">\n          <div\n            className=\"physical-item-card-media\"\n            style={{\n              backgroundImage: `url(${imageUrl})`\n            }}\n          />\n          \n          <div className=\"physical-item-card-content\">\n            <div className=\"physical-item-card-content-title\">{title}</div>\n            <div className=\"physical-item-card-content-description\">{description}</div>\n          </div>\n  \n          <div className=\"physical-item-card-actions\">\n            <div className=\"physical-item-card-actions-price\">\n              {currency} {Math.round(price * 100) / 100}\n            </div>\n            <Button\n              variant=\"contained\"\n              onClick={handleBuyByRealCurrency}\n            >\n              Buy now\n            </Button>\n          </div>\n          \n          <Collapse in={this.state.expanded} timeout=\"auto\" unmountOnExit>\n            <CardContent>{description}</CardContent>\n          </Collapse>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nconst eatCookie = () => {\n  const getCookie = o => {\n    for (\n      var e = o + \"=\",\n        n = decodeURIComponent(document.cookie).split(\";\"),\n        t = 0;\n      t < n.length;\n      t++\n    ) {\n      for (var i = n[t]; \" \" === i.charAt(0); ) i = i.substring(1);\n      if (0 === i.indexOf(e)) return i.substring(e.length, i.length);\n    }\n    return \"\";\n  };\n  const setCookie = (o, e) => {\n    var n = new Date();\n    n.setTime(n.getTime() + 864e5);\n    var t = \"expires=\" + n.toUTCString();\n    document.cookie = o + \"=\" + e + \";\" + t + \";path=/\";\n  };\n\n  function getQueryParams(o) {\n    o = o.split(\"+\").join(\" \");\n    for (var e, n = {}, t = /[?&]?([^=]+)=([^&]*)/g; (e = t.exec(o)); )\n      n[decodeURIComponent(e[1])] = decodeURIComponent(e[2]);\n    return n;\n  }\n\n  let o;\n  //console.log(\"let = \");\n  if (window.location.search) {\n    o = getQueryParams(window.location.search).token;\n  }\n  if (o) {\n    setCookie(\"xsolla_login_token\", o);\n    window.history.pushState(\"\", \"\", document.location.pathname);\n  } else {\n    o = getCookie(\"xsolla_login_token\");\n  }\n  if (o && o !== \"undefined\") {\n    //console.log(\"o = \", o);\n    return o;\n  } else {\n    return null;\n  }\n};\n\nexport default function Cookie() {\n  return 44056 === window.xProjectId\n    ? 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE5NjIyMzQwNDgsImlzcyI6Imh0dHBzOi8vbG9naW4ueHNvbGxhLmNvbSIsI'\n    + 'mlhdCI6MTU2MjE0NzY0OCwidXNlcm5hbWUiOiJ4c29sbGEiLCJ4c29sbGFfbG9naW5fYWNjZXNzX2tleSI6IjA2SWF2ZHpDeEVHbm5aMTlp'\n    + 'LUc5TmMxVWFfTWFZOXhTR3ZEVEY4OFE3RnMiLCJzdWIiOiJkMzQyZGFkMi05ZDU5LTExZTktYTM4NC00MjAxMGFhODAwM2YiLCJlbWFpbCI'\n    + '6InN1cHBvcnRAeHNvbGxhLmNvbSIsInR5cGUiOiJ4c29sbGFfbG9naW4iLCJ4c29sbGFfbG9naW5fcHJvamVjdF9pZCI6ImU2ZGZhYWM2LTc'\n    + '4YTgtMTFlOS05MjQ0LTQyMDEwYWE4MDAwNCIsInB1Ymxpc2hlcl9pZCI6MTU5MjR9.GCrW42OguZbLZTaoixCZgAeNLGH2xCeJHxl8u8Xn2aI'\n    : eatCookie();\n}\n\nexport function eraseCookie(o) {\n  return (document.cookie =\n    o + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;\");\n}\n\nexport function parseJwt(o) {\n  let base64Url = o.split(\".\")[1];\n  let base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\n  return JSON.parse(window.atob(base64));\n}\n","import axios from \"axios\";\n\nconst CancelToken = axios.CancelToken;\nlet cancel;\n\nexport default async function StoreLoader(projectId, loginToken) {\n  let result;\n  let all = [];\n  let responseGroups = await fetch(\n    \"https://store.xsolla.com/api/v1/project/\" + projectId + \"/items/groups\",\n    {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + loginToken\n      }\n    }\n  );\n\n  const virtualCurrency = await fetch(\n      \"https://store.xsolla.com/api/v2/project/\" + projectId + \"/items/virtual_currency/package\", {\n        method: \"GET\"\n      }\n  );\n\n  const virtualCurrencyPackages = await virtualCurrency.json();\n\n  if (responseGroups) {\n    // only proceed once promise is resolved\n    let resolvedGroups = await responseGroups.json();\n    resolvedGroups = resolvedGroups[\"groups\"];\n    // only proceed once second promise is resolved\n\n    let fulfilledGroups = await Promise.all(\n      resolvedGroups.map((oneGroup, key) => {\n        //console.log(\"group\", oneGroup);\n        return loadByGroup(projectId, oneGroup);\n      })\n    ).then(fulfilledGroups => {\n      //console.log(\"fulfilledGroups = \", fulfilledGroups);\n      return fulfilledGroups;\n    });\n    all = all.concat(fulfilledGroups);\n  }\n\n  result = {\n    virtualItems: all,\n    virtualCurrencyPackages: virtualCurrencyPackages.items\n  };\n  return result;\n}\n\nfunction loadByGroup(projectId, group) {\n  return new Promise((resolve, reject) => {\n    fetch(\n      \"https://store.xsolla.com/api/v2/project/\" +\n        projectId +\n        \"/items/virtual_items/group/\" +\n        group[\"external_id\"]\n    )\n      .then(response => response.json())\n      .then(json => {\n        let products = json[\"items\"];\n        group[\"products\"] = products;\n        resolve(group);\n      })\n      .catch(function(error) {\n        //console.log(\"Products ERROR = \", error.message);\n        reject(error.message);\n      });\n  });\n}\n\nexport function changeItemQuantityCart(\n  { sku = \"sku\" },\n  quantity,\n  cartId,\n  loginToken\n) {\n  cancel && cancel();\n  //console.log(\"sku added = \", sku, \" to cartId = \", cartId);\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId +\n      \"/item/\" +\n      sku,\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: JSON.stringify({\n      quantity: quantity\n    })\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log(\"Item added = \", response.data);\n      let resp = response.data;\n    });\n}\n\nexport function createCart(loginToken) {\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v1/project/\" + window.xProjectId + \"/cart\",\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log('createCart ', response.data[\"id\"]);\n      return response;\n    })\n    .catch(function(error) {\n      //console.log(\"L2PS ERROR = \", error.response);\n    });\n}\n\nexport function removeItemFromCart({ sku = \"sku\" }, cartId, loginToken) {\n  cancel && cancel();\n  //console.log(\"sku removed = \", sku, \" from cartId = \", cartId);\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId +\n      \"/item/\" +\n      sku,\n    method: \"DELETE\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log(\"Item removed = \", response.data);\n      let resp = response.data;\n    })\n    .catch(function(error) {\n      //console.log(\"L2PS ERROR = \", error.response);\n    });\n}\n\nexport function getPsTokenBuyCart(cartId, loginToken) {\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/payment/cart/\" +\n      cartId,\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: {\n      sandbox: true\n    }\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log(\"PsToken generated = \", response.data);\n      return response;\n    })\n    .catch(function(error) {\n      //console.log(\"L2PS ERROR = \", error.response);\n    });\n}\n\nexport function getCart(cartId, loginToken) {\n  cancel && cancel();\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId,\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(function executor(c) {\n      cancel = c;\n    })\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log(\"PsToken generated = \", response.data);\n      return response;\n    })\n    .catch(function(error) {\n      //console.log(\"L2PS ERROR = \", error.response);\n    });\n}\n\nexport function quickPurchaseBuyVirtualCurrency(product, vcPriceSku, loginToken) {\n  let opts = {\n    url:\n        \"https://store.xsolla.com/api/v2/project/\" +\n        window.xProjectId +\n        \"/payment/item/\" +\n        product.sku +\n        \"/virtual/\" + vcPriceSku,\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n\nexport function getVirtualCurrencyBalance(loginToken) {\n  let opts = {\n    url:\n        \"https://store.xsolla.com/api/v2/project/\" + window.xProjectId + \"/user/virtual_currency_balance\",\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n","import React, { Component } from \"react\";\nimport Cookie from \"./components/Cookie\";\nimport {\n  changeItemQuantityCart,\n  createCart,\n  removeItemFromCart,\n  getCart, getVirtualCurrencyBalance\n} from \"./components/StoreLoader\";\n\nconst ProductContext = React.createContext();\n//Provider\n//Consumer\n\nconst theme = {\n  colorText: \"#D6E0E7\",\n  colorAccent: \"#FF005B\",\n  colorAccentText: \"#F6FAFF\",\n  colorBg: \"#011627\",\n  colorSecondary: \"#495C6B\", //TODO: delete\n\n  borderRadius: 8,\n  backgroundUrl:\n    \"https://res.cloudinary.com/maiik/image/upload/v1549624607/Xsolla/HomePage_Hero_Illustration_1440_oabqmk.jpg\",\n\n  cardWidth: \"300\",\n\n  boxShadow: \"0 5px 12px 0px rgba(0,0,0,0.2)\",\n  padding: \"8px\",\n  transitionTime: \"0.3s\",\n  transitionEasing: \"ease-in-out\",\n  transition: `all 0.3s ease-in-out`,\n  // transition: `all ${theme['transitionTime']} ${theme['transitionTime']}`,\n  transitionStyle: \"0.3s ease-in-out\",\n  fontFamily:\n    '\"Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\"'\n};\n\nclass ProductProvider extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      projectId: props.projectId,\n      logToken: Cookie(),\n      userBalanceVirtualCurrency: [],\n\n      activeGroup: \"first\",\n      loginShown: true,\n      activeModule: \"virtualItems\",\n      virtualItems: null,\n      virtualCurrencyPackages: null,\n      currency: null,\n      subscriptions: null,\n      inventoryItems: null,\n      entitlementItems: null,\n      physicalItems: null,\n\n      cartShown: false,\n      cart: {\n        cartId: null,\n        items: [],\n        price: {\n          amount: 0,\n          amount_without_discount: 0\n        }\n      },\n\n      cartWithItemsBuyingByVCShown: false,\n      cartWithItemsBuyingByVC: {\n        items: []\n      },\n\n      showCartError: false,\n      cartError: false,\n\n      isFetching: false,\n\n      psToken: \"\",\n\n      theme: theme\n    };\n  }\n\n  showCart = () => {\n    this.setState({\n      cartShown: !this.state.cartShown\n    });\n  };\n\n  showCartError = (title, message) => {\n    this.setState({\n      showCartError: true,\n      cartError: {\n        title,\n        message\n      }\n    });\n    this.getCart();\n  };\n\n  hideCartError = () => {\n    this.setState({\n      showCartError: false,\n      cartError: null\n    });\n  };\n\n  setInventoryItems = (inventoryItems) => {\n    this.setState({\n      inventoryItems,\n      fetching: false\n    })\n  };\n\n  setEntitlementItems = (entitlementItems) => {\n    this.setState({\n      entitlementItems,\n      fetching: false\n    })\n  };\n\n  setPhysicalItems = (physicalItems) => {\n    this.setState({\n      physicalItems,\n      fetching: false\n    })\n  };\n\n  getCart = () => {\n    let cartPromise = getCart(this.state.cart.cartId, this.state.logToken);\n    cartPromise.then(response => {\n      if (!cartPromise.isCancel && response) {\n        this.setState(prevState => ({\n          cart: {\n            cartId: response.data[\"cart_id\"],\n            items: response.data[\"items\"].sort(this.compareItems),\n            price: response.data[\"price\"]\n          },\n          isFetching: false\n        }));\n      }\n    });\n  };\n\n  createCart = function() {\n    let cartIdPromise = createCart(this.state.logToken);\n    cartIdPromise.then(response => {\n      this.setState(prevState => ({\n        cart: {\n          cartId: response.data[\"id\"],\n          items: [],\n          price: {\n            amount: 0,\n            amount_without_discount: 0\n          }\n        }\n      }));\n    });\n  }.bind(this);\n\n  changeTheme = newTheme => {\n    let newColor = null;\n    if (typeof newTheme === \"string\") {\n      newColor = newTheme;\n      this.setState({\n        ...this.state,\n        theme: {\n          ...this.state.theme,\n          colorBg: newColor\n        }\n      });\n    } else {\n      this.setState(\n        {\n          ...this.state,\n          theme: {\n            ...this.state.theme,\n            ...newTheme\n          }\n        },\n        () => {}\n      );\n    }\n  };\n\n  changeCardSize = newSize => {\n    let newTheme = this.state.theme;\n    newTheme[\"cardWidth\"] = newSize;\n    this.changeTheme(newTheme);\n  };\n\n  clearCart = () => {\n    this.showCart();\n    this.createCart();\n    this.updateVirtualCurrencyBalance();\n  };\n\n  payStationHandler = (event, data) => {\n    this.clearCart();\n  };\n\n  setPsToken = function(psToken) {\n    this.setState({ psToken: psToken });\n  }.bind(this);\n\n  handleDetail = () => {\n    console.log(\"hello from handleDetail\");\n  };\n\n  setStateFrom = function(stateName, stateValue) {\n    this.setState({\n      ...this.state,\n      [stateName]: stateValue\n    });\n  }.bind(this);\n\n  compareItems = (a, b) => {\n    if (a.sku > b.sku) {\n      return 1;\n    }\n    if (a.sku < b.sku) {\n      return -1;\n    }\n    return 0;\n  };\n\n  buyByVC = (product, vcSku) => {\n    this.setState({\n      cartWithItemsBuyingByVCShown: true,\n      cartWithItemsBuyingByVC: {\n        items: [product],\n        vcPriceSku: vcSku\n      }\n    });\n  };\n\n  clearVCCart = () => {\n    this.setState({\n      cartWithItemsBuyingByVCShown: false,\n      cartWithItemsBuyingByVC: {\n        items: [],\n        vcPriceSku: null\n      }\n    });\n\n    this.updateVirtualCurrencyBalance();\n  };\n\n  addToCart = product => {\n    if (this.state.cart) {\n      let indexFind = this.state.cart.items.findIndex(elem => {\n        return elem.sku === product.sku;\n      });\n      if (indexFind !== -1) {\n        this.getCart();\n        this.setState({\n          cartShown: true\n        });\n      } else {\n        this.setState({\n          isFetching: true,\n          cart: {\n            ...this.state.cart,\n            items: [{ ...product, quantity: 1 }, ...this.state.cart.items].sort(\n              this.compareItems\n            ),\n            price: {\n              ...this.state.cart.price,\n              amount:\n                this.state.cart.price &&\n                this.state.cart.price.amount + product.price.amount,\n              amount_without_discount:\n                this.state.cart.price &&\n                this.state.cart.price.amount_without_discount +\n                  product.price.amount_without_discount\n            }\n          }\n        });\n        changeItemQuantityCart(\n          product,\n          1,\n          this.state.cart.cartId,\n          this.state.logToken\n        ).then(response => {\n          this.getCart();\n        }).catch(error => {\n          this.showCartError('Change Item Quantity Error',error.response.data.errorMessage);\n        });\n        this.showCart();\n      }\n    } else {\n      this.setState({ isFetching: true });\n      changeItemQuantityCart(\n        product,\n        1,\n        this.state.cart.cartId,\n        this.state.logToken\n      ).then(response => {\n        this.getCart();\n      }).catch(error => {\n        this.showCartError('Change Item Quantity Error',error.response.data.errorMessage);\n      });\n      this.showCart();\n    }\n  };\n\n  removeFromCart = product => {\n    if (this.state.cart) {\n      this.setState({\n        isFetching: true,\n        cart: {\n          ...this.state.cart,\n          items: this.state.cart.items\n            .filter(function(prod) {\n              return prod.sku !== product.sku;\n            })\n            .sort(this.compareItems),\n          price: {\n            ...this.state.cart.price,\n            amount:\n              this.state.cart.price.amount -\n              product.price.amount * product.quantity,\n            amount_without_discount:\n              this.state.cart.price.amount_without_discount -\n              product.price.amount_without_discount * product.quantity\n          }\n        }\n      });\n    }\n  };\n\n  changeItemQuantityInCart = (product, quantity) => {\n    if (quantity <= 0) {\n      this.removeFromCart(product);\n      removeItemFromCart(\n        product,\n        this.state.cart.cartId,\n        this.state.logToken\n      ).then(() => {\n        this.getCart();\n      });\n    } else {\n      let indexFind = this.state.cart.items.findIndex(elem => {\n        return elem.sku === product.sku;\n      });\n      let cartItems = this.state.cart.items;\n      cartItems.splice(indexFind, 1, {\n        ...product,\n        quantity: quantity\n      });\n      this.setState({\n        isFetching: true,\n        cart: {\n          ...this.state.cart,\n          items: cartItems.sort(this.compareItems)\n        }\n      });\n      changeItemQuantityCart(\n        product,\n        quantity,\n        this.state.cart.cartId,\n        this.state.logToken\n      ).then(() => {\n        this.getCart();\n      }).catch(error => {\n        this.showCartError('Change Item Quantity Error',error.response.data.errorMessage);\n      });\n    }\n  };\n\n  hideCart = function () {\n    this.setState({\n      cartShown: false,\n      cartWithItemsBuyingByVCShown: false\n    })\n  }.bind(this);\n\n  setGroups = function(virtualItems) {\n    this.setState({\n      virtualItems: virtualItems,\n      fetching: false\n    });\n  }.bind(this);\n\n  setCurrs = function(resolvedData) {\n    this.setState({\n      fetching: false,\n      virtualItems: resolvedData[\"virtualItems\"],\n      currency: resolvedData[\"currency\"],\n      subscriptions: resolvedData[\"subscriptions\"],\n      virtualCurrencyPackages: resolvedData[\"virtualCurrencyPackages\"],\n    });\n  }.bind(this);\n\n  getTheme = (what = \"all\") => {\n    if (what === \"all\") {\n      return this.state.theme;\n    }\n    return `${this.state.theme[what]}${what === \"borderRadius\" ? \"px\" : \"\"}`;\n  };\n\n  setProducts = function(storeProducts) {\n    this.setState({\n      storeProducts: storeProducts\n    });\n  }.bind(this);\n\n  componentWillUpdate(nextProps, nextState) {}\n\n  updateVirtualCurrencyBalance = () => {\n    getVirtualCurrencyBalance(this.state.logToken).then((reps) => {\n      this.setState({\n        userBalanceVirtualCurrency: reps.data.items\n      });\n    });\n  };\n\n  componentDidMount() {}\n\n  render() {\n    // (this.state.storeProducts) && this.loadFromPS()\n\n    return (\n      <ProductContext.Provider\n        value={{\n          // products: this.state.products, //full\n          ...this.state, //all props and vals\n          handleDetail: this.handleDetail,\n          setPsToken: this.setPsToken,\n          setGroups: this.setGroups,\n          setProducts: this.setProducts,\n          setStateFrom: this.setStateFrom,\n          setCurrs: this.setCurrs,\n          setInventoryItems: this.setInventoryItems,\n          setEntitlementItems: this.setEntitlementItems,\n          setPhysicalItems: this.setPhysicalItems,\n          addToCart: this.addToCart,\n          buyByVC: this.buyByVC,\n          clearVCCart: this.clearVCCart,\n          getTheme: this.getTheme.bind(this),\n          changeTheme: this.changeTheme,\n          changeCardSize: this.changeCardSize,\n          createCart: this.createCart,\n          showCart: this.showCart,\n          changeItemQuantityInCart: this.changeItemQuantityInCart,\n          buyCart: this.buyCart,\n          payStationHandler: this.payStationHandler,\n          updateVirtualCurrencyBalance: this.updateVirtualCurrencyBalance,\n          hideCart: this.hideCart,\n          hideCartError: this.hideCartError\n        }}\n      >\n        {this.props.children}\n      </ProductContext.Provider>\n    );\n  }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductContext, ProductProvider, ProductConsumer };\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { ProductConsumer } from \"../context\";\nimport Cookie, { parseJwt } from \"./Cookie\";\n\nexport default class XLogin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shown: true,\n      logToken: null,\n      psToken: null\n    };\n  }\n\n  unauthorizedFlow = () => {\n    this.setState({ logToken: null });\n    this.setState({ shown: true });\n  };\n\n  authorizedFlow = tkn => {\n    this.setState({ logToken: tkn, shown: false });\n    this.user = parseJwt(tkn);\n    this.setStateFrom(\"user\", this.user);\n    this.createCart();\n  };\n\n  render() {\n    return (\n      <div style={{ flexGrow: 1 }}>\n        <ProductConsumer>\n          {valueFromContext => {\n            this.setStateFrom = valueFromContext.setStateFrom;\n            this.createCart = valueFromContext.createCart;\n\n            return (\n              <div>\n                <CssXpop\n                  style={{ display: this.state.shown ? \"flex\" : \"none\" }}\n                >\n                  <CssXpopB>\n                    <CssLoginInfo>\n                      Current project: <b>{window.xProjectId}</b>\n                    </CssLoginInfo>\n\n                    <CssLoginPop>\n                      <div id=\"xl_auth\"></div>\n                    </CssLoginPop>\n\n                    <CssLoginInfo>\n                      {myProjects.map((onePr, i) => {\n                        let pr = onePr[\"project_id\"];\n                        let login = onePr[\"login_id\"];\n                        let url = `https://xsolla.github.io/store-demo/#/`;\n                        let urlFull = `${url}?project_id=${pr}&login_id=${login}`;\n                        return (\n                          <div key={pr + i} style={{ marginBottom: \"1em\" }}>\n                            <div style={{ fontSize: \"0.4em\" }}>\n                              <a href={urlFull}>\n                                {pr}: {onePr.projectName}\n                              </a>\n                            </div>\n                          </div>\n                        );\n                      })}\n                      <p>\n                        Open any Xsolla Store using GET parameters <br />\n                        <b>project_id</b> and <b>login_id</b> (login must point\n                        back to https://xsolla.github.io/store-demo/#/)\n                      </p>\n                    </CssLoginInfo>\n                  </CssXpopB>\n                  <CssXpopZ />\n                </CssXpop>\n              </div>\n            );\n          }}\n        </ProductConsumer>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    window.XloginInit();\n    let cke = Cookie();\n    cke ? this.authorizedFlow(cke) : this.unauthorizedFlow();\n  }\n}\n\nconst CssXpop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  min-height: 100%;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  overflow-y: scroll;\n  padding: 40px 0;\n`;\nconst CssXpopB = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  min-height: 100%;\n  z-index: 100;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n`;\nconst CssXpopZ = styled.div`\n  position: fixed;\n  z-index: 99;\n  background: rgba(0, 0, 0, 0.8);\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n`;\n\nconst CssLoginInfo = styled.div`\n  padding: 20px 70px;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n  flex-grow: 1;\n  font-size: 22px;\n  width: 600px;\n  & a {\n    /* font-family: 'PS Mono', Courier, monospace; */\n    text-decoration: underline;\n    font-size: 28px;\n    line-height: 0px;\n  }\n`;\nconst CssLoginPop = styled.div`\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  text-align: center;\n  padding: 36px;\n  overflow: hidden;\n  margin: 0 70px;\n  border-radius: 8px;\n`;\n\nconst myProjects = [\n  {\n    projectName: \"Xsolla Store Demo\",\n    project_id: 47278,\n    login_id: \"fb2d7c69-bf25-11e9-9244-42010aa80004\"\n  }\n];\n","import React from \"react\";\nimport { NavLink } from 'react-router-dom';\n\nimport \"react-interactions/dist/main.css\";\nimport styled from \"styled-components\";\nimport { eraseCookie } from \"./Cookie\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport XLogin from \"./XLogin.js\";\nimport { ProductContext } from \"../context\";\n\nimport '../styles/Navbar.css';\nimport Avatar from \"@material-ui/core/Avatar\";\n\n\nconst useStyles = makeStyles({\n  currencies: {\n    marginLeft: 10,\n    marginRight: 4,\n    height: 18,\n    width: 18,\n  }\n});\n\nexport default function Navbar({\n  showCart = () => {\n    void 0;\n  }\n}) {\n  const valueFromContext = React.useContext(ProductContext);\n  const classes = useStyles();\n\n  const [state, setState] = React.useState({\n    shown: false\n  });\n\n  const logOutHandler = () => {\n    eraseCookie(\"xsolla_login_token\", null);\n    eraseCookie(\"xsolla_last_click_id\", null);\n    window.location.reload();\n  };\n\n  const logInButtonHandler = () => {\n    setState({ shown: true });\n  };\n\n  return (\n    <NavWrapper\n      style={{\n        zIndex: 100,\n        color: valueFromContext.getTheme(\"colorAccentText\"),\n        backgroundColor: '#011627'\n      }}\n    >\n      <div className=\"navbar-links\">\n        <NavLink activeClassName=\"navbar-link_active\" exact to=\"/\">\n          <span className=\"navbar-link\">Items</span>\n        </NavLink>\n        <NavLink activeClassName=\"navbar-link_active\" to=\"/crystals\">\n          <span className=\"navbar-link\">Currencies</span>\n        </NavLink>\n        {\n          valueFromContext.projectId === 44056 &&\n          <NavLink activeClassName=\"navbar-link_active\" to=\"/physical\">\n            <span className=\"navbar-link\">Merchandise</span>\n          </NavLink>\n        }\n        <NavLink activeClassName=\"navbar-link_active\" to=\"/inventory\">\n          <span className=\"navbar-link\">Inventory</span>\n        </NavLink>\n        <NavLink activeClassName=\"navbar-link_active\" to=\"/entitlement\">\n          <span className=\"navbar-link\">Entitlement</span>\n        </NavLink>\n        <NavLink activeClassName=\"navbar-link_active\" to=\"/manage\">\n          <span className=\"navbar-link\">Manage</span>\n        </NavLink>\n        <NavLink activeClassName=\"navbar-link_active\" to=\"/purchase\">\n          <span className=\"navbar-link\">Server purchase</span>\n        </NavLink>\n      </div>\n\n      <NavUl>\n        <li style={{ display: \"flex\", justifyContent: \"center\" }}>\n          <CssLoginPanel>\n            {!valueFromContext.logToken && (\n              <CssLoginButton onClick={logInButtonHandler}>\n                Log In\n              </CssLoginButton>\n            )}\n            {valueFromContext.logToken && valueFromContext.user && (\n              <CssLogin>\n                {\n                  valueFromContext.userBalanceVirtualCurrency && valueFromContext.userBalanceVirtualCurrency.map((vc) => {\n                    return (\n                          <>\n                            <Avatar src={vc.image_url} className={classes.currencies}/>\n                            {\n                              vc.amount\n                            }\n                          </>\n                    );\n                  })\n                }\n                <CssLoginEmail>{valueFromContext.user.email}</CssLoginEmail>\n              </CssLogin>\n            )}\n          </CssLoginPanel>\n\n          <XLogin />\n        </li>\n      </NavUl>\n\n      {\n        valueFromContext.logToken && valueFromContext.user && 44056 !== valueFromContext.projectId &&\n        <div className=\"navbar-logout\" onClick={logOutHandler}>\n          <span className=\"mr-10\">\n            <i className=\"fas fa-sign-out-alt\"></i>\n          </span>\n        </div>\n      }\n      <div className=\"navbar-cart\" onClick={e => showCart(e)}>\n        <span className=\"mr-10\">\n          <i className=\"fas fa-cart-plus\"></i> cart\n        </span>\n      </div>\n    </NavWrapper>\n  );\n}\n\nconst CssLoginPanel = styled.div`\n  flex-grow: 1;\n  text-transform: uppercase;\n  font-family: \"Roboto\";\n  color: \"var(--mainWhite)\";\n`;\n\nconst CssLoginButton = styled.div`\n  display: flex;\n  flex-direction: row;\n  font-size: 0.8rem;\n  line-height: 2em;\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  font-family: \"Roboto\";\n  color: black;\n  background: var(--mainWhite);\n  border-radius: 4px;\n  padding: 0 0.6rem;\n  cursor: pointer;\n`;\n\nconst CssLoginEmail = styled.div`\n  font-family: \"Roboto\";\n  color: #ff005b;\n  margin: 0 1rem;\n`;\n\nconst NavWrapper = styled.div`\n  font-family: \"Helvetica Neue\", \"Roboto\", Arial, Helvetica, sans-serif;\n  color: var(--mainWhite);\n  position: relative;\n  display: flex;\n  align-items: center;\n  z-index: 10;\n`;\n\nconst CssLogin = styled.div`\n  display: flex;\n  flex-direction: row;\n  font-family: \"Helvetica Neue\", \"Roboto\", Arial, Helvetica, sans-serif;\n`;\n\nconst NavUl = styled.ul`\n  display: flex;\n  flex-grow: 1;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: flex-end;\n  color: var(--mainWhite);\n  list-style-type: none;\n  position: relative;\n  z-index: 10;\n  margin-bottom: 0;\n`;\n","import React from \"react\";\n\nimport styled, { css } from \"styled-components\";\n\nimport {makeStyles, withStyles} from \"@material-ui/core/styles\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport IconAdd from \"@material-ui/icons/AddBox\";\nimport IconRem from \"@material-ui/icons/IndeterminateCheckBox\";\nimport red from \"@material-ui/core/colors/red\";\nimport ShoppingCart from \"@material-ui/icons/ShoppingCart\";\nimport IconDelete from \"@material-ui/icons/Delete\";\nimport AvatarVC from \"@material-ui/core/Avatar\";\nimport { ProductContext } from \"../context\";\nimport Colorer from \"color\";\nimport Button from \"@material-ui/core/Button\";\nimport Avatar from \"./Navbar\";\n\nconst styles = theme => ({\n  paper: {\n    ...theme.mixins.gutters(),\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2)\n  },\n  cardTitle: {},\n  card: {\n    // minWidth: '300px',\n    // height: 300,\n    // marginBottom: 4 * 8,\n  },\n  h1: {\n    fontWeight: \"bold\",\n    fontSize: \"1.2em\",\n    marginBottom: 1 * 8,\n    color: \"var(--mainDark)\"\n  },\n  p: {\n    flexGrow: 1,\n    color: \"var(--mainDark)\"\n  },\n  price: {\n    flexGrow: 1,\n    // paddingLeft: 1 * 8,\n    fontWeight: \"600\",\n    color: \"var(--mainBlue)\"\n  },\n  media: {\n    marginTop: 1 * 8,\n    height: 0,\n    paddingTop: \"56.25%\", // 16:9\n    backgroundSize: \"contain\"\n    // backgroundSize: 'cover',\n    // backgroundColor: 'var(--lightBlue)',\n  },\n  actions: {\n    display: \"flex\"\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\"\n  },\n  avatar: {\n    backgroundColor: red[500]\n  }\n});\n\nconst useStyles = makeStyles({\n  currencies: {\n    height: 24,\n    width: 24,\n    marginRight: 4\n  }\n});\n\nconst RecipeReviewCard = ({\n  addToCart = () => {\n    void 0;\n  },\n  removeFromCart = () => {\n    void 0;\n  },\n  changeItemQuantityInCart = () => {\n    void 0;\n  },\n  buyByVC = () => {\n    void 0;\n  },\n  activeGroup,\n  product,\n  order,\n  cardType = null,\n  initClass,\n  image_url,\n  title,\n  currency,\n  price,\n  description,\n  getTheme = () => {\n    void 0;\n  },\n  quantity\n}) => {\n  const [state, setState] = React.useState({\n    expanded: false,\n    favorited: false,\n    cardShown: false\n  });\n\n  const classes = useStyles();\n\n  let [cartState, setCartState] = React.useState(\n    cardType === \"cart\" ? quantity : 0\n  );\n\n  const handleCartClick = () => {\n    addToCart(product);\n  };\n\n  const handleBuyByVirtualCurrency = (vcSku) => {\n    buyByVC(product, vcSku);\n  };\n\n  const calcPrice = (price, q) => {\n    return Math.round(price * q * 100) / 100;\n  };\n\n  React.useEffect(() => {\n    // debugger;\n    if (!state.cardShown) {\n      setTimeout(() => {\n        setState({\n          cardShown: true //TODO: зачем это\n        });\n      }, order * 100);\n    }\n  });\n\n  const hasVirtualCurrencyPrice = product.virtual_prices && product.virtual_prices.length > 0;\n\n  return (\n    <CssCardAppear className={!state.cardShown ? initClass : \"\"}>\n      <CssCard cardType={cardType} getTheme={getTheme}>\n        <CssCardMedia\n          style={{}}\n          image={image_url}\n          theme={\n            cardType === \"cart\" || cardType === \"buy_by_vc\"\n              ? {\n                  width: 140,\n                  height: 140\n                }\n              : {}\n          }\n        />\n        <CssCardContent>\n          <CssCardH1>{title}</CssCardH1>\n          <CssDescEllipsis>{description}</CssDescEllipsis>\n        </CssCardContent>\n\n        {cardType !== \"cart\" && cardType !== \"buy_by_vc\" && (\n          <CssCardVCActions cardType={cardType} getTheme={getTheme}>\n            {\n              hasVirtualCurrencyPrice &&\n              <AvatarVC src={product.virtual_prices[0].image_url} className={classes.currencies}/>\n            }\n            <CssTypographyPrice getTheme={getTheme}>\n              {\n                hasVirtualCurrencyPrice ?\n                    product.virtual_prices[0].amount : `${currency} ${Math.round(price * 100) / 100}`\n              }\n            </CssTypographyPrice>\n            <Button\n                getTheme={getTheme}\n                variant=\"contained\"\n                onClick={\n                  hasVirtualCurrencyPrice ? handleBuyByVirtualCurrency.bind(this, product.virtual_prices[0].sku) : handleCartClick\n                }\n            >\n              {\n                hasVirtualCurrencyPrice ?\n                    `Buy now` : <ShoppingCart />\n              }\n            </Button>\n          </CssCardVCActions>\n        )}\n\n        {cardType === \"cart\" && (\n          <CssCardActions cardType={cardType} getTheme={getTheme}>\n            <CssCartQs>\n              {quantity <= 1 && (\n                <IconDelete\n                  style={{\n                    opacity: 0.4\n                  }}\n                  onClick={() => {\n                    changeItemQuantityInCart(product, quantity - 1);\n                  }}\n                />\n              )}\n\n              {quantity > 1 && (\n                <IconRem\n                  style={{\n                    opacity: 0.4\n                  }}\n                  onClick={() => {\n                    changeItemQuantityInCart(product, quantity - 1);\n                  }}\n                />\n              )}\n              <CssCartQ>{quantity}</CssCartQ>\n              <IconAdd\n                onClick={() => {\n                  changeItemQuantityInCart(product, quantity + 1);\n                }}\n              />\n            </CssCartQs>\n            <div>\n              <CssTypographyPrice getTheme={getTheme}>\n                {currency} {calcPrice(price, quantity)}\n              </CssTypographyPrice>\n            </div>\n\n            {quantity > 1 && (\n              <CssTypographyPriceSm getTheme={getTheme}>\n                {currency} {Math.round(price * 100) / 100} for one item\n              </CssTypographyPriceSm>\n            )}\n          </CssCardActions>\n        )}\n\n        <Collapse in={state.expanded} timeout=\"auto\" unmountOnExit>\n          <CardContent>{description}</CardContent>\n        </Collapse>\n      </CssCard>\n    </CssCardAppear>\n  );\n};\n\nconst CssCartQs = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n`;\nconst CssCartQ = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n`;\n\nconst CssCardAppear = styled.div`\n  position: relative;\n\n  /* transition: all ${props => props.order + \"s\"} ease-in-out; */\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  &.initialFlow1 {\n    opacity: 0;\n    transform: translateY(20px) scale(1);\n  }\n`;\n\n// const CssCard = styled(Card)`\n// Карточка не корзина\n// Карточка корзина\nconst CssCard = styled.div`\n  color: ${props => props.getTheme(\"colorText\")};\n  ${props =>\n    !props.cardType &&\n    css`\n    display: flex;\n    flex-direction: column;\n    max-width: ${props => `${props.getTheme(\"cardWidth\")}px`};\n    min-width: ${props => `${props.getTheme(\"cardWidth\")}px`};\n    height: ${props => `${props.getTheme(\"cardWidth\")}px`};\n    /* height: 360px; */\n    margin: ${2 * 8}px;\n    flex-shrink: 0;\n    flex-grow: 1;\n    flex-base: 50%;\n    background: transparent;\n    /* boxShadow: none; */\n    /* color: var(--mainWhite); */\n    transition: box-shadow ${props => props.getTheme(\"transitionStyle\")};\n    border-radius: ${props => props.getTheme(\"borderRadius\")}\n    padding: ${props => props.getTheme(\"padding\")};\n  `}\n\n  ${props =>\n    props.cardType &&\n    css`\n      display: grid;\n      grid-template-columns: 20% 50% 30%;\n      grid-template-rows: 160px;\n      place-content: center;\n    `}\n  &:hover {\n    ${props => {\n      return (\n        !props.cardType &&\n        css`\n          box-shadow: ${props => props.getTheme(\"boxShadow\")};\n        `\n      );\n    }}\n  }\n`;\n\nconst CssDescEllipsis = styled.div`\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  /* max-height: 120px; */\n  width: 100%;\n  display: block; /* Fallback for non-webkit */\n  display: -webkit-box;\n  max-width: 400px;\n  margin: 0 auto;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst CssCardContent = styled(CardContent)`\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0 !important;\n  margin-bottom: 8px;\n`;\n\nconst CssCardH1 = styled.div`\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n`;\n\n// Кнопки не корзина\n// Кнопки корзина\n// const CssCardActions = styled(CardActions)`\nconst CssCardActions = styled.div`\n  ${props =>\n    !props.cardType &&\n    css`\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ${props =>\n          Colorer(props.getTheme(\"colorText\"))\n            .alpha(0.1)\n            .string()};\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    `}\n  ${props =>\n    props.cardType &&\n    css`\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    `}\n`;\n\nconst CssCardVCActions = styled.div`\n  ${props =>\n    !props.cardType &&\n    css`\n      display: flex;\n      align-items: center;\n      border-top: 1px solid\n        ${props =>\n        Colorer(props.getTheme(\"colorText\"))\n            .alpha(0.1)\n            .string()};\n      padding: 8px 0 0 0;\n      margin: 0px 16px 0 16px;\n    `}\n  ${props =>\n    props.cardType &&\n    css`\n      padding: 16px 0;\n      width: 160px;\n      display: grid;\n      grid-template-columns: auto;\n      grid-row-gap: 8px;\n      place-content: start start;\n    `}\n`;\n\nconst CssCardMedia = styled.div`\n  display: block;\n  /* height: 0; */\n  margin-top: 8px;\n  min-height: 120px;\n  flex-grow: 1;\n  /* padding-top: 56.25%; */\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CssTypographyPrice = styled.div`\n  flex-grow: 1;\n  color: ${props => props.getTheme(\"colorAccent\")};\n  font-weight: 600;\n`;\n\nconst CssTypographyPriceSm = styled.div`\n  flex-grow: 1;\n  font-size: 0.8em;\n  /* color: ${props => props.getTheme(\"colorAccent\")}; */\n  /* font-weight: 600; */\n  opacity: 0.3;\n`;\n\nexport default withStyles(styles)(RecipeReviewCard);\n","import React, {PureComponent} from \"react\";\n\nimport {PhysicalItem} from './PhysicalItem';\nimport {getPsTokenByItem} from '../StoreLoader';\nimport {getPhysicalGoods} from './PhysicalListLoader';\n\nimport './PhysicalList.css';\nimport Product from \"../../components/Product\";\nimport {ProductConsumer} from \"../../context\";\n\nexport class PhysicalList extends PureComponent {\n    constructor() {\n        super();\n\n        this.state = {\n            isPurchasing: false\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.logToken && null === this.props.physicalItems) {\n            this.updateCatalogue();\n            this.props.updateVirtualCurrencyBalance();\n        }\n    }\n\n    componentWillUnmount() {\n        if (null !== this.props.physicalItems) {\n            this.props.setPhysicalItems(null);\n        }\n    }\n\n    updateCatalogue() {\n        getPhysicalGoods(window.xProjectId, this.props.logToken)\n            .then(physicalItems => {\n                this.props.setPhysicalItems(physicalItems);\n            })\n            .catch(() => {\n                this.props.setPhysicalItems([]);\n            });\n    }\n\n    buyItem(item) {\n        if (this.state.isPurchasing) {\n            return;\n        }\n\n        const {logToken} = this.props;\n        this.setState({\n            isPurchasing: true\n        })\n        getPsTokenByItem(item, logToken)\n            .then(response => {\n                let options = {\n                    'height': 680\n                };\n                window.xPayStationInit(response.data[\"token\"], options);\n                window.XPayStationWidget.open();\n                window.XPayStationWidget.on(\n                    window.XPayStationWidget.eventTypes.CLOSE,\n                    () => {\n                        this.setState({\n                            isPurchasing: false\n                        });\n                    }\n                );\n            })\n            .catch(e => {\n                this.setState({\n                    isPurchasing: false\n                })\n            });\n    };\n\n    render() {\n        const {physicalItems} = this.props;\n\n        return (\n            <div>\n                <ProductConsumer>\n                    {\n                        valueFromContext =>\n                            <div className=\"\">\n                                <div className=\"physical-list\">\n                                    {\n                                        physicalItems && physicalItems.length &&\n                                        physicalItems\n                                            .map(\n                                                (oneProduct, key) => {\n                                                    return (\n                                                        <Product\n                                                            ref={this.ProductRef}\n                                                            key={oneProduct.sku}\n                                                            order={key}\n                                                            initClass=\"initialFlow1\"\n                                                            sku={oneProduct.sku}\n                                                            title={oneProduct.name}\n                                                            description={\n                                                                oneProduct.description\n                                                            }\n                                                            price={oneProduct.price.amount}\n                                                            image_url={oneProduct.image_url}\n                                                            currency={\n                                                                oneProduct.price.currency\n                                                            }\n                                                            product={oneProduct}\n                                                            addToCart={\n                                                                valueFromContext.addToCart\n                                                            }\n                                                            getTheme={valueFromContext.getTheme.bind(\n                                                                this\n                                                            )}\n                                                            cartId={valueFromContext.cartId}\n                                                            logToken={\n                                                                valueFromContext.logToken\n                                                            }\n                                                            changeItemQuantityInCart={\n                                                                valueFromContext.changeItemQuantityInCart\n                                                            }\n                                                            activeGroup={this.props.activeGroup}\n                                                            buyByVC={\n                                                                valueFromContext.buyByVC\n                                                            }\n                                                        />\n                                                    );\n                                                }\n                                            )\n                                    }\n                                </div>\n                            </div>\n                    }\n                </ProductConsumer>\n            </div>\n        );\n    }\n}\n","import { PhysicalGood } from 'store-js-sdk/src/physical-goods/physical-goods';\nimport { init } from 'store-js-sdk/src/init';\n\nexport const getPhysicalGoods = (projectId, loginToken) => {\n    //TODO добавить возможность использовать cancelToken в SDK\n    init({\n        projectId: projectId,\n        version: 'v2'\n    });\n\n    const physicalGood = new PhysicalGood(loginToken);\n    return physicalGood.getPhysicalGoodList().then(response => response.data.items);\n};","import axios from \"axios\";\n\nexport function getPsTokenByItem(item, loginToken) {\n  let opts = {\n    url:\n    \"https://store.xsolla.com/api/v2/project/\" +\n    window.xProjectId +\n    \"/payment/item/\" +\n    item.sku,\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: {\n      sandbox: true\n    }\n  };\n  return axios(opts);\n}\n","import React from \"react\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport {\n  MuiThemeProvider,\n  createMuiTheme,\n  makeStyles\n} from \"@material-ui/core/styles\";\n\nimport { ProductContext } from \"../context\";\n\nconst useTabStyles = makeStyles({\n  root: {\n    justifyContent: \"center\"\n  },\n  scroller: {\n    flexGrow: \"0\"\n  }\n});\n\nexport function MenuMaterial({\n  virtualItems = [],\n  activeGroup,\n  changeGroupHandler = () => {\n    void 0;\n  }\n}) {\n  activeGroup = 'first' === activeGroup ? virtualItems && virtualItems[0] && virtualItems[0].id : activeGroup;\n\n  const classes = useTabStyles();\n\n  const handleChange = (event, data) => {\n    changeGroupHandler(data[\"id\"]);\n  };\n\n  return (\n    <MuiThemeProvider\n      theme={createMuiTheme({\n        palette: {\n          primary: {\n            main: React.useContext(ProductContext).getTheme(\"colorAccent\")\n          }\n        }\n      })}\n    >\n      <Tabs\n        value={activeGroup}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n        style={{\n          color: React.useContext(ProductContext).getTheme(\"colorAccent\")\n        }}\n        classes={{ root: classes.root, scroller: classes.scroller }}\n        variant=\"scrollable\"\n        scrollButtons=\"on\"\n      >\n        {virtualItems &&\n          virtualItems.map((oneGroup) => {\n            return (\n              <Tab\n                value={oneGroup[\"id\"]}\n                key={oneGroup[\"id\"]}\n                color=\"secondary\"\n                textColor=\"secondary\"\n                label={oneGroup[\"name\"]}\n                onClick={e => handleChange(e, oneGroup)}\n                style={{\n                  color: React.useContext(ProductContext).getTheme(\"colorText\")\n                }}\n              />\n            );\n          })}\n      </Tabs>\n    </MuiThemeProvider>\n  );\n}\n\nexport default MenuMaterial;\n","import React, {PureComponent} from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Alert from 'react-bootstrap/Alert';\n\nimport {getVirtualCurrencyList, getVirtualItemList, rewardItems} from './ManageInventoryLoader'\n\nimport './ManageInventory.css';\nimport MenuMaterial from \"../../components/MenuMaterial\";\n\nexport class ManageInventory extends PureComponent {\n    constructor(props) {\n        super(props);\n\n        const users = [\n            {\n                'id': 'd342dad2-9d59-11e9-a384-42010aa8003f',\n                'name': 'support@xsolla.com'\n            },\n            {\n                'id': '7d8b1f52-7d3f-400b-acd8-46e3a4368596',\n                'name': 'v.legotkin@xsolla.com'\n            },\n            {\n                'id': '27bc1227-48a3-4da8-bb86-f8d093f68805',\n                'name': 'r.ushakov@xsolla.com'\n            },\n            {\n                'id': 'a7d10a4e-3f68-43cc-a6b2-893d2c68fd14',\n                'name': 'p.sanachev@xsolla.com'\n            },\n        ];\n        this.state = {\n            fetching: false,\n            isPurchasing: false,\n            inventoryItem: null,\n            quantity: 1,\n            users: users,\n            user: 'd342dad2-9d59-11e9-a384-42010aa8003f',\n            showToast: false,\n            statusToast: 'processing',\n            operationDetails: null,\n            manageInventoryGroups: [],\n            activeInventoryGroup: 'first',\n            manageInventoryItems: null,\n            manageInventoryCurrencies: null,\n            invoice: null,\n            date: null\n        }\n    }\n\n    componentDidMount() {\n        if (null === this.state.manageInventoryItems) {\n            this.getItems();\n            this.props.updateVirtualCurrencyBalance();\n        }\n        if (null === this.state.manageInventoryCurrencies) {\n            this.getCurrencies();\n        }\n    }\n\n    changeGroupHandler = group => {\n        const {manageInventoryGroups} = this.state;\n        this.setState({activeInventoryGroup: group});\n        const activeGroup = manageInventoryGroups.find(g => g['id'] === group);\n        const itemSku = activeGroup && activeGroup.items.length > 0 ? activeGroup.items[0].sku : 'helmet_1';\n        this.setState({inventoryItem: itemSku});\n        this.setItemQuantity(1);\n    };\n\n\n    getItems() {\n        this.setState({fetching: true});\n\n        getVirtualItemList(window.xProjectId)\n            .then(virtualItemsList => {\n                this.setManageInventoryItems(virtualItemsList);\n            })\n            .catch(() => {\n            });\n    }\n\n    getCurrencies() {\n        this.setState({fetching: true});\n\n        getVirtualCurrencyList(window.xProjectId)\n            .then(virtualCurrencyList => {\n                this.setManageInventoryCurrencies(virtualCurrencyList);\n            })\n            .catch(() => {\n            });\n    }\n\n    changeInventoryItem(event) {\n        this.setState({inventoryItem: event.target.value});\n    }\n\n    changeUser(event) {\n        this.setState({user: event.target.value});\n    }\n\n    setItemQuantity(quantity) {\n        if (parseInt(quantity) >= 1) {\n            this.setState({quantity: parseInt(quantity)});\n        }\n    }\n\n    setShowToast(isVisible) {\n        this.setState({showToast: isVisible});\n    }\n\n    setManageInventoryItems = (manageInventoryItems) => {\n        this.setState({\n            manageInventoryItems,\n            fetching: false,\n            manageInventoryGroups: [\n                ...this.state.manageInventoryGroups,\n                {\n                    id: 1,\n                    name: 'items',\n                    items: manageInventoryItems,\n                    singleItemName: 'Item'\n                }\n            ],\n        })\n    };\n\n    setManageInventoryCurrencies = (manageInventoryCurrencies) => {\n        this.setState({\n            manageInventoryCurrencies,\n            fetching: false,\n            manageInventoryGroups: [\n                ...this.state.manageInventoryGroups,\n                {\n                    id: 2,\n                    name: 'currencies',\n                    items: manageInventoryCurrencies,\n                    singleItemName: 'Currency'\n                }\n            ],\n        })\n    };\n\n    itemOperation(type) {\n        let {user, activeInventoryGroup, quantity, inventoryItem, manageInventoryGroups, invoice, date} = this.state;\n        if (inventoryItem === null && manageInventoryGroups && manageInventoryGroups.length) {\n            const group = activeInventoryGroup !== 'first'\n                ? manageInventoryGroups.find(group => group['id'] === activeInventoryGroup)\n                : manageInventoryGroups[0];\n            inventoryItem = group && group.items.length > 0 ? group.items[0].sku : 'helmet_1';\n        }\n\n        const body = {\n            type: type,\n            user: user,\n            item: inventoryItem,\n            count: quantity\n        };\n        if (invoice && date) {\n            body.purchase.external_purchase_id = invoice;\n            body.purchase.external_purchase_date = date;\n        }\n\n        this.setState({showToast: true, statusToast: 'processing', operationDetails: null});\n        rewardItems(body)\n            .then(response => {\n                this.setState({\n                    showToast: true,\n                    statusToast: 'complete',\n                    operationDetails: response.operations[0].items\n                });\n                this.props.updateVirtualCurrencyBalance();\n            })\n            .catch(() => {\n            });\n    }\n\n    rewardItem(e) {\n        this.itemOperation('reward');\n    }\n\n    revokeItem() {\n        this.itemOperation('revoke');\n    }\n\n    render() {\n        const {quantity, users, showToast, statusToast, operationDetails, manageInventoryGroups, activeInventoryGroup} = this.state;\n        const group = activeInventoryGroup !== 'first'\n            ? manageInventoryGroups.find(group => group['id'] === activeInventoryGroup)\n            : manageInventoryGroups[0];\n        return (\n            <div className=\"manage-inventory__row\">\n                <div className=\"manage-inventory__alert\">\n                    <Alert onClose={(e) => this.setShowToast(false)} show={showToast}\n                           variant={statusToast === 'processing' ? \"primary\" : \"success\"} dismissible>\n                        <Alert.Heading>{statusToast === 'processing' ? 'Operation is processing' : 'Operation complete!'}</Alert.Heading>\n                        <p>\n                            {\n                                group && group.items.length && operationDetails && operationDetails.length ?\n                                    operationDetails.map(\n                                        (item) => {\n                                            return (\n                                                <div>\n                                                    <div>Item: <b>{\n                                                        group.items.filter((inventoryItem) => {\n                                                            return inventoryItem.sku === item.sku\n                                                        }).map((inventoryItem) => {\n                                                            return inventoryItem.name;\n                                                        })\n                                                    }</b></div>\n                                                    <div>Quantity: <b>{item.quantity === null ? 0 : item.quantity}</b>\n                                                    </div>\n                                                </div>\n                                            )\n                                        })\n                                    :\n                                    ''\n                            }\n                        </p>\n                    </Alert>\n                </div>\n                <div className=\"\">\n                    <div className=\"manage-inventory\">\n                        <div className=\"manage-inventory__user-list\">\n                            <div className=\"manage-inventory__title\">User</div>\n                            <div>\n                                <select value={this.state.user} onChange={(e) => this.changeUser(e)}>\n                                    {\n                                        users.map(\n                                            (user) => {\n                                                return (\n                                                    <option key={user.id} value={user.id}>{user.name}</option>\n                                                )\n                                            })\n                                    }\n                                </select>\n                            </div>\n                        </div>\n                        <MenuMaterial\n                            virtualItems={manageInventoryGroups}\n                            activeGroup={activeInventoryGroup}\n                            changeGroupHandler={this.changeGroupHandler}\n                        />\n\n                        <div className=\"manage-inventory-item-container\">\n                            <div className=\"manage-inventory-list\">\n                                <div\n                                    className=\"manage-inventory__title\">{group ? group.singleItemName : 'Item'}</div>\n                                <div>\n                                    {group && group.items.length > 0\n                                        ? <select value={this.state.inventoryItem}\n                                                  onChange={(e) => this.changeInventoryItem(e)}>\n                                            {\n                                                group.items.map(\n                                                    (item) => {\n                                                        return (\n                                                            <option key={item.sku}\n                                                                    value={item.sku}>{item.name}</option>\n                                                        )\n                                                    })\n                                            }\n                                        </select>\n                                        : <div>\n                                            Nothing to show\n                                        </div>\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"manage-inventory__quantity\">\n                                <div className=\"manage-inventory__quantity-change\">\n                                    <TextField\n                                        label={\"Quantity\"}\n                                        type={\"number\"}\n                                        inputProps={{style: {color: 'white'}, min: \"0\", step: \"1\"}}\n                                        defaultValue={quantity}\n                                        InputLabelProps={{\n                                            className: \"manage-inventory__quantity-input-label\"\n                                        }}\n                                        onChange={(e) => this.setItemQuantity(e.target.value)}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"manage-inventory-actions\">\n                            <Button\n                                type=\"submit\"\n                                variant=\"contained\"\n                                onClick={(e) => this.rewardItem(e)}\n                            >Reward</Button>\n                            <Button\n                                variant=\"contained\"\n                                onClick={(e) => this.revokeItem(e)}\n                            >Revoke</Button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n","import axios from \"axios\";\n\nexport const getVirtualItemList = (projectId) => {\n    let opts = {\n        url:\n            `https://store.xsolla.com/api/v2/project/${projectId}/items/virtual_items`,\n        method: \"GET\",\n    };\n\n    return axios(opts)\n        .then(function(response) {\n            return response.data.items;\n        });\n}\n\nexport const getVirtualCurrencyList = (projectId) => {\n    let opts = {\n        url:\n            `https://store.xsolla.com/api/v2/project/${projectId}/items/virtual_currency`,\n        method: \"GET\",\n    };\n\n    return axios(opts)\n        .then(function(response) {\n            return response.data.items;\n        });\n}\n\nexport const rewardItems = (data) => {\n    let opts = {\n        url:\n            `https://livedemo.xsolla.com/store-demo/api/index.php`,\n        method: \"POST\",\n        data: data\n    }\n\n    return axios(opts)\n        .then(function(response) {\n            return response.data;\n        });\n}\n","import currencyFormat from \"currency-format\";\nimport currencyNumberFormat from \"currency-number-format\";\n\n// CURRENCY CODE\nfunction defaultCurrency(currency) {\n  return {\n    name: currency,\n    fractionSize: 2,\n    symbol: {\n      grapheme: currency,\n      template: null,\n      rtl: false\n    },\n    uniqSymbol: null\n  };\n}\nfunction getCurrencyOptions(currency) {\n  return currency\n    ? currencyFormat[currency.toUpperCase()] || defaultCurrency(currency)\n    : defaultCurrency(currency);\n}\n\n// LOCALE\nvar defaultLocale = \"en_US\";\nvar localesMap = {\n  ar: \"ar_AE\",\n  bg: \"bg_BG\",\n  cn: \"zh_CN\",\n  cs: \"cs_CZ\",\n  de: \"de_DE\",\n  en: \"en_US\",\n  es: \"es_ES\",\n  fr: \"fr_FR\",\n  he: \"he_IL\",\n  it: \"it_IT\",\n  ja: \"ja_JP\",\n  ko: \"ko_KR\",\n  pl: \"pl_PL\",\n  pt: \"pt_BR\",\n  ro: \"ro_RO\",\n  ru: \"ru_RU\",\n  th: \"th_TH\",\n  tr: \"tr_TR\",\n  tw: \"zh_TW\",\n  vi: \"vi_VN\"\n};\nfunction formatLocale(locale) {\n  return [\n    locale.substr(0, 2).toLowerCase(),\n    locale.substr(3, 2).toUpperCase()\n  ].join(\"_\");\n}\nfunction getLanguageOptions(locale) {\n  return locale\n    ? currencyNumberFormat[formatLocale(locale)] ||\n        currencyNumberFormat[defaultLocale]\n    : currencyNumberFormat[defaultLocale];\n}\nfunction map2to5Locale(locale) {\n  return locale && locale.length === 5\n    ? locale\n    : localesMap[locale] || defaultLocale;\n}\n\n// CURRENCY\nexport function getFormattedCurrency(amount, currency, locale) {\n  var parsedAmount = parseFloat(amount);\n  if (!currency || isNaN(parsedAmount)) {\n    return {\n      formattedCurrency: amount + \" \" + currency,\n      dir: \"ltr\"\n    };\n  }\n\n  var currencyOptions = getCurrencyOptions(currency);\n  var languageOptions = getLanguageOptions(locale);\n\n  var signAmount = parsedAmount < 0 ? \"-\" : \"\";\n  var fractionSize = currencyOptions.fractionSize;\n\n  var symbol = currencyOptions.symbol;\n  var thousandSeparator = languageOptions.thousands;\n  var decimalSeparator = languageOptions.decimal;\n  // Spike for escaping case when grapheme is arabic symbol, and russian style separators was chosen\n  if ((!symbol || symbol.rtl) && languageOptions.thousands === \" \") {\n    thousandSeparator = \",\";\n    decimalSeparator = \".\";\n  }\n\n  var splittedAmount = Math.abs(parsedAmount)\n    .toFixed(fractionSize)\n    .split(\".\");\n  splittedAmount[0] = splittedAmount[0].replace(\n    /(\\d)(?=(\\d{3})+(?!\\d))/g,\n    \"$1\" + thousandSeparator\n  );\n  var formattedAmount = splittedAmount.join(decimalSeparator);\n\n  var formattedCurrency = signAmount + formattedAmount + \" \" + currency;\n  var rtl = false;\n  if (symbol && symbol.template) {\n    formattedCurrency =\n      signAmount +\n      symbol.template\n        .replace(\"1\", formattedAmount)\n        .replace(\"$\", symbol.grapheme);\n    rtl = symbol.rtl;\n  }\n\n  return {\n    formattedCurrency: formattedCurrency,\n    dir: rtl ? \"rtl\" : \"ltr\"\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport styled from \"styled-components\";\n\nconst styles = theme => ({\n  progress: {\n    margin: theme.spacing(2)\n  }\n});\n\nfunction Preloader(props) {\n  const { classes } = props;\n  return (\n    <CssPreloader>\n      <CircularProgress className={classes.progress} />\n      {/* <CircularProgress className={classes.progress} color=\"secondary\" /> */}\n    </CssPreloader>\n  );\n}\n\nPreloader.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Preloader);\n\nconst CssPreloader = styled.div`\n  z-index: 9;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Product from \"./Product\";\nimport IconClose from \"@material-ui/icons/Close\";\nimport Button from \"@material-ui/core/Button\";\nimport Colorer from \"color\";\nimport {getFormattedCurrency} from \"./formatCurrency\";\nimport { withRouter } from 'react-router-dom';\n\nimport {ProductContext} from \"../context\";\nimport {getPsTokenBuyCart, quickPurchaseBuyVirtualCurrency} from \"./StoreLoader\";\nimport Preloader from \"./Preloader\";\n\nfunction Cart({ style = {} , history}) {\n  let [buyButtonDisabled, setBuyButtonDisabled] = React.useState(false);\n\n  const valueFromContext = React.useContext(ProductContext);\n\n  const hideCart = () => {\n    valueFromContext.hideCart();\n  };\n\n  const calculateSubtotal = cart => {\n    let subtotal = 0;\n    cart.forEach(function(element) {\n      subtotal += element.price.amount * element.quantity;\n    });\n    return Math.round(subtotal * 100) / 100;\n  };\n\n  const buyAnotherPlatform = function () {\n      if (buyButtonDisabled ||\n          valueFromContext.cart.items.length <= 0) {\n          return;\n      }\n      let path = \"/purchase\";\n      history.push(path);\n      hideCart();\n  };\n\n  const buyButtonAction = () => {\n    setBuyButtonDisabled(true);\n    let psTokenPromise = getPsTokenBuyCart(\n      valueFromContext.cart.cartId,\n      valueFromContext.logToken\n    );\n    psTokenPromise\n      .then(response => {\n        window.xPayStationInit(response.data[\"token\"], {sandbox: true, host: 'sandbox-secure.xsolla.com'});\n        window.XPayStationWidget.open();\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.CLOSE,\n          (event, data) => {\n            setBuyButtonDisabled(false);\n          }\n        );\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.STATUS_DONE,\n          (event, data) => valueFromContext.payStationHandler(event, data)\n        );\n      })\n      .catch(e => {});\n  };\n\n    const buyByVirtualCurrencyButtonAction = (product, vcPriceSku) => {\n        setBuyButtonDisabled(true);\n        quickPurchaseBuyVirtualCurrency(product, vcPriceSku, valueFromContext.logToken)\n            .then(response => {\n                valueFromContext.clearVCCart();\n                setBuyButtonDisabled(false);\n                this.props.updateVirtualCurrencyBalance();\n            })\n            .catch(reason => {\n                setBuyButtonDisabled(false);\n            })\n    };\n\n  return (\n    <div>\n      {valueFromContext.cartShown && (\n        <Cart0>\n          <CartB\n            style={{\n              padding: \"0 32px 0 32px\",\n              borderRadius: valueFromContext.getTheme(\"borderRadius\"),\n              backgroundColor: valueFromContext.getTheme(\"colorBg\"),\n              color: valueFromContext.getTheme(\"colorText\")\n            }}\n          >\n            <div\n              style={{\n                backgroundColor: valueFromContext.getTheme(\"colorBg\"),\n                color: valueFromContext.getTheme(\"colorText\")\n              }}\n            >\n              <CssCartH\n                style={{\n                  backgroundColor: `${valueFromContext.getTheme(\"colorBg\")}`,\n                  // borderBottom: `1px solid ${valueFromContext.getTheme(\"colorText\")}`\n                  borderBottom: `1px solid ${Colorer(\n                    valueFromContext.getTheme(\"colorText\")\n                  )\n                    .alpha(0.1)\n                    .string()}`\n                }}\n              >\n                <h4>Cart {}</h4>\n                <IconClose\n                  style={{\n                    cursor: \"pointer\"\n                  }}\n                  onClick={e => hideCart(e)}\n                />\n              </CssCartH>\n\n              <CssCartList>\n                {valueFromContext.cart &&\n                  valueFromContext.cart.items.map((oneCartItem, i) => {\n                    return (\n                      <div key={`cartitem${i}`}>\n                        <Product\n                          product={oneCartItem}\n                          key={oneCartItem.sku}\n                          order={i}\n                          initClass=\"initialFlow1\"\n                          sku={oneCartItem.sku}\n                          title={oneCartItem.name}\n                          description={oneCartItem.description}\n                          price={oneCartItem.price.amount}\n                          image_url={oneCartItem.image_url}\n                          currency={oneCartItem.price.currency}\n                          cardType=\"cart\"\n                          cartId={valueFromContext.cart.cartId}\n                          logToken={valueFromContext.logToken}\n                          removeFromCart={valueFromContext.removeFromCart}\n                          changeItemQuantityInCart={\n                            valueFromContext.changeItemQuantityInCart\n                          }\n                          quantity={oneCartItem.quantity}\n                        />\n                      </div>\n                    );\n                  })}\n                {valueFromContext.cart &&\n                  valueFromContext.cart.items.length <= 0 && <p>Empty cart</p>}\n              </CssCartList>\n\n              <CssCartB\n                style={{\n                  backgroundColor: `${valueFromContext.getTheme(\"colorBg\")}`,\n                  // borderTop: `1px solid ${valueFromContext.getTheme(\"colorText\")}`\n                  borderTop: `1px solid ${Colorer(\n                    valueFromContext.getTheme(\"colorText\")\n                  )\n                    .alpha(0.1)\n                    .string()}`\n                }}\n              >\n                <div className=\"\" />\n                {valueFromContext.cart &&\n                  valueFromContext.cart.items.length > 0 && (\n                    <CssSubtotal>\n                      Subtotal:\n                      <div\n                        style={{\n                          minWidth: 80,\n                          textAlign: \"right\"\n                        }}\n                      >\n                        {valueFromContext.isFetching &&\n                          getFormattedCurrency(\n                            calculateSubtotal(valueFromContext.cart.items),\n                            valueFromContext.cart.items[0].price.currency\n                          ).formattedCurrency}\n                        {!valueFromContext.isFetching &&\n                          getFormattedCurrency(\n                            valueFromContext.cart.price.amount,\n                            valueFromContext.cart.price.currency\n                          ).formattedCurrency}\n                      </div>\n                    </CssSubtotal>\n                  )}\n                  <Button\n                      variant=\"contained\"\n                      style={{marginRight: '5px'}}\n                      onClick={() => {\n                          !(\n                              buyButtonDisabled ||\n                              valueFromContext.cart.items.length <= 0\n                          ) && buyAnotherPlatform();\n                      }}\n                  >\n                      Buy on PS4\n                  </Button>\n                <Button\n                  variant=\"contained\"\n                  onClick={() => {\n                    !(\n                      buyButtonDisabled ||\n                      valueFromContext.cart.items.length <= 0\n                    ) && buyButtonAction();\n                  }}\n                >\n                  Buy on Xsolla\n                </Button>\n              </CssCartB>\n            </div>\n          </CartB>\n          {/* <Link to='/'> */}\n          <CartZ onClick={e => hideCart(e)} />\n          {/* </Link> */}\n        </Cart0>\n      )}\n        {valueFromContext.cartWithItemsBuyingByVCShown && (\n            <Cart0>\n                <CartB\n                    style={{\n                        padding: \"0 32px 0 32px\",\n                        borderRadius: valueFromContext.getTheme(\"borderRadius\"),\n                        backgroundColor: valueFromContext.getTheme(\"colorBg\"),\n                        color: valueFromContext.getTheme(\"colorText\")\n                    }}\n                >\n                    <div\n                        style={{\n                            backgroundColor: valueFromContext.getTheme(\"colorBg\"),\n                            color: valueFromContext.getTheme(\"colorText\")\n                        }}\n                    >\n                        <CssCartH\n                            style={{\n                                backgroundColor: `${valueFromContext.getTheme(\"colorBg\")}`,\n                                borderBottom: `1px solid ${Colorer(\n                                    valueFromContext.getTheme(\"colorText\")\n                                )\n                                    .alpha(0.1)\n                                    .string()}`\n                            }}\n                        >\n                            <h4>Confirm</h4>\n                            <IconClose\n                                style={{\n                                    cursor: \"pointer\"\n                                }}\n                                onClick={e => hideCart(e)}\n                            />\n                        </CssCartH>\n\n                        <CssCartList>\n                            {valueFromContext.cartWithItemsBuyingByVC &&\n                            valueFromContext.cartWithItemsBuyingByVC.items.map((oneCartItem, i) => {\n                                return (\n                                    <div key={`cartitem${i}`}>\n                                        <Product\n                                            product={oneCartItem}\n                                            key={oneCartItem.sku}\n                                            order={i}\n                                            initClass=\"initialFlow1\"\n                                            sku={oneCartItem.sku}\n                                            title={oneCartItem.name}\n                                            description={oneCartItem.description}\n                                            price={oneCartItem.price.amount}\n                                            image_url={oneCartItem.image_url}\n                                            currency={oneCartItem.price.currency}\n                                            cardType=\"buy_by_vc\"\n                                            cartId={valueFromContext.cart.cartId}\n                                            logToken={valueFromContext.logToken}\n                                            removeFromCart={valueFromContext.removeFromCart}\n                                            changeItemQuantityInCart={\n                                                valueFromContext.changeItemQuantityInCart\n                                            }\n                                            quantity={oneCartItem.quantity}\n                                        />\n                                    </div>\n                                );\n                            })}\n                            {valueFromContext.cartWithItemsBuyingByVC &&\n                            valueFromContext.cartWithItemsBuyingByVC.items.length <= 0 && <p>Empty cart</p>}\n                        </CssCartList>\n\n                        <CssCartB\n                            style={{\n                                backgroundColor: `${valueFromContext.getTheme(\"colorBg\")}`,\n                                borderTop: `1px solid ${Colorer(\n                                    valueFromContext.getTheme(\"colorText\")\n                                )\n                                    .alpha(0.1)\n                                    .string()}`\n                            }}\n                        >\n                            <div className=\"\" />\n                            {\n                                buyButtonDisabled ?\n                                    <Preloader/> :\n                                    <Button\n                                        variant=\"contained\"\n                                        onClick={() => {\n                                            !(\n                                                buyButtonDisabled ||\n                                                valueFromContext.cartWithItemsBuyingByVC.items.length <= 0\n                                            ) && buyByVirtualCurrencyButtonAction(\n                                                valueFromContext.cartWithItemsBuyingByVC.items[0],\n                                                valueFromContext.cartWithItemsBuyingByVC.vcPriceSku\n                                            );\n                                        }}\n                                    >\n                                        Buy\n                                    </Button>\n                            }\n                        </CssCartB>\n                    </div>\n                </CartB>\n                <CartZ onClick={e => hideCart(e)} />\n            </Cart0>\n        )}\n    </div>\n  );\n}\n\nexport const CssCartList = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 600px;\n  padding-top: 16px;\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* position: fixed; */\n  /* left: 0; */\n  /* right: 0; */\n  /* top: 0; */\n  /* bottom: 0; */\n  /* z-index: 1; */\n`;\n\nconst Cart0 = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 100;\n`;\n\nconst CartB = styled.div`\n  flex: 1;\n  position: absolute;\n  max-width: 680px;\n  z-index: 1;\n  max-height: 80vh;\n  overflow-y: auto;\n  padding-top: 64px;\n`;\n\nconst CartZ = styled.div`\n  background-color: rgba(0, 0, 0, 0.8);\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n`;\n\nconst CssCartH = styled.div`\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  top: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  z-index: 10;\n  padding: 24px 0 8px 0;\n`;\n\nconst CssCartB = styled.div`\n  /* background-color: rgba(0,0,0,0.8); */\n  position: sticky;\n  bottom: 0;\n  z-index: 0;\n  /* height: 64px; */\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  z-index: 10;\n  padding: 24px 0 24px 0;\n`;\n\nexport const CssSubtotal = styled.div`\n  display: flex;\n  padding: 0 24px 0 24px;\n  font-weight: bold;\n`;\n\nexport default withRouter(Cart);\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { ProductConsumer } from \"../context\";\nimport MenuMaterial from \"./MenuMaterial.js\";\nimport Product from \"./Product\";\nimport StoreLoader from \"./StoreLoader\";\n\nclass ProductList extends Component {\n  constructor(props) {\n    super(props);\n    this.ProductRef = React.createRef();\n    this.state = {};\n    this.changeGroupHandler = this.changeGroupHandler.bind(this);\n  }\n\n  changeGroupHandler = newActive => {\n    this.props.setStateFrom(\"activeGroup\", newActive);\n  };\n\n  componentDidMount() {\n    if (this.props.logToken && !this.props.virtualItems) {\n      this.props.setStateFrom(\"fetching\", true);\n      StoreLoader(window.xProjectId, this.props.logToken).then(allData => {\n        this.props.setCurrs(allData);\n      });\n\n      this.props.updateVirtualCurrencyBalance();\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <ProductConsumer>\n          {\n            valueFromContext => {\n              return (\n                <div>\n                  <CssStore00\n                    style={{\n                      backgroundColor: \"transparent\",\n                      color: valueFromContext.theme[\"colorText\"]\n                    }}\n                  >\n                    {valueFromContext.activeModule === \"virtualItems\" &&\n                    valueFromContext.virtualItems && (\n                      <CssProductList>\n                        <CssMenu>\n                          <MenuMaterial\n                            virtualItems={valueFromContext.virtualItems}\n                            activeGroup={valueFromContext.activeGroup}\n                            changeGroupHandler={this.changeGroupHandler}\n                          />\n                        </CssMenu>\n\n                        {valueFromContext.activeModule === \"virtualItems\" &&\n                        valueFromContext.virtualItems.map((oneGroup, key) => {\n                          if (\n                            (this.props.activeGroup === \"first\" &&\n                              key === 0) ||\n                            this.props.activeGroup === \"all\" ||\n                            this.props.activeGroup === oneGroup[\"id\"] ||\n                            this.props.activeGroup === oneGroup[\"name\"]\n                          ) {\n                            return (\n                              <div key={this.ProductRef}>\n                                <СssTitle\n                                  getTheme={valueFromContext.getTheme.bind(\n                                    this\n                                  )}\n                                >\n                                  {oneGroup.name}\n                                </СssTitle>\n                                <СssGroup>\n                                  {oneGroup.products &&\n                                  oneGroup.products.map(\n                                    (oneProduct, key) => {\n                                      return (\n                                        <Product\n                                          ref={this.ProductRef}\n                                          key={oneProduct.sku}\n                                          order={key}\n                                          initClass=\"initialFlow1\"\n                                          sku={oneProduct.sku}\n                                          title={oneProduct.name}\n                                          description={\n                                            oneProduct.description\n                                          }\n                                          price={oneProduct.price.amount}\n                                          image_url={oneProduct.image_url}\n                                          currency={\n                                            oneProduct.price.currency\n                                          }\n                                          product={oneProduct}\n                                          addToCart={\n                                            valueFromContext.addToCart\n                                          }\n                                          getTheme={valueFromContext.getTheme.bind(\n                                            this\n                                          )}\n                                          cartId={valueFromContext.cartId}\n                                          logToken={\n                                            valueFromContext.logToken\n                                          }\n                                          changeItemQuantityInCart={\n                                            valueFromContext.changeItemQuantityInCart\n                                          }\n                                          activeGroup={this.props.activeGroup}\n                                          buyByVC={\n                                            valueFromContext.buyByVC\n                                          }\n                                        />\n                                      );\n                                    }\n                                  )}\n                                </СssGroup>\n                              </div>\n                            );\n                          }\n                        })}\n                      </CssProductList>\n                    )}\n                  </CssStore00>\n                </div>\n              );\n            }\n          }\n        </ProductConsumer>\n      </div>\n    );\n  }\n}\n\nconst CssStore00 = styled.div`\n  position: relative;\n  z-index: 4;\n`;\nconst CssProductList = styled.div`\n  /* position: relative;\n  z-index: 4; */\n`;\n\nconst CssMenu = styled.div`\n  /* display: flex; */\n  align-items: center;\n  flex-grow: 1;\n  margin: 24px 0;\n`;\n\nconst СssGroup = styled.div`\n  /* width: '100%'; */\n  display: flex;\n  flex-wrap: wrap;\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* display: grid; */\n  /* grid-template-columns: repeat( auto-fit, minmax(260px, 320px)); */\n  /* grid-row-gap: 24px; */\n  place-content: center;\n`;\n\nconst СssTitle = styled.div`\n  color: ${props => props.getTheme(\"colorText\")};\n  padding-top: 2em;\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nexport default ProductList;\n","import axios from \"axios\";\n\nconst CancelToken = axios.CancelToken;\nlet cancel;\n\nexport const getEntitlement = (projectId, loginToken) => {\n  cancel && cancel();\n  let opts = {\n    url:\n    `https://store.xsolla.com/api/v2/projects/entitlement`,\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(function executor(c) {\n      cancel = c;\n    })\n  };\n\n  return axios(opts)\n    .then(function(response) {\n      return response.data;\n    });\n};\n\nexport const redeem = (projectId, loginToken, redeemCode, sku) => {\n  cancel && cancel();\n\n  let opts = {\n    url:\n        `https://store.xsolla.com/api/v1/game_delivery/xsolla_login/redeem_key`,\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: {\n      project_id: projectId,\n      digital_content_sku: sku,\n      language: \"en\",\n      key: redeemCode\n    },\n    cancelToken: new CancelToken(function executor(c) {\n      cancel = c;\n    }),\n  };\n\n  return axios(opts);\n};\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { ProductConsumer } from \"../context\";\nimport Product from \"./Product\";\nimport StoreLoader from \"./StoreLoader\";\n\nclass VCPackagesList extends Component {\n  constructor(props) {\n    super(props);\n    this.ProductRef = React.createRef();\n    this.state = {};\n    this.changeGroupHandler = this.changeGroupHandler.bind(this);\n    this.changeGroupHandler(10); // Костыль\n  }\n\n  changeGroupHandler = newActive => {\n    this.props.setStateFrom(\"activeGroup\", newActive);\n  };\n\n  componentDidMount() {\n    if (this.props.logToken && !this.props.virtualItems) {\n      this.props.setStateFrom(\"fetching\", true);\n      StoreLoader(window.xProjectId, this.props.logToken).then(allData => {\n        this.props.setCurrs(allData);\n      });\n\n      this.props.updateVirtualCurrencyBalance();\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <ProductConsumer>\n          {\n            valueFromContext => {\n              return (\n                <div>\n                  <CssStore00\n                    style={{\n                      backgroundColor: \"transparent\",\n                      color: valueFromContext.theme[\"colorText\"]\n                    }}\n                  >\n                    {valueFromContext.activeModule === \"virtualItems\" &&\n                    valueFromContext.virtualCurrencyPackages && (\n                      <CssProductList>\n                        <СssGroup>\n                          {\n                            valueFromContext.virtualCurrencyPackages.map((oneProduct, key) => {\n                              return (\n                                  <Product\n                                      ref={this.ProductRef}\n                                      key={oneProduct.sku}\n                                      order={key}\n                                      initClass=\"initialFlow1\"\n                                      sku={oneProduct.sku}\n                                      title={oneProduct.name}\n                                      description={\n                                        oneProduct.description\n                                      }\n                                      price={oneProduct.price.amount}\n                                      image_url={oneProduct.image_url}\n                                      currency={\n                                        oneProduct.price.currency\n                                      }\n                                      product={oneProduct}\n                                      addToCart={\n                                        valueFromContext.addToCart\n                                      }\n                                      getTheme={valueFromContext.getTheme.bind(\n                                          this\n                                      )}\n                                      cartId={valueFromContext.cartId}\n                                      logToken={\n                                        valueFromContext.logToken\n                                      }\n                                      changeItemQuantityInCart={\n                                        valueFromContext.changeItemQuantityInCart\n                                      }\n                                      activeGroup={this.props.activeGroup}\n                                      buyByVC={\n                                        valueFromContext.buyByVC\n                                      }\n                                  />\n                              );\n                            })}\n                        </СssGroup>\n                      </CssProductList>\n                    )}\n                  </CssStore00>\n                </div>\n              );\n            }\n          }\n        </ProductConsumer>\n      </div>\n    );\n  }\n}\n\nconst CssStore00 = styled.div`\n  position: relative;\n  z-index: 4;\n`;\nconst CssProductList = styled.div`\n  /* position: relative;\n  z-index: 4; */\n`;\n\nconst CssMenu = styled.div`\n  /* display: flex; */\n  align-items: center;\n  flex-grow: 1;\n  margin: 24px 0;\n`;\n\nconst СssGroup = styled.div`\n  /* width: '100%'; */\n  display: flex;\n  flex-wrap: wrap;\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* align-items: center; */\n  /* justify-content: center; */\n  /* display: grid; */\n  /* grid-template-columns: repeat( auto-fit, minmax(260px, 320px)); */\n  /* grid-row-gap: 24px; */\n  place-content: center;\n`;\n\nconst СssTitle = styled.div`\n  color: ${props => props.getTheme(\"colorText\")};\n  padding-top: 2em;\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nexport default VCPackagesList;\n","import React, {Component} from \"react\";\n\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nimport './EntitlementItem.css';\nimport Button from \"@material-ui/core/Button\";\n\nexport class EntitlementItem extends Component {\n  constructor() {\n    super();\n    this.state = {\n      expanded: false,\n      cardShown: false\n    }\n  }\n\n  componentDidMount() {\n    const {\n      order\n    } = this.props;\n\n    if (!this.state.cardShown) {\n      setTimeout(() => {\n        this.setState({\n          cardShown: true\n        });\n      }, order * 100);\n    }\n  }\n\n  render() {\n    const {\n      initClass,\n      imageUrl,\n      title,\n      description\n    } = this.props;\n\n    return (\n      <div className={`entitlement-item ${!this.state.cardShown ? initClass : \"\"}`}>\n        <div className=\"entitlement-item-card\">\n          <div\n            className=\"entitlement-item-card-media\"\n            style={{\n              backgroundImage: `url(${imageUrl})`\n            }}\n          />\n          <div className=\"entitlement-item-card-content\">\n            <div className=\"entitlement-item-card-content-title\">{title}</div>\n            <div className=\"entitlement-item-card-content-description\">{description}</div>\n          </div>\n          <Collapse in={this.state.expanded} timeout=\"auto\" unmountOnExit>\n            <CardContent>{description}</CardContent>\n          </Collapse>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, {PureComponent} from \"react\";\n\nimport {EntitlementItem} from './EntitlementItem';\nimport {getEntitlement, redeem} from './EntitlementLoader';\nimport {init} from 'store-js-sdk/src/init';\n\nimport './EntitlementList.css';\nimport './EntitlementRedeem.css';\nimport Button from \"@material-ui/core/Button\";\nimport {CircularProgress} from \"@material-ui/core\";\n\nexport class EntitlementList extends PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            code: '',\n            sku: '',\n            hasRedeemError: false,\n            isFetching: false\n        };\n\n        this.handleChangeCode = this.handleChangeCode.bind(this);\n        this.handleChangeSku = this.handleChangeSku.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.logToken && null === this.props.entitlementItems) {\n            this.updateEntitlement();\n            this.props.setStateFrom(\"fetching\", true);\n        }\n    }\n\n    componentWillUnmount() {\n        if (null !== this.props.entitlementItems) {\n            this.props.setEntitlementItems(null);\n        }\n    }\n\n    updateEntitlement() {\n        init({\n            projectId: window.xProjectId,\n            version: 'v2'\n        });\n\n        this.props.setStateFrom(\"fetching\", true);\n\n        getEntitlement(window.xProjectId, this.props.logToken)\n            .then(items => {\n                this.props.setEntitlementItems(items);\n            })\n            .catch(() => {\n                this.props.setEntitlementItems([]);\n            });\n    }\n\n    handleChangeCode(event) {\n        this.setState({code: event.target.value});\n    }\n\n    handleChangeSku(event) {\n        this.setState({sku: event.target.value});\n    }\n\n    handleSubmit(event) {\n        this.setState({\n            ...this.state,\n            isFetching: true\n        });\n\n        redeem(window.xProjectId, this.props.logToken, this.state.code, this.state.sku)\n            .then((e, k) => {\n                this.updateEntitlement();\n                this.setState({\n                    ...this.state,\n                    hasRedeemError: false,\n                    isFetching: false\n                });\n            })\n            .catch(() => {\n                console.log('error');\n                this.setState({\n                    ...this.state,\n                    hasRedeemError: true,\n                    isFetching: false\n                });\n            });\n\n        event.preventDefault();\n    }\n\n    render() {\n        const {entitlementItems} = this.props;\n\n        return (\n            <div className=\"\">\n                <form className=\"entitlement-redeem-form\"\n                      onSubmit={this.handleSubmit}\n                >\n                    <input\n                        className=\"entitlement-redeem-input\"\n                        type=\"text\"\n                        size=\"40\"\n                        placeholder={\"Enter your code\"}\n                        onChange={this.handleChangeCode} value={this.state.code}\n                    />\n                    <input\n                        className=\"entitlement-redeem-input\"\n                        type=\"text\"\n                        size=\"40\"\n                        placeholder={\"Enter sku of your game\"}\n                        onChange={this.handleChangeSku} value={this.state.sku}\n                    />\n                    {\n                        this.state.hasRedeemError && !this.state.isFetching && <span className=\"entitlement-redeem-error\">Wrong code</span>\n                    }\n                    {\n                        this.state.isFetching &&\n                        <div className=\"entitlement-redeem-loader\">\n                            <CircularProgress />\n                        </div>\n                    }\n                    <Button\n                        type=\"submit\"\n                        className=\"entitlement-redeem-button\"\n                        variant=\"contained\"\n                    >\n                        Redeem Code\n                    </Button>\n                </form>\n                <div className=\"entitlement-list\">\n                    {\n                        entitlementItems && entitlementItems.length\n                            ?\n                            entitlementItems\n                                .map(\n                                    (oneProduct, key) => {\n                                        return (\n                                            <EntitlementItem\n                                                key={oneProduct.digital_content_sku}\n                                                order={key}\n                                                initClass=\"initialFlow1\"\n                                                title={oneProduct.name}\n                                                description={oneProduct.description}\n                                                imageUrl={oneProduct.image_url}\n                                            />\n                                        );\n                                    }\n                                )\n                            :\n                            <div>\n                                Oops, you have no games yet!\n                            </div>\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n","import React, {PureComponent} from \"react\";\n\nimport './ServerPurchase.css';\nimport Product from \"../../components/Product\";\nimport {CssCartList, CssSubtotal} from \"../../components/Cart\";\nimport {getFormattedCurrency} from \"../../components/formatCurrency\";\nimport Button from \"@material-ui/core/Button\";\nimport {purchaseItems} from \"./ServerPurchaseLoader\";\nimport Alert from \"react-bootstrap/Alert\";\n\nexport class ServerPurchase extends PureComponent {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showToast: false,\n            statusToast: 'processing',\n            operations: null\n        }\n    }\n\n    calculateSubtotal = cart => {\n        let subtotal = 0;\n        cart.forEach(function (element) {\n            subtotal += element.price.amount * element.quantity;\n        });\n        return Math.round(subtotal * 100) / 100;\n    };\n\n    generateUUID() {\n        return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n        );\n    }\n\n    setShowToast(isVisible) {\n        this.setState({showToast: isVisible});\n    }\n\n    purchase() {\n        let {cart} = this.props;\n\n        const body = {\n            type: \"purchase\",\n            user: \"d342dad2-9d59-11e9-a384-42010aa8003f\",\n            platform: \"playstation_network\",\n            purchase: {\n                amount: cart.price.amount,\n                currency: cart.price.currency,\n                external_purchase_id: this.generateUUID(),\n                external_purchase_date: (new Date()).toISOString()\n            },\n            items: cart.items.map((cartItem) => {\n                return {\n                    sku: cartItem.sku,\n                    quantity: cartItem.quantity\n                }\n            })\n        };\n        this.setState({showToast: true, statusToast: 'processing', operationDetails: null});\n        purchaseItems(body)\n            .then(response => {\n                this.setState({\n                    showToast: true,\n                    statusToast: 'complete',\n                    operations: response.operations\n                });\n            })\n            .catch(() => {\n            });\n    }\n\n    render() {\n        const {cart, logToken, removeFromCart, changeItemQuantityInCart, isFetching} = this.props;\n        const {operations, showToast, statusToast} = this.state;\n\n        return (\n            <div>\n                <div className=\"server-purchase__alert\">\n                    <Alert onClose={(e) => this.setShowToast(false)} show={showToast}\n                           variant={statusToast === 'processing' ? \"primary\" : \"success\"} dismissible>\n                        <Alert.Heading>{statusToast === 'processing' ? 'Operation is processing' : 'Operation complete!'}</Alert.Heading>\n                        {\n                            operations && operations.length ?\n                                operations.map(\n                                    (operation) => {\n                                        return operation.items.map(\n                                            (item, index) => {\n                                                return (\n                                                    <div key={index}>\n                                                        <div>Item: <b>{item.sku}</b></div>\n                                                        <div>Quantity: <b>{item.quantity === null ? 0 : item.quantity}</b>\n                                                        </div>\n                                                    </div>\n                                                )\n                                            }\n                                        )\n                                    })\n                                :\n                                ''\n                        }\n                    </Alert>\n                </div>\n                <div className=\"server-purchase\">\n                    <CssCartList>\n                        {cart && cart.items.map((oneCartItem, i) => {\n                            return (\n                                <div key={`cartitem${i}`}>\n                                    <Product\n                                        product={oneCartItem}\n                                        key={oneCartItem.sku}\n                                        order={i}\n                                        initClass=\"initialFlow1\"\n                                        sku={oneCartItem.sku}\n                                        title={oneCartItem.name}\n                                        description={oneCartItem.description}\n                                        price={oneCartItem.price.amount}\n                                        image_url={oneCartItem.image_url}\n                                        currency={oneCartItem.price.currency}\n                                        cardType=\"cart\"\n                                        cartId={cart.cartId}\n                                        logToken={logToken}\n                                        removeFromCart={removeFromCart}\n                                        changeItemQuantityInCart={changeItemQuantityInCart}\n                                        quantity={oneCartItem.quantity}\n                                    />\n                                </div>\n                            );\n                        })}\n                        {cart && cart.items.length <= 0 && <div>Oops, you have empty cart!</div>}\n                    </CssCartList>\n                    <div className=\"\"/>\n                    {cart && cart.items.length > 0 && (\n                        <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n                            <CssSubtotal style={{paddingTop: \"7px\"}}>\n                                Subtotal:\n                                <div\n                                    style={{\n                                        minWidth: 80,\n                                        textAlign: \"right\"\n                                    }}\n                                >\n                                    {isFetching &&\n                                    getFormattedCurrency(\n                                        this.calculateSubtotal(cart.items),\n                                        cart.items[0].price.currency\n                                    ).formattedCurrency}\n                                    {!isFetching &&\n                                    getFormattedCurrency(\n                                        cart.price.amount,\n                                        cart.price.currency\n                                    ).formattedCurrency}\n                                </div>\n                            </CssSubtotal>\n                            <Button\n                                variant=\"contained\"\n                                onClick={() => {\n                                    this.purchase(cart)\n                                }}\n                            >\n                                Grant purchase\n                            </Button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n","import axios from \"axios\";\n\n\nexport const purchaseItems = (data) => {\n    let opts = {\n        url:\n            `https://livedemo.xsolla.com/store-demo/api/index.php`,\n        method: \"POST\",\n        data: data\n    }\n\n    return axios(opts)\n        .then(function(response) {\n            return response.data;\n        });\n}\n","import React, { Component } from \"react\";\nimport {HashRouter, Route} from 'react-router-dom';\nimport styled from \"styled-components\";\n\nimport \"./App.css\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport {InventoryList} from './features/inventory/InventoryList';\nimport {PhysicalList} from './features/physical/PhysicalList';\nimport {ManageInventory} from './features/manage/ManageInventory';\nimport Navbar from \"./components/Navbar\";\nimport Cart from \"./components/Cart\";\nimport ProductList from \"./components/ProductList\";\nimport Preloader from \"./components/Preloader.js\";\nimport { ProductConsumer } from \"./context\";\nimport VCPackagesList from \"./components/VCPackagesList\";\nimport {EntitlementList} from \"./features/entitlement/EntitlementList\";\nimport Alert from \"react-bootstrap/Alert\";\nimport {ServerPurchase} from \"./features/serverPurchase/ServerPurchase\";\n\nclass App extends Component {\n  render() {\n    return (\n      <HashRouter basename='/'>\n        <ProductConsumer>\n          {valueFromContext => {\n            return (\n              <React.Fragment>\n                  {\n                      valueFromContext.showCartError\n                      &&\n                      <Alert onClose={valueFromContext.hideCartError} className={\"application-alert\"} variant=\"danger\" dismissible>\n                          <Alert.Heading>{valueFromContext.cartError.title}</Alert.Heading>\n                          <p>{valueFromContext.cartError.message}</p>\n                      </Alert>\n                  }\n                <div className=\"\">\n                  <Navbar showCart={valueFromContext.showCart} />\n                  <div>\n                    <CssStore0>\n                      <CssCart />\n                      <Route path=\"/\" exact render={() => (!valueFromContext.fetching && <ProductList {...valueFromContext} />)} />\n                      <Route path=\"/inventory\" render={() => (!valueFromContext.fetching && <InventoryList {...valueFromContext} />)} />\n                      <Route path=\"/crystals\" render={() => (!valueFromContext.fetching && <VCPackagesList {...valueFromContext} />)} />\n                      <Route path=\"/physical\" render={() => (!valueFromContext.fetching && <PhysicalList {...valueFromContext} />)} />\n                      <Route path=\"/entitlement\" render={() => (!valueFromContext.fetching && <EntitlementList {...valueFromContext} />)} />\n                      <Route path=\"/manage\" render={() => (!valueFromContext.fetching && <ManageInventory {...valueFromContext} />)} />\n                      <Route path=\"/purchase\" render={() => (!valueFromContext.fetching && <ServerPurchase {...valueFromContext} />)} />\n                      {valueFromContext.fetching && <Preloader />}\n                    </CssStore0>\n                  </div>\n                </div>\n\n                <div className=\"global-background\">\n                  <div className=\"global-background-tint\" />\n                </div>\n              </React.Fragment>\n            );\n          }}\n        </ProductConsumer>\n      </HashRouter>\n    );\n  }\n}\n\nconst CssStore0 = styled.div`\n  overflow-y: auto;\n  z-index: 1;\n`;\n\nconst CssCart = styled(Cart)`\n  left: 0;\n  top: 0;\n  height: 100vh;\n  display: grid;\n  align-items: center;\n  position: relative;\n  z-index: 100;\n`;\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { ProductProvider } from \"./context\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <ProductProvider projectId={window.xProjectId}>\n    <App />\n  </ProductProvider>,\n  document.getElementById(\"root\")\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}