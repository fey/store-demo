{"version":3,"sources":["components/Preloader.js","components/Cookie.js","components/StoreLoader.js","context.js","components/ProductCard.js","features/inventory/InventoryItem.js","features/inventory/InventoryLoader.js","features/inventory/InventoryList.js","features/physical/PhysicalListLoader.js","components/Currency.js","features/physical/PhysicalItem.js","features/physical/PhysicalList.js","components/GroupSwitcher.js","features/manage/ManageInventoryLoader.js","features/manage/ManageInventory.js","features/virtual/VirtualItemsLoader.js","features/virtual/VirtualItem.js","features/virtual/VirtualList.js","styles/devices.js","features/cart/CartItem.js","utils/formatCurrency.js","utils/generateUUID.js","features/serverPurchase/ServerPurchaseLoader.js","features/serverPurchase/ServerPurchase.js","features/entitlement/EntitlementLoader.js","features/entitlement/EntitlementList.js","utils/routes.js","features/cart/Cart.js","features/cart/VCCartItem.js","features/cart/VCCart.js","features/virtualCurrenciesList/VCItem.js","features/virtualCurrenciesList/VCLoader.js","features/virtualCurrenciesList/VCList.js","components/XLogin.js","components/Navbar.js","components/MobileNavbar.js","App.js","styles/theme.js","provider.js","serviceWorker.js","index.js"],"names":["Preloader","_ref","size","react_default","a","createElement","CssPreloader","CircularProgress","color","styled","div","_templateObject","eatCookie","o","window","location","search","split","join","e","n","t","exec","decodeURIComponent","getQueryParams","token","Date","setTime","getTime","toUTCString","document","cookie","setCookie","history","pushState","pathname","length","i","charAt","substring","indexOf","getCookie","Cookie","xProjectId","eraseCookie","cancel","CancelToken","axios","changeItemQuantityCart","quantity","cartId","loginToken","_ref$sku","sku","opts","url","method","headers","Content-Type","Authorization","data","JSON","stringify","quickPurchaseBuyVirtualCurrency","_ref3","Object","asyncToGenerator","regenerator_default","mark","_callee","projectId","product","params","response","wrap","_context","prev","next","concat","virtual_prices","post","sent","abrupt","stop","this","_x","_x2","_x3","apply","arguments","ProductContext","React","createContext","ProductProvider","state","_this","props","logToken","isSideMenuShown","userBalanceVirtualCurrency","isUserBalanceFetching","virtualItems","areVirtualItemsFetching","virtualCurrencies","areVirtualCurrenciesFetching","physicalItems","arePhysicalItemsFetching","inventoryItems","areInventoryItemsFetching","isItemConsuming","entitlementItems","areEntitlementItemsFetching","isRedeeming","isVCCartShown","isVCCartProcessing","vcCart","items","vcPriceSku","isCartShown","isCartProcessing","cart","price","amount","amount_without_discount","currency","setStateFrom","stateName","stateValue","setState","defineProperty","showCart","hideCart","showVCCart","hideVCCart","setSideMenuVisibility","setEntitlementItems","setInventoryItems","setPhysicalItems","setVirtualCurrencies","setVirtualItems","getCart","_this$state","cartPromise","cancelToken","c","then","catch","error","console","isCancel","cart_id","sort","compareItems","createCart","id","clearCart","updateVirtualCurrencyBalance","b","buyByVC","clearVCCart","addToCart","enqueueSnackbar","_this$state2","some","elem","objectSpread","toConsumableArray","errorMsg","errorMessage","message","variant","removeFromCart","filter","prod","changeItemQuantityInCart","_this$state3","_ref2","_ref2$sku","removeItemFromCart","indexFind","findIndex","cartItems","splice","getVirtualCurrencyBalance","Provider","value","children","PureComponent","ProductConsumer","Consumer","withSnackbar","ProductCard","memo","image","order","name","description","actionButtonContent","onAction","isLoading","_React$useState","useState","_React$useState2","slicedToArray","isShown","setShown","showCard","_React$useState3","_React$useState4","isActionedCard","setActionedCard","_React$useState5","_React$useState6","isHovered","setHovered","useEffect","setTimeout","CardAppear","shown","hovered","Card","onMouseEnter","onMouseLeave","CardImage","ProductCard_CardContent","CardTitle","Collapse","in","timeout","collapsedHeight","react_dotdotdot_src_default","animate","clamp","CardFooter","CardQuantity","Button","disabled","onClick","ProductCard_templateObject","theme","shape","cardWidth","_templateObject2","_ref4","palette","text","primary","_ref5","_ref6","_ref7","background","default","_ref8","shadows","_ref9","transitions","create","_ref10","borderRadius","CardContent","MUICardContent","_templateObject3","_templateObject4","_ref11","contrastText","_templateObject5","_ref12","Colorer","alpha","string","_templateObject6","_templateObject7","_ref13","main","InventoryItem","item","onConsume","image_url","remaining_uses","undefined","loadInventory","URL","get","x","type","consumeItem","_callee2","inventory","_context2","init","version","Inventory","instance_id","_x4","_x5","InventoryList","_React$useContext","useContext","useSnackbar","handleConsumeItem","useCallback","updateInventoryItemIndex","updatedInventoryItem","newInventoryItems","slice","loadInventoryItems","content","useMemo","Content","map","index","key","EmptyText","Body","Preloader_Preloader","InventoryList_templateObject","InventoryList_templateObject2","InventoryList_templateObject3","loadPhysicalGoods","physicalGood","PhysicalGood","getPhysicalGoodList","Currency","Currency_Body","CurrencyIcon","src","CurrencyAcronym","Currency_templateObject","span","Currency_templateObject2","Avatar","Currency_templateObject3","PhysicalItem","Currency_Currency","Math","round","ShoppingCart_default","PhysicalList","PhysicalList_Content","PhysicalList_Body","PhysicalList_templateObject","PhysicalList_templateObject2","GroupSwitcher","groups","activeGroup","onGroupChange","GroupSwitcher_Tabs","onChange","_","groupID","textColor","indicatorColor","group","Tab","label","Tabs","MUITabs","GroupSwitcher_templateObject","loadVirtualItems","projectID","loadVirtualCurrencies","rewardItems","_callee3","_context3","users","ManageInventory","userID","setUserID","setActiveGroup","selectedItem","setSelectedItem","_React$useState7","_React$useState8","setQuantity","_React$useState9","_React$useState10","isItemProcessing","setItemProcessing","_React$useState11","_React$useState12","areManageItemsFetching","setManageItemsFetching","_React$useState13","_React$useState14","manageItems","setManageItems","_React$useState15","_React$useState16","areManageCurrenciesFetching","setManageCurrenciesFetching","_React$useState17","_React$useState18","manageCurrencies","setManageCurrencies","isFetching","userOptions","MenuItem","itemsOptions","currenciesOptions","groupsContent","options","currencies","processItem","user","count","ManageInventory_Body","Form","onSubmit","event","preventDefault","ManageInventory_TextField","select","target","GroupSwitcher_GroupSwitcher","Items","Number","FormFooter","FormActions","RewardButton","ManageInventory_templateObject","form","ManageInventory_templateObject2","TextField","MUITextField","ManageInventory_templateObject3","ManageInventory_templateObject4","ManageInventory_templateObject5","ManageInventory_templateObject6","ManageInventory_templateObject7","Promise","all","g","virtualItemsByGroup","loadVirtualItemsByGroup","external_id","groupName","toArray","VirtualItem","isPurchased","hasVirtualCurrencyPrice","handleBuyByVC","handleItemAdd","buttonAction","buttonContent","Purchased","VirtualItem_templateObject","VirtualList","Fragment","Title","Group","inventory_options","consumable","VirtualList_Body","VirtualList_templateObject","VirtualList_templateObject2","VirtualList_templateObject3","device","mobileS","mobileM","mobileL","tablet","laptop","laptopL","desktop","retina","CartItemComponent","changeItemQuantity","calcPrice","handleQuantityDec","CartItem","CartItemImage","CartItemBody","ItemName","ItemPrice","CartItemTotal","CartItemPriceForOne","PriceInfo","QuantityActions","IconButton","DecrementIcon","DeleteIcon","ItemQuantity","IncrementIcon","CartItem_templateObject","CartItem_templateObject2","CartItem_templateObject3","CartItem_templateObject4","CartItem_templateObject5","CartItem_templateObject6","CartItem_templateObject7","_templateObject8","_templateObject9","_templateObject10","MUIDeleteIcon","_templateObject11","MUIDecrementIcon","_templateObject12","MUIIncrementIcon","_templateObject13","defaultCurrency","fractionSize","symbol","grapheme","template","rtl","uniqSymbol","defaultLocale","getFormattedCurrency","locale","parsedAmount","parseFloat","isNaN","formattedCurrency","dir","currencyOptions","currencyFormat","toUpperCase","getCurrencyOptions","languageOptions","currencyNumberFormat","substr","toLowerCase","formatLocale","getLanguageOptions","signAmount","thousandSeparator","thousands","decimalSeparator","decimal","splittedAmount","abs","toFixed","replace","formattedAmount","purchaseItems","ServerPurchase","isPurchasing","setPurchasing","purchase","platform","external_purchase_id","crypto","getRandomValues","Uint8Array","toString","external_purchase_date","toISOString","cartContent","CartItems","CartItem_CartItemComponent","ServerPurchase_Divider","ServerPurchase_EmptyText","footerContent","CartFooter","Subtotal","Price","subtotal","reduce","acc","calculateSubtotal","CartActions","ServerPurchase_Body","ServerPurchase_Content","ServerPurchase_templateObject","ServerPurchase_templateObject2","ServerPurchase_templateObject3","ServerPurchase_templateObject4","ServerPurchase_templateObject5","ServerPurchase_templateObject6","ServerPurchase_templateObject7","ServerPurchase_templateObject8","Divider","MUIDivider","ServerPurchase_templateObject9","getEntitlement","redeem","redeemCode","project_id","digital_content_sku","language","EntitlementList","setSku","code","setCode","handleCodeChange","handleSkuChange","loadEntitlementItems","entitlementList","EntitlementList_Body","EntitlementList_Form","EntitlementList_TextField","placeholder","EntitlementList_FormFooter","EntitlementList_Button","EntitlementList_templateObject","EntitlementList_templateObject2","EntitlementList_templateObject3","MUIButton","EntitlementList_templateObject4","EntitlementList_templateObject5","routes","physical","entitlement","manage","specificProject","navItems","route","getMenuItems","includes","Cart","buyButtonDisabled","setBuyButtonDisabled","useHistory","Cart_Modal","open","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","Grow","CartContent","CartHeader","Close_default","CartList","Cart_CartFooter","Cart_Subtotal","Cart_Price","Cart_CartActions","style","marginRight","push","sandbox","settings","ui","getPsTokenBuyCart","xPayStationInit","host","XPayStationWidget","on","eventTypes","CLOSE","STATUS_DONE","Modal","MUIModal","Cart_templateObject","Cart_templateObject2","Cart_templateObject3","Cart_templateObject4","Cart_templateObject5","Cart_templateObject6","Cart_templateObject7","Cart_templateObject8","VCCartItem","VCCartItem_Body","Image","Name","VCCartItem_templateObject","VCCartItem_templateObject2","VCCartItem_templateObject3","VCCart","VCCart_Modal","VCCart_CartContent","VCCart_CartHeader","VCCart_CartList","VCCart_CartFooter","VCCart_templateObject","VCCart_templateObject2","VCCart_templateObject3","VCCart_templateObject4","VCCart_templateObject5","VCItem","VCList","VCList_Content","VCList_Body","VCList_templateObject","VCList_templateObject2","XLogin","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","unauthorizedFlow","authorizedFlow","tkn","base64","parse","atob","parseJwt","psToken","_this2","valueFromContext","CssXpop","display","CssXpopB","CssLoginInfo","CssLoginPop","myProjects","onePr","pr","login","urlFull","marginBottom","fontSize","href","projectName","CssXpopZ","XloginInit","cke","Component","XLogin_templateObject","XLogin_templateObject2","XLogin_templateObject3","XLogin_templateObject4","XLogin_templateObject5","login_id","Navbar","isSpecificProject","useLocation","menuAnchor","setMenuAnchor","handleMenuClose","handleMenuOpen","currentTarget","toggleSideMenu","logOutHandler","reload","isLogged","generalMenuItems","isLocationExistsInTabs","userMenuItems","Header","Hidden","mdDown","Navbar_Tabs","component","Navbar_Tab","NavLink","to","lgUp","Menu_default","LoginPanel","vc","VCCurrency","UserMail","endIcon","Boolean","ExpandLess_default","ExpandMore_default","email","XLogin_XLogin","LoginButton","LogoutButton","ExitToAppOutlined_default","Navbar_Menu","anchorEl","getContentAnchorEl","transformOrigin","vertical","horizontal","anchorOrigin","Link","activeClassName","xsDown","Menu","MUIMenu","Navbar_templateObject","Navbar_templateObject2","MUITab","Navbar_templateObject3","Navbar_templateObject4","Navbar_templateObject5","Navbar_templateObject6","Navbar_templateObject7","Navbar_templateObject8","Navbar_templateObject9","header","Navbar_templateObject10","MobileNavbar","closeMenu","SwipeableDrawer","anchor","onOpen","MobileNavbar_Content","MobileNavbar_Header","MobileNavbar_IconButton","MobileNavbar_UserMail","ChevronLeft_default","orientation","MobileNavbar_Tab","MenuDivider","MobileNavbar_templateObject","MobileNavbar_templateObject2","MUIIconButton","MobileNavbar_templateObject3","MobileNavbar_templateObject4","MobileNavbar_templateObject5","MobileNavbar_templateObject6","App_templateObject","typography","fontFamily","imageUrl","App_templateObject2","App","useRouteMatch","path","strict","sensitive","App_Body","Navbar_Navbar","MobileNavbar_MobileNavbar","Cart_Cart","VCCart_VCCart","App_Content","react_router","exact","mainTheme","createMuiTheme","secondary","paper","action","selected","hover","notificationPosition","isMobile","useMediaQuery","match","build","dense","maxSnack","preventDuplicate","ThemeProvider","styled_components_browser_esm","context","hostname","ReactDOM","render","react_router_dom","basename","provider","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.90b269cd.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst Preloader = ({ size  }) => (\n  <CssPreloader>\n    <CircularProgress size={size} color=\"primary\" />\n  </CssPreloader>\n);\n\nexport { Preloader };\n\nconst CssPreloader = styled.div`\n  z-index: 9;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n`;\n","const eatCookie = () => {\n  const getCookie = o => {\n    for (\n      var e = o + \"=\",\n        n = decodeURIComponent(document.cookie).split(\";\"),\n        t = 0;\n      t < n.length;\n      t++\n    ) {\n      for (var i = n[t]; \" \" === i.charAt(0); ) i = i.substring(1);\n      if (0 === i.indexOf(e)) return i.substring(e.length, i.length);\n    }\n    return \"\";\n  };\n  const setCookie = (o, e) => {\n    var n = new Date();\n    n.setTime(n.getTime() + 864e5);\n    var t = \"expires=\" + n.toUTCString();\n    document.cookie = o + \"=\" + e + \";\" + t + \";path=/\";\n  };\n\n  function getQueryParams(o) {\n    o = o.split(\"+\").join(\" \");\n    for (var e, n = {}, t = /[?&]?([^=]+)=([^&]*)/g; (e = t.exec(o)); )\n      n[decodeURIComponent(e[1])] = decodeURIComponent(e[2]);\n    return n;\n  }\n\n  let o;\n  //console.log(\"let = \");\n  if (window.location.search) {\n    o = getQueryParams(window.location.search).token;\n  }\n  if (o) {\n    setCookie(\"xsolla_login_token\", o);\n    window.history.pushState(\"\", \"\", document.location.pathname);\n  } else {\n    o = getCookie(\"xsolla_login_token\");\n  }\n  if (o && o !== \"undefined\") {\n    //console.log(\"o = \", o);\n    return o;\n  } else {\n    return null;\n  }\n};\n\nexport default function Cookie() {\n  return 44056 === window.xProjectId\n    ? 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE5NjIyMzQwNDgsImlzcyI6Imh0dHBzOi8vbG9naW4ueHNvbGxhLmNvbSIsI'\n    + 'mlhdCI6MTU2MjE0NzY0OCwidXNlcm5hbWUiOiJ4c29sbGEiLCJ4c29sbGFfbG9naW5fYWNjZXNzX2tleSI6IjA2SWF2ZHpDeEVHbm5aMTlp'\n    + 'LUc5TmMxVWFfTWFZOXhTR3ZEVEY4OFE3RnMiLCJzdWIiOiJkMzQyZGFkMi05ZDU5LTExZTktYTM4NC00MjAxMGFhODAwM2YiLCJlbWFpbCI'\n    + '6InN1cHBvcnRAeHNvbGxhLmNvbSIsInR5cGUiOiJ4c29sbGFfbG9naW4iLCJ4c29sbGFfbG9naW5fcHJvamVjdF9pZCI6ImU2ZGZhYWM2LTc'\n    + '4YTgtMTFlOS05MjQ0LTQyMDEwYWE4MDAwNCIsInB1Ymxpc2hlcl9pZCI6MTU5MjR9.GCrW42OguZbLZTaoixCZgAeNLGH2xCeJHxl8u8Xn2aI'\n    : eatCookie();\n}\n\nexport function eraseCookie(o) {\n  return (document.cookie =\n    o + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;\");\n}\n\nexport function parseJwt(o) {\n  let base64Url = o.split(\".\")[1];\n  let base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\n  return JSON.parse(window.atob(base64));\n}\n","import axios from \"axios\";\n\nconst CancelToken = axios.CancelToken;\nlet cancel;\n\nexport function changeItemQuantityCart(\n  { sku = \"sku\" },\n  quantity,\n  cartId,\n  loginToken\n) {\n  cancel && cancel();\n  //console.log(\"sku added = \", sku, \" to cartId = \", cartId);\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId +\n      \"/item/\" +\n      sku,\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: JSON.stringify({\n      quantity: quantity\n    })\n  };\n  return axios(opts);\n}\n\nexport function createCart(loginToken) {\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v1/project/\" + window.xProjectId + \"/cart\",\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n\nexport function removeItemFromCart({ sku = \"sku\" }, cartId, loginToken) {\n  cancel && cancel();\n  //console.log(\"sku removed = \", sku, \" from cartId = \", cartId);\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId +\n      \"/item/\" +\n      sku,\n    method: \"DELETE\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n\nexport function getPsTokenBuyCart(cartId, loginToken) {\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/payment/cart/\" +\n      cartId,\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: {\n      sandbox: true,\n      settings: {\n        ui: {\n          theme: 'dark'\n        }\n      }\n    }\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log(\"PsToken generated = \", response.data);\n      return response;\n    })\n    .catch(function(error) {\n      //console.log(\"L2PS ERROR = \", error.response);\n    });\n}\n\nexport function getCart(cartId, loginToken) {\n  cancel && cancel();\n  const opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId,\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(c => {\n      cancel = c;\n    })\n  };\n  return axios(opts)\n    .then(response => response)\n    .catch(error => console.error(error));\n}\n\nexport const quickPurchaseBuyVirtualCurrency = async (projectId, product, loginToken) => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectId}/payment/item/${product.sku}/virtual/${product.virtual_prices[0].sku}`;\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`\n    }\n  };\n\n  const response = await axios.post(url, {}, params);\n\n  return response.data;\n}\n\nexport function getVirtualCurrencyBalance(loginToken) {\n  let opts = {\n    url:\n        \"https://store.xsolla.com/api/v2/project/\" + window.xProjectId + \"/user/virtual_currency_balance\",\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n","import React from 'react';\nimport { withSnackbar } from 'notistack';\n\nimport Cookie from './components/Cookie';\nimport {\n  changeItemQuantityCart,\n  createCart,\n  removeItemFromCart,\n  getCart, getVirtualCurrencyBalance\n} from './components/StoreLoader';\n\nconst ProductContext = React.createContext();\n\nclass ProductProvider extends React.PureComponent {\n  state = {\n    projectId: this.props.projectId,\n    logToken: Cookie(),\n    isSideMenuShown: false,\n\n    userBalanceVirtualCurrency: [],\n    isUserBalanceFetching: false,\n\n    virtualItems: [],\n    areVirtualItemsFetching: false,\n\n    virtualCurrencies: [],\n    areVirtualCurrenciesFetching: false,\n\n    physicalItems: [],\n    arePhysicalItemsFetching: false,\n\n    inventoryItems: [],\n    areInventoryItemsFetching: false,\n    isItemConsuming: false,\n\n    entitlementItems: [],\n    areEntitlementItemsFetching: false,\n    isRedeeming: false,\n\n    isVCCartShown: false,\n    isVCCartProcessing: false,\n    vcCart: {\n      items: [],\n      vcPriceSku: null\n    },\n\n    isCartShown: false,\n    isCartProcessing: false,\n    cart: {\n      cartId: null,\n      items: [],\n      price: {\n        amount: 0,\n        amount_without_discount: 0,\n        currency: '',\n      }\n    },\n  };\n\n  setStateFrom = (stateName, stateValue) => this.setState({ [stateName]: stateValue });\n\n  showCart = () => this.setState({ isCartShown: true });\n  hideCart = () => this.setState({ isCartShown: false });\n\n  showVCCart = () => this.setState({ isVCCartShown: true });\n  hideVCCart = () => this.setState({ isVCCartShown: false });\n\n  setSideMenuVisibility = isSideMenuShown => this.setState({ isSideMenuShown });\n  setEntitlementItems = entitlementItems => this.setState({ entitlementItems });\n  setInventoryItems = inventoryItems => this.setState({ inventoryItems });\n  setPhysicalItems = physicalItems => this.setState({ physicalItems });\n  setVirtualCurrencies = virtualCurrencies => this.setState({ virtualCurrencies });\n  setVirtualItems = virtualItems => this.setState({ virtualItems });\n\n  getCart = () => {\n    const { cart, logToken } = this.state;\n    const cartPromise = getCart(cart.cartId, logToken);\n    cartPromise.then(response => {\n      if (!cartPromise.isCancel && response) {\n        this.setState({\n          cart: {\n            cartId: response.data.cart_id,\n            items: response.data.items.sort(this.compareItems),\n            price: response.data.price || 0,\n          },\n          isCartProcessing: false\n        });\n      }\n    });\n  };\n\n  createCart = () => {\n    const cartIdPromise = createCart(this.state.logToken);\n    cartIdPromise.then(response => {\n      this.setState({\n        cart: {\n          cartId: response.data.id,\n          items: [],\n          price: {\n            amount: 0,\n            amount_without_discount: 0,\n            currency: '',\n          }\n        }\n      });\n    });\n  };\n\n  clearCart = () => {\n    this.createCart();\n    this.updateVirtualCurrencyBalance();\n  };\n\n  compareItems = (a, b) => {\n    if (a.sku > b.sku) {\n      return 1;\n    }\n    if (a.sku < b.sku) {\n      return -1;\n    }\n    return 0;\n  };\n\n  buyByVC = product => {\n    this.setState({\n      isVCCartShown: true,\n      vcCart: { items: [product] },\n    });\n  };\n\n  clearVCCart = () => {\n    this.setState({\n      isVCCartShown: false,\n      vcCart: { items: [] },\n    });\n  };\n\n  addToCart = product => {\n    const { enqueueSnackbar } = this.props;\n    const { cart, logToken } = this.state;\n    const isItemExist = cart.items.some(elem => elem.sku === product.sku);\n    if (isItemExist) {\n      this.getCart();\n      this.setState({ isCartShown: true });\n    } else {\n      this.setState({ isCartProcessing: true });\n      changeItemQuantityCart(product, 1, cart.cartId, logToken)\n        .then(() => {\n          this.setState({\n            cart: {\n              ...cart,\n              items: [{ ...product, quantity: 1 }, ...cart.items].sort(this.compareItems),\n              price: {\n                ...cart.price,\n                amount: cart.price.amount + product.price.amount,\n                amount_without_discount: cart.price.amount_without_discount + product.price.amount_without_discount,\n              },\n            },\n            isCartProcessing: false\n          });\n          this.showCart();\n        })\n        .catch(error => {\n          this.setState({ isCartProcessing: false });\n          const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n          enqueueSnackbar(errorMsg, { variant: 'error' });\n        });\n    }\n  };\n\n  removeFromCart = product => {\n    const { cart } = this.state;\n    \n    this.setState({\n      cart: {\n        ...cart,\n        items: cart.items\n          .filter(prod => prod.sku !== product.sku)\n          .sort(this.compareItems),\n        price: {\n          ...cart.price,\n          amount: cart.price.amount - product.price.amount * product.quantity,\n          amount_without_discount: cart.price.amount_without_discount - product.price.amount_without_discount * product.quantity\n        }\n      }\n    });\n  };\n\n  changeItemQuantityInCart = (product, quantity) => {\n    const { enqueueSnackbar } = this.props;\n    const { cart, logToken } = this.state;\n\n    if (quantity <= 0) {\n      this.removeFromCart(product);\n      removeItemFromCart(product, cart.cartId, logToken)\n        .then(this.getCart);\n    } else {\n      const indexFind = cart.items.findIndex(elem => elem.sku === product.sku);\n      const cartItems = cart.items;\n      cartItems.splice(indexFind, 1, { ...product, quantity });\n      this.setState({ cart: { ...cart, items: cartItems.sort(this.compareItems) } });\n      changeItemQuantityCart(product, quantity, cart.cartId, logToken)\n        .then(this.getCart)\n        .catch(error => {\n          const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n          enqueueSnackbar(errorMsg, { variant: 'error' });\n        });\n    }\n  };\n\n  updateVirtualCurrencyBalance = () => {\n    const { enqueueSnackbar } = this.props;\n    const { logToken } = this.state;\n\n    this.setState({ isUserBalanceFetching: true });\n    getVirtualCurrencyBalance(logToken)\n      .then(response => {\n        this.setState({\n          isUserBalanceFetching: false,\n          userBalanceVirtualCurrency: response.data.items,\n        });\n      })\n      .catch(error => {\n        this.setState({ isUserBalanceFetching: false });\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      })\n  };\n\n  render() {\n    return (\n      <ProductContext.Provider\n        value={{\n          ...this.state,\n          setStateFrom: this.setStateFrom,\n          clearCart: this.clearCart,\n          setInventoryItems: this.setInventoryItems,\n          setVirtualCurrencies: this.setVirtualCurrencies,\n          setPhysicalItems: this.setPhysicalItems,\n          setVirtualItems: this.setVirtualItems,\n          setEntitlementItems: this.setEntitlementItems,\n          addToCart: this.addToCart,\n          showVCCart: this.showVCCart,\n          hideVCCart: this.hideVCCart,\n          buyByVC: this.buyByVC,\n          clearVCCart: this.clearVCCart,\n          createCart: this.createCart,\n          showCart: this.showCart,\n          changeItemQuantityInCart: this.changeItemQuantityInCart,\n          updateVirtualCurrencyBalance: this.updateVirtualCurrencyBalance,\n          hideCart: this.hideCart,\n          setSideMenuVisibility: this.setSideMenuVisibility,\n        }}\n      >\n        {this.props.children}\n      </ProductContext.Provider>\n    );\n  }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductContext, ProductConsumer };\n\nexport default withSnackbar(ProductProvider);\n","import React from 'react';\nimport styled from 'styled-components';\nimport Colorer from 'color';\nimport Dotdotdot from 'react-dotdotdot'\n\nimport Collapse from '@material-ui/core/Collapse';\nimport MUICardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst ProductCard = React.memo(({\n  image,\n  order,\n  name,\n  value,\n  description,\n  actionButtonContent,\n  onAction,\n  isLoading,\n}) => {\n  const [isShown, setShown] = React.useState(false);\n  const showCard = () => setShown(true);\n\n  const [isActionedCard, setActionedCard] = React.useState(false);\n  const handleAction = () => {\n    setActionedCard(true);\n    onAction();\n  }\n\n  const [isHovered, setHovered] = React.useState(false);\n  const handleMouseEnter = () => setHovered(true);\n  const handleMouseLeave = () => setHovered(false);\n\n  React.useEffect(() => {\n    if (!isLoading) {\n      setActionedCard(false);\n    }\n  }, [isLoading]);\n\n  React.useEffect(() => {\n    setTimeout(showCard, order * 100);\n  }, []);\n\n  return (\n    <CardAppear shown={isShown} hovered={isHovered}>\n      <Card\n        hovered={isHovered}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <CardImage image={image}/>\n        <CardContent>\n          <CardTitle>{name}</CardTitle>\n          <Collapse in={isHovered} timeout=\"auto\" collapsedHeight=\"50px\">\n            {isHovered\n              ? description\n              : (\n              <Dotdotdot animate clamp={2}>\n                {description}\n              </Dotdotdot>\n            )}\n          </Collapse>\n        </CardContent>\n        {(onAction || value) && (\n          <CardFooter>\n            {value && (\n              <CardQuantity>\n                {value}\n              </CardQuantity>\n            )}\n            {onAction && (\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                disabled={isLoading && isActionedCard}\n                onClick={handleAction}\n              >\n                {isLoading && isActionedCard ? <CircularProgress size={24} color=\"primary\"/> : actionButtonContent}\n              </Button>\n            )}\n          </CardFooter>\n        )}\n      </Card>\n    </CardAppear>\n  );\n});\n\nconst CardAppear = styled.div`\n  position: relative;\n  z-index: ${props => props.hovered ? 1 : 0};\n  width: ${({ theme }) => theme.shape.cardWidth};\n  height: ${({ theme }) => theme.shape.cardWidth};\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  opacity: ${props => props.shown ? 1 : 0};\n  transform: ${props => props.shown ? 'none' : 'translateY(20px)'};;\n`;\n\nconst Card = styled.div`\n  position: absolute;\n  color: ${({ theme }) => theme.palette.text.primary};\n  display: flex;\n  flex-direction: column;\n  width: ${({ theme }) => theme.shape.cardWidth};\n  min-height: ${({ theme }) => theme.shape.cardWidth};\n  background-color: ${({ theme, hovered }) => hovered ? theme.palette.background.default : 'transparent'};\n  box-shadow: ${({ theme, hovered }) => hovered ? theme.shadows[8] : 'none'};\n  transition: ${({ theme }) => theme.transitions.create(['box-shadow', 'background-color'])};\n  border-radius: ${({ theme }) => `${theme.shape.borderRadius}px`};\n`;\n\nconst CardContent = styled(MUICardContent)`\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0;\n  margin-bottom: 8px;\n`;\n\nconst CardTitle = styled.div`\n  color: ${({ theme }) => theme.palette.primary.contrastText};\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  font-weight: bolder;\n`;\n\nconst CardFooter = styled.div`\n  display: flex;\n  align-items: center;\n  border-top: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  padding: 8px 0;\n  height: 53px;\n  margin: 0px 16px 0 16px;\n`;\n\nconst CardImage = styled.div`\n  display: block;\n  margin-top: 8px;\n  height: 120px;\n  flex-shrink: 1;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CardQuantity = styled.div`\n  flex-grow: 1;\n  color: ${({ theme }) => theme.palette.primary.main};\n  font-weight: 600;\n`;\n\nexport { ProductCard };\n","import React from 'react';\n\nimport { ProductCard } from '../../components/ProductCard';\n\nexport const InventoryItem = React.memo(({\n  item,\n  order,\n  isLoading,\n  onConsume,\n}) => {\n\n  const handleItemConsume = () => onConsume(item, order);\n\n  return (\n    <ProductCard\n      image={item.image_url}\n      name={item.name}\n      order={order}\n      isLoading={isLoading}\n      value={`Quantity: ${item.quantity}`}\n      description={item.description}\n      actionButtonContent=\"Consume\"\n      onAction={item.remaining_uses ? handleItemConsume : undefined}\n    />\n  )\n});\n\n","import axios from 'axios';\nimport { Inventory } from 'store-js-sdk/src/inventory/inventory';\nimport { init } from 'store-js-sdk/src/init';\n\nconst CancelToken = axios.CancelToken;\nlet cancel = () => void 0;\n\nexport const loadInventory = async (projectId, loginToken) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectId}/user/inventory/items`;\n  const params = {\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(c => {\n      cancel();\n      cancel = c;\n    })\n  };\n  const response = await axios.get(URL, params);\n\n  return response.data.items.filter(x => x.type === 'virtual_good');\n}\n\nexport const consumeItem = async (projectId, loginToken, item) => {\n  init({ projectId, version: 'v2' });\n  const inventory = new Inventory(loginToken);\n  return await inventory.consumeItem(item.sku, 1, item.instance_id);\n}","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { Preloader } from '../../components/Preloader';\nimport { ProductContext } from '../../context';\nimport { InventoryItem } from './InventoryItem';\nimport { loadInventory, consumeItem } from './InventoryLoader';\n\nconst InventoryList = () => {\n  const {\n    cart,\n    logToken,\n    projectId,\n    setStateFrom,\n    inventoryItems,\n    isItemConsuming,\n    areInventoryItemsFetching,\n    setInventoryItems,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleConsumeItem = React.useCallback(item => {\n    setStateFrom('isItemConsuming', true);\n    consumeItem(projectId, logToken, item)\n      .then(() => {\n        const updateInventoryItemIndex = inventoryItems.findIndex(x => x.sku === item.sku);\n        const updatedInventoryItem = inventoryItems[updateInventoryItemIndex];\n\n        if (updatedInventoryItem) {\n          const newInventoryItems = updatedInventoryItem.quantity > 1 ? [\n            ...inventoryItems.slice(0, updateInventoryItemIndex),\n            {\n              ...updatedInventoryItem,\n              quantity: updatedInventoryItem.quantity - 1,\n            },\n            ...inventoryItems.slice(updateInventoryItemIndex + 1),\n          ] : [\n            ...inventoryItems.slice(0, updateInventoryItemIndex),\n            ...inventoryItems.slice(updateInventoryItemIndex + 1),\n          ];\n\n          setInventoryItems(newInventoryItems);\n        }\n\n        setStateFrom('isItemConsuming', false);\n      })\n      .catch(error => {\n        setStateFrom('isItemConsuming', false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  });\n\n  const loadInventoryItems = () => {\n    setStateFrom('areInventoryItemsFetching', true);\n    loadInventory(projectId, logToken)\n      .then(data => {\n        setInventoryItems(data);\n        setStateFrom('areInventoryItemsFetching', false);\n      })\n      .catch(error => {\n        setStateFrom('areInventoryItemsFetching', false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  }\n\n  React.useEffect(() => {\n    loadInventoryItems();\n  }, []);\n\n  React.useEffect(() => {\n    if (!areInventoryItemsFetching && cart.cartId && inventoryItems.length === 0) {\n      loadInventoryItems();\n    }\n  }, [inventoryItems.length, cart.cartId]);\n\n  const content = React.useMemo(() => inventoryItems.length > 0 ? (\n    <Content>\n      {inventoryItems.map((item, index) => (\n        <InventoryItem\n          order={index}\n          key={item.sku}\n          item={item}\n          isLoading={isItemConsuming}\n          onConsume={handleConsumeItem}\n        />\n      ))}\n    </Content>\n  ) : (\n    <EmptyText>Oops, you have nothing bought yet!</EmptyText>\n  ), [inventoryItems, isItemConsuming]);\n\n  return (\n    <Body>\n      {areInventoryItemsFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  padding: 30px 0;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  grid-gap: 30px;\n  grid-template-columns: ${({ theme }) => `repeat(auto-fit, minmax(\n    ${theme.shape.cardWidth}, \n    ${theme.shape.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nconst EmptyText = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n`;\n\nexport { InventoryList };\n","import { PhysicalGood } from 'store-js-sdk/src/physical-goods/physical-goods';\nimport { init } from 'store-js-sdk/src/init';\n\nexport const loadPhysicalGoods = async (projectId, loginToken) => {\n    //TODO добавить возможность использовать cancelToken в SDK\n    init({ projectId, version: 'v2' });\n    const physicalGood = new PhysicalGood(loginToken);\n    const response = await physicalGood.getPhysicalGoodList();\n    return response.data.items;\n};","import React from 'react';\nimport styled from 'styled-components';\n\nimport Avatar from '@material-ui/core/Avatar';\n\nconst Currency = ({ image, value, currency }) => (\n  <Body>\n    {image && <CurrencyIcon src={image} />}\n    {currency && <CurrencyAcronym>{currency}</CurrencyAcronym>}\n    {value}\n  </Body>\n);\n\nconst Body = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst CurrencyAcronym = styled.span`\n  margin-right: 5px;\n`;\n\nconst CurrencyIcon = styled(Avatar)`\n  && {\n    height: 1em;\n    width: 1em;\n    margin-right: 5px;\n  }\n`;\n\nexport { Currency };\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const PhysicalItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n}) => {\n\n  const handleItemAdd = () => addToCart(product);\n\n  const price = React.useMemo(() => (\n    <Currency\n      currency={product.price.currency}\n      value={Math.round(product.price.amount * 100) / 100} />\n  ), [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={<ShoppingCart />}\n      onAction={handleItemAdd}\n    />\n  )\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { ProductContext } from '../../context';\nimport { Preloader } from '../../components/Preloader';\nimport { loadPhysicalGoods } from './PhysicalListLoader';\nimport { PhysicalItem } from './PhysicalItem';\n\nconst PhysicalList = () => {\n  const {\n    logToken,\n    projectId,\n    addToCart,\n    setStateFrom,\n    physicalItems,\n    arePhysicalItemsFetching,\n    setPhysicalItems,\n    isCartProcessing,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const loadPhysicalGoodsList = () => {\n    setStateFrom('arePhysicalItemsFetching', true);\n    loadPhysicalGoods(projectId, logToken)\n      .then(data => {\n        setPhysicalItems(data);\n        setStateFrom('arePhysicalItemsFetching', false);\n      })\n      .catch(error => {\n        enqueueSnackbar(error.message, { variant: 'error' });\n        setStateFrom('arePhysicalItemsFetching', false);\n      });\n  }\n\n  React.useEffect(() => {\n    loadPhysicalGoodsList();\n  }, [projectId]);\n\n  const content = React.useMemo(() => physicalItems.length > 0 && (\n    <Content>\n      {physicalItems.map((item, index) => (\n        <PhysicalItem\n          order={index}\n          key={item.sku}\n          product={item}\n          isLoading={isCartProcessing}\n          addToCart={addToCart}\n        />\n      ))}\n    </Content>\n  ), [physicalItems, isCartProcessing]);\n\n  return (\n    <Body>\n      {arePhysicalItemsFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  height: 100%;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${({ theme }) => `repeat(auto-fit, minmax(\n    ${theme.shape.cardWidth}, \n    ${theme.shape.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nexport { PhysicalList };\n","import React from 'react';\nimport styled from 'styled-components';\nimport MUITabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst GroupSwitcher = ({\n  groups,\n  activeGroup,\n  onGroupChange,\n}) => {\n  const handleGroupChange = (_, groupID) => onGroupChange(groupID);\n\n  return (\n    <Tabs\n      value={activeGroup}\n      onChange={handleGroupChange}\n      variant=\"scrollable\"\n      textColor=\"primary\"\n      indicatorColor=\"primary\"\n    >\n      {groups.map(group => (\n        <Tab\n          value={group.id}\n          key={group.id}\n          label={group.label}\n        />\n      ))}\n    </Tabs>\n  );\n}\n\nconst Tabs = styled(MUITabs)`\n  padding: 30px 0;\n  \n  & .MuiTabs-flexContainer {\n    justify-content: center;\n  };\n`;\n\nexport { GroupSwitcher };\n","import axios from 'axios';\n\nexport const loadVirtualItems = async projectID => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_items`;\n  const response = await axios.get(url);\n\n  return response.data.items;\n}\n\nexport const loadVirtualCurrencies = async projectID => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_currency`;\n  const response = await axios.get(url);\n\n  return response.data.items;\n}\n\nexport const rewardItems = async data => {\n  const url = 'https://livedemo.xsolla.com/store-demo/api/index.php';\n  const response = await axios.post(url, data);\n\n  return response.data;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport MUITextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\n\nimport { ProductContext } from '../../context';\nimport { GroupSwitcher } from '../../components/GroupSwitcher';\nimport { Preloader } from '../../components/Preloader.js';\nimport { loadVirtualCurrencies, loadVirtualItems, rewardItems } from './ManageInventoryLoader';\n\nconst users = [\n  {\n    id: 'd342dad2-9d59-11e9-a384-42010aa8003f',\n    name: 'support@xsolla.com',\n  },\n  {\n    id: '7d8b1f52-7d3f-400b-acd8-46e3a4368596',\n    name: 'v.legotkin@xsolla.com',\n  },\n  {\n    id: '27bc1227-48a3-4da8-bb86-f8d093f68805',\n    name: 'r.ushakov@xsolla.com',\n  },\n  {\n    id: 'a7d10a4e-3f68-43cc-a6b2-893d2c68fd14',\n    name: 'p.sanachev@xsolla.com',\n  },\n];\n\nconst groups = [\n  {\n    id: 'items',\n    label: 'Items',\n  },\n  {\n    id: 'currencies',\n    label: 'Currencies',\n  },\n];\n\nconst ManageInventory = () => {\n  const { projectId, updateVirtualCurrencyBalance } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [userID, setUserID] = React.useState(null);\n  const [activeGroup, setActiveGroup] = React.useState(null);\n  const [selectedItem, setSelectedItem] = React.useState(null);\n  const [quantity, setQuantity] = React.useState(1);\n  const [isItemProcessing, setItemProcessing] = React.useState(false);\n  \n  const [areManageItemsFetching, setManageItemsFetching] = React.useState(false);\n  const [manageItems, setManageItems] = React.useState([]);\n\n  const [areManageCurrenciesFetching, setManageCurrenciesFetching] = React.useState(false);\n  const [manageCurrencies, setManageCurrencies] = React.useState([]);\n\n  const isFetching = areManageItemsFetching || areManageCurrenciesFetching;\n  const userOptions = React.useMemo(() => users.map(x => <MenuItem value={x.id}>{x.name}</MenuItem>, users));\n  const itemsOptions = React.useMemo(() => manageItems.map(x => <MenuItem value={x.sku}>{x.name}</MenuItem>, manageItems));\n  const currenciesOptions = React.useMemo(() => manageCurrencies.map(x => <MenuItem value={x.sku}>{x.name}</MenuItem>, manageCurrencies));\n\n  const groupsContent = {\n    items: {\n      name: 'Item',\n      items: manageItems,\n      options: itemsOptions,\n    },\n    currencies: {\n      name: 'Currency',\n      items: manageCurrencies,\n      options: currenciesOptions,\n    },\n  };\n\n  const processItem = type => {\n    if (!selectedItem || !userID) {\n      return;\n    }\n\n    const data = { type, user: userID, item: selectedItem, count: quantity };\n    setItemProcessing(true);\n    enqueueSnackbar('Operation is processing', { variant: 'info' });\n    rewardItems(data)\n      .then(() => {\n        setItemProcessing(false);\n        updateVirtualCurrencyBalance();\n        enqueueSnackbar('Complete', { variant: 'success' });\n      })\n      .catch(error => {\n        setItemProcessing(false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  }\n  \n  const handleFormSubmit = event => event.preventDefault();\n  const handleRewardItem = () => processItem('reward');\n  const handleRevokeItem = () => processItem('revoke');\n  const handleUserSelect = event => setUserID(event.target.value);\n  const handleItemSelect = event => setSelectedItem(event.target.value);\n  const handleQuantityChange = event => {\n    const value = Number(event.target.value);\n    setQuantity(value >= 1 ? value : 1);\n  };\n\n  React.useEffect(() => {\n    setUserID(users[0] ? users[0].id : null);\n  }, [users]);\n\n  React.useEffect(() => {\n    setActiveGroup(groups[0] ? groups[0].id : null);\n  }, [groups]);\n\n  React.useEffect(() => {\n    if (activeGroup && groupsContent[activeGroup] && groupsContent[activeGroup].items[0]) {\n      setSelectedItem(groupsContent[activeGroup].items[0].sku);\n      setQuantity(1);\n    }\n  }, [manageItems, manageCurrencies, activeGroup]);\n\n  React.useEffect(() => {\n    if (manageItems.length === 0) {\n      setManageItemsFetching(true);\n      loadVirtualItems(projectId)\n        .then(items => {\n          setManageItemsFetching(false);\n          setManageItems(items);\n        })\n        .catch(error => {\n          setManageItemsFetching(false);\n          enqueueSnackbar(error.message, { variant: 'error' })\n        });\n    }\n  }, [manageItems]);\n\n  React.useEffect(() => {\n    if (manageItems.length === 0) {\n      setManageCurrenciesFetching(true);\n      loadVirtualCurrencies(projectId)\n        .then(items => {\n          setManageCurrenciesFetching(false);\n          setManageCurrencies(items);\n        })\n        .catch(error => {\n          setManageCurrenciesFetching(false);\n          enqueueSnackbar(error.message, { variant: 'error' })\n        });\n    }\n  }, [manageCurrencies]);\n    \n  return (\n    <Body>\n      {isFetching\n        ? <Preloader />\n        : (\n          <Form onSubmit={handleFormSubmit}>\n            <TextField\n              select\n              label=\"User\"\n              value={userID}\n              color=\"primary\"\n              onChange={handleUserSelect}\n            >\n              {userOptions}\n            </TextField>\n            <GroupSwitcher\n              groups={groups}\n              activeGroup={activeGroup}\n              onGroupChange={setActiveGroup}\n            />\n            <Items>\n              {groupsContent[activeGroup] && (\n                <TextField\n                  select\n                  label={groupsContent[activeGroup].name}\n                  value={selectedItem}\n                  color=\"primary\"\n                  onChange={handleItemSelect}\n                >\n                  {groupsContent[activeGroup].options}\n                </TextField>\n              )}\n              <TextField\n                type=\"number\"\n                label=\"Quantity\"\n                value={quantity}\n                color=\"primary\"\n                onChange={handleQuantityChange}\n              />\n            </Items>\n            <FormFooter>\n              <FormActions>\n                {isItemProcessing && <Preloader size={24} />}\n                <RewardButton\n                  type=\"submit\"\n                  variant=\"contained\"\n                  disabled={isItemProcessing}\n                  onClick={handleRewardItem}\n                >\n                  Reward\n                </RewardButton>\n                <Button\n                  variant=\"contained\"\n                  disabled={isItemProcessing}\n                  onClick={handleRevokeItem}\n                >\n                  Revoke\n                </Button>\n              </FormActions>\n            </FormFooter>\n          </Form>\n        )\n      }\n    </Body>\n  );\n};\n\nconst Body = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 50px;\n`;\n\nconst Form = styled.form`\n  max-width: 400px;\n  width: 100%;\n  padding: 20px;\n`;\n\nconst TextField = styled(MUITextField)`\n  width: 100%;\n`;\n\nconst Items = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 20px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px 0;\n`;\n\nconst FormActions = styled.div`\n  position: relative;\n`;\n\nconst RewardButton = styled(Button)`\n  && {\n    margin-right: 10px;\n  }\n`;\n\nexport { ManageInventory };\n","import axios from 'axios';\n\nexport const loadVirtualItems = async (projectID, token) => {\n  const URL = `https://store.xsolla.com/api/v1/project/${projectID}/items/groups`\n  const response = await axios.get(\n    URL,\n    {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }\n  );\n\n  const [...groups] = await Promise.all(response.data.groups.map(async g => {\n    const virtualItemsByGroup = await loadVirtualItemsByGroup(projectID, g.external_id);\n    return {\n      groupID: g.external_id,\n      groupName: g.name,\n      items: virtualItemsByGroup\n    };\n  }));\n\n  return groups;\n};\n\nconst loadVirtualItemsByGroup = async (projectID, groupID) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_items/group/${groupID}`\n  const response = await axios.get(URL);\n\n  return response.data.items;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const VirtualItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n  buyByVC,\n  isPurchased,\n}) => {\n  const hasVirtualCurrencyPrice = product.virtual_prices && product.virtual_prices.length > 0;\n\n  const handleBuyByVC = React.useCallback(() => buyByVC(product), []);\n  const handleItemAdd = React.useCallback(() => addToCart(product), []);\n  \n  const buttonAction = React.useMemo(() => hasVirtualCurrencyPrice ? handleBuyByVC : handleItemAdd, [hasVirtualCurrencyPrice]);\n  const buttonContent = React.useMemo(() => hasVirtualCurrencyPrice ? 'Buy now' : <ShoppingCart />, [product]);\n  const price = React.useMemo(() => {\n    if (isPurchased) {\n      return <Purchased>Purchased</Purchased>;\n    }\n\n    if (hasVirtualCurrencyPrice) {\n      return (\n        <Currency\n          image={product.virtual_prices[0].image_url}\n          value={product.virtual_prices[0].amount}\n        />\n      );\n    }\n\n    return (\n      <Currency\n        currency={product.price.currency}\n        value={Math.round(product.price.amount * 100) / 100}\n      />\n    );\n  }, [product, hasVirtualCurrencyPrice, isPurchased]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={buttonContent}\n      onAction={!isPurchased ? buttonAction : undefined}\n    />\n  )\n});\n\nconst Purchased = styled.div`\n  color: ${({ theme }) => theme.palette.text.primary};\n  opacity: 0.8;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { ProductContext } from '../../context';\nimport { loadInventory } from '../inventory/InventoryLoader';\nimport { Preloader } from '../../components/Preloader.js';\nimport { GroupSwitcher } from '../../components/GroupSwitcher';\nimport { loadVirtualItems } from './VirtualItemsLoader';\nimport { VirtualItem } from './VirtualItem';\n\nconst VirtualList = () => {\n  const {\n    cart,\n    logToken,\n    virtualItems,\n    inventoryItems,\n    addToCart,\n    buyByVC,\n    projectId,\n    areVirtualItemsFetching,\n    areInventoryItemsFetching,\n    isCartProcessing,\n    setInventoryItems,\n    setVirtualItems,\n    setStateFrom,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [activeGroup, setActiveGroup] = React.useState(null);\n\n  const groups = React.useMemo(() => virtualItems.map(x => ({ id: x.groupID, label: x.groupName })), [virtualItems]);\n\n  React.useEffect(() => {\n    setActiveGroup(virtualItems[0] ? virtualItems[0].groupID : null);\n  }, [virtualItems]);\n\n  React.useEffect(() => {\n    if (!areVirtualItemsFetching && logToken && virtualItems.length === 0) {\n      setStateFrom('areVirtualItemsFetching', true);\n      loadVirtualItems(projectId, logToken).then(virtualItems => {\n        setVirtualItems(virtualItems);\n        setStateFrom('areVirtualItemsFetching', false);\n      }).catch(error => {\n        setStateFrom('areVirtualItemsFetching', false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n    }\n  }, [virtualItems]);\n\n  React.useEffect(() => {\n    if (!areInventoryItemsFetching && logToken && inventoryItems.length === 0 && cart.cartId) {\n      setStateFrom('areInventoryItemsFetching', true);\n      loadInventory(projectId, logToken)\n        .then(data => {\n          setInventoryItems(data);\n          setStateFrom('areInventoryItemsFetching', false);\n        })\n        .catch(error => {\n          setStateFrom('areInventoryItemsFetching', false);\n          enqueueSnackbar(error.message, { variant: 'error' });\n        });\n    }\n  }, [inventoryItems, cart.cartId]);\n\n  const content = React.useMemo(() => virtualItems.length > 0 && (\n    <>\n      <GroupSwitcher\n        groups={groups}\n        activeGroup={activeGroup}\n        onGroupChange={setActiveGroup}\n      />\n      {virtualItems.map(g => activeGroup === g.groupID && (\n        <React.Fragment key={g.groupID}>\n          <Title>\n            {g.groupName}\n          </Title>\n          <Group>\n            {g.items.map((item, index) => (\n              <VirtualItem\n                order={index}\n                key={item.sku}\n                product={item}\n                isPurchased={item.inventory_options.consumable === null && inventoryItems.some(x => item.sku === x.sku)}\n                addToCart={addToCart}\n                isLoading={isCartProcessing}\n                buyByVC={buyByVC}\n              />\n            ))}\n          </Group>\n        </React.Fragment>\n      ))}\n    </>\n  ), [activeGroup, virtualItems, inventoryItems, isCartProcessing]);\n\n  return (\n    <Body>\n      {areVirtualItemsFetching || areInventoryItemsFetching\n        ? <Preloader />\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  background-color: transparent;\n`;\n\nconst Group = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${({ theme }) => `repeat(auto-fit, minmax(\n    ${theme.shape.cardWidth}, \n    ${theme.shape.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nconst Title = styled.div`\n  color: ${({ theme }) => theme.palette.primary.contrastText};\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nexport { VirtualList };\n","const size = {\n  mobileS: '320px',\n  mobileM: '375px',\n  mobileL: '425px',\n  tablet: '768px',\n  laptop: '1024px',\n  laptopL: '1440px',\n  desktop: '1920px',\n  retina: '2560px'\n}\n\nexport const device = {\n  mobileS: `(max-width: ${size.mobileS})`,\n  mobileM: `(max-width: ${size.mobileM})`,\n  mobileL: `(max-width: ${size.mobileL})`,\n  tablet: `(max-width: ${size.tablet})`,\n  laptop: `(max-width: ${size.laptop})`,\n  laptopL: `(max-width: ${size.laptopL})`,\n  desktop: `(max-width: ${size.desktop})`,\n  retina: `(max-width: ${size.retina})`\n};","import React from 'react';\nimport styled from 'styled-components';\nimport IconButton from '@material-ui/core/IconButton';\nimport MUIDeleteIcon from \"@material-ui/icons/Delete\";\nimport MUIIncrementIcon from \"@material-ui/icons/AddBox\";\nimport MUIDecrementIcon from \"@material-ui/icons/IndeterminateCheckBox\";\n\nimport { device } from '../../styles/devices';\n\nconst CartItemComponent = ({ item, changeItemQuantity }) => {\n  const calcPrice = (price, quantity) => Math.round(price * quantity * 100) / 100;\n  const handleQuantityDec = () => changeItemQuantity(item, item.quantity - 1);\n  const handleQuantityInc = () => changeItemQuantity(item, item.quantity + 1);\n  \n  return (\n    <CartItem>\n      <CartItemImage image={item.image_url} />\n      <CartItemBody>\n        <ItemName>{item.name}</ItemName>\n        <ItemPrice>\n          <CartItemTotal>\n            {item.price.currency} {calcPrice(item.price.amount, item.quantity)}\n          </CartItemTotal>\n          {item.quantity > 1 && (\n            <CartItemPriceForOne>\n              {item.price.currency} {calcPrice(item.price.amount, 1)} for one item\n            </CartItemPriceForOne>\n          )}\n        </ItemPrice>\n      </CartItemBody>\n      <PriceInfo>\n        <QuantityActions>\n          {item.quantity > 1\n            ? (\n              <IconButton color=\"inherit\" onClick={handleQuantityDec}>\n                <DecrementIcon />\n              </IconButton>\n            ) : (\n              <IconButton color=\"inherit\" onClick={handleQuantityDec}>\n                <DeleteIcon />\n              </IconButton>\n            )\n          }\n          <ItemQuantity>{item.quantity}</ItemQuantity>\n          <IconButton color=\"inherit\" onClick={handleQuantityInc}>\n            <IncrementIcon />\n          </IconButton>\n        </QuantityActions>\n      </PriceInfo>\n    </CartItem>\n  );\n}\n\nconst CartItem = styled.div`\n  display: grid;\n  grid-template-columns: 0.7fr 1.3fr 1fr;\n  color: ${({ theme }) => theme.palette.text.primary};\n  overflow: hidden;\n  height: 130px;\n\n  @media ${device.mobileL} {\n    height: 185px;\n    grid-template-columns: 0.9fr 1.1fr;\n    grid-template-rows: 120px 1fr;\n  }\n`;\n\nconst CartItemImage = styled.div`\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CartItemBody = styled.div`  \n  padding: 10px;\n`;\n\nconst ItemName = styled.div`\n  font-weight: bolder;\n  margin-bottom: 5px;\n`;\n\nconst QuantityActions = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n`;\n\nconst ItemQuantity = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n`;\n\nconst PriceInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  @media ${device.mobileL} {\n    grid-column: 2 / 2;\n  }\n`;\n\nconst ItemPrice = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  @media ${device.mobileL} {\n    flex-grow: 1;\n  }\n`;\n\nconst CartItemTotal = styled.div`\n  font-weight: 600;\n`;\n\nconst CartItemPriceForOne = styled.div`\n  font-size: 0.8em;\n  opacity: 0.3;\n`;\n\nconst DeleteIcon = styled(MUIDeleteIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\nconst DecrementIcon = styled(MUIDecrementIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\nconst IncrementIcon = styled(MUIIncrementIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\n\nexport { CartItemComponent as CartItem };","import currencyFormat from \"currency-format\";\nimport currencyNumberFormat from \"currency-number-format\";\n\n// CURRENCY CODE\nfunction defaultCurrency(currency) {\n  return {\n    name: currency,\n    fractionSize: 2,\n    symbol: {\n      grapheme: currency,\n      template: null,\n      rtl: false\n    },\n    uniqSymbol: null\n  };\n}\nfunction getCurrencyOptions(currency) {\n  return currency\n    ? currencyFormat[currency.toUpperCase()] || defaultCurrency(currency)\n    : defaultCurrency(currency);\n}\n\n// LOCALE\nvar defaultLocale = \"en_US\";\nvar localesMap = {\n  ar: \"ar_AE\",\n  bg: \"bg_BG\",\n  cn: \"zh_CN\",\n  cs: \"cs_CZ\",\n  de: \"de_DE\",\n  en: \"en_US\",\n  es: \"es_ES\",\n  fr: \"fr_FR\",\n  he: \"he_IL\",\n  it: \"it_IT\",\n  ja: \"ja_JP\",\n  ko: \"ko_KR\",\n  pl: \"pl_PL\",\n  pt: \"pt_BR\",\n  ro: \"ro_RO\",\n  ru: \"ru_RU\",\n  th: \"th_TH\",\n  tr: \"tr_TR\",\n  tw: \"zh_TW\",\n  vi: \"vi_VN\"\n};\nfunction formatLocale(locale) {\n  return [\n    locale.substr(0, 2).toLowerCase(),\n    locale.substr(3, 2).toUpperCase()\n  ].join(\"_\");\n}\nfunction getLanguageOptions(locale) {\n  return locale\n    ? currencyNumberFormat[formatLocale(locale)] ||\n        currencyNumberFormat[defaultLocale]\n    : currencyNumberFormat[defaultLocale];\n}\nfunction map2to5Locale(locale) {\n  return locale && locale.length === 5\n    ? locale\n    : localesMap[locale] || defaultLocale;\n}\n\n// CURRENCY\nexport function getFormattedCurrency(amount, currency, locale) {\n  var parsedAmount = parseFloat(amount);\n  if (!currency || isNaN(parsedAmount)) {\n    return {\n      formattedCurrency: amount + \" \" + currency,\n      dir: \"ltr\"\n    };\n  }\n\n  var currencyOptions = getCurrencyOptions(currency);\n  var languageOptions = getLanguageOptions(locale);\n\n  var signAmount = parsedAmount < 0 ? \"-\" : \"\";\n  var fractionSize = currencyOptions.fractionSize;\n\n  var symbol = currencyOptions.symbol;\n  var thousandSeparator = languageOptions.thousands;\n  var decimalSeparator = languageOptions.decimal;\n  // Spike for escaping case when grapheme is arabic symbol, and russian style separators was chosen\n  if ((!symbol || symbol.rtl) && languageOptions.thousands === \" \") {\n    thousandSeparator = \",\";\n    decimalSeparator = \".\";\n  }\n\n  var splittedAmount = Math.abs(parsedAmount)\n    .toFixed(fractionSize)\n    .split(\".\");\n  splittedAmount[0] = splittedAmount[0].replace(\n    /(\\d)(?=(\\d{3})+(?!\\d))/g,\n    \"$1\" + thousandSeparator\n  );\n  var formattedAmount = splittedAmount.join(decimalSeparator);\n\n  var formattedCurrency = signAmount + formattedAmount + \" \" + currency;\n  var rtl = false;\n  if (symbol && symbol.template) {\n    formattedCurrency =\n      signAmount +\n      symbol.template\n        .replace(\"1\", formattedAmount)\n        .replace(\"$\", symbol.grapheme);\n    rtl = symbol.rtl;\n  }\n\n  return {\n    formattedCurrency: formattedCurrency,\n    dir: rtl ? \"rtl\" : \"ltr\"\n  };\n}\n","\nexport const generateUUID = () =>\n  ([1e7] + -1e3 + -4e3 + -8e3 + -1e11)\n    .replace(/[018]/g, c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\n","import axios from \"axios\";\n\nexport const purchaseItems = async data => {\n  const url = `https://livedemo.xsolla.com/store-demo/api/index.php`;\n  const response = await axios.post(url, data);\n\n  return response.data;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport Loader from '@material-ui/core/CircularProgress';\nimport MUIDivider from '@material-ui/core/Divider';\n\nimport { ProductContext } from '../../context';\nimport { CartItem } from '../cart/CartItem';\nimport { getFormattedCurrency } from '../../utils/formatCurrency';\nimport { generateUUID } from '../../utils/generateUUID';\nimport { device } from '../../styles/devices';\nimport { purchaseItems } from './ServerPurchaseLoader';\n\nconst ServerPurchase = () => {\n  const { cart, changeItemQuantityInCart } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [isPurchasing, setPurchasing] = React.useState();\n\n  const calculateSubtotal = cart => {\n    const subtotal = cart.reduce((acc, x) => acc + x.price.amount * x.quantity, 0);\n    return Math.round(subtotal * 100) / 100;\n  };\n\n  const purchase = React.useCallback(() => {\n    const data = {\n      type: 'purchase',\n      user: 'd342dad2-9d59-11e9-a384-42010aa8003f',\n      platform: 'playstation_network',\n      purchase: {\n        amount: cart.price.amount,\n        currency: cart.price.currency,\n        external_purchase_id: generateUUID(),\n        external_purchase_date: (new Date()).toISOString()\n      },\n      items: cart.items.map(({ sku, quantity }) => ({ sku, quantity })),\n    };\n\n    setPurchasing(true);\n    enqueueSnackbar('Operation is processing', { variant: 'info' });\n    purchaseItems(data)\n      .then(() => {\n        setPurchasing(false);\n        enqueueSnackbar('Complete', { variant: 'success' });\n      })\n      .catch(error => {\n        setPurchasing(false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  }, []);\n\n  const cartContent = React.useMemo(\n    () => cart.items.length > 0\n      ? (\n        <CartItems>\n          {cart.items.map(x => (\n            <React.Fragment key={x.sku}>\n              <CartItem\n                item={x}\n                changeItemQuantity={changeItemQuantityInCart}\n              />\n              <Divider/>\n            </React.Fragment>\n          ))}\n        </CartItems>\n      ) : (\n        <EmptyText>\n          Oops, you have nothing bought yet!\n        </EmptyText>\n      ),\n    [cart]\n  );\n\n  const footerContent = React.useMemo(() => cart.items.length > 0 && (\n    <CartFooter>\n      <Subtotal>\n        Subtotal:\n        <Price>\n          {\n            getFormattedCurrency(\n              calculateSubtotal(cart.items),\n              cart.price.currency || cart.items[0].price.currency\n            ).formattedCurrency\n          }\n        </Price>\n      </Subtotal>\n      <CartActions>\n        <Button\n          variant=\"contained\"\n          disabled={isPurchasing}\n          onClick={purchase}\n        >\n          {isPurchasing ? <Loader size={24} color=\"secondary\" /> : 'Grant purchase'}\n        </Button>\n      </CartActions>\n    </CartFooter>\n  ), [cart, isPurchasing]);\n\n  return (\n    <Body>\n      <Content>\n        {cartContent}\n        {footerContent}\n      </Content>\n    </Body>\n  );\n};\n\nconst Body = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 50px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  max-width: 600px;\n  padding: 0 20px;\n`;\n\nconst CartItems = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  padding: 16px 0;\n`;\n\nconst EmptyText = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${({ theme }) => theme.palette.text.primary};\n  height: 100%;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  padding: 24px 0 24px 0;\n`;\n\nconst CartActions = styled.div`\n  display: flex;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n  }\n`;\n\nconst Subtotal = styled.div`\n  display: flex;\n  font-weight: bold; \n  color: ${({ theme }) => theme.palette.text.primary};\n  margin-right: 10px;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n    margin-bottom: 15px;\n    margin-right: 0;\n  }\n`;\n\nconst Price = styled.div`\n  min-width: 80px;\n  text-align: right;\n`;\n\nconst Divider = styled(MUIDivider)`\n  &.MuiDivider-root {\n    background-color: ${({ theme }) => theme.palette.primary.contrastText};\n    opacity: 0.1;\n    margin-bottom: 5px;\n  }\n`;\n\nexport { ServerPurchase };\n","import axios from 'axios';\nimport { init } from 'store-js-sdk/src/init';\n\nexport const getEntitlement = async loginToken => {\n  const url = 'https://store.xsolla.com/api/v2/projects/entitlement';\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`\n    },\n  };\n  const response = await axios.get(url, params);\n\n  return response.data;\n};\n\nexport const redeem = async (projectId, loginToken, redeemCode, sku) => {\n  init({ projectId, version: 'v2' });\n  const url = 'https://store.xsolla.com/api/v1/game_delivery/xsolla_login/redeem_key';\n  const data = {\n    project_id: projectId,\n    digital_content_sku: sku,\n    language: \"en\",\n    key: redeemCode\n  };\n\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`\n    },\n  };\n\n  const response = await axios.post(url, data, params);\n\n  return response.data;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\nimport MUITextField from '@material-ui/core/TextField';\nimport MUIButton from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { ProductContext } from '../../context';\nimport { ProductCard } from '../../components/ProductCard';\nimport { getEntitlement, redeem } from './EntitlementLoader';\n\nconst EntitlementList = () => {\n  const {\n    projectId,\n    logToken,\n    setEntitlementItems,\n    entitlementItems,\n    areEntitlementItemsFetching,\n    isRedeeming,\n    setStateFrom,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [sku, setSku] = React.useState('');\n  const [code, setCode] = React.useState('');\n\n  const handleCodeChange = React.useCallback(event => setCode(event.target.value));\n  const handleSkuChange = React.useCallback(event => setSku(event.target.value));\n\n  const loadEntitlementItems = () => {\n    setStateFrom('areEntitlementItemsFetching', true);\n    getEntitlement(logToken)\n      .then(items => {\n        setStateFrom('areEntitlementItemsFetching', false);\n        setEntitlementItems(items);\n      })\n      .catch(error => {\n        setStateFrom('areEntitlementItemsFetching', false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  }\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setStateFrom('isRedeeming', true);\n    redeem(projectId, logToken, code, sku)\n      .then(() => {\n        setStateFrom('isRedeeming', false);\n        loadEntitlementItems();\n      })\n      .catch(error => {\n        setStateFrom('isRedeeming', false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  }\n\n  React.useEffect(() => {\n    loadEntitlementItems();\n  }, []);\n\n  const entitlementList = React.useMemo(() => entitlementItems.length > 0\n    ? entitlementItems.map((item, key) => (\n        <ProductCard\n          key={item.digital_content_sku}\n          order={key}\n          name={item.name}\n          description={item.description}\n          image={item.image_url}\n        />\n      ))\n    : (\n    <div>\n      Oops, you have no games yet!\n    </div>\n  ), [entitlementItems]);\n\n  return (\n    <Body>\n      <Form onSubmit={handleSubmit}>\n        <TextField\n          color=\"primary\"\n          placeholder=\"Enter your code\"\n          onChange={handleCodeChange}\n          value={code}\n        />\n        <TextField\n          color=\"primary\"\n          placeholder=\"Enter sku of your game\"\n          onChange={handleSkuChange}\n          value={sku}\n        />\n        <FormFooter>\n          <Button color=\"secondary\" type=\"submit\" variant=\"contained\">\n            {isRedeeming ? <CircularProgress size={24} color=\"primary\" /> : 'Redeem Code'}\n          </Button>\n        </FormFooter>\n      </Form>\n      <div>\n        {areEntitlementItemsFetching ? <CircularProgress size={24} color=\"primary\" /> : entitlementList}\n      </div>\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-top: 50px;\n`;\n\nconst Form = styled.form`\n  max-width: 400px;\n  width: 100%;\n  padding: 20px;\n`;\n\nconst TextField = styled(MUITextField)`\n  && {\n    width: 100%;\n    margin-bottom: 20px;\n  }\n`;\n\nconst Button = styled(MUIButton)`\n  && {\n    min-width: 140px;\n  }\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px 0;\n`;\n\nexport { EntitlementList };\n","const routes = {\n  items: '/',\n  currencies: '/crystals',\n  physical: '/physical',\n  inventory: '/inventory',\n  entitlement: '/entitlement',\n  manage: '/manage',\n  purchase: '/purchase',\n  specificProject: '/projects/:projectID'\n}\n\nconst navItems = [\n  {\n    route: routes.items,\n    label: 'Items'\n  },\n  {\n    route: routes.currencies,\n    label: 'Currencies',\n  },\n  {\n    route: routes.physical,\n    label: 'Merchandise',\n  },\n  {\n    route: routes.inventory,\n    label: 'Inventory',\n  },\n  {\n    route: routes.entitlement,\n    label: 'Entitlement',\n  },\n  {\n    route: routes.manage,\n    label: 'Manage',\n  },\n  {\n    route: routes.purchase,\n    label: 'Server purchase',\n  },\n];\n\nexport const getMenuItems = items => navItems\n  .filter(x => items.includes(x.route))\n  .sort((a, b) => items.indexOf(a.route) - items.indexOf(b.route));\n\nexport { routes, navItems };","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\nimport styled from 'styled-components';\nimport Colorer from 'color';\nimport IconClose from '@material-ui/icons/Close';\nimport Button from '@material-ui/core/Button';\nimport MUIModal from '@material-ui/core/Modal';\nimport IconButton from '@material-ui/core/IconButton';\nimport Grow from '@material-ui/core/Grow';\nimport Backdrop from '@material-ui/core/Backdrop';\n\nimport { ProductContext } from '../../context';\nimport { getFormattedCurrency } from '../../utils/formatCurrency';\nimport { getPsTokenBuyCart } from '../../components/StoreLoader';\nimport { device } from '../../styles/devices';\nimport { routes } from '../../utils/routes';\nimport { CartItem } from './CartItem';\n\nconst Cart = () => {\n  const [buyButtonDisabled, setBuyButtonDisabled] = React.useState(false);\n  const {\n    cart,\n    hideCart,\n    logToken,\n    clearCart,\n    isCartShown,\n    changeItemQuantityInCart,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n\n  const calculateSubtotal = cart => {\n    const subtotal = cart.reduce((acc, x) => acc + x.price.amount * x.quantity, 0);\n    return Math.round(subtotal * 100) / 100;\n  };\n\n  const buyAnotherPlatform = () => {\n    if (buyButtonDisabled || cart.items.length <= 0) {\n      return;\n    }\n\n    history.push(routes.purchase);\n    hideCart();\n  };\n\n  const buyButtonAction = () => {\n    hideCart();\n    getPsTokenBuyCart(cart.cartId, logToken)\n      .then(response => {\n        setBuyButtonDisabled(true);\n        window.xPayStationInit(response.data.token, {sandbox: true, host: 'sandbox-secure.xsolla.com'});\n        window.XPayStationWidget.open();\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.CLOSE,\n          () => setBuyButtonDisabled(false),\n        );\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.STATUS_DONE,\n          clearCart\n        );\n      })\n      .catch(error => {\n        setBuyButtonDisabled(false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  };\n\n  return (\n    <Modal\n      open={isCartShown}\n      onClose={hideCart}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{ timeout: 250 }}\n    >\n      <Grow in={isCartShown} timeout={250}>\n        <CartContent>\n          <CartHeader>\n            <h4>Cart</h4>\n            <IconButton color=\"inherit\" onClick={hideCart}>\n              <IconClose />\n            </IconButton>\n          </CartHeader>\n          <CartList>\n            {cart.items.length > 0\n              ? cart.items.map(item => (\n                <CartItem\n                  item={item}\n                  changeItemQuantity={changeItemQuantityInCart}\n                />\n              ))\n              : <p>Empty cart</p>\n            }\n          </CartList>\n          <CartFooter>\n            {cart.items.length > 0 && (\n              <Subtotal>\n                Subtotal:\n                <Price>\n                  {\n                    getFormattedCurrency(\n                      calculateSubtotal(cart.items),\n                      cart.price.currency || cart.items[0].price.currency\n                    ).formattedCurrency\n                  }\n                </Price>\n              </Subtotal>\n            )}\n            <CartActions>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                disabled={cart.items.length === 0}\n                style={{ marginRight: '7px' }}\n                onClick={buyAnotherPlatform}\n              >\n                Buy on PS4\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                disabled={cart.items.length === 0}\n                onClick={buyButtonAction}\n              >\n                Buy on Xsolla\n              </Button>\n            </CartActions>\n          </CartFooter>\n        </CartContent>\n      </Grow>\n    </Modal>\n  );\n}\n\nconst Modal = styled(MUIModal)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst CartContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-radius: ${({ theme }) => `${theme.shape.borderRadius}px`};\n  background-color: ${({ theme }) => theme.palette.background.default};\n  color: ${({ theme }) => theme.palette.text.primary};\n  padding: 0 32px;\n  width: 680px;\n  max-height: 80vh;\n  outline: none;\n\n  @media ${device.tablet} {\n    padding: 0 16px;\n    max-height: none;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n`;\n\nconst CartHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: ${({ theme }) => theme.palette.text.primary};\n  border-bottom: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  z-index: 10;\n  padding: 24px 0 8px 0;\n`;\n\nconst CartList = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  flex-grow: 1;\n  padding: 16px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  flex-wrap: wrap;\n  border-top: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  padding: 24px 0 24px 0;\n`;\n\nconst CartActions = styled.div`\n  display: flex;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n  }\n`;\n\nconst Subtotal = styled.div`\n  display: flex;\n  flex-grow: 1;\n  font-weight: bold;\n  margin-right: 10px;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n    margin-bottom: 15px;\n    margin-right: 0;\n  }\n`;\n\nconst Price = styled.div`\n  min-width: 80px;\n  text-align: right;\n`;\n\nexport { Cart };\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { device } from '../../styles/devices';\n\nconst VCCartItem = React.memo(({ item }) => {\n  return (\n    <Body>\n      <Image image={item.image_url} />\n      <div>\n        <Name>{item.name}</Name>\n        <div>{item.description}</div>\n      </div>\n    </Body>\n  );\n});\n\nconst Body = styled.div`\n  display: grid;\n  grid-template-columns: 0.7fr 1.3fr 1fr;\n  overflow: hidden;\n  height: 130px;\n\n  @media ${device.mobileL} {\n    height: 185px;\n    grid-template-columns: 0.9fr 1.1fr;\n    grid-template-rows: 120px 1fr;\n  }\n`;\n\nconst Image = styled.div`\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst Name = styled.div`\n  font-weight: bolder;\n  margin-bottom: 5px;\n`;\n\nexport { VCCartItem };\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\nimport Colorer from 'color';\nimport IconButton from '@material-ui/core/IconButton';\nimport IconClose from '@material-ui/icons/Close';\nimport Button from '@material-ui/core/Button';\nimport MUIModal from '@material-ui/core/Modal';\nimport Grow from '@material-ui/core/Grow';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { ProductContext } from '../../context';\nimport { quickPurchaseBuyVirtualCurrency } from '../../components/StoreLoader';\nimport { device } from '../../styles/devices';\nimport { VCCartItem } from './VCCartItem';\n\nconst VCCart = () => {\n  const {\n    vcCart,\n    isVCCartShown,\n    projectId,\n    logToken,\n    clearVCCart,\n    setStateFrom,\n    hideVCCart,\n    isVCCartProcessing,\n    updateVirtualCurrencyBalance,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const buyByVirtualCurrencyButtonAction = () => {\n    setStateFrom('isVCCartProcessing', true);\n    quickPurchaseBuyVirtualCurrency(projectId, vcCart.items[0], logToken)\n      .then(() => {\n        setStateFrom('isVCCartProcessing', false);\n        clearVCCart();\n        updateVirtualCurrencyBalance();\n      })\n      .catch(error => {\n        setStateFrom('isVCCartProcessing', false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  };\n\n  return (\n    <Modal\n      open={isVCCartShown}\n      onClose={hideVCCart}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{ timeout: 250 }}\n    >\n      <Grow in={isVCCartShown} timeout={250}>\n        <CartContent>\n          <CartHeader>\n            <h4>Confirm</h4>\n            <IconButton color=\"inherit\" onClick={hideVCCart}>\n              <IconClose />\n            </IconButton>\n          </CartHeader>\n          <CartList>\n            {vcCart.items.length > 0\n              ? vcCart.items.map(item => <VCCartItem item={item}/>)\n              : <p>Empty cart</p>\n            }\n          </CartList>\n          <CartFooter>\n            <Button\n              variant=\"contained\"\n              disabled={isVCCartProcessing}\n              onClick={buyByVirtualCurrencyButtonAction}\n            >\n              {isVCCartProcessing ? <CircularProgress size={24} color=\"secondary\"/> : 'Buy'}\n            </Button>\n          </CartFooter>\n        </CartContent>\n      </Grow>\n    </Modal>\n  );\n}\n\nconst Modal = styled(MUIModal)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst CartContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-radius: ${({ theme }) => `${theme.shape.borderRadius}px`};\n  background-color: ${({ theme }) => theme.palette.background.default};\n  color: ${({ theme }) => theme.palette.text.primary};\n  padding: 0 32px;\n  width: 680px;\n  max-height: 80vh;\n  outline: none;\n\n  @media ${device.tablet} {\n    padding: 0 16px;\n    max-height: none;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n`;\n\nconst CartHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  z-index: 10;\n  padding: 24px 0 8px 0;\n`;\n\nconst CartList = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  flex-grow: 1;\n  padding: 16px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  border-top: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  padding: 24px 0 24px 0;\n`;\n\nexport { VCCart };\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const VCItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n}) => {\n\n  const handleItemAdd = () => addToCart(product);\n\n  const price = React.useMemo(() => (\n    <Currency\n      currency={product.price.currency}\n      value={Math.round(product.price.amount * 100) / 100} />\n  ), [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={<ShoppingCart />}\n      onAction={handleItemAdd}\n    />\n  )\n});\n","import axios from 'axios';\n\nexport const loadVirtualCurrencies = async (projectID, token) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_currency/package`;\n  const response = await axios.get(URL, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n\n  return response.data.items;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { Preloader } from '../../components/Preloader';\nimport { ProductContext } from '../../context';\nimport { VCItem } from './VCItem';\nimport { loadVirtualCurrencies } from './VCLoader';\n\nconst VCList = () => {\n  const {\n    logToken,\n    projectId,\n    addToCart,\n    setStateFrom,\n    virtualCurrencies,\n    areVirtualCurrenciesFetching,\n    isCartProcessing,\n    setVirtualCurrencies,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    setStateFrom('areVirtualCurrenciesFetching', true);\n    loadVirtualCurrencies(projectId, logToken)\n      .then(data => {\n        setVirtualCurrencies(data);\n        setStateFrom('areVirtualCurrenciesFetching', false);\n      })\n      .catch(error => {\n        enqueueSnackbar(error.message, { variant: 'error' });\n        setStateFrom('areVirtualCurrenciesFetching', false);\n      });\n  }, []);\n\n  const content = React.useMemo(() => virtualCurrencies.length > 0 && (\n    <Content>\n      {virtualCurrencies.map((currency, index) => (\n        <VCItem\n          order={index}\n          key={currency.sku}\n          product={currency}\n          isLoading={isCartProcessing}\n          addToCart={addToCart}\n        />\n      ))}\n    </Content>\n  ), [virtualCurrencies, isCartProcessing]);\n\n  return (\n    <Body>\n      {areVirtualCurrenciesFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  background-color: transparent;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${({ theme }) => `repeat(auto-fit, minmax(\n    ${theme.shape.cardWidth}, \n    ${theme.shape.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nexport { VCList };\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { ProductConsumer } from \"../context\";\nimport Cookie, { parseJwt } from \"./Cookie\";\n\nexport default class XLogin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shown: true,\n      logToken: null,\n      psToken: null\n    };\n  }\n\n  unauthorizedFlow = () => {\n    this.setState({ logToken: null });\n    this.setState({ shown: true });\n  };\n\n  authorizedFlow = tkn => {\n    this.setState({ logToken: tkn, shown: false });\n    this.user = parseJwt(tkn);\n    this.setStateFrom(\"user\", this.user);\n    this.createCart();\n  };\n\n  render() {\n    return (\n      <ProductConsumer>\n          {valueFromContext => {\n            this.setStateFrom = valueFromContext.setStateFrom;\n            this.createCart = valueFromContext.createCart;\n\n            return (\n              <div>\n                <CssXpop\n                  style={{ display: this.state.shown ? \"flex\" : \"none\" }}\n                >\n                  <CssXpopB>\n                    <CssLoginInfo>\n                      Current project: <b>{window.xProjectId}</b>\n                    </CssLoginInfo>\n\n                    <CssLoginPop>\n                      <div id=\"xl_auth\"></div>\n                    </CssLoginPop>\n\n                    <CssLoginInfo>\n                      {myProjects.map((onePr, i) => {\n                        let pr = onePr[\"project_id\"];\n                        let login = onePr[\"login_id\"];\n                        let url = `https://xsolla.github.io/store-demo/#/`;\n                        let urlFull = `${url}?project_id=${pr}&login_id=${login}`;\n                        return (\n                          <div key={pr + i} style={{ marginBottom: \"1em\" }}>\n                            <div style={{ fontSize: \"0.4em\" }}>\n                              <a href={urlFull}>\n                                {pr}: {onePr.projectName}\n                              </a>\n                            </div>\n                          </div>\n                        );\n                      })}\n                      <p>\n                        Open any Xsolla Store using GET parameters <br />\n                        <b>project_id</b> and <b>login_id</b> (login must point\n                        back to https://xsolla.github.io/store-demo/#/)\n                      </p>\n                    </CssLoginInfo>\n                  </CssXpopB>\n                  <CssXpopZ />\n                </CssXpop>\n              </div>\n            );\n          }}\n        </ProductConsumer>\n    );\n  }\n\n  componentDidMount() {\n    window.XloginInit();\n    let cke = Cookie();\n    cke ? this.authorizedFlow(cke) : this.unauthorizedFlow();\n  }\n}\n\nconst CssXpop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  min-height: 100%;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  overflow-y: scroll;\n  padding: 40px 0;\n`;\nconst CssXpopB = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  min-height: 100%;\n  z-index: 100;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n`;\nconst CssXpopZ = styled.div`\n  position: fixed;\n  z-index: 99;\n  background: rgba(0, 0, 0, 0.8);\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n`;\n\nconst CssLoginInfo = styled.div`\n  padding: 20px 70px;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n  flex-grow: 1;\n  font-size: 22px;\n  width: 600px;\n  & a {\n    /* font-family: 'PS Mono', Courier, monospace; */\n    text-decoration: underline;\n    font-size: 28px;\n    line-height: 0px;\n  }\n`;\nconst CssLoginPop = styled.div`\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  text-align: center;\n  padding: 36px;\n  overflow: hidden;\n  margin: 0 70px;\n  border-radius: 8px;\n`;\n\nconst myProjects = [\n  {\n    projectName: \"Xsolla Store Demo\",\n    project_id: 47278,\n    login_id: \"fb2d7c69-bf25-11e9-9244-42010aa80004\"\n  }\n];\n","import React from 'react';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport MUIMenu from '@material-ui/core/Menu';\nimport Hidden from '@material-ui/core/Hidden';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\nimport IconButton from '@material-ui/core/IconButton';\nimport Loader from '@material-ui/core/CircularProgress';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Button from '@material-ui/core/Button';\nimport CartIcon from '@material-ui/icons/ShoppingCart';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport LogoutIcon from '@material-ui/icons/ExitToAppOutlined';\n\nimport { routes, getMenuItems } from '../utils/routes';\nimport { device } from '../styles/devices';\nimport { Currency } from '../components/Currency';\nimport { ProductContext } from '../context';\nimport { eraseCookie } from './Cookie';\nimport XLogin from './XLogin.js';\n\nconst Navbar = ({ isSpecificProject }) => {\n  const {\n    logToken,\n    user,\n    userBalanceVirtualCurrency,\n    projectId,\n    showCart,\n    setSideMenuVisibility,\n    isUserBalanceFetching,\n    isSideMenuShown,\n  } = React.useContext(ProductContext);\n  const { pathname } = useLocation();\n\n  const [menuAnchor, setMenuAnchor] = React.useState(null);\n  const handleMenuClose = () => setMenuAnchor(null);\n  const handleMenuOpen = event => setMenuAnchor(event.currentTarget);\n\n  const toggleSideMenu = () => setSideMenuVisibility(!isSideMenuShown);\n\n  const logOutHandler = () => {\n    eraseCookie(\"xsolla_login_token\", null);\n    eraseCookie(\"xsolla_last_click_id\", null);\n    window.location.reload();\n  };\n\n  const isLogged = logToken && user;\n\n  const generalMenuItems = React.useMemo(() => getMenuItems([\n    routes.items,\n    routes.currencies,\n    ...projectId === 44056 ? [routes.physical] : [],\n  ]), [routes, projectId]);\n\n  const isLocationExistsInTabs = React.useMemo(\n    () => generalMenuItems.some(x => x.route === pathname),\n    [generalMenuItems, pathname]\n  );\n\n  const userMenuItems = React.useMemo(() => getMenuItems([\n    routes.inventory,\n    routes.entitlement,\n    routes.manage,\n    routes.purchase,\n  ]), [routes]);\n\n  return React.useMemo(() => (\n    <Header>\n      {!isSpecificProject && (\n        <>\n          <Hidden mdDown>\n            <Tabs\n              value={isLocationExistsInTabs ? pathname : false}\n              textColor=\"primary\"\n              indicatorColor=\"primary\"\n              component=\"nav\"\n            >\n              {generalMenuItems.map(x => (\n                <Tab\n                  key={x.route}\n                  component={NavLink}\n                  label={x.label}\n                  value={x.route}\n                  to={x.route}\n                />\n              ))}\n            </Tabs>\n          </Hidden>\n\n          <Hidden lgUp>\n            <IconButton color=\"primary\" onClick={toggleSideMenu}>\n              <MenuIcon />\n            </IconButton>\n          </Hidden>\n\n          {isLogged && (\n            <LoginPanel>\n              {isUserBalanceFetching\n                ? <Loader size={24} color=\"primary\"/>\n                : userBalanceVirtualCurrency.map(vc => (\n                  <VCCurrency key={vc.sku}>\n                    <Currency image={vc.image_url} value={vc.amount} />\n                  </VCCurrency>\n                ))\n              }\n\n              <Hidden mdDown>\n                <UserMail\n                  endIcon={Boolean(menuAnchor) ? <ExpandLessIcon /> : <ExpandMoreIcon/>}\n                  onClick={handleMenuOpen}\n                >\n                  {user.email}\n                </UserMail>\n              </Hidden>\n            </LoginPanel>\n          )}\n\n          <XLogin />\n\n          {!logToken && (\n            <LoginButton\n              variant=\"outlined\"\n              color=\"secondary\"\n              size=\"small\"\n            >\n              Log In\n            </LoginButton>\n          )}\n          {isLogged && projectId !== 44056 && (\n          <LogoutButton\n              variant=\"outlined\"\n              size=\"small\"\n              onClick={logOutHandler}\n            >\n              <LogoutIcon size=\"inherit\" />\n            </LogoutButton>\n          )}\n\n          <Menu\n            anchorEl={menuAnchor}\n            getContentAnchorEl={null}\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n            open={Boolean(menuAnchor)}\n            onClose={handleMenuClose}\n          >\n            {userMenuItems.map(x => (\n              <Link\n                key={x.route}\n                onClick={handleMenuClose}\n                activeClassName=\"active\"\n                to={x.route}\n              >\n                {x.label}\n              </Link>\n            ))}\n          </Menu>\n        </>\n      )}\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        size=\"small\"\n        onClick={showCart}\n      >\n        <CartIcon size=\"inherit\" />\n        <Hidden xsDown>\n          cart\n        </Hidden>\n      </Button>\n    </Header>\n  ), [\n    pathname, \n    isLogged, \n    userBalanceVirtualCurrency, \n    userMenuItems, \n    projectId, \n    menuAnchor, \n    isSpecificProject\n  ]);\n}\n\nconst Menu = styled(MUIMenu)`\n  .MuiMenu-list {\n    background-color: ${({ theme }) => theme.palette.background.default};\n  }\n`;\n\nconst Tabs = styled(MUITabs)`\n  &.MuiTabs-root {\n    height: 100%\n  }\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    text-transform: uppercase;\n    font-size: 1.4rem;\n    font-weight: 700;\n    line-height: 1.4rem;\n    min-width: 50px;\n  }\n`;\n\nconst Link = styled(NavLink)`\n  display: flex;\n  padding: 15px 20px;\n  min-width: 200px;\n  align-items: center;\n  text-transform: uppercase;\n  text-decoration: none;\n  font-size: 1.2rem;\n  font-weight: 700;\n  line-height: 1.2rem;\n  height: 100%;\n  color: #d6e0e7;\n  border: none;\n\n  &:hover {\n    color: #ff005b;\n    text-decoration: none;\n  }\n\n  &.active {\n    color: #ff005b;\n  }\n`;\n\nconst LogoutButton = styled(Button)`\n  &.MuiButton-root {\n    margin-right: 10px;\n  }\n`;\n\nconst VCCurrency = styled.div`\n  color: ${({ theme }) => theme.palette.text.primary};\n  margin-right: 10px;\n`;\n\nconst LoginPanel = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  flex-grow: 1;\n\n  @media ${device.mobileL} {\n    justify-content: center;\n  }\n`;\n\nconst LoginButton = styled(Button)`\n  &.MuiButton-root {\n    margin-right: 10px;\n    font-size: 0.8rem;\n  }\n`;\n\nconst UserMail = styled(Button)`\n  && {\n    font-family: 'Roboto';\n    text-transform: uppercase;\n    color: ${({ theme }) => theme.palette.primary.main};\n    margin: 0 1rem;\n  }\n`;\n\nconst Header = styled.header`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  height: 50px;\n  padding: 0 15px;\n  font-family: 'Helvetica Neue', 'Roboto', Arial, Helvetica, sans-serif;\n  background-color: ${({ theme }) => theme.palette.background.default};\n`;\n\nexport { Navbar };\n","import React from 'react';\nimport Colorer from 'color';\nimport styled from 'styled-components';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport Drawer from '@material-ui/core/SwipeableDrawer';\nimport MUIIconButton from '@material-ui/core/IconButton';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport MUIDivider from '@material-ui/core/Divider';\nimport Tabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\nimport LogoutIcon from '@material-ui/icons/ExitToAppOutlined';\n\nimport { ProductContext } from '../context';\nimport { routes, getMenuItems } from '../utils/routes';\nimport { eraseCookie } from './Cookie';\n\nconst MobileNavbar = () => {\n  const {\n    isSideMenuShown,\n    user,\n    logToken,\n    projectId,\n    setSideMenuVisibility,\n  } = React.useContext(ProductContext);\n  const location = useLocation();\n\n  const closeMenu = () => setSideMenuVisibility(false);\n  const openMenu = () => setSideMenuVisibility(true);\n\n  const logOutHandler = () => {\n    eraseCookie(\"xsolla_login_token\", null);\n    eraseCookie(\"xsolla_last_click_id\", null);\n    window.location.reload();\n  };\n\n  React.useEffect(() => closeMenu, []);\n\n  const isLogged = logToken && user;\n\n  const generalMenuItems = React.useMemo(() => getMenuItems([\n    routes.items,\n    routes.currencies,\n    ...projectId === 44056 ? [routes.physical] : [],\n  ]), [projectId]);\n\n  const userMenuItems = React.useMemo(() => getMenuItems([\n    routes.inventory,\n    routes.entitlement,\n    routes.manage,\n    routes.purchase,\n  ]), []);\n\n  return (\n    <Drawer\n      open={isSideMenuShown}\n      anchor=\"left\"\n      onOpen={openMenu}\n      onClose={closeMenu}\n    >\n      <Content>\n        <Header>\n        {isLogged && projectId !== 44056 && (\n          <IconButton onClick={logOutHandler}>\n            <LogoutIcon size=\"inherit\" />\n          </IconButton>\n          )}\n          <UserMail>{user.email}</UserMail>\n          <IconButton onClick={closeMenu}>\n            <ChevronLeftIcon />\n          </IconButton>\n        </Header>\n        <Tabs\n          value={location.pathname}\n          onChange={closeMenu}\n          component=\"nav\"\n          variant=\"scrollable\"\n          color=\"primary\"\n          indicatorColor=\"primary\"\n          orientation=\"vertical\"\n        \n        >\n        {generalMenuItems.map(x => (\n          <Tab\n            component={NavLink}\n            label={x.label}\n            value={x.route}\n            to={x.route}\n          />\n        ))}\n        <MenuDivider />\n        {userMenuItems.map(x => (\n          <Tab\n            component={NavLink}\n            label={x.label}\n            value={x.route}\n            to={x.route}\n          />\n        ))}\n        </Tabs>\n      </Content>\n    </Drawer>\n  );\n};\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  height: 100%;\n  background-color: ${({ theme }) => theme.palette.background.default};\n`;\n\nconst MenuDivider = styled(MUIDivider)`\n  &.MuiDivider-root {\n    background-color: ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n    margin: 5px 0;\n  }\n`;\n\nconst IconButton = styled(MUIIconButton)`\n  &.MuiIconButton-root {\n    color: ${({ theme }) => theme.palette.primary.main};\n  }\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    padding: 15px;\n    font-size: 1.3rem;\n    line-height: 1.3rem;\n    font-weight: 700;\n  }\n\n  & .MuiTab-wrapper {\n    align-items: flex-start;\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 49px;\n  border-bottom: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n`;\n\nconst UserMail = styled.div`\n  flex-grow: 1;\n  padding: 0 15px;\n  text-transform: uppercase;\n  font-family: Roboto;\n  color: ${({ theme }) => theme.palette.primary.main};\n`;\n\nexport { MobileNavbar };\n","import React from 'react';\nimport Colorer from 'color';\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\nimport styled, { css } from 'styled-components';\nimport Hidden from '@material-ui/core/Hidden';\n\nimport { InventoryList } from './features/inventory/InventoryList';\nimport { PhysicalList } from './features/physical/PhysicalList';\nimport { ManageInventory } from './features/manage/ManageInventory';\nimport { VirtualList } from './features/virtual/VirtualList';\nimport { ServerPurchase } from './features/serverPurchase/ServerPurchase';\nimport { EntitlementList } from './features/entitlement/EntitlementList';\nimport { Cart } from './features/cart/Cart';\nimport { VCCart } from './features/cart/VCCart';\nimport { VCList } from './features/virtualCurrenciesList/VCList';\nimport { Navbar } from './components/Navbar';\nimport { MobileNavbar } from './components/MobileNavbar';\nimport { routes } from './utils/routes';\nimport { ProductContext } from './context';\n\nconst App = () => {\n  const { updateVirtualCurrencyBalance, clearCart, projectId } = React.useContext(ProductContext);\n\n  const isSpecificProject = useRouteMatch({\n    path: routes.specificProject,\n    strict: true,\n    sensitive: true\n  });\n\n  React.useEffect(() => {\n    clearCart();\n  }, [projectId]);\n\n  React.useEffect(() => {\n    updateVirtualCurrencyBalance();\n  }, []);\n\n  return React.useMemo(() => (\n    <Body>\n      <Navbar isSpecificProject={isSpecificProject} />\n      <Hidden lgUp>\n        <MobileNavbar />\n      </Hidden>\n      <Cart />\n      <VCCart />\n      <Content>\n        <Switch>\n          <Route path={routes.items} exact component={VirtualList} />\n          <Route path={routes.currencies} component={VCList} />\n          <Route path={routes.physical} component={PhysicalList} />\n          <Route path={routes.inventory} component={InventoryList} />\n          <Route path={routes.manage} component={ManageInventory} />\n          <Route path={routes.entitlement} component={EntitlementList} />\n          <Route path={routes.purchase} component={ServerPurchase} />\n          <Route path={routes.specificProject} component={PhysicalList} />\n        </Switch>\n      </Content>\n    </Body>\n  ), [isSpecificProject]);\n};\n\nconst Body = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  font-family: ${({ theme }) => theme.typography.fontFamily};\n  background: ${({ theme }) =>\n      `url(${theme.palette.background.imageUrl}) ${Colorer(theme.palette.background.default).alpha(0.8)}`\n    };\n  background-attachment: fixed;\n  background-size: cover;\n  background-blend-mode: darken;\n`;\n\nconst Content = styled.div`\n  position: relative;\n  height: 100%;\n  overflow-y: auto;\n`;\n\nexport default App;\n","import { createMuiTheme } from '@material-ui/core';\n\nconst mainTheme = createMuiTheme({\n  typography: {\n    fontFamily: '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif'\n  },\n  palette: {\n    primary: {\n      main: '#FF005B',\n      contrastText: '#F6FAFF',\n    },\n    secondary: {\n      main: '#D6E0E7',\n      contrastText: '#000',\n    },\n    text: {\n      primary: '#D6E0E7',\n      secondary: '#D6E0E7',\n    },\n    background: {\n      default: '#011627',\n      paper: '#011627',\n      imageUrl: 'https://res.cloudinary.com/maiik/image/upload/v1549624607/Xsolla/HomePage_Hero_Illustration_1440_oabqmk.jpg',\n    },\n    action: {\n      selected: '#D6E0E712',\n      hover: '#D6E0E708',\n    }\n  },\n  shape: {\n    borderRadius: 6,\n    cardWidth: '300px',\n  },\n});\n\nexport { mainTheme };\n","import React from 'react';\nimport { SnackbarProvider } from 'notistack';\nimport { ThemeProvider } from 'styled-components';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport MuiThemeProvider from '@material-ui/styles/ThemeProvider';\nimport { useRouteMatch } from 'react-router-dom';\n\nimport ProductProvider from './context';\nimport { mainTheme } from './styles/theme';\nimport { device } from './styles/devices';\nimport { routes } from './utils/routes';\n\nconst notificationPosition = {\n  vertical: 'bottom',\n  horizontal: 'right',\n};\n\nconst Provider = ({ children }) => {\n  const isMobile = useMediaQuery(`@media ${device.mobileL}`);\n\n  const match = useRouteMatch({\n    path: routes.specificProject,\n    strict: true,\n    sensitive: true\n  });\n\n  return (\n    <SnackbarProvider\n      anchorOrigin={notificationPosition}\n      dense={isMobile}\n      maxSnack={3}\n      preventDuplicate={isMobile}\n    >\n      <MuiThemeProvider theme={mainTheme}>\n        <ThemeProvider theme={mainTheme}>\n          <ProductProvider projectId={match ? match.params.projectID : window.xProjectId}>\n            {children}\n          </ProductProvider>\n        </ThemeProvider>\n      </MuiThemeProvider>\n    </SnackbarProvider>\n  )\n};\n\nexport default Provider;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport './index.css';\nimport App from './App';\nimport Provider from './provider';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <HashRouter basename='/'>\n    <Provider>\n      <App />\n    </Provider>\n  </HashRouter>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}