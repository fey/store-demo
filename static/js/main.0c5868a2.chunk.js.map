{"version":3,"sources":["components/Preloader.js","components/Cookie.js","components/StoreLoader.js","context.js","components/ProductCard.js","features/inventory/InventoryItem.js","features/inventory/InventoryLoader.js","features/inventory/InventoryList.js","features/physical/PhysicalListLoader.js","components/Currency.js","features/physical/PhysicalItem.js","features/physical/PhysicalList.js","components/GroupSwitcher.js","features/manage/ManageInventoryLoader.js","features/manage/ManageInventory.js","features/virtual/VirtualItemsLoader.js","features/virtual/VirtualItem.js","features/virtual/VirtualList.js","styles/devices.js","features/cart/CartItem.js","utils/formatCurrency.js","utils/generateUUID.js","features/serverPurchase/ServerPurchaseLoader.js","features/serverPurchase/ServerPurchase.js","features/entitlement/EntitlementLoader.js","features/entitlement/EntitlementList.js","utils/routes.js","features/cart/Cart.js","features/cart/VCCartItem.js","features/cart/VCCart.js","features/virtualCurrenciesList/VCItem.js","features/virtualCurrenciesList/VCLoader.js","features/virtualCurrenciesList/VCList.js","components/XLogin.js","components/Navbar.js","components/MobileNavbar.js","App.js","styles/theme.js","provider.js","serviceWorker.js","index.js"],"names":["Preloader","size","CssPreloader","CircularProgress","color","styled","div","Cookie","window","xProjectId","o","location","search","split","join","e","n","t","exec","decodeURIComponent","getQueryParams","token","Date","setTime","getTime","toUTCString","document","cookie","setCookie","history","pushState","pathname","length","i","charAt","substring","indexOf","getCookie","eatCookie","eraseCookie","CancelToken","axios","cartGettingCancel","getCart","projectId","loginToken","cartId","a","url","params","headers","Authorization","cancelToken","c","get","response","data","quantityChangingCancel","changeItemQuantityCart","sku","quantity","JSON","stringify","put","createCart","post","undefined","removeItemFromCart","delete","getPsTokenBuyCart","sandbox","settings","ui","theme","quickPurchaseBuyVirtualCurrency","product","virtual_prices","getVirtualCurrencyBalance","ProductContext","React","createContext","ProductProvider","state","props","logToken","user","isSideMenuShown","userBalanceVirtualCurrency","isUserBalanceFetching","virtualItems","areVirtualItemsFetching","virtualCurrencies","areVirtualCurrenciesFetching","physicalItems","arePhysicalItemsFetching","inventoryItems","areInventoryItemsFetching","isItemConsuming","entitlementItems","areEntitlementItemsFetching","isRedeeming","isVCCartShown","isVCCartProcessing","vcCart","items","vcPriceSku","isCartShown","isCartCreating","isCartLoading","isQuantityChanging","isItemAdding","isItemRemoving","cart","price","amount","amount_without_discount","currency","setStateFrom","stateName","stateValue","setState","showCart","hideCart","showVCCart","hideVCCart","setSideMenuVisibility","setEntitlementItems","setInventoryItems","setPhysicalItems","filter","item","Boolean","setVirtualCurrencies","setVirtualItems","enqueueSnackbar","then","cart_id","sort","compareItems","catch","error","__CANCEL__","errorMsg","errorMessage","message","variant","id","clearCart","updateVirtualCurrencyBalance","b","buyByVC","clearVCCart","addToCart","some","elem","removeFromCart","prod","changeItemQuantityInCart","updatedItemIndex","findIndex","updatedItem","slice","Provider","value","this","children","PureComponent","ProductConsumer","Consumer","withSnackbar","ProductCard","memo","image","order","name","description","actionButtonContent","onAction","isLoading","useState","isShown","setShown","showCard","isHovered","setHovered","useEffect","setTimeout","CardAppear","shown","hovered","Card","onMouseEnter","onMouseLeave","CardImage","CardTitle","Collapse","in","timeout","collapsedHeight","animate","clamp","CardFooter","CardQuantity","Button","disabled","onClick","shape","cardWidth","palette","text","primary","background","default","shadows","transitions","create","borderRadius","CardContent","MUICardContent","contrastText","Colorer","alpha","string","main","InventoryItem","onConsume","image_url","remaining_uses","loadInventory","URL","x","type","consumeItem","init","version","inventory","Inventory","instance_id","InventoryList","useContext","useSnackbar","activeItemID","setActiveItemID","handleConsumeItem","useCallback","updateInventoryItemIndex","updatedInventoryItem","newInventoryItems","loadInventoryItems","content","useMemo","Content","map","index","key","EmptyText","Body","loadPhysicalGoods","physicalGood","PhysicalGood","getPhysicalGoodList","Currency","CurrencyIcon","src","CurrencyAcronym","span","Avatar","PhysicalItem","Math","round","PhysicalList","handleItemAdding","GroupSwitcher","groups","activeGroup","onGroupChange","onChange","_","groupID","textColor","indicatorColor","group","Tab","label","Tabs","MUITabs","loadVirtualItems","projectID","loadVirtualCurrencies","rewardItems","users","ManageInventory","userID","setUserID","setActiveGroup","selectedItem","setSelectedItem","setQuantity","isItemProcessing","setItemProcessing","areManageItemsFetching","setManageItemsFetching","manageItems","setManageItems","areManageCurrenciesFetching","setManageCurrenciesFetching","manageCurrencies","setManageCurrencies","isFetching","userOptions","MenuItem","itemsOptions","currenciesOptions","groupsContent","options","currencies","processItem","count","Form","onSubmit","event","preventDefault","select","target","Items","Number","FormFooter","FormActions","RewardButton","form","TextField","MUITextField","Promise","all","g","loadVirtualItemsByGroup","external_id","virtualItemsByGroup","groupName","VirtualItem","isPurchased","hasVirtualCurrencyPrice","handleBuyByVC","handleItemAdd","buttonAction","buttonContent","Purchased","VirtualList","Fragment","Title","Group","inventory_options","consumable","device","mobileS","mobileM","mobileL","tablet","laptop","laptopL","desktop","retina","CartItemComponent","changeItemQuantity","removeItem","calcPrice","CartItem","CartItemImage","CartItemBody","ItemName","ItemPrice","CartItemTotal","CartItemPriceForOne","PriceInfo","QuantityActions","IconButton","DecrementIcon","DeleteIcon","ItemQuantity","IncrementIcon","MUIDeleteIcon","MUIDecrementIcon","MUIIncrementIcon","defaultCurrency","fractionSize","symbol","grapheme","template","rtl","uniqSymbol","getFormattedCurrency","locale","parsedAmount","parseFloat","isNaN","formattedCurrency","dir","currencyOptions","currencyFormat","toUpperCase","getCurrencyOptions","languageOptions","currencyNumberFormat","substr","toLowerCase","formatLocale","getLanguageOptions","signAmount","thousandSeparator","thousands","decimalSeparator","decimal","splittedAmount","abs","toFixed","replace","formattedAmount","purchaseItems","ServerPurchase","isPurchasing","setPurchasing","purchase","platform","external_purchase_id","crypto","getRandomValues","Uint8Array","toString","external_purchase_date","toISOString","cartContent","CartItems","footerContent","CartFooter","Subtotal","Price","subtotal","reduce","acc","calculateSubtotal","CartActions","Divider","MUIDivider","getEntitlement","redeem","redeemCode","project_id","digital_content_sku","language","EntitlementList","setSku","code","setCode","handleCodeChange","handleSkuChange","loadEntitlementItems","entitlementList","placeholder","MUIButton","routes","physical","entitlement","manage","specificProject","navItems","route","getMenuItems","includes","Cart","buyButtonDisabled","setBuyButtonDisabled","useHistory","cartSubtotal","open","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","Grow","CartContent","CartHeader","CartList","Loader","Progress","style","marginRight","push","xPayStationInit","host","XPayStationWidget","on","eventTypes","CLOSE","STATUS_DONE","Modal","MUIModal","LinearProgress","VCCartItem","Image","Name","VCCart","VCItem","VCList","XLogin","unauthorizedFlow","authorizedFlow","tkn","base64","parse","atob","parseJwt","psToken","valueFromContext","CssXpop","display","CssXpopB","CssLoginInfo","CssLoginPop","myProjects","onePr","pr","login","urlFull","marginBottom","fontSize","href","projectName","CssXpopZ","XloginInit","cke","Component","login_id","Navbar","isSpecificProject","useLocation","menuAnchor","setMenuAnchor","handleMenuClose","handleMenuOpen","currentTarget","toggleSideMenu","logOutHandler","reload","isLogged","generalMenuItems","isLocationExistsInTabs","userMenuItems","Header","Hidden","mdDown","component","NavLink","to","lgUp","LoginPanel","vc","VCCurrency","UserMail","endIcon","email","LoginButton","LogoutButton","anchorEl","getContentAnchorEl","transformOrigin","vertical","horizontal","anchorOrigin","Link","activeClassName","xsDown","Menu","MUIMenu","MUITab","header","MobileNavbar","closeMenu","anchor","onOpen","orientation","MenuDivider","MUIIconButton","typography","fontFamily","imageUrl","App","useRouteMatch","path","strict","sensitive","exact","mainTheme","createMuiTheme","secondary","paper","action","selected","hover","notificationPosition","isMobile","useMediaQuery","match","dense","maxSnack","preventDuplicate","hostname","ReactDOM","render","basename","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"yiBAIA,IAAMA,EAAY,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAH,OAChB,kBAACC,EAAD,KACE,kBAACC,EAAA,EAAD,CAAkBF,KAAMA,EAAMG,MAAM,cAMlCF,EAAeG,IAAOC,IAAV,K,gDCmCH,SAASC,IACtB,OAAO,QAAUC,OAAOC,WACpB,4hBAjDY,WAChB,IA2BIC,EAWJ,OATIF,OAAOG,SAASC,SAClBF,EAVF,SAAwBA,GACtBA,EAAIA,EAAEG,MAAM,KAAKC,KAAK,KACtB,IAAK,IAAIC,EAAGC,EAAI,GAAIC,EAAI,wBAA0BF,EAAIE,EAAEC,KAAKR,IAC3DM,EAAEG,mBAAmBJ,EAAE,KAAOI,mBAAmBJ,EAAE,IACrD,OAAOC,EAMHI,CAAeZ,OAAOG,SAASC,QAAQS,OAEzCX,IAnBc,SAACA,EAAGK,GACpB,IAAIC,EAAI,IAAIM,KACZN,EAAEO,QAAQP,EAAEQ,UAAY,OACxB,IAAIP,EAAI,WAAaD,EAAES,cACvBC,SAASC,OAASjB,EAAI,IAAMK,EAAI,IAAME,EAAI,UAgB1CW,CAAU,qBAAsBlB,GAChCF,OAAOqB,QAAQC,UAAU,GAAI,GAAIJ,SAASf,SAASoB,WAEnDrB,EApCgB,SAAAA,GAChB,IACE,IAAIK,EAAIL,EAAI,IACVM,EAAIG,mBAAmBO,SAASC,QAAQd,MAAM,KAC9CI,EAAI,EACNA,EAAID,EAAEgB,OACNf,IACA,CACA,IAAK,IAAIgB,EAAIjB,EAAEC,GAAI,MAAQgB,EAAEC,OAAO,IAAMD,EAAIA,EAAEE,UAAU,GAC1D,GAAI,IAAMF,EAAEG,QAAQrB,GAAI,OAAOkB,EAAEE,UAAUpB,EAAEiB,OAAQC,EAAED,QAEzD,MAAO,GAyBHK,CAAU,sBAEZ3B,GAAW,cAANA,EAEAA,EAEA,KAWL4B,GAGC,SAASC,EAAY7B,GAC1B,OAAQgB,SAASC,OACfjB,EAAI,oD,6CCzDF8B,EAAcC,IAAMD,YAEtBE,EAAoB,aACXC,EAAO,uCAAG,WAAOC,EAAWC,EAAYC,GAA9B,mBAAAC,EAAA,6DACfC,EADe,kDACkCJ,EADlC,iBACoDE,GACnEG,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,IAE3BO,YAAa,IAAIZ,GAAY,SAAAa,GAC3BX,IACAA,EAAoBW,MARH,SAYEZ,IAAMa,IAAIN,EAAKC,GAZjB,cAYfM,EAZe,yBAcdA,EAASC,MAdK,2CAAH,0DAiBhBC,EAAyB,aAChBC,EAAsB,uCAAG,WACpCd,EACAC,EACAC,EACAa,EACAC,GALoC,qBAAAb,EAAA,6DAO9BC,EAP8B,kDAOmBJ,EAPnB,iBAOqCE,EAPrC,iBAOoDa,GAClFH,EAAOK,KAAKC,UAAU,CAAEF,aACxBX,EAAS,CACbC,QAAS,CACP,eAAgB,kCAChBC,cAAc,UAAD,OAAYN,IAE3BO,YAAa,IAAIZ,GAAY,SAAAa,GAC3BX,IACAe,IACAA,EAAyBJ,MAjBO,SAqBbZ,IAAMsB,IAAIf,EAAKQ,EAAMP,GArBR,cAqB9BM,EArB8B,yBAuB7BA,EAASC,MAvBoB,2CAAH,8DA0BtBQ,EAAU,uCAAG,WAAOpB,EAAWC,GAAlB,mBAAAE,EAAA,6DAClBC,EADkB,kDAC+BJ,EAD/B,SAElBK,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,KAJL,SAQDJ,IAAMwB,KAAKjB,OAAKkB,EAAWjB,GAR1B,cAQlBM,EARkB,yBAUjBA,EAASC,MAVQ,2CAAH,wDAaVW,EAAkB,uCAAG,WAAOvB,EAAWC,EAAYC,EAAQa,GAAtC,mBAAAZ,EAAA,6DAC1BC,EAD0B,kDACuBJ,EADvB,iBACyCE,EADzC,iBACwDa,GAClFV,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,IAE3BO,YAAa,IAAIZ,GAAY,SAAAa,GAC3BX,IACAe,QAR4B,SAYThB,IAAM2B,OAAOpB,EAAKC,GAZT,cAY1BM,EAZ0B,yBAczBA,EAASC,MAdgB,2CAAH,4DAiBlBa,EAAiB,uCAAG,WAAOzB,EAAWC,EAAYC,GAA9B,qBAAAC,EAAA,6DACzBC,EADyB,kDACwBJ,EADxB,yBACkDE,GAC3EU,EAAO,CACXc,SAAS,EACTC,SAAU,CACRC,GAAI,CACFC,MAAO,UAIPxB,EAAS,CACbC,QAAS,CACPC,cAAe,UAAYN,IAZA,SAgBRJ,IAAMwB,KAAKjB,EAAKQ,EAAMP,GAhBd,cAgBzBM,EAhByB,yBAkBxBA,EAASC,MAlBe,2CAAH,0DAqBjBkB,EAA+B,uCAAG,WAAO9B,EAAW+B,EAAS9B,GAA3B,mBAAAE,EAAA,6DACvCC,EADuC,kDACUJ,EADV,yBACoC+B,EAAQhB,IAD5C,oBAC2DgB,EAAQC,eAAe,GAAGjB,KAC5HV,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,KAJgB,SAQtBJ,IAAMwB,KAAKjB,EAAK,GAAIC,GARE,cAQvCM,EARuC,yBAUtCA,EAASC,MAV6B,2CAAH,0DAa/BqB,EAAyB,uCAAG,WAAOjC,EAAWC,GAAlB,mBAAAE,EAAA,6DACjCC,EADiC,kDACgBJ,EADhB,kCAEjCK,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,KAJU,SAQhBJ,IAAMa,IAAIN,EAAKC,GARC,cAQjCM,EARiC,yBAUhCA,EAASC,MAVuB,2CAAH,wDCrGhCsB,EAAiBC,IAAMC,gBAEvBC,E,2MACJC,MAAQ,CACNtC,UAAW,EAAKuC,MAAMvC,UACtBwC,SAAU7E,IACV8E,KAAM,KACNC,iBAAiB,EAEjBC,2BAA4B,GAC5BC,uBAAuB,EAEvBC,aAAc,GACdC,yBAAyB,EAEzBC,kBAAmB,GACnBC,8BAA8B,EAE9BC,cAAe,GACfC,0BAA0B,EAE1BC,eAAgB,GAChBC,2BAA2B,EAC3BC,iBAAiB,EAEjBC,iBAAkB,GAClBC,6BAA6B,EAC7BC,aAAa,EAEbC,eAAe,EACfC,oBAAoB,EACpBC,OAAQ,CACNC,MAAO,GACPC,WAAY,MAGdC,aAAa,EACbC,gBAAgB,EAChBC,eAAe,EACfC,oBAAoB,EACpBC,cAAc,EACdC,gBAAgB,EAChBC,KAAM,CACJlE,OAAQ,KACR0D,MAAO,GACPS,MAAO,CACLC,OAAQ,EACRC,wBAAyB,EACzBC,SAAU,M,EAKhBC,aAAe,SAACC,EAAWC,GAAZ,OAA2B,EAAKC,SAAL,eAAiBF,EAAYC,K,EAEvEE,SAAW,kBAAM,EAAKD,SAAS,CAAEd,aAAa,K,EAC9CgB,SAAW,kBAAM,EAAKF,SAAS,CAAEd,aAAa,K,EAE9CiB,WAAa,kBAAM,EAAKH,SAAS,CAAEnB,eAAe,K,EAClDuB,WAAa,kBAAM,EAAKJ,SAAS,CAAEnB,eAAe,K,EAElDwB,sBAAwB,SAAAvC,GAAe,OAAI,EAAKkC,SAAS,CAAElC,qB,EAE3DwC,oBAAsB,SAAA5B,GAAgB,OAAI,EAAKsB,SAAS,CAAEtB,sB,EAC1D6B,kBAAoB,SAAAhC,GAAc,OAAI,EAAKyB,SAAS,CAAEzB,oB,EAEtDiC,iBAAmB,SAAAxB,GAAK,OAAI,EAAKgB,SAAS,CACxC3B,cAAeW,EAAMyB,QAAO,SAAAC,GAAI,OAAIC,QAAQD,EAAKjB,a,EAGnDmB,qBAAuB,SAAA5B,GAAK,OAAI,EAAKgB,SAAS,CAC5C7B,kBAAmBa,EAAMyB,QAAO,SAAAC,GAAI,OAAIC,QAAQD,EAAKjB,a,EAGvDoB,gBAAkB,SAAA7B,GAAK,OAAI,EAAKgB,SAAS,CAAE/B,aAAce,K,EAEzD7D,QAAU,WAAO,IACP2F,EAAoB,EAAKnD,MAAzBmD,gBADM,EAEwB,EAAKpD,MAAnC8B,EAFM,EAENA,KAAM5B,EAFA,EAEAA,SAAUxC,EAFV,EAEUA,UAExB,EAAK4E,SAAS,CAAEZ,eAAe,IAC/BjE,EAAQC,EAAWwC,EAAU4B,EAAKlE,QAC/ByF,MAAK,SAAAvB,GACJ,EAAKQ,SAAS,CACZZ,eAAe,EACfI,KAAM,CACJlE,OAAQkE,EAAKwB,QACbhC,MAAOQ,EAAKR,MACTyB,QAAO,SAAAC,GAAI,OAAIC,QAAQD,EAAKjB,UAC5BwB,KAAK,EAAKC,cACbzB,MAAOD,EAAKC,OAAS,QAI1B0B,OAAM,SAAAC,GAEL,GADA,EAAKpB,SAAS,CAAEZ,eAAe,KAC1BgC,EAAMC,WAAY,CACrB,IAAMC,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3EV,EAAgBQ,EAAU,CAAEG,QAAS,e,EAK7CjF,WAAa,WAAO,IACVsE,EAAoB,EAAKnD,MAAzBmD,gBADS,EAEe,EAAKpD,MAA7BtC,EAFS,EAETA,UAAWwC,EAFF,EAEEA,SAEnB,EAAKoC,SAAS,CAAEb,gBAAgB,IAChC3C,EAAWpB,EAAWwC,GACnBmD,MAAK,SAAAvB,GACJ,EAAKQ,SAAS,CACZb,gBAAgB,EAChBK,KAAM,CACJlE,OAAQkE,EAAKkC,GACb1C,MAAO,GACPS,MAAO,CACLC,OAAQ,EACRC,wBAAyB,EACzBC,SAAU,UAKjBuB,OAAM,SAAAC,GACL,EAAKpB,SAAS,CAAEb,gBAAgB,IAChC,IAAMmC,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3EV,EAAgBQ,EAAU,CAAEG,QAAS,c,EAI3CE,UAAY,WACV,EAAKnF,aACL,EAAKoF,gC,EAGPV,aAAe,SAAC3F,EAAGsG,GAAJ,OAAUtG,EAAEY,IAAM0F,EAAE1F,IAAM,GAAK,G,EAE9C2F,QAAU,SAAA3E,GACR,EAAK6C,SAAS,CACZnB,eAAe,EACfE,OAAQ,CAAEC,MAAO,CAAC7B,O,EAItB4E,YAAc,WACZ,EAAK/B,SAAS,CACZnB,eAAe,EACfE,OAAQ,CAAEC,MAAO,O,EAIrBgD,UAAY,SAAA7E,GAAY,IACd2D,EAAoB,EAAKnD,MAAzBmD,gBADa,EAEiB,EAAKpD,MAAnC8B,EAFa,EAEbA,KAAM5B,EAFO,EAEPA,SAAUxC,EAFH,EAEGA,UACJoE,EAAKR,MAAMiD,MAAK,SAAAC,GAAI,OAAIA,EAAK/F,MAAQgB,EAAQhB,OAG/D,EAAK6D,SAAS,CAAEd,aAAa,KAE7B,EAAKc,SAAS,CAAEV,cAAc,IAC9BpD,EAAuBd,EAAWwC,EAAU4B,EAAKlE,OAAQ6B,EAAQhB,IAAK,GACnE4E,MAAK,WACJ,EAAKf,SAAS,CACZV,cAAc,EACdE,KAAK,eACAA,EADD,CAEFR,MAAO,CAAC,eAAK7B,EAAN,CAAef,SAAU,KAAzB,mBAAiCoD,EAAKR,QAAOiC,KAAK,EAAKC,cAC9DzB,MAAM,eACDD,EAAKC,MADL,CAEHC,OAAQF,EAAKC,MAAMC,OAASvC,EAAQsC,MAAMC,OAC1CC,wBAAyBH,EAAKC,MAAME,wBAA0BxC,EAAQsC,MAAME,8BAIlF,EAAKxE,UACL,EAAK8E,cAENkB,OAAM,SAAAC,GAEL,GADA,EAAKpB,SAAS,CAAEV,cAAc,KACzB8B,EAAMC,WAAY,CACrB,IAAMC,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3EV,EAAgBQ,EAAU,CAAEG,QAAS,gB,EAM/CU,eAAiB,SAAAhF,GAAY,IACnB2D,EAAoB,EAAKnD,MAAzBmD,gBADkB,EAEY,EAAKpD,MAAnCtC,EAFkB,EAElBA,UAAWwC,EAFO,EAEPA,SAAU4B,EAFH,EAEGA,KAC7B,EAAKQ,SAAS,CACZT,gBAAgB,EAChBC,KAAK,eACAA,EADD,CAEFR,MAAOQ,EAAKR,MACTyB,QAAO,SAAA2B,GAAI,OAAIA,EAAKjG,MAAQgB,EAAQhB,OACpC8E,KAAK,EAAKC,cACbzB,MAAM,eACDD,EAAKC,MADL,CAEHC,OAAQF,EAAKC,MAAMC,OAASvC,EAAQsC,MAAMC,OAASvC,EAAQf,SAC3DuD,wBAAyBH,EAAKC,MAAME,wBAA0BxC,EAAQsC,MAAME,wBAA0BxC,EAAQf,eAIpHO,EAAmBvB,EAAWwC,EAAU4B,EAAKlE,OAAQ6B,EAAQhB,KAC1D4E,MAAK,WACJ,EAAKf,SAAS,CAAET,gBAAgB,IAChC,EAAKpE,aAENgG,OAAM,SAAAC,GACL,EAAKjG,UACL,EAAK6E,SAAS,CAAET,gBAAgB,IAChC,IAAM+B,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3EV,EAAgBQ,EAAU,CAAEG,QAAS,c,EAI3CY,yBAA2B,SAAClF,EAASf,GAAc,IACzC0E,EAAoB,EAAKnD,MAAzBmD,gBADwC,EAEV,EAAKpD,MAAnC8B,EAFwC,EAExCA,KAAM5B,EAFkC,EAElCA,SAAUxC,EAFwB,EAExBA,UAElBkH,EAAmB9C,EAAKR,MAAMuD,WAAU,SAAA7B,GAAI,OAAIA,EAAKvE,MAAQgB,EAAQhB,OACrEqG,EAAW,eAAQrF,EAAR,CAAiBf,aAElC,EAAK4D,SAAS,CACZR,KAAK,eACAA,EADD,CAEFR,MAAO,sBACFQ,EAAKR,MAAMyD,MAAM,EAAGH,IADlB,CAELE,GAFK,YAGFhD,EAAKR,MAAMyD,MAAMH,EAAmB,KACvCrB,KAAK,EAAKC,kBAGhBhF,EAAuBd,EAAWwC,EAAU4B,EAAKlE,OAAQ6B,EAAQhB,IAAKC,GACnE2E,KAAK,EAAK5F,SACVgG,OAAM,SAAAC,GACL,IAAKA,EAAMC,WAAY,CACrB,IAAMC,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3E,EAAKrG,UACL2F,EAAgBQ,EAAU,CAAEG,QAAS,e,EAK7CG,6BAA+B,WAAO,IAC5Bd,EAAoB,EAAKnD,MAAzBmD,gBAD2B,EAEH,EAAKpD,MAA7BtC,EAF2B,EAE3BA,UAAWwC,EAFgB,EAEhBA,SAEnB,EAAKoC,SAAS,CAAEhC,uBAAuB,IACvCX,EAA0BjC,EAAWwC,GAClCmD,MAAK,SAAA/E,GACJ,EAAKgE,SAAS,CACZhC,uBAAuB,EACvBD,2BAA4B/B,EAAKgD,WAGpCmC,OAAM,SAAAC,GACL,EAAKpB,SAAS,CAAEhC,uBAAuB,IACvC,IAAMsD,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3EV,EAAgBQ,EAAU,CAAEG,QAAS,c,wEAKzC,OACE,kBAACnE,EAAeoF,SAAhB,CACEC,MAAK,eACAC,KAAKlF,MADL,CAEHmC,aAAc+C,KAAK/C,aACnBU,kBAAmBqC,KAAKrC,kBACxBK,qBAAsBgC,KAAKhC,qBAC3BJ,iBAAkBoC,KAAKpC,iBACvBK,gBAAiB+B,KAAK/B,gBACtBP,oBAAqBsC,KAAKtC,oBAC1B0B,UAAWY,KAAKZ,UAChBG,eAAgBS,KAAKT,eACrB3F,WAAYoG,KAAKpG,WACjBrB,QAASyH,KAAKzH,QACdwG,UAAWiB,KAAKjB,UAChBI,YAAaa,KAAKb,YAClB5B,WAAYyC,KAAKzC,WACjBC,WAAYwC,KAAKxC,WACjB0B,QAASc,KAAKd,QACd7B,SAAU2C,KAAK3C,SACfC,SAAU0C,KAAK1C,SACfmC,yBAA0BO,KAAKP,yBAC/BT,6BAA8BgB,KAAKhB,6BACnCvB,sBAAuBuC,KAAKvC,yBAG7BuC,KAAKjF,MAAMkF,c,GAjSUtF,IAAMuF,eAuS9BC,EAAkBzF,EAAe0F,SAIxBC,yBAAaxF,G,oiDC/S5B,IAAMyF,GAAc3F,IAAM4F,MAAK,YASxB,IARLC,EAQI,EARJA,MACAC,EAOI,EAPJA,MACAC,EAMI,EANJA,KACAX,EAKI,EALJA,MACAY,EAII,EAJJA,YACAC,EAGI,EAHJA,oBACAC,EAEI,EAFJA,SACAC,EACI,EADJA,UACI,EACwBnG,IAAMoG,UAAS,GADvC,mBACGC,EADH,KACYC,EADZ,KAEEC,EAAW,kBAAMD,GAAS,IAF5B,EAI4BtG,IAAMoG,UAAS,GAJ3C,mBAIGI,EAJH,KAIcC,EAJd,KAYJ,OAJAzG,IAAM0G,WAAU,WACdC,WAAWJ,EAAkB,IAART,KACpB,IAGD,kBAACc,GAAD,CAAYC,MAAOR,EAASS,QAASN,GACnC,kBAACO,GAAD,CACED,QAASN,EACTQ,aAXmB,kBAAMP,GAAW,IAYpCQ,aAXmB,kBAAMR,GAAW,KAapC,kBAACS,GAAD,CAAWrB,MAAOA,IAClB,kBAAC,GAAD,KACE,kBAACsB,GAAD,KAAYpB,GACZ,kBAACqB,EAAA,EAAD,CAAUC,GAAIb,EAAWc,QAAQ,OAAOC,gBAAgB,QACrDf,EACGR,EAEF,kBAAC,IAAD,CAAWwB,SAAO,EAACC,MAAO,GACvBzB,MAKPE,GAAYd,IACZ,kBAACsC,GAAD,KACGtC,GACC,kBAACuC,GAAD,KACGvC,GAGJc,GACC,kBAAC0B,EAAA,EAAD,CACE1D,QAAQ,YACR7I,MAAM,YACNwM,SAAU1B,EACV2B,QAAS5B,GAERC,EAAY,kBAAC/K,EAAA,EAAD,CAAkBF,KAAM,GAAIG,MAAM,YAAc4K,SAUvEW,GAAatL,IAAOC,IAAV,MAEH,SAAA6E,GAAK,OAAIA,EAAM0G,QAAU,EAAI,KAC/B,qBAAGpH,MAAkBqI,MAAMC,aAC1B,qBAAGtI,MAAkBqI,MAAMC,aAE1B,SAAA5H,GAAK,OAAIA,EAAMyG,MAAQ,EAAI,KACzB,SAAAzG,GAAK,OAAIA,EAAMyG,MAAQ,OAAS,sBAGzCE,GAAOzL,IAAOC,IAAV,MAEC,qBAAGmE,MAAkBuI,QAAQC,KAAKC,WAGlC,qBAAGzI,MAAkBqI,MAAMC,aACtB,qBAAGtI,MAAkBqI,MAAMC,aACrB,gBAAGtI,EAAH,EAAGA,MAAH,SAAUoH,QAAwBpH,EAAMuI,QAAQG,WAAWC,QAAU,iBAC3E,gBAAG3I,EAAH,EAAGA,MAAH,SAAUoH,QAAwBpH,EAAM4I,QAAQ,GAAK,UACrD,qBAAG5I,MAAkB6I,YAAYC,OAAO,CAAC,aAAc,wBACpD,gBAAG9I,EAAH,EAAGA,MAAH,gBAAkBA,EAAMqI,MAAMU,aAA9B,SAGbC,GAAcpN,YAAOqN,IAAPrN,CAAH,MAQX6L,GAAY7L,IAAOC,IAAV,MACJ,qBAAGmE,MAAkBuI,QAAQE,QAAQS,gBAO1ClB,GAAapM,IAAOC,IAAV,MAIU,gBAAGmE,EAAH,EAAGA,MAAH,OAAemJ,IAAQnJ,EAAMuI,QAAQC,KAAKC,SAASW,MAAM,IAAKC,YAMlF7B,GAAY5L,IAAOC,IAAV,MAQW,SAAA6E,GAAK,OAAIA,EAAMyF,SAGnC8B,GAAerM,IAAOC,IAAV,MAEP,qBAAGmE,MAAkBuI,QAAQE,QAAQa,QCrInCC,GAAgBjJ,IAAM4F,MAAK,YAKjC,IAJLzC,EAII,EAJJA,KACA2C,EAGI,EAHJA,MACAK,EAEI,EAFJA,UACA+C,EACI,EADJA,UAKA,OACE,kBAACvD,GAAD,CACEE,MAAO1C,EAAKgG,UACZpD,KAAM5C,EAAK4C,KACXD,MAAOA,EACPK,UAAWA,EACXf,MAAK,oBAAejC,EAAKtE,UACzBmH,YAAa7C,EAAK6C,YAClBC,oBAAoB,UACpBC,SAAU/C,EAAKiG,eAXO,kBAAMF,EAAU/F,EAAM2C,SAWQ3G,O,mBClB7CkK,GAAa,uCAAG,WAAOxL,EAAWC,GAAlB,mBAAAE,EAAA,6DACrBsL,EADqB,kDAC4BzL,EAD5B,yBAErBK,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,KAJF,SAOJJ,IAAMa,IAAI+K,EAAKpL,GAPX,cAOrBM,EAPqB,yBASpBA,EAASC,KAAKgD,MAAMyB,QAAO,SAAAqG,GAAC,MAAe,iBAAXA,EAAEC,SATd,2CAAH,wDAYbC,GAAW,uCAAG,WAAO5L,EAAWC,EAAYqF,GAA9B,eAAAnF,EAAA,6DACzB0L,aAAK,CAAE7L,YAAW8L,QAAS,OACrBC,EAAY,IAAIC,KAAU/L,GAFP,SAGZ8L,EAAUH,YAAYtG,EAAKvE,IAAK,EAAGuE,EAAK2G,aAH5B,mFAAH,0D,saCPxB,IAAMC,GAAgB,WAAO,IAAD,EAUtB/J,IAAMgK,WAAWjK,GARnBkC,EAFwB,EAExBA,KACA5B,EAHwB,EAGxBA,SACAxC,EAJwB,EAIxBA,UACAyE,EALwB,EAKxBA,aACAtB,EANwB,EAMxBA,eACAE,EAPwB,EAOxBA,gBACAD,EARwB,EAQxBA,0BACA+B,EATwB,EASxBA,kBAEMO,EAAoB0G,wBAApB1G,gBAXkB,EAacvD,IAAMoG,SAAS,MAb7B,mBAanB8D,EAbmB,KAaLC,EAbK,KAepBC,EAAoBpK,IAAMqK,aAAY,SAAAlH,GAC1Cb,EAAa,mBAAmB,GAChC6H,EAAgBhH,EAAKvE,KACrB6K,GAAY5L,EAAWwC,EAAU8C,GAC9BK,MAAK,WACJ,IAAM8G,EAA2BtJ,EAAegE,WAAU,SAAAuE,GAAC,OAAIA,EAAE3K,MAAQuE,EAAKvE,OACxE2L,EAAuBvJ,EAAesJ,GAE5C,GAAIC,EAAsB,CACxB,IAAMC,EAAoBD,EAAqB1L,SAAW,EAAhC,sBACrBmC,EAAekE,MAAM,EAAGoF,IADH,gBAGnBC,EAHmB,CAItB1L,SAAU0L,EAAqB1L,SAAW,KAJpB,YAMrBmC,EAAekE,MAAMoF,EAA2B,KAN3B,sBAQrBtJ,EAAekE,MAAM,EAAGoF,IARH,YASrBtJ,EAAekE,MAAMoF,EAA2B,KAGrDtH,EAAkBwH,GAGpBlI,EAAa,mBAAmB,MAEjCsB,OAAM,SAAAC,GACLvB,EAAa,mBAAmB,GAChCiB,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,gBAI1CuG,EAAqB,WACzBnI,EAAa,6BAA6B,GAC1C+G,GAAcxL,EAAWwC,GACtBmD,MAAK,SAAA/E,GACJuE,EAAkBvE,GAClB6D,EAAa,6BAA6B,MAE3CsB,OAAM,SAAAC,GACLvB,EAAa,6BAA6B,GAC1CiB,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,cAIhDlE,IAAM0G,WAAU,WACd+D,MACC,IAEHzK,IAAM0G,WAAU,YACTzF,GAA6BgB,EAAKlE,QAAoC,IAA1BiD,EAAe/D,QAC9DwN,MAED,CAACzJ,EAAe/D,OAAQgF,EAAKlE,SAEhC,IAAM2M,EAAU1K,IAAM2K,SAAQ,kBAAM3J,EAAe/D,OAAS,EAC1D,kBAAC2N,GAAD,KACG5J,EAAe6J,KAAI,SAAC1H,EAAM2H,GAAP,OAClB,kBAAC7B,GAAD,CACEnD,MAAOgF,EACPC,IAAK5H,EAAKvE,IACVuE,KAAMA,EACNgD,UAAWjF,GAAmBgJ,IAAiB/G,EAAKvE,IACpDsK,UAAWkB,QAKjB,kBAACY,GAAD,6CACC,CAAChK,EAAgBE,IAEpB,OACE,kBAAC+J,GAAD,KACGhK,EACG,kBAAC,EAAD,MACAyJ,IAMJO,GAAO3P,IAAOC,IAAV,MAIJqP,GAAUtP,IAAOC,IAAV,MAGc,gBAAGmE,EAAH,EAAGA,MAAH,8CACrBA,EAAMqI,MAAMC,UADS,mBAErBtI,EAAMqI,MAAMC,UAFS,aAOrBgD,GAAY1P,IAAOC,IAAV,M,UCpHF2P,GAAiB,uCAAG,WAAOrN,EAAWC,GAAlB,iBAAAE,EAAA,6DAE7B0L,aAAK,CAAE7L,YAAW8L,QAAS,OACrBwB,EAAe,IAAIC,KAAatN,GAHT,SAINqN,EAAaE,sBAJP,cAIvB7M,EAJuB,yBAKtBA,EAASC,KAAKgD,OALQ,2CAAH,wD,iYCE9B,IAAM6J,GAAW,SAAC,GAAD,IAAGzF,EAAH,EAAGA,MAAOT,EAAV,EAAUA,MAAO/C,EAAjB,EAAiBA,SAAjB,OACf,kBAAC,GAAD,KACGwD,GAAS,kBAAC0F,GAAD,CAAcC,IAAK3F,IAC5BxD,GAAY,kBAACoJ,GAAD,KAAkBpJ,GAC9B+C,IAIC6F,GAAO3P,IAAOC,IAAV,MAKJkQ,GAAkBnQ,IAAOoQ,KAAV,MAIfH,GAAejQ,YAAOqQ,KAAPrQ,CAAH,MChBLsQ,GAAe5L,IAAM4F,MAAK,YAKhC,IAJLhG,EAII,EAJJA,QACAkG,EAGI,EAHJA,MACAK,EAEI,EAFJA,UACA1B,EACI,EADJA,UAKMvC,EAAQlC,IAAM2K,SAAQ,kBAAM/K,EAAQsC,MACxC,kBAAC,GAAD,CACEG,SAAUzC,EAAQsC,MAAMG,SACxB+C,MAAOyG,KAAKC,MAA6B,IAAvBlM,EAAQsC,MAAMC,QAAgB,MAChD,OAAM,CAACvC,IAEX,OACE,kBAAC+F,GAAD,CACEE,MAAOjG,EAAQuJ,UACfpD,KAAMnG,EAAQmG,KACdD,MAAOA,EACPV,MAAOlD,EACPiE,UAAWA,EACXH,YAAapG,EAAQoG,YACrBC,oBAAqB,kBAAC,KAAD,MACrBC,SAjBkB,kBAAMzB,EAAU7E,S,uRCJxC,IAAMmM,GAAe,WAAO,IAAD,EAUrB/L,IAAMgK,WAAWjK,GARnBM,EAFuB,EAEvBA,SACAxC,EAHuB,EAGvBA,UACA4G,EAJuB,EAIvBA,UACAnC,EALuB,EAKvBA,aACAxB,EANuB,EAMvBA,cACAC,EAPuB,EAOvBA,yBACAkC,EARuB,EAQvBA,iBACAlB,EATuB,EASvBA,aAEMwB,EAAoB0G,wBAApB1G,gBAXiB,EAaevD,IAAMoG,SAAS,MAb9B,mBAalB8D,EAbkB,KAaJC,EAbI,KAenB6B,EAAmBhM,IAAMqK,aAAY,SAAAlH,GACzCsB,EAAUtB,GACVgH,EAAgBhH,EAAKvE,OACpB,IAeHoB,IAAM0G,WAAU,WAZdpE,EAAa,4BAA4B,GACzC4I,GAAkBrN,EAAWwC,GAC1BmD,MAAK,SAAA/B,GACJwB,EAAiBxB,GACjBa,EAAa,4BAA4B,MAE1CsB,OAAM,SAAAC,GACLN,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,UAC1C5B,EAAa,4BAA4B,MAM7C6H,EAAgB,QACf,CAACtM,IAEJ,IAAM6M,EAAU1K,IAAM2K,SAAQ,kBAAM7J,EAAc7D,OAAS,GACzD,kBAAC,GAAD,KACG6D,EAAc+J,KAAI,SAAC1H,EAAM2H,GAAP,OACjB,kBAACc,GAAD,CACE9F,MAAOgF,EACPC,IAAK5H,EAAKvE,IACVgB,QAASuD,EACTgD,UAAWpE,GAAgBmI,IAAiB/G,EAAKvE,IACjD6F,UAAWuH,UAIhB,CAAClL,EAAeiB,IAEnB,OACE,kBAAC,GAAD,KACGhB,EACG,kBAAC,EAAD,MACA2J,IAMJO,GAAO3P,IAAOC,IAAV,MAIJqP,GAAUtP,IAAOC,IAAV,MAIc,gBAAGmE,EAAH,EAAGA,MAAH,8CACrBA,EAAMqI,MAAMC,UADS,mBAErBtI,EAAMqI,MAAMC,UAFS,a,2MC1E3B,IAAMiE,GAAgB,SAAC,GAIhB,IAHLC,EAGI,EAHJA,OACAC,EAEI,EAFJA,YACAC,EACI,EADJA,cAIA,OACE,kBAAC,GAAD,CACEhH,MAAO+G,EACPE,SALsB,SAACC,EAAGC,GAAJ,OAAgBH,EAAcG,IAMpDrI,QAAQ,aACRsI,UAAU,UACVC,eAAe,WAEdP,EAAOrB,KAAI,SAAA6B,GAAK,OACf,kBAACC,GAAA,EAAD,CACEvH,MAAOsH,EAAMvI,GACb4G,IAAK2B,EAAMvI,GACXyI,MAAOF,EAAME,aAOjBC,GAAOvR,YAAOwR,KAAPxR,CAAH,MC7BGyR,GAAgB,uCAAG,WAAMC,GAAN,iBAAAhP,EAAA,6DACxBC,EADwB,kDACyB+O,EADzB,iCAEPtP,IAAMa,IAAIN,GAFH,cAExBO,EAFwB,yBAIvBA,EAASC,KAAKgD,OAJS,2CAAH,sDAOhBwL,GAAqB,uCAAG,WAAMD,GAAN,iBAAAhP,EAAA,6DAC7BC,EAD6B,kDACoB+O,EADpB,oCAEZtP,IAAMa,IAAIN,GAFE,cAE7BO,EAF6B,yBAI5BA,EAASC,KAAKgD,OAJc,2CAAH,sDAOrByL,GAAW,uCAAG,WAAMzO,GAAN,eAAAT,EAAA,4DACb,uDADa,SAEFN,IAAMwB,KADjB,uDAC2BT,GAFd,cAEnBD,EAFmB,yBAIlBA,EAASC,MAJS,2CAAH,sD,01BCHxB,IAAM0O,GAAQ,CACZ,CACEhJ,GAAI,uCACJ4B,KAAM,sBAER,CACE5B,GAAI,uCACJ4B,KAAM,yBAER,CACE5B,GAAI,uCACJ4B,KAAM,wBAER,CACE5B,GAAI,uCACJ4B,KAAM,0BAIJmG,GAAS,CACb,CACE/H,GAAI,QACJyI,MAAO,SAET,CACEzI,GAAI,aACJyI,MAAO,eAILQ,GAAkB,WAAO,IAAD,EACwBpN,IAAMgK,WAAWjK,GAA7DlC,EADoB,EACpBA,UAAWwG,EADS,EACTA,6BACXd,EAAoB0G,wBAApB1G,gBAFoB,EAIAvD,IAAMoG,SAAS,MAJf,mBAIrBiH,EAJqB,KAIbC,EAJa,OAKUtN,IAAMoG,SAAS,MALzB,mBAKrB+F,EALqB,KAKRoB,EALQ,OAMYvN,IAAMoG,SAAS,MAN3B,mBAMrBoH,EANqB,KAMPC,EANO,OAOIzN,IAAMoG,SAAS,GAPnB,mBAOrBvH,EAPqB,KAOX6O,EAPW,OAQkB1N,IAAMoG,UAAS,GARjC,mBAQrBuH,EARqB,KAQHC,EARG,OAU6B5N,IAAMoG,UAAS,GAV5C,mBAUrByH,EAVqB,KAUGC,EAVH,OAWU9N,IAAMoG,SAAS,IAXzB,mBAWrB2H,EAXqB,KAWRC,EAXQ,OAauChO,IAAMoG,UAAS,GAbtD,mBAarB6H,EAbqB,KAaQC,EAbR,OAcoBlO,IAAMoG,SAAS,IAdnC,mBAcrB+H,EAdqB,KAcHC,EAdG,KAgBtBC,EAAaR,GAA0BI,EACvCK,EAActO,IAAM2K,SAAQ,kBAAMwC,GAAMtC,KAAI,SAAAtB,GAAC,OAAI,kBAACgF,GAAA,EAAD,CAAUnJ,MAAOmE,EAAEpF,IAAKoF,EAAExD,QAAkBoH,OAC7FqB,EAAexO,IAAM2K,SAAQ,kBAAMoD,EAAYlD,KAAI,SAAAtB,GAAC,OAAI,kBAACgF,GAAA,EAAD,CAAUnJ,MAAOmE,EAAE3K,KAAM2K,EAAExD,QAAkBgI,MACrGU,EAAoBzO,IAAM2K,SAAQ,kBAAMwD,EAAiBtD,KAAI,SAAAtB,GAAC,OAAI,kBAACgF,GAAA,EAAD,CAAUnJ,MAAOmE,EAAE3K,KAAM2K,EAAExD,QAAkBoI,MAE/GO,EAAgB,CACpBjN,MAAO,CACLsE,KAAM,OACNtE,MAAOsM,EACPY,QAASH,GAEXI,WAAY,CACV7I,KAAM,WACNtE,MAAO0M,EACPQ,QAASF,IAIPI,EAAc,SAAArF,GAClB,GAAKgE,GAAiBH,EAAtB,CAIA,IAAM5O,EAAO,CAAE+K,OAAMlJ,KAAM+M,EAAQlK,KAAMqK,EAAcsB,MAAOjQ,GAC9D+O,GAAkB,GAClBrK,EAAgB,0BAA2B,CAAEW,QAAS,SACtDgJ,GAAYzO,GACT+E,MAAK,WACJoK,GAAkB,GAClBvJ,IACAd,EAAgB,WAAY,CAAEW,QAAS,eAExCN,OAAM,SAAAC,GACL+J,GAAkB,GAClBrK,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,eA2DhD,OA7CAlE,IAAM0G,WAAU,WACd4G,EAAUH,GAAM,GAAKA,GAAM,GAAGhJ,GAAK,QAClC,CAACgJ,KAEJnN,IAAM0G,WAAU,WACd6G,EAAerB,GAAO,GAAKA,GAAO,GAAG/H,GAAK,QACzC,CAAC+H,KAEJlM,IAAM0G,WAAU,WACVyF,GAAeuC,EAAcvC,IAAgBuC,EAAcvC,GAAa1K,MAAM,KAChFgM,EAAgBiB,EAAcvC,GAAa1K,MAAM,GAAG7C,KACpD8O,EAAY,MAEb,CAACK,EAAaI,EAAkBhC,IAEnCnM,IAAM0G,WAAU,WACa,IAAvBqH,EAAY9Q,SACd6Q,GAAuB,GACvBf,GAAiBlP,GACd2F,MAAK,SAAA/B,GACJqM,GAAuB,GACvBE,EAAevM,MAEhBmC,OAAM,SAAAC,GACLiK,GAAuB,GACvBvK,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,gBAG/C,CAAC6J,IAEJ/N,IAAM0G,WAAU,WACa,IAAvBqH,EAAY9Q,SACdiR,GAA4B,GAC5BjB,GAAsBpP,GACnB2F,MAAK,SAAA/B,GACJyM,GAA4B,GAC5BE,EAAoB3M,MAErBmC,OAAM,SAAAC,GACLqK,GAA4B,GAC5B3K,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,gBAG/C,CAACiK,IAGF,kBAAC,GAAD,KACGE,EACG,kBAAC,EAAD,MAEA,kBAACU,GAAD,CAAMC,SA5DW,SAAAC,GAAK,OAAIA,EAAMC,mBA6D9B,kBAAC,GAAD,CACEC,QAAM,EACNvC,MAAM,OACNxH,MAAOiI,EACPhS,MAAM,UACNgR,SA/Da,SAAA4C,GAAK,OAAI3B,EAAU2B,EAAMG,OAAOhK,SAiE5CkJ,GAEH,kBAAC,GAAD,CACEpC,OAAQA,GACRC,YAAaA,EACbC,cAAemB,IAEjB,kBAAC8B,GAAD,KACGX,EAAcvC,IACb,kBAAC,GAAD,CACEgD,QAAM,EACNvC,MAAO8B,EAAcvC,GAAapG,KAClCX,MAAOoI,EACPnS,MAAM,UACNgR,SA9ES,SAAA4C,GAAK,OAAIxB,EAAgBwB,EAAMG,OAAOhK,SAgF9CsJ,EAAcvC,GAAawC,SAGhC,kBAAC,GAAD,CACEnF,KAAK,SACLoD,MAAM,WACNxH,MAAOvG,EACPxD,MAAM,UACNgR,SAvFe,SAAA4C,GAC3B,IAAM7J,EAAQkK,OAAOL,EAAMG,OAAOhK,OAClCsI,EAAYtI,GAAS,EAAIA,EAAQ,OAwFzB,kBAACmK,GAAD,KACE,kBAACC,GAAD,KACG7B,GAAoB,kBAAC,EAAD,CAAWzS,KAAM,KACtC,kBAACuU,GAAD,CACEjG,KAAK,SACLtF,QAAQ,YACR2D,SAAU8F,EACV7F,QArGS,kBAAM+G,EAAY,YAiG7B,UAQA,kBAACjH,EAAA,EAAD,CACE1D,QAAQ,YACR2D,SAAU8F,EACV7F,QA3GS,kBAAM+G,EAAY,YAwG7B,eAgBV5D,GAAO3P,IAAOC,IAAV,MAMJwT,GAAOzT,IAAOoU,KAAV,MAMJC,GAAYrU,YAAOsU,KAAPtU,CAAH,MAIT+T,GAAQ/T,IAAOC,IAAV,MAMLgU,GAAajU,IAAOC,IAAV,MAMViU,GAAclU,IAAOC,IAAV,MAIXkU,GAAenU,YAAOsM,IAAPtM,CAAH,M,UCzPLyR,GAAgB,uCAAG,WAAOC,EAAW1Q,GAAlB,uBAAA0B,EAAA,6DACxBsL,EADwB,kDACyB0D,EADzB,0BAEPtP,IAAMa,IAC3B+K,EACA,CACEnL,QAAS,CACPC,cAAc,UAAD,OAAY9B,MAND,cAExBkC,EAFwB,gBAWJqR,QAAQC,IAAItR,EAASC,KAAKyN,OAAOrB,IAArB,uCAAyB,WAAMkF,GAAN,eAAA/R,EAAA,sEAC3BgS,GAAwBhD,EAAW+C,EAAEE,aADV,cACvDC,EADuD,yBAEtD,CACL3D,QAASwD,EAAEE,YACXE,UAAWJ,EAAEhK,KACbtE,MAAOyO,IALoD,2CAAzB,wDAXR,yCAWpBhE,EAXoB,6BAoBvBA,GApBuB,4CAAH,wDAuBvB8D,GAAuB,uCAAG,WAAOhD,EAAWT,GAAlB,iBAAAvO,EAAA,6DACxBsL,EADwB,kDACyB0D,EADzB,sCACgET,GADhE,SAEP7O,IAAMa,IAAI+K,GAFH,cAExB9K,EAFwB,yBAIvBA,EAASC,KAAKgD,OAJS,2CAAH,wD,yGClBtB,IAAM2O,GAAcpQ,IAAM4F,MAAK,YAO/B,IANLhG,EAMI,EANJA,QACAkG,EAKI,EALJA,MACAK,EAII,EAJJA,UACA1B,EAGI,EAHJA,UACAF,EAEI,EAFJA,QACA8L,EACI,EADJA,YAEMC,EAA0B1Q,EAAQC,gBAAkBD,EAAQC,eAAe5C,OAAS,EAEpFsT,EAAgBvQ,IAAMqK,aAAY,kBAAM9F,EAAQ3E,KAAU,IAC1D4Q,EAAgBxQ,IAAMqK,aAAY,kBAAM5F,EAAU7E,KAAU,IAE5D6Q,EAAezQ,IAAM2K,SAAQ,kBAAM2F,EAA0BC,EAAgBC,IAAe,CAACF,IAC7FI,EAAgB1Q,IAAM2K,SAAQ,kBAAM2F,EAA0B,UAAY,kBAAC,KAAD,QAAkB,CAAC1Q,IAC7FsC,EAAQlC,IAAM2K,SAAQ,WAC1B,OAAI0F,EACK,kBAACM,GAAD,kBAGLL,EAEA,kBAAC,GAAD,CACEzK,MAAOjG,EAAQC,eAAe,GAAGsJ,UACjC/D,MAAOxF,EAAQC,eAAe,GAAGsC,SAMrC,kBAAC,GAAD,CACEE,SAAUzC,EAAQsC,MAAMG,SACxB+C,MAAOyG,KAAKC,MAA6B,IAAvBlM,EAAQsC,MAAMC,QAAgB,QAGnD,CAACvC,EAAS0Q,EAAyBD,IAEtC,OACE,kBAAC1K,GAAD,CACEE,MAAOjG,EAAQuJ,UACfpD,KAAMnG,EAAQmG,KACdD,MAAOA,EACPV,MAAOlD,EACPiE,UAAWA,EACXH,YAAapG,EAAQoG,YACrBC,oBAAqByK,EACrBxK,SAAWmK,OAA6BlR,EAAfsR,OAKzBE,GAAYrV,IAAOC,IAAV,MACJ,qBAAGmE,MAAkBuI,QAAQC,KAAKC,W,+kBChD7C,IAAMyI,GAAc,WAAO,IAAD,EAepB5Q,IAAMgK,WAAWjK,GAbnBkC,EAFsB,EAEtBA,KACA5B,EAHsB,EAGtBA,SACAK,EAJsB,EAItBA,aACAM,EALsB,EAKtBA,eACAyD,EANsB,EAMtBA,UACAF,EAPsB,EAOtBA,QACA1G,EARsB,EAQtBA,UACA8C,EATsB,EAStBA,wBACAM,EAVsB,EAUtBA,0BACAc,EAXsB,EAWtBA,aACAiB,EAZsB,EAYtBA,kBACAM,EAbsB,EAatBA,gBACAhB,EAdsB,EActBA,aAEMiB,EAAoB0G,wBAApB1G,gBAhBgB,EAkBcvD,IAAMoG,SAAS,MAlB7B,mBAkBjB+F,EAlBiB,KAkBJoB,EAlBI,OAmBgBvN,IAAMoG,SAAS,MAnB/B,mBAmBjB8D,EAnBiB,KAmBHC,EAnBG,KAqBlB+B,EAASlM,IAAM2K,SAAQ,kBAAMjK,EAAamK,KAAI,SAAAtB,GAAC,MAAK,CAAEpF,GAAIoF,EAAEgD,QAASK,MAAOrD,EAAE4G,gBAAe,CAACzP,IAE9FsL,EAAmBhM,IAAMqK,aAAY,SAAAlH,GACzCsB,EAAUtB,GACVgH,EAAgBhH,EAAKvE,OACpB,IAEHoB,IAAM0G,WAAU,WACd6G,EAAe7M,EAAa,GAAKA,EAAa,GAAG6L,QAAU,MAC3DpC,EAAgB,QACf,CAACzJ,IAEJV,IAAM0G,WAAU,YACT/F,GAA2BN,GAAoC,IAAxBK,EAAazD,SACvDqF,EAAa,2BAA2B,GACxCyK,GAAiBlP,EAAWwC,GACzBmD,MAAK,SAAA9C,GACJ4C,EAAgB5C,GAChB4B,EAAa,2BAA2B,MAEzCsB,OAAM,SAAAC,GACLvB,EAAa,2BAA2B,GACxCiB,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,gBAG/C,CAACxD,IAEJV,IAAM0G,WAAU,YACTzF,GAA6BZ,GAAsC,IAA1BW,EAAe/D,QAAgBgF,EAAKlE,SAChFuE,EAAa,6BAA6B,GAC1C+G,GAAcxL,EAAWwC,GACtBmD,MAAK,SAAA/E,GACJuE,EAAkBvE,GAClB6D,EAAa,6BAA6B,MAE3CsB,OAAM,SAAAC,GACLvB,EAAa,6BAA6B,GAC1CiB,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,gBAG/C,CAAClD,EAAgBiB,EAAKlE,SAEzB,IAAM2M,EAAU1K,IAAM2K,SAAQ,kBAAMjK,EAAazD,OAAS,GACxD,oCACE,kBAAC,GAAD,CACEiP,OAAQA,EACRC,YAAaA,EACbC,cAAemB,IAEhB7M,EAAamK,KAAI,SAAAkF,GAAC,OAAI5D,IAAgB4D,EAAExD,SACvC,kBAAC,IAAMsE,SAAP,CAAgB9F,IAAKgF,EAAExD,SACrB,kBAACuE,GAAD,KACGf,EAAEI,WAEL,kBAACY,GAAD,KACGhB,EAAEtO,MAAMoJ,KAAI,SAAC1H,EAAM2H,GAAP,OACX,kBAACsF,GAAD,CACEtK,MAAOgF,EACPC,IAAK5H,EAAKvE,IACVgB,QAASuD,EACTkN,YAAmD,OAAtClN,EAAK6N,kBAAkBC,YAAuBjQ,EAAe0D,MAAK,SAAA6E,GAAC,OAAIpG,EAAKvE,MAAQ2K,EAAE3K,OACnG6F,UAAWuH,EACX7F,UAAWpE,GAAgBmI,IAAiB/G,EAAKvE,IACjD2F,QAASA,eAOpB,CAAC4H,EAAazL,EAAcM,EAAgBe,IAE/C,OACE,kBAAC,GAAD,KACGpB,GAA2BM,EACxB,kBAAC,EAAD,MACAyJ,IAMJO,GAAO3P,IAAOC,IAAV,MAIJwV,GAAQzV,IAAOC,IAAV,MAIgB,gBAAGmE,EAAH,EAAGA,MAAH,8CACrBA,EAAMqI,MAAMC,UADS,mBAErBtI,EAAMqI,MAAMC,UAFS,aAOrB8I,GAAQxV,IAAOC,IAAV,MACA,qBAAGmE,MAAkBuI,QAAQE,QAAQS,gB,mFClI1C1N,GAEK,QAFLA,GAGK,QAHLA,GAII,QAJJA,GAKI,SALJA,GAMK,SANLA,GAOK,SAPLA,GAQI,SAGGgW,GAAS,CACpBC,QAAQ,eAAD,OAXE,QAWF,KACPC,QAAQ,eAAD,OAAiBlW,GAAjB,KACPmW,QAAQ,eAAD,OAAiBnW,GAAjB,KACPoW,OAAO,eAAD,OAAiBpW,GAAjB,KACNqW,OAAO,eAAD,OAAiBrW,GAAjB,KACNsW,QAAQ,eAAD,OAAiBtW,GAAjB,KACPuW,QAAQ,eAAD,OAAiBvW,GAAjB,KACPwW,OAAO,eAAD,OAAiBxW,GAAjB,M,4iECVR,IAAMyW,GAAoB,SAAC,GAA8C,IAA5CxO,EAA2C,EAA3CA,KAAMyO,EAAqC,EAArCA,mBAAoBC,EAAiB,EAAjBA,WAC/CC,EAAY,SAAC5P,EAAOrD,GAAR,OAAqBgN,KAAKC,MAAM5J,EAAQrD,EAAW,KAAO,KAK5E,OACE,kBAACkT,GAAD,KACE,kBAACC,GAAD,CAAenM,MAAO1C,EAAKgG,YAC3B,kBAAC8I,GAAD,KACE,kBAACC,GAAD,KAAW/O,EAAK4C,MAChB,kBAACoM,GAAD,KACE,kBAACC,GAAD,KACGjP,EAAKjB,MAAMG,SADd,IACyByP,EAAU3O,EAAKjB,MAAMC,OAAQgB,EAAKtE,WAE1DsE,EAAKtE,SAAW,GACf,kBAACwT,GAAD,KACGlP,EAAKjB,MAAMG,SADd,IACyByP,EAAU3O,EAAKjB,MAAMC,OAAQ,GADtD,mBAMN,kBAACmQ,GAAD,KACE,kBAACC,GAAD,KACGpP,EAAKtE,SAAW,EAEb,kBAAC2T,GAAA,EAAD,CAAYnX,MAAM,UAAUyM,QAxBd,kBAAM8J,EAAmBzO,EAAMA,EAAKtE,SAAW,KAyB3D,kBAAC4T,GAAD,OAGF,kBAACD,GAAA,EAAD,CAAYnX,MAAM,UAAUyM,QA1Bf,kBAAM+J,EAAW1O,KA2B5B,kBAACuP,GAAD,OAIN,kBAACC,GAAD,KAAexP,EAAKtE,UACpB,kBAAC2T,GAAA,EAAD,CAAYnX,MAAM,UAAUyM,QAjCV,kBAAM8J,EAAmBzO,EAAMA,EAAKtE,SAAW,KAkC/D,kBAAC+T,GAAD,WAQNb,GAAWzW,IAAOC,IAAV,MAGH,qBAAGmE,MAAkBuI,QAAQC,KAAKC,UAIlC+I,GAAOG,SAOZW,GAAgB1W,IAAOC,IAAV,MAIO,SAAA6E,GAAK,OAAIA,EAAMyF,SAGnCoM,GAAe3W,IAAOC,IAAV,MAIZ2W,GAAW5W,IAAOC,IAAV,MAKRgX,GAAkBjX,IAAOC,IAAV,MAMfoX,GAAerX,IAAOC,IAAV,MASZ+W,GAAYhX,IAAOC,IAAV,KAKJ2V,GAAOG,SAKZc,GAAY7W,IAAOC,IAAV,KAIJ2V,GAAOG,SAKZe,GAAgB9W,IAAOC,IAAV,MACR,qBAAGmE,MAAkBuI,QAAQE,QAAQa,QAI1CqJ,GAAsB/W,IAAOC,IAAV,MAKnBmX,GAAapX,YAAOuX,KAAPvX,CAAH,KACL4V,GAAOG,SAOZoB,GAAgBnX,YAAOwX,KAAPxX,CAAH,KACR4V,GAAOG,SAOZuB,GAAgBtX,YAAOyX,KAAPzX,CAAH,KACR4V,GAAOG,S,mBC7IlB,SAAS2B,GAAgB3Q,GACvB,MAAO,CACL0D,KAAM1D,EACN4Q,aAAc,EACdC,OAAQ,CACNC,SAAU9Q,EACV+Q,SAAU,KACVC,KAAK,GAEPC,WAAY,MAoDT,SAASC,GAAqBpR,EAAQE,EAAUmR,GACrD,IAAIC,EAAeC,WAAWvR,GAC9B,IAAKE,GAAYsR,MAAMF,GACrB,MAAO,CACLG,kBAAmBzR,EAAS,IAAME,EAClCwR,IAAK,OAIT,IAAIC,EA1DN,SAA4BzR,GAC1B,OAAOA,GACH0R,GAAe1R,EAAS2R,gBACxBhB,GAAgB3Q,GAuDE4R,CAAmB5R,GACrC6R,EAvBN,SAA4BV,GAC1B,OAAOA,GACHW,GARN,SAAsBX,GACpB,MAAO,CACLA,EAAOY,OAAO,EAAG,GAAGC,cACpBb,EAAOY,OAAO,EAAG,GAAGJ,eACpBjY,KAAK,KAIkBuY,CAAad,KAElCW,GAAoB,MAmBFI,CAAmBf,GAErCgB,EAAaf,EAAe,EAAI,IAAM,GACtCR,EAAea,EAAgBb,aAE/BC,EAASY,EAAgBZ,OACzBuB,EAAoBP,EAAgBQ,UACpCC,EAAmBT,EAAgBU,QAEjC1B,IAAUA,EAAOG,KAAsC,MAA9Ba,EAAgBQ,YAC7CD,EAAoB,IACpBE,EAAmB,KAGrB,IAAIE,EAAiBhJ,KAAKiJ,IAAIrB,GAC3BsB,QAAQ9B,GACRnX,MAAM,KACT+Y,EAAe,GAAKA,EAAe,GAAGG,QACpC,0BACA,KAAOP,GAET,IAAIQ,EAAkBJ,EAAe9Y,KAAK4Y,GAEtCf,EAAoBY,EAAaS,EAAkB,IAAM5S,EACzDgR,GAAM,EAUV,OATIH,GAAUA,EAAOE,WACnBQ,EACEY,EACAtB,EAAOE,SACJ4B,QAAQ,IAAKC,GACbD,QAAQ,IAAK9B,EAAOC,UACzBE,EAAMH,EAAOG,KAGR,CACLO,kBAAmBA,EACnBC,IAAKR,EAAM,MAAQ,OC9GhB,ICCM6B,GAAa,uCAAG,WAAMzW,GAAN,eAAAT,EAAA,4HAEJN,IAAMwB,KAFF,uDAEYT,GAFZ,cAErBD,EAFqB,yBAIpBA,EAASC,MAJW,2CAAH,sD,ohDCY1B,IAAM0W,GAAiB,WAAO,IAAD,EACgCnV,IAAMgK,WAAWjK,GAApEkC,EADmB,EACnBA,KAAM2C,EADa,EACbA,eAAgBE,EADH,EACGA,yBACtBvB,EAAoB0G,wBAApB1G,gBAFmB,EAIWvD,IAAMoG,WAJjB,mBAIpBgP,EAJoB,KAINC,EAJM,KAWrBC,EAAWtV,IAAMqK,aAAY,WACjC,IAAM5L,EAAO,CACX+K,KAAM,WACNlJ,KAAM,uCACNiV,SAAU,sBACVD,SAAU,CACRnT,OAAQF,EAAKC,MAAMC,OACnBE,SAAUJ,EAAKC,MAAMG,SACrBmT,sBF/BL,CAAC,MAAQ,KAAO,KAAO,KAAO,MAC5BR,QAAQ,UAAU,SAAA1W,GAAC,OAAKA,EAAImX,OAAOC,gBAAgB,IAAIC,WAAW,IAAI,GAAK,IAAMrX,EAAI,GAAGsX,SAAS,OE+B9FC,wBAAyB,IAAItZ,MAAQuZ,eAEvCrU,MAAOQ,EAAKR,MAAMoJ,KAAI,kBAAwB,CAAEjM,IAA1B,EAAGA,IAA4BC,SAA/B,EAAQA,cAGhCwW,GAAc,GACd9R,EAAgB,0BAA2B,CAAEW,QAAS,SACtDgR,GAAczW,GACX+E,MAAK,WACJ6R,GAAc,GACd9R,EAAgB,WAAY,CAAEW,QAAS,eAExCN,OAAM,SAAAC,GACLwR,GAAc,GACd9R,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,eAE7C,IAEG6R,EAAc/V,IAAM2K,SACxB,kBAAM1I,EAAKR,MAAMxE,OAAS,EAEtB,kBAAC+Y,GAAD,KACG/T,EAAKR,MAAMoJ,KAAI,SAAAtB,GAAC,OACf,kBAAC,IAAMsH,SAAP,CAAgB9F,IAAKxB,EAAE3K,KACrB,kBAAC,GAAD,CACEuE,KAAMoG,EACNsI,WAAYjN,EACZgN,mBAAoB9M,IAEtB,kBAAC,GAAD,WAKN,kBAAC,GAAD,6CAIJ,CAAC7C,IAGGgU,EAAgBjW,IAAM2K,SAAQ,kBAAM1I,EAAKR,MAAMxE,OAAS,GAC5D,kBAACiZ,GAAD,KACE,kBAACC,GAAD,iBAEE,kBAACC,GAAD,KAEI7C,GA7DgB,SAAAtR,GACxB,IAAMoU,EAAWpU,EAAKqU,QAAO,SAACC,EAAKhN,GAAN,OAAYgN,EAAMhN,EAAErH,MAAMC,OAASoH,EAAE1K,WAAU,GAC5E,OAAOgN,KAAKC,MAAiB,IAAXuK,GAAkB,IA4D1BG,CAAkBvU,EAAKR,OACvBQ,EAAKC,MAAMG,UAAYJ,EAAKR,MAAM,GAAGS,MAAMG,UAC3CuR,oBAIR,kBAAC6C,GAAD,KACE,kBAAC7O,EAAA,EAAD,CACE1D,QAAQ,YACR2D,SAAUuN,EACVtN,QAASwN,GAERF,EAAe,kBAAC,IAAD,CAAQla,KAAM,GAAIG,MAAM,cAAiB,sBAI9D,CAAC4G,EAAMmT,IAEV,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,KACGW,EACAE,KAMHhL,GAAO3P,IAAOC,IAAV,MAMJqP,GAAUtP,IAAOC,IAAV,MAQPya,GAAY1a,IAAOC,IAAV,MAMTyP,GAAY1P,IAAOC,IAAV,MAIJ,qBAAGmE,MAAkBuI,QAAQC,KAAKC,WAIvC+N,GAAa5a,IAAOC,IAAV,MAQVkb,GAAcnb,IAAOC,IAAV,KAGN2V,GAAOI,QAMZ6E,GAAW7a,IAAOC,IAAV,MAGH,qBAAGmE,MAAkBuI,QAAQC,KAAKC,UAGlC+I,GAAOI,QAQZ8E,GAAQ9a,IAAOC,IAAV,MAKLmb,GAAUpb,YAAOqb,KAAPrb,CAAH,MAEW,qBAAGoE,MAAkBuI,QAAQE,QAAQS,gBC7KhDgO,GAAc,uCAAG,WAAM9Y,GAAN,iBAAAE,EAAA,4DAChB,uDACNE,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,KAJD,SAOLJ,IAAMa,IANjB,uDAM0BL,GAPV,cAOtBM,EAPsB,yBASrBA,EAASC,MATY,2CAAH,sDAYdoY,GAAM,uCAAG,WAAOhZ,EAAWC,EAAYgZ,EAAYlY,GAA1C,mBAAAZ,EAAA,6DACpB0L,aAAK,CAAE7L,YAAW8L,QAAS,OACf,wEACNlL,EAAO,CACXsY,WAAYlZ,EACZmZ,oBAAqBpY,EACrBqY,SAAU,KACVlM,IAAK+L,GAGD5Y,EAAS,CACbC,QAAS,CACPC,cAAc,UAAD,OAAYN,KAZT,SAgBGJ,IAAMwB,KAdjB,wEAc2BT,EAAMP,GAhBzB,cAgBdM,EAhBc,yBAkBbA,EAASC,MAlBI,2CAAH,4D,gqBCJnB,IAAMyY,GAAkB,WAAO,IAAD,EASxBlX,IAAMgK,WAAWjK,GAPnBlC,EAF0B,EAE1BA,UACAwC,EAH0B,EAG1BA,SACA0C,EAJ0B,EAI1BA,oBACA5B,EAL0B,EAK1BA,iBACAC,EAN0B,EAM1BA,4BACAC,EAP0B,EAO1BA,YACAiB,EAR0B,EAQ1BA,aAEMiB,EAAoB0G,wBAApB1G,gBAVoB,EAYNvD,IAAMoG,SAAS,IAZT,mBAYrBxH,EAZqB,KAYhBuY,EAZgB,OAaJnX,IAAMoG,SAAS,IAbX,mBAarBgR,EAbqB,KAafC,EAbe,KAetBC,EAAmBtX,IAAMqK,aAAY,SAAA4E,GAAK,OAAIoI,EAAQpI,EAAMG,OAAOhK,UACnEmS,EAAkBvX,IAAMqK,aAAY,SAAA4E,GAAK,OAAIkI,EAAOlI,EAAMG,OAAOhK,UAEjEoS,EAAuB,WAC3BlV,EAAa,+BAA+B,GAC5CsU,GAAevW,GACZmD,MAAK,SAAA/B,GACJa,EAAa,+BAA+B,GAC5CS,EAAoBtB,MAErBmC,OAAM,SAAAC,GACLvB,EAAa,+BAA+B,GAC5C,IAAMyB,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3EV,EAAgBQ,EAAU,CAAEG,QAAS,cAmB3ClE,IAAM0G,WAAU,WACd8Q,MACC,IAEH,IAAMC,EAAkBzX,IAAM2K,SAAQ,kBAAMxJ,EAAiBlE,OAAS,EAClEkE,EAAiB0J,KAAI,SAAC1H,EAAM4H,GAAP,OACnB,kBAACpF,GAAD,CACEoF,IAAK5H,EAAK6T,oBACVlR,MAAOiF,EACPhF,KAAM5C,EAAK4C,KACXC,YAAa7C,EAAK6C,YAClBH,MAAO1C,EAAKgG,eAIlB,+DAGC,CAAChI,IAEJ,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAM6N,SArCW,SAAAC,GACnBA,EAAMC,iBACN5M,EAAa,eAAe,GAC5BuU,GAAOhZ,EAAWwC,EAAU+W,EAAMxY,GAC/B4E,MAAK,WACJlB,EAAa,eAAe,GAC5BkV,OAED5T,OAAM,SAAAC,GACLvB,EAAa,eAAe,GAC5B,IAAMyB,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3EV,EAAgBQ,EAAU,CAAEG,QAAS,eA2BrC,kBAAC,GAAD,CACE7I,MAAM,UACNqc,YAAY,kBACZrL,SAAUiL,EACVlS,MAAOgS,IAET,kBAAC,GAAD,CACE/b,MAAM,UACNqc,YAAY,yBACZrL,SAAUkL,EACVnS,MAAOxG,IAET,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAQvD,MAAM,YAAYmO,KAAK,SAAStF,QAAQ,aAC7C7C,EAAc,kBAACjG,EAAA,EAAD,CAAkBF,KAAM,GAAIG,MAAM,YAAe,iBAItE,6BACG+F,EAA8B,kBAAChG,EAAA,EAAD,CAAkBF,KAAM,GAAIG,MAAM,YAAeoc,KAMlFxM,GAAO3P,IAAOC,IAAV,MAOJwT,GAAOzT,IAAOoU,KAAV,MAMJC,GAAYrU,YAAOsU,KAAPtU,CAAH,MAOTsM,GAAStM,YAAOqc,IAAPrc,CAAH,MAMNiU,GAAajU,IAAOC,IAAV,M,4DCpIVqc,GAAS,CACbnW,MAAO,IACPmN,WAAY,YACZiJ,SAAU,YACVjO,UAAW,aACXkO,YAAa,eACbC,OAAQ,UACRzC,SAAU,YACV0C,gBAAiB,wBAGbC,GAAW,CACf,CACEC,MAAON,GAAOnW,MACdmL,MAAO,SAET,CACEsL,MAAON,GAAOhJ,WACdhC,MAAO,cAET,CACEsL,MAAON,GAAOC,SACdjL,MAAO,eAET,CACEsL,MAAON,GAAOhO,UACdgD,MAAO,aAET,CACEsL,MAAON,GAAOE,YACdlL,MAAO,eAET,CACEsL,MAAON,GAAOG,OACdnL,MAAO,UAET,CACEsL,MAAON,GAAOtC,SACd1I,MAAO,oBAIEuL,GAAe,SAAA1W,GAAK,OAAIwW,GAClC/U,QAAO,SAAAqG,GAAC,OAAI9H,EAAM2W,SAAS7O,EAAE2O,UAC7BxU,MAAK,SAAC1F,EAAGsG,GAAJ,OAAU7C,EAAMpE,QAAQW,EAAEka,OAASzW,EAAMpE,QAAQiH,EAAE4T,W,i8DCxB3D,IAAMG,GAAO,WAAO,IAAD,EACiCrY,IAAMoG,UAAS,GADhD,mBACVkS,EADU,KACSC,EADT,OAabvY,IAAMgK,WAAWjK,GAVnBkC,EAHe,EAGfA,KACAU,EAJe,EAIfA,SACAtC,EALe,EAKfA,SACAxC,EANe,EAMfA,UACAuG,EAPe,EAOfA,UACAzC,EARe,EAQfA,YACAiD,EATe,EASfA,eACA5C,EAVe,EAUfA,eACAH,EAXe,EAWfA,cACAiD,EAZe,EAYfA,yBAEMvB,EAAoB0G,wBAApB1G,gBACFzG,EAAU0b,cAEVrS,EAAYtE,GAAiBG,EAE7ByW,EAAezY,IAAM2K,SAAQ,WACjC,IAAM0L,EAAWpU,EAAKR,MACnByB,QAAO,SAAAC,GAAI,OAAIC,QAAQD,EAAKjB,UAC5BoU,QAAO,SAACC,EAAKpT,GAAN,OAAeoT,EAAMpT,EAAKjB,MAAMC,OAASgB,EAAKtE,WAAU,GAClE,OAAOgN,KAAKC,MAAiB,IAAXuK,GAAkB,MACnC,CAACpU,EAAKR,QAkCT,OACE,kBAAC,GAAD,CACEiX,KAAM/W,EACNgX,QAAShW,EACTiW,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CAAEzR,QAAS,MAE1B,kBAAC0R,GAAA,EAAD,CAAM3R,GAAI1F,EAAa2F,QAAS,KAC9B,kBAAC2R,GAAD,KACE,kBAACC,GAAD,KACE,oCACA,kBAAC1G,GAAA,EAAD,CAAYnX,MAAM,UAAUyM,QAASnF,GACnC,kBAAC,KAAD,QAGJ,kBAACwW,GAAD,KACGlX,EAAKR,MAAMxE,OAAS,EACjBgF,EAAKR,MAAMoJ,KAAI,SAAA1H,GAAI,OACnB,kBAAC,GAAD,CACE4H,IAAK5H,EAAKvE,IACVuE,KAAMA,EACN0O,WAAYjN,EACZgN,mBAAoB9M,OAGtB,0CAGN,kBAACsU,GAAD,KACGjT,GAAa,kBAACkT,GAAD,OAEhB,kBAAC,GAAD,KACGpX,EAAKR,MAAMxE,OAAS,GACnB,kBAAC,GAAD,iBAEE,kBAAC,GAAD,KAEIsW,GACEkF,EACAxW,EAAKC,MAAMG,UAAYJ,EAAKR,MAAM,GAAGS,MAAMG,UAC3CuR,oBAKV,kBAAC,GAAD,KACE,kBAAChM,EAAA,EAAD,CACE1D,QAAQ,YACR7I,MAAM,YACNwM,SAAgC,IAAtB5F,EAAKR,MAAMxE,OACrBqc,MAAO,CAAEC,YAAa,OACtBzR,QApFa,WACrBwQ,GAAqBrW,EAAKR,MAAMxE,QAAU,IAI9CH,EAAQ0c,KAAK5B,GAAOtC,UACpB3S,OAyEU,cASA,kBAACiF,EAAA,EAAD,CACE1D,QAAQ,YACR7I,MAAM,YACNwM,SAAgC,IAAtB5F,EAAKR,MAAMxE,OACrB6K,QAnFU,WACtBnF,IACArD,EAAkBzB,EAAWwC,EAAU4B,EAAKlE,QACzCyF,MAAK,SAAA/E,GACJ8Z,GAAqB,GACrB9c,OAAOge,gBAAgBhb,EAAKnC,MAAO,CAACiD,SAAS,EAAMma,KAAM,8BACzDje,OAAOke,kBAAkBjB,OACzBjd,OAAOke,kBAAkBC,GACvBne,OAAOke,kBAAkBE,WAAWC,OACpC,kBAAMvB,GAAqB,MAE7B9c,OAAOke,kBAAkBC,GACvBne,OAAOke,kBAAkBE,WAAWE,YACpC3V,MAGHR,OAAM,SAAAC,GACL0U,GAAqB,GACrB,IAAMxU,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3EV,EAAgBQ,EAAU,CAAEG,QAAS,eA4D/B,uBAgBR8V,GAAQ1e,YAAO2e,KAAP3e,CAAH,MAML2d,GAAc3d,IAAOC,IAAV,MAIE,gBAAGmE,EAAH,EAAGA,MAAH,gBAAkBA,EAAMqI,MAAMU,aAA9B,SACG,qBAAG/I,MAAkBuI,QAAQG,WAAWC,WACnD,qBAAG3I,MAAkBuI,QAAQC,KAAKC,UAMlC+I,GAAOI,QASZ4H,GAAa5d,IAAOC,IAAV,MAIL,qBAAGmE,MAAkBuI,QAAQC,KAAKC,WAChB,gBAAGzI,EAAH,EAAGA,MAAH,OAAemJ,IAAQnJ,EAAMuI,QAAQC,KAAKC,SAASW,MAAM,IAAKC,YAKrFqQ,GAAS9d,IAAOC,IAAV,MAIN8d,GAAW/d,YAAO4e,KAAP5e,CAAH,MAOR6d,GAAW7d,IAAOC,IAAV,MASR2a,GAAa5a,IAAOC,IAAV,MAKU,gBAAGmE,EAAH,EAAGA,MAAH,OAAemJ,IAAQnJ,EAAMuI,QAAQC,KAAKC,SAASW,MAAM,IAAKC,YAIlF0N,GAAcnb,IAAOC,IAAV,KAGN2V,GAAOI,QAMZ6E,GAAW7a,IAAOC,IAAV,KAMH2V,GAAOI,QAQZ8E,GAAQ9a,IAAOC,IAAV,M,mmBC1OX,IAAM4e,GAAana,IAAM4F,MAAK,YAAe,IAAZzC,EAAW,EAAXA,KAC/B,OACE,kBAAC,GAAD,KACE,kBAACiX,GAAD,CAAOvU,MAAO1C,EAAKgG,YACnB,6BACE,kBAACkR,GAAD,KAAOlX,EAAK4C,MACZ,6BAAM5C,EAAK6C,kBAMbiF,GAAO3P,IAAOC,IAAV,KAMC2V,GAAOG,SAOZ+I,GAAQ9e,IAAOC,IAAV,MAIe,SAAA6E,GAAK,OAAIA,EAAMyF,SAGnCwU,GAAO/e,IAAOC,IAAV,M,4nCCpBV,IAAM+e,GAAS,WAAO,IAAD,EAWfta,IAAMgK,WAAWjK,GATnByB,EAFiB,EAEjBA,OACAF,EAHiB,EAGjBA,cACAzD,EAJiB,EAIjBA,UACAwC,EALiB,EAKjBA,SACAmE,EANiB,EAMjBA,YACAlC,EAPiB,EAOjBA,aACAO,EARiB,EAQjBA,WACAtB,EATiB,EASjBA,mBACA8C,EAViB,EAUjBA,6BAEMd,EAAoB0G,wBAApB1G,gBAiBR,OACE,kBAAC,GAAD,CACEmV,KAAMpX,EACNqX,QAAS9V,EACT+V,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CAAEzR,QAAS,MAE1B,kBAAC0R,GAAA,EAAD,CAAM3R,GAAI/F,EAAegG,QAAS,KAChC,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,uCACA,kBAACkL,GAAA,EAAD,CAAYnX,MAAM,UAAUyM,QAASjF,GACnC,kBAAC,KAAD,QAGJ,kBAAC,GAAD,KACGrB,EAAOC,MAAMxE,OAAS,EACnBuE,EAAOC,MAAMoJ,KAAI,SAAA1H,GAAI,OAAI,kBAACgX,GAAD,CAAYhX,KAAMA,OAC3C,0CAGN,kBAAC,GAAD,KACE,kBAACyE,EAAA,EAAD,CACE1D,QAAQ,YACR2D,SAAUtG,EACVuG,QAzC6B,WACvCxF,EAAa,sBAAsB,GACnC3C,EAAgC9B,EAAW2D,EAAOC,MAAM,GAAIpB,GACzDmD,MAAK,WACJlB,EAAa,sBAAsB,GACnCkC,IACAH,OAEDT,OAAM,SAAAC,GACLvB,EAAa,sBAAsB,GACnC,IAAMyB,EAAWF,EAAMrF,SAAWqF,EAAMrF,SAASC,KAAKuF,aAAeH,EAAMI,QAC3EV,EAAgBQ,EAAU,CAAEG,QAAS,eAgC9B3C,EAAqB,kBAACnG,EAAA,EAAD,CAAkBF,KAAM,GAAIG,MAAM,cAAgB,YAShF2e,GAAQ1e,YAAO2e,KAAP3e,CAAH,MAML2d,GAAc3d,IAAOC,IAAV,MAIE,gBAAGmE,EAAH,EAAGA,MAAH,gBAAkBA,EAAMqI,MAAMU,aAA9B,SACG,qBAAG/I,MAAkBuI,QAAQG,WAAWC,WACnD,qBAAG3I,MAAkBuI,QAAQC,KAAKC,UAMlC+I,GAAOI,QASZ4H,GAAa5d,IAAOC,IAAV,MAIa,gBAAGmE,EAAH,EAAGA,MAAH,OAAemJ,IAAQnJ,EAAMuI,QAAQC,KAAKC,SAASW,MAAM,IAAKC,YAKrFoQ,GAAW7d,IAAOC,IAAV,MASR2a,GAAa5a,IAAOC,IAAV,MAGU,gBAAGmE,EAAH,EAAGA,MAAH,OAAemJ,IAAQnJ,EAAMuI,QAAQC,KAAKC,SAASW,MAAM,IAAKC,YC7H3EwR,GAASva,IAAM4F,MAAK,YAK1B,IAJLhG,EAII,EAJJA,QACAkG,EAGI,EAHJA,MACAK,EAEI,EAFJA,UACA1B,EACI,EADJA,UAKMvC,EAAQlC,IAAM2K,SAAQ,kBAC1B,kBAAC,GAAD,CACEtI,SAAUzC,EAAQsC,MAAMG,SACxB+C,MAAOyG,KAAKC,MAA6B,IAAvBlM,EAAQsC,MAAMC,QAAgB,QACjD,CAACvC,IAEJ,OACE,kBAAC+F,GAAD,CACEE,MAAOjG,EAAQuJ,UACfpD,KAAMnG,EAAQmG,KACdD,MAAOA,EACPV,MAAOlD,EACPiE,UAAWA,EACXH,YAAapG,EAAQoG,YACrBC,oBAAqB,kBAAC,KAAD,MACrBC,SAjBkB,kBAAMzB,EAAU7E,SCX3BqN,GAAqB,uCAAG,WAAOD,EAAW1Q,GAAlB,iBAAA0B,EAAA,6DAC7BsL,EAD6B,kDACoB0D,EADpB,4CAEZtP,IAAMa,IAAI+K,EAAK,CACpCnL,QAAS,CACPC,cAAc,UAAD,OAAY9B,MAJM,cAE7BkC,EAF6B,yBAQ5BA,EAASC,KAAKgD,OARc,2CAAH,wD,wSCOlC,IAAM+Y,GAAS,WAAO,IAAD,EAUfxa,IAAMgK,WAAWjK,GARnBM,EAFiB,EAEjBA,SACAxC,EAHiB,EAGjBA,UACA4G,EAJiB,EAIjBA,UACAnC,EALiB,EAKjBA,aACA1B,EANiB,EAMjBA,kBACAC,EAPiB,EAOjBA,6BACAkB,EARiB,EAQjBA,aACAsB,EATiB,EASjBA,qBAEME,EAAoB0G,wBAApB1G,gBAXW,EAaqBvD,IAAMoG,SAAS,MAbpC,mBAaZ8D,EAbY,KAaEC,EAbF,KAeb6B,EAAmBhM,IAAMqK,aAAY,SAAAlH,GACzCsB,EAAUtB,GACVgH,EAAgBhH,EAAKvE,OACpB,IAEHoB,IAAM0G,WAAU,WACdyD,EAAgB,MAChB7H,EAAa,gCAAgC,GAC7C2K,GAAsBpP,EAAWwC,GAC9BmD,MAAK,SAAA/E,GACJ4E,EAAqB5E,GACrB6D,EAAa,gCAAgC,MAE9CsB,OAAM,SAAAC,GACLN,EAAgBM,EAAMI,QAAS,CAAEC,QAAS,UAC1C5B,EAAa,gCAAgC,QAEhD,IAEH,IAAMoI,EAAU1K,IAAM2K,SAAQ,kBAAM/J,EAAkB3D,OAAS,GAC7D,kBAAC,GAAD,KACG2D,EAAkBiK,KAAI,SAACxI,EAAUyI,GAAX,OACrB,kBAACyP,GAAD,CACEzU,MAAOgF,EACPC,IAAK1I,EAASzD,IACdgB,QAASyC,EACT8D,UAAWpE,GAAgBM,EAASzD,MAAQsL,EAC5CzF,UAAWuH,UAIhB,CAACpL,EAAmBmB,IAEvB,OACE,kBAAC,GAAD,KACGlB,EACG,kBAAC,EAAD,MACA6J,IAMJO,GAAO3P,IAAOC,IAAV,MAIJqP,GAAUtP,IAAOC,IAAV,MAIc,gBAAGmE,EAAH,EAAGA,MAAH,8CACrBA,EAAMqI,MAAMC,UADS,mBAErBtI,EAAMqI,MAAMC,UAFS,a,y/CCtENyS,G,YACnB,WAAYra,GAAQ,IAAD,8BACjB,4CAAMA,KAQRsa,iBAAmB,WACjB,EAAKjY,SAAS,CAAEpC,SAAU,OAC1B,EAAKoC,SAAS,CAAEoE,OAAO,KAXN,EAcnB8T,eAAiB,SAAAC,GACf,EAAKnY,SAAS,CAAEpC,SAAUua,EAAK/T,OAAO,IACtC,EAAKvG,KhCwCF,SAAkB3E,GACvB,IACIkf,EADYlf,EAAEG,MAAM,KAAK,GACNkZ,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KACtD,OAAOlW,KAAKgc,MAAMrf,OAAOsf,KAAKF,IgC3ChBG,CAASJ,GACrB,EAAKtY,aAAa,OAAQ,EAAKhC,MAC/B,EAAKrB,cAhBL,EAAKkB,MAAQ,CACX0G,OAAO,EACPxG,SAAU,KACV4a,QAAS,MALM,E,sEAqBT,IAAD,OACP,OACE,kBAACzV,EAAD,MACK,SAAA0V,GAIC,OAHA,EAAK5Y,aAAe4Y,EAAiB5Y,aACrC,EAAKrD,WAAaic,EAAiBjc,WAGjC,6BACE,kBAACkc,GAAD,CACE7B,MAAO,CAAE8B,QAAS,EAAKjb,MAAM0G,MAAQ,OAAS,SAE9C,kBAACwU,GAAD,KACE,kBAACC,GAAD,yBACmB,2BAAIJ,EAAiBrd,YAGxC,kBAAC0d,GAAD,KACE,yBAAKpX,GAAG,aAGV,kBAACmX,GAAD,KACGE,GAAW3Q,KAAI,SAAC4Q,EAAOve,GACtB,IAAIwe,EAAKD,EAAK,WACVE,EAAQF,EAAK,SAEbG,EAAO,UADJ,yCACI,uBAAwBF,EAAxB,qBAAuCC,GAClD,OACE,yBAAK5Q,IAAK2Q,EAAKxe,EAAGoc,MAAO,CAAEuC,aAAc,QACvC,yBAAKvC,MAAO,CAAEwC,SAAU,UACtB,uBAAGC,KAAMH,GACNF,EADH,KACSD,EAAMO,kBAMvB,yEAC6C,6BAC3C,yCAFF,QAEwB,uCAFxB,wEAOJ,kBAACC,GAAD,a,0CAUdxgB,OAAOygB,aACP,IAAIC,EAAM3gB,IACV2gB,EAAM9W,KAAKsV,eAAewB,GAAO9W,KAAKqV,uB,GA9EN0B,aAkF9BjB,GAAU7f,IAAOC,IAAV,MAeP8f,GAAW/f,IAAOC,IAAV,MAYR0gB,GAAW3gB,IAAOC,IAAV,MAUR+f,GAAehgB,IAAOC,IAAV,MAgBZggB,GAAcjgB,IAAOC,IAAV,MAWXigB,GAAa,CACjB,CACEQ,YAAa,oBACbjF,WAAY,MACZsF,SAAU,yC,y7DCnId,IAAMC,GAAS,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,kBAAwB,EAUpCvc,IAAMgK,WAAWjK,GARnBM,EAFsC,EAEtCA,SACAC,EAHsC,EAGtCA,KACAE,EAJsC,EAItCA,2BACA3C,EALsC,EAKtCA,UACA6E,EANsC,EAMtCA,SACAI,EAPsC,EAOtCA,sBACArC,EARsC,EAQtCA,sBACAF,EATsC,EAStCA,gBAEMvD,EAAawf,cAAbxf,SAXgC,EAaJgD,IAAMoG,SAAS,MAbX,mBAajCqW,EAbiC,KAarBC,EAbqB,KAclCC,EAAkB,kBAAMD,EAAc,OACtCE,EAAiB,SAAA3N,GAAK,OAAIyN,EAAczN,EAAM4N,gBAE9CC,EAAiB,kBAAMha,GAAuBvC,IAE9Cwc,EAAgB,WACpBvf,EAAY,sBACZA,EAAY,wBACZ/B,OAAOG,SAASohB,UAGZC,EAAW5c,GAAYC,EAEvB4c,EAAmBld,IAAM2K,SAAQ,kBAAMwN,GAAa,CACxDP,GAAOnW,MACPmW,GAAOhJ,YAFgD,mBAGtC,QAAd/Q,EAAsB,CAAC+Z,GAAOC,UAAY,QAC3C,CAACD,GAAQ/Z,IAEPsf,EAAyBnd,IAAM2K,SACnC,kBAAMuS,EAAiBxY,MAAK,SAAA6E,GAAC,OAAIA,EAAE2O,QAAUlb,OAC7C,CAACkgB,EAAkBlgB,IAGfogB,EAAgBpd,IAAM2K,SAAQ,kBAAMwN,GAAa,CACrDP,GAAOhO,UACPgO,GAAOE,YACPF,GAAOG,OACPH,GAAOtC,aACL,CAACsC,KAEL,OAAO5X,IAAM2K,SAAQ,kBACnB,kBAAC0S,GAAD,MACId,GACA,oCACE,kBAACe,EAAA,EAAD,CAAQC,QAAM,GACZ,kBAAC,GAAD,CACEnY,QAAO+X,GAAyBngB,EAChCwP,UAAU,UACVC,eAAe,UACf+Q,UAAU,OAETN,EAAiBrS,KAAI,SAAAtB,GAAC,OACrB,kBAAC,GAAD,CACEwB,IAAKxB,EAAE2O,MACPsF,UAAWC,IACX7Q,MAAOrD,EAAEqD,MACTxH,MAAOmE,EAAE2O,MACTwF,GAAInU,EAAE2O,aAMd,kBAACoF,EAAA,EAAD,CAAQK,MAAI,GACV,kBAACnL,GAAA,EAAD,CAAYnX,MAAM,UAAUyM,QAASgV,GACnC,kBAAC,KAAD,QAIHG,GACC,kBAACW,GAAD,KACGnd,EACG,kBAAC,IAAD,CAAQvF,KAAM,GAAIG,MAAM,YACxBmF,EAA2BqK,KAAI,SAAAgT,GAAE,OACjC,kBAACC,GAAD,CAAY/S,IAAK8S,EAAGjf,KAClB,kBAAC,GAAD,CAAUiH,MAAOgY,EAAG1U,UAAW/D,MAAOyY,EAAG1b,aAK/C,kBAACmb,EAAA,EAAD,CAAQC,QAAM,GACZ,kBAACQ,GAAD,CACEC,QAAS5a,QAAQqZ,GAAc,kBAAC,KAAD,MAAqB,kBAAC,KAAD,MACpD3U,QAAS8U,GAERtc,EAAK2d,SAMd,kBAAC,GAAD,OAEE5d,GACA,kBAAC6d,GAAD,CACEha,QAAQ,WACR7I,MAAM,YACNH,KAAK,SAHP,UAQD+hB,GAA0B,QAAdpf,GACb,kBAACsgB,GAAD,CACIja,QAAQ,WACRhJ,KAAK,QACL4M,QAASiV,GAET,kBAAC,KAAD,CAAY7hB,KAAK,aAIrB,kBAAC,GAAD,CACEkjB,SAAU3B,EACV4B,mBAAoB,KACpBC,gBAAiB,CAAEC,SAAU,MAAOC,WAAY,UAChDC,aAAc,CAAEF,SAAU,SAAUC,WAAY,UAChD9F,KAAMtV,QAAQqZ,GACd9D,QAASgE,GAERS,EAAcvS,KAAI,SAAAtB,GAAC,OAClB,kBAACmV,GAAD,CACE3T,IAAKxB,EAAE2O,MACPpQ,QAAS6U,EACTgC,gBAAgB,SAChBjB,GAAInU,EAAE2O,OAEL3O,EAAEqD,YAOb,kBAAChF,EAAA,EAAD,CACE1D,QAAQ,YACR7I,MAAM,UACNH,KAAK,QACL4M,QAASpF,GAET,kBAAC,KAAD,CAAUxH,KAAK,YACf,kBAACoiB,EAAA,EAAD,CAAQsB,QAAM,GAAd,YAKH,CACD5hB,EACAigB,EACAzc,EACA4c,EACAvf,EACA4e,EACAF,KAIEsC,GAAOvjB,YAAOwjB,KAAPxjB,CAAH,MAEc,qBAAGoE,MAAkBuI,QAAQG,WAAWC,WAI1DwE,GAAOvR,YAAOwR,KAAPxR,CAAH,MAMJqR,GAAMrR,YAAOyjB,KAAPzjB,CAAH,MAUHojB,GAAOpjB,YAAOmiB,IAAPniB,CAAH,MAwBJ6iB,GAAe7iB,YAAOsM,IAAPtM,CAAH,MAMZwiB,GAAaxiB,IAAOC,IAAV,MACL,qBAAGmE,MAAkBuI,QAAQC,KAAKC,WAIvCyV,GAAatiB,IAAOC,IAAV,KAML2V,GAAOG,SAKZ6M,GAAc5iB,YAAOsM,IAAPtM,CAAH,MAOXyiB,GAAWziB,YAAOsM,IAAPtM,CAAH,MAID,qBAAGoE,MAAkBuI,QAAQE,QAAQa,QAK5CqU,GAAS/hB,IAAO0jB,OAAV,MAOU,qBAAGtf,MAAkBuI,QAAQG,WAAWC,W,olCCrQ9D,IAAM4W,GAAe,WAAO,IAAD,EAOrBjf,IAAMgK,WAAWjK,GALnBQ,EAFuB,EAEvBA,gBACAD,EAHuB,EAGvBA,KACAD,EAJuB,EAIvBA,SACAxC,EALuB,EAKvBA,UACAiF,EANuB,EAMvBA,sBAEIlH,EAAW4gB,cAEX0C,EAAY,kBAAMpc,GAAsB,IAS9C9C,IAAM0G,WAAU,kBAAMwY,IAAW,IAEjC,IAAMjC,EAAW5c,GAAYC,EAEvB4c,EAAmBld,IAAM2K,SAAQ,kBAAMwN,GAAa,CACxDP,GAAOnW,MACPmW,GAAOhJ,YAFgD,mBAGtC,QAAd/Q,EAAsB,CAAC+Z,GAAOC,UAAY,QAC3C,CAACha,IAECuf,EAAgBpd,IAAM2K,SAAQ,kBAAMwN,GAAa,CACrDP,GAAOhO,UACPgO,GAAOE,YACPF,GAAOG,OACPH,GAAOtC,aACL,IAEJ,OACE,kBAAC,KAAD,CACEoD,KAAMnY,EACN4e,OAAO,OACPC,OA7Ba,kBAAMtc,GAAsB,IA8BzC6V,QAASuG,GAET,kBAAC,GAAD,KACE,kBAAC,GAAD,KACCjC,GAA0B,QAAdpf,GACX,kBAAC,GAAD,CAAYiK,QAjCE,WACpBtK,EAAY,sBACZA,EAAY,wBACZ/B,OAAOG,SAASohB,WA+BR,kBAAC,KAAD,CAAY9hB,KAAK,aAGlB+hB,GAAY,kBAAC,GAAD,KAAW3c,EAAK2d,OAC7B,kBAAC,GAAD,CAAYnW,QAASoX,GACnB,kBAAC,KAAD,QAGJ,kBAACrS,GAAA,EAAD,CACEzH,MAAOxJ,EAASoB,SAChBqP,SAAU6S,EACV1B,UAAU,MACVtZ,QAAQ,aACR7I,MAAM,UACNoR,eAAe,UACf4S,YAAY,YAGbnC,EAAiBrS,KAAI,SAAAtB,GAAC,OACrB,kBAAC,GAAD,CACEiU,UAAWC,IACX7Q,MAAOrD,EAAEqD,MACTxH,MAAOmE,EAAE2O,MACTwF,GAAInU,EAAE2O,WAGV,kBAACoH,GAAD,MACClC,EAAcvS,KAAI,SAAAtB,GAAC,OAClB,kBAAC,GAAD,CACEiU,UAAWC,IACX7Q,MAAOrD,EAAEqD,MACTxH,MAAOmE,EAAE2O,MACTwF,GAAInU,EAAE2O,eASZtN,GAAUtP,IAAOC,IAAV,MAKS,qBAAGmE,MAAkBuI,QAAQG,WAAWC,WAGxDiX,GAAchkB,YAAOqb,KAAPrb,CAAH,MAEO,gBAAGoE,EAAH,EAAGA,MAAH,OAAemJ,IAAQnJ,EAAMuI,QAAQC,KAAKC,SAASW,MAAM,IAAKC,YAKhFyJ,GAAalX,YAAOikB,KAAPjkB,CAAH,MAEH,qBAAGoE,MAAkBuI,QAAQE,QAAQa,QAI5C2D,GAAMrR,YAAOyjB,KAAPzjB,CAAH,MAaH+hB,GAAS/hB,IAAOC,IAAV,MAKiB,gBAAGmE,EAAH,EAAGA,MAAH,OAAemJ,IAAQnJ,EAAMuI,QAAQC,KAAKC,SAASW,MAAM,IAAKC,YAGrFgV,GAAWziB,IAAOC,IAAV,MAKH,qBAAGmE,MAAkBuI,QAAQE,QAAQa,Q,oZCnIhD,IA0CMiC,GAAO3P,IAAOC,IAAV,MAIO,qBAAGmE,MAAkB8f,WAAWC,cACjC,gBAAG/f,EAAH,EAAGA,MAAH,oBACHA,EAAMuI,QAAQG,WAAWsX,SADtB,aACmC7W,IAAQnJ,EAAMuI,QAAQG,WAAWC,SAASS,MAAM,QAO7F8B,GAAUtP,IAAOC,IAAV,MAMEokB,GA7DH,WAAO,IAAD,EAC+C3f,IAAMgK,WAAWjK,GAAxEsE,EADQ,EACRA,6BAA8BD,EADtB,EACsBA,UAAWvG,EADjC,EACiCA,UAE3C0e,EAAoBqD,YAAc,CACtCC,KAAMjI,GAAOI,gBACb8H,QAAQ,EACRC,WAAW,IAWb,OARA/f,IAAM0G,WAAU,WACdtC,MACC,CAACvG,IAEJmC,IAAM0G,WAAU,WACdrC,MACC,IAEIrE,IAAM2K,SAAQ,kBACnB,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAQ4R,kBAAmBA,IAC3B,kBAACe,EAAA,EAAD,CAAQK,MAAI,IACRpB,GAAqB,kBAAC,GAAD,OAEzB,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOsD,KAAMjI,GAAOnW,MAAOue,OAAK,EAACxC,UAAW5M,KAC5C,kBAAC,IAAD,CAAOiP,KAAMjI,GAAOhJ,WAAY4O,UAAWhD,KAC3C,kBAAC,IAAD,CAAOqF,KAAMjI,GAAOC,SAAU2F,UAAWzR,KACzC,kBAAC,IAAD,CAAO8T,KAAMjI,GAAOhO,UAAW4T,UAAWzT,KAC1C,kBAAC,IAAD,CAAO8V,KAAMjI,GAAOG,OAAQyF,UAAWpQ,KACvC,kBAAC,IAAD,CAAOyS,KAAMjI,GAAOE,YAAa0F,UAAWtG,KAC5C,kBAAC,IAAD,CAAO2I,KAAMjI,GAAOtC,SAAUkI,UAAWrI,KACzC,kBAAC,IAAD,CAAO0K,KAAMjI,GAAOI,gBAAiBwF,UAAWzR,KAChD,kBAAC,IAAD,CAAU2R,GAAI9F,GAAOnW,aAI1B,CAAC8a,K,6BCzDA0D,GAAYC,aAAe,CAC/BV,WAAY,CACVC,WAAY,2HAEdxX,QAAS,CACPE,QAAS,CACPa,KAAM,UACNJ,aAAc,WAEhBuX,UAAW,CACTnX,KAAM,UACNJ,aAAc,QAEhBV,KAAM,CACJC,QAAS,UACTgY,UAAW,WAEb/X,WAAY,CACVC,QAAS,UACT+X,MAAO,UACPV,SAAU,+GAEZW,OAAQ,CACNC,SAAU,YACVC,MAAO,cAGXxY,MAAO,CACLU,aAAc,EACdT,UAAW,WCnBTwY,GAAuB,CAC3BjC,SAAU,SACVC,WAAY,SA8BCrZ,GA3BE,SAAC,GAAkB,IAAhBG,EAAe,EAAfA,SACZmb,EAAWC,aAAc,UAAD,OAAWxP,GAAOG,UAE1CsP,EAAQf,YAAc,CAC1BC,KAAMjI,GAAOI,gBACb8H,QAAQ,EACRC,WAAW,IAGb,OACE,kBAAC,mBAAD,CACEtB,aAAc+B,GACdI,MAAOH,EACPI,SAAU,EACVC,iBAAkBL,GAElB,kBAAC,KAAD,CAAkB/gB,MAAOugB,IACvB,kBAAC,IAAD,CAAevgB,MAAOugB,IACpB,kBAAC,EAAD,CAAiBpiB,UAAW8iB,EAAQA,EAAMziB,OAAO8O,UAAYvR,OAAOC,YACjE4J,OCxBOlC,QACW,cAA7B3H,OAAOG,SAASmlB,UAEe,UAA7BtlB,OAAOG,SAASmlB,UAEhBtlB,OAAOG,SAASmlB,SAASJ,MACvB,2DCTNK,IAASC,OACP,kBAAC,IAAD,CAAYC,SAAS,KACnB,kBAAC,GAAD,KACE,kBAAC,GAAD,QAGJvkB,SAASwkB,eAAe,SDkHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM9d,MAAK,SAAA+d,GACjCA,EAAaC,kB","file":"static/js/main.0c5868a2.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst Preloader = ({ size  }) => (\n  <CssPreloader>\n    <CircularProgress size={size} color=\"primary\" />\n  </CssPreloader>\n);\n\nexport { Preloader };\n\nconst CssPreloader = styled.div`\n  z-index: 9;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n`;\n","const eatCookie = () => {\n  const getCookie = o => {\n    for (\n      var e = o + \"=\",\n        n = decodeURIComponent(document.cookie).split(\";\"),\n        t = 0;\n      t < n.length;\n      t++\n    ) {\n      for (var i = n[t]; \" \" === i.charAt(0); ) i = i.substring(1);\n      if (0 === i.indexOf(e)) return i.substring(e.length, i.length);\n    }\n    return \"\";\n  };\n  const setCookie = (o, e) => {\n    var n = new Date();\n    n.setTime(n.getTime() + 864e5);\n    var t = \"expires=\" + n.toUTCString();\n    document.cookie = o + \"=\" + e + \";\" + t + \";path=/\";\n  };\n\n  function getQueryParams(o) {\n    o = o.split(\"+\").join(\" \");\n    for (var e, n = {}, t = /[?&]?([^=]+)=([^&]*)/g; (e = t.exec(o)); )\n      n[decodeURIComponent(e[1])] = decodeURIComponent(e[2]);\n    return n;\n  }\n\n  let o;\n  //console.log(\"let = \");\n  if (window.location.search) {\n    o = getQueryParams(window.location.search).token;\n  }\n  if (o) {\n    setCookie(\"xsolla_login_token\", o);\n    window.history.pushState(\"\", \"\", document.location.pathname);\n  } else {\n    o = getCookie(\"xsolla_login_token\");\n  }\n  if (o && o !== \"undefined\") {\n    //console.log(\"o = \", o);\n    return o;\n  } else {\n    return null;\n  }\n};\n\nexport default function Cookie() {\n  return 44056 === window.xProjectId\n    ? 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE5NjIyMzQwNDgsImlzcyI6Imh0dHBzOi8vbG9naW4ueHNvbGxhLmNvbSIsI'\n    + 'mlhdCI6MTU2MjE0NzY0OCwidXNlcm5hbWUiOiJ4c29sbGEiLCJ4c29sbGFfbG9naW5fYWNjZXNzX2tleSI6IjA2SWF2ZHpDeEVHbm5aMTlp'\n    + 'LUc5TmMxVWFfTWFZOXhTR3ZEVEY4OFE3RnMiLCJzdWIiOiJkMzQyZGFkMi05ZDU5LTExZTktYTM4NC00MjAxMGFhODAwM2YiLCJlbWFpbCI'\n    + '6InN1cHBvcnRAeHNvbGxhLmNvbSIsInR5cGUiOiJ4c29sbGFfbG9naW4iLCJ4c29sbGFfbG9naW5fcHJvamVjdF9pZCI6ImU2ZGZhYWM2LTc'\n    + '4YTgtMTFlOS05MjQ0LTQyMDEwYWE4MDAwNCIsInB1Ymxpc2hlcl9pZCI6MTU5MjR9.GCrW42OguZbLZTaoixCZgAeNLGH2xCeJHxl8u8Xn2aI'\n    : eatCookie();\n}\n\nexport function eraseCookie(o) {\n  return (document.cookie =\n    o + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;\");\n}\n\nexport function parseJwt(o) {\n  let base64Url = o.split(\".\")[1];\n  let base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\n  return JSON.parse(window.atob(base64));\n}\n","import axios from 'axios';\n\nconst CancelToken = axios.CancelToken;\n\nlet cartGettingCancel = () => void 0\nexport const getCart = async (projectId, loginToken, cartId) => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectId}/cart/${cartId}`\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`,\n    },\n    cancelToken: new CancelToken(c => {\n      cartGettingCancel();\n      cartGettingCancel = c;\n    })\n  };\n\n  const response = await axios.get(url, params);\n\n  return response.data;\n}\n\nlet quantityChangingCancel = () => void 0;\nexport const changeItemQuantityCart = async (\n  projectId,\n  loginToken,\n  cartId,\n  sku,\n  quantity,\n) => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectId}/cart/${cartId}/item/${sku}`;\n  const data = JSON.stringify({ quantity });\n  const params = {\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      Authorization: `Bearer ${loginToken}`\n    },\n    cancelToken: new CancelToken(c => {\n      cartGettingCancel();\n      quantityChangingCancel();\n      quantityChangingCancel = c;\n    })\n  }\n\n  const response = await axios.put(url, data, params);\n \n  return response.data;\n}\n\nexport const createCart = async (projectId, loginToken) => {\n  const url = `https://store.xsolla.com/api/v1/project/${projectId}/cart`;\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`,\n    }\n  }\n\n  const response = await axios.post(url, undefined, params);\n\n  return response.data;\n}\n\nexport const removeItemFromCart = async (projectId, loginToken, cartId, sku) => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectId}/cart/${cartId}/item/${sku}`;\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`\n    },\n    cancelToken: new CancelToken(c => {\n      cartGettingCancel();\n      quantityChangingCancel();\n    })\n  }\n  \n  const response = await axios.delete(url, params);\n\n  return response.data;\n}\n\nexport const getPsTokenBuyCart = async (projectId, loginToken, cartId) => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectId}/payment/cart/${cartId}`;\n  const data = {\n    sandbox: true,\n    settings: {\n      ui: {\n        theme: 'dark'\n      }\n    }\n  };\n  const params = {\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n\n  const response = await axios.post(url, data, params);\n\n  return response.data;\n}\n\nexport const quickPurchaseBuyVirtualCurrency = async (projectId, product, loginToken) => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectId}/payment/item/${product.sku}/virtual/${product.virtual_prices[0].sku}`;\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`\n    }\n  };\n\n  const response = await axios.post(url, {}, params);\n\n  return response.data;\n}\n\nexport const getVirtualCurrencyBalance = async (projectId, loginToken) => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectId}/user/virtual_currency_balance`;\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`,\n    }\n  }\n\n  const response = await axios.get(url, params);\n\n  return response.data;\n}\n","import React from 'react';\nimport { withSnackbar } from 'notistack';\n\nimport Cookie from './components/Cookie';\nimport {\n  getCart,\n  createCart,\n  removeItemFromCart,\n  changeItemQuantityCart,\n  getVirtualCurrencyBalance\n} from './components/StoreLoader';\n\nconst ProductContext = React.createContext();\n\nclass ProductProvider extends React.PureComponent {\n  state = {\n    projectId: this.props.projectId,\n    logToken: Cookie(),\n    user: null,\n    isSideMenuShown: false,\n\n    userBalanceVirtualCurrency: [],\n    isUserBalanceFetching: false,\n\n    virtualItems: [],\n    areVirtualItemsFetching: false,\n\n    virtualCurrencies: [],\n    areVirtualCurrenciesFetching: false,\n\n    physicalItems: [],\n    arePhysicalItemsFetching: false,\n\n    inventoryItems: [],\n    areInventoryItemsFetching: false,\n    isItemConsuming: false,\n\n    entitlementItems: [],\n    areEntitlementItemsFetching: false,\n    isRedeeming: false,\n\n    isVCCartShown: false,\n    isVCCartProcessing: false,\n    vcCart: {\n      items: [],\n      vcPriceSku: null\n    },\n\n    isCartShown: false,\n    isCartCreating: false,\n    isCartLoading: false,\n    isQuantityChanging: false,\n    isItemAdding: false,\n    isItemRemoving: false,\n    cart: {\n      cartId: null,\n      items: [],\n      price: {\n        amount: 0,\n        amount_without_discount: 0,\n        currency: '',\n      }\n    },\n  };\n\n  setStateFrom = (stateName, stateValue) => this.setState({ [stateName]: stateValue });\n\n  showCart = () => this.setState({ isCartShown: true });\n  hideCart = () => this.setState({ isCartShown: false });\n\n  showVCCart = () => this.setState({ isVCCartShown: true });\n  hideVCCart = () => this.setState({ isVCCartShown: false });\n\n  setSideMenuVisibility = isSideMenuShown => this.setState({ isSideMenuShown });\n\n  setEntitlementItems = entitlementItems => this.setState({ entitlementItems });\n  setInventoryItems = inventoryItems => this.setState({ inventoryItems });\n\n  setPhysicalItems = items => this.setState({\n    physicalItems: items.filter(item => Boolean(item.price))\n  });\n\n  setVirtualCurrencies = items => this.setState({\n    virtualCurrencies: items.filter(item => Boolean(item.price))\n  });\n\n  setVirtualItems = items => this.setState({ virtualItems: items });\n\n  getCart = () => {\n    const { enqueueSnackbar } = this.props;\n    const { cart, logToken, projectId } = this.state;\n\n    this.setState({ isCartLoading: true });\n    getCart(projectId, logToken, cart.cartId)\n      .then(cart => {\n        this.setState({\n          isCartLoading: false,\n          cart: {\n            cartId: cart.cart_id,\n            items: cart.items\n              .filter(item => Boolean(item.price))\n              .sort(this.compareItems),\n            price: cart.price || 0,\n          },\n        })\n      })\n      .catch(error => {\n        this.setState({ isCartLoading: false });\n        if (!error.__CANCEL__) {\n          const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n          enqueueSnackbar(errorMsg, { variant: 'error' });\n        }\n      });\n  };\n\n  createCart = () => {\n    const { enqueueSnackbar } = this.props;\n    const { projectId, logToken } = this.state;\n\n    this.setState({ isCartCreating: true });\n    createCart(projectId, logToken)\n      .then(cart => {\n        this.setState({\n          isCartCreating: false,\n          cart: {\n            cartId: cart.id,\n            items: [],\n            price: {\n              amount: 0,\n              amount_without_discount: 0,\n              currency: '',\n            }\n          }\n        });\n      })\n      .catch(error => {\n        this.setState({ isCartCreating: false });\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  };\n\n  clearCart = () => {\n    this.createCart();\n    this.updateVirtualCurrencyBalance();\n  };\n\n  compareItems = (a, b) => a.sku > b.sku ? 1 : -1;\n\n  buyByVC = product => {\n    this.setState({\n      isVCCartShown: true,\n      vcCart: { items: [product] },\n    });\n  };\n\n  clearVCCart = () => {\n    this.setState({\n      isVCCartShown: false,\n      vcCart: { items: [] },\n    });\n  };\n\n  addToCart = product => {\n    const { enqueueSnackbar } = this.props;\n    const { cart, logToken, projectId } = this.state;\n    const isItemExist = cart.items.some(elem => elem.sku === product.sku);\n\n    if (isItemExist) {\n      this.setState({ isCartShown: true });\n    } else {\n      this.setState({ isItemAdding: true });\n      changeItemQuantityCart(projectId, logToken, cart.cartId, product.sku, 1)\n        .then(() => {\n          this.setState({\n            isItemAdding: false,\n            cart: {\n              ...cart,\n              items: [{ ...product, quantity: 1 }, ...cart.items].sort(this.compareItems),\n              price: {\n                ...cart.price,\n                amount: cart.price.amount + product.price.amount,\n                amount_without_discount: cart.price.amount_without_discount + product.price.amount_without_discount,\n              },\n            },\n          });\n          this.getCart();\n          this.showCart();\n        })\n        .catch(error => {\n          this.setState({ isItemAdding: false });\n          if (!error.__CANCEL__) {\n            const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n            enqueueSnackbar(errorMsg, { variant: 'error' });\n          }\n        });\n    }\n  };\n\n  removeFromCart = product => {\n    const { enqueueSnackbar } = this.props;\n    const { projectId, logToken, cart } = this.state;\n    this.setState({\n      isItemRemoving: true,\n      cart: {\n        ...cart,\n        items: cart.items\n          .filter(prod => prod.sku !== product.sku)\n          .sort(this.compareItems),\n        price: {\n          ...cart.price,\n          amount: cart.price.amount - product.price.amount * product.quantity,\n          amount_without_discount: cart.price.amount_without_discount - product.price.amount_without_discount * product.quantity\n        }\n      }\n    });\n    removeItemFromCart(projectId, logToken, cart.cartId, product.sku)\n      .then(() => {\n        this.setState({ isItemRemoving: false });\n        this.getCart();\n      })\n      .catch(error => {\n        this.getCart();\n        this.setState({ isItemRemoving: false });\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  };\n\n  changeItemQuantityInCart = (product, quantity) => {\n    const { enqueueSnackbar } = this.props;\n    const { cart, logToken, projectId } = this.state;\n\n    const updatedItemIndex = cart.items.findIndex(item => item.sku === product.sku);\n    const updatedItem = { ...product, quantity };\n\n    this.setState({\n      cart: {\n        ...cart,\n        items: [\n          ...cart.items.slice(0, updatedItemIndex),\n          updatedItem,\n          ...cart.items.slice(updatedItemIndex + 1),\n        ].sort(this.compareItems),\n      }\n    });\n    changeItemQuantityCart(projectId, logToken, cart.cartId, product.sku, quantity)\n      .then(this.getCart)\n      .catch(error => {\n        if (!error.__CANCEL__) {\n          const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n          this.getCart();\n          enqueueSnackbar(errorMsg, { variant: 'error' });\n        }\n      });\n  };\n\n  updateVirtualCurrencyBalance = () => {\n    const { enqueueSnackbar } = this.props;\n    const { projectId, logToken } = this.state;\n\n    this.setState({ isUserBalanceFetching: true });\n    getVirtualCurrencyBalance(projectId, logToken)\n      .then(data => {\n        this.setState({\n          isUserBalanceFetching: false,\n          userBalanceVirtualCurrency: data.items,\n        });\n      })\n      .catch(error => {\n        this.setState({ isUserBalanceFetching: false });\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      })\n  };\n\n  render() {\n    return (\n      <ProductContext.Provider\n        value={{\n          ...this.state,\n          setStateFrom: this.setStateFrom,\n          setInventoryItems: this.setInventoryItems,\n          setVirtualCurrencies: this.setVirtualCurrencies,\n          setPhysicalItems: this.setPhysicalItems,\n          setVirtualItems: this.setVirtualItems,\n          setEntitlementItems: this.setEntitlementItems,\n          addToCart: this.addToCart,\n          removeFromCart: this.removeFromCart,\n          createCart: this.createCart,\n          getCart: this.getCart,\n          clearCart: this.clearCart,\n          clearVCCart: this.clearVCCart,\n          showVCCart: this.showVCCart,\n          hideVCCart: this.hideVCCart,\n          buyByVC: this.buyByVC,\n          showCart: this.showCart,\n          hideCart: this.hideCart,\n          changeItemQuantityInCart: this.changeItemQuantityInCart,\n          updateVirtualCurrencyBalance: this.updateVirtualCurrencyBalance,\n          setSideMenuVisibility: this.setSideMenuVisibility,\n        }}\n      >\n        {this.props.children}\n      </ProductContext.Provider>\n    );\n  }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductContext, ProductConsumer };\n\nexport default withSnackbar(ProductProvider);\n","import React from 'react';\nimport styled from 'styled-components';\nimport Colorer from 'color';\nimport Dotdotdot from 'react-dotdotdot'\n\nimport Collapse from '@material-ui/core/Collapse';\nimport MUICardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst ProductCard = React.memo(({\n  image,\n  order,\n  name,\n  value,\n  description,\n  actionButtonContent,\n  onAction,\n  isLoading,\n}) => {\n  const [isShown, setShown] = React.useState(false);\n  const showCard = () => setShown(true);\n\n  const [isHovered, setHovered] = React.useState(false);\n  const handleMouseEnter = () => setHovered(true);\n  const handleMouseLeave = () => setHovered(false);\n\n  React.useEffect(() => {\n    setTimeout(showCard, order * 100);\n  }, []);\n\n  return (\n    <CardAppear shown={isShown} hovered={isHovered}>\n      <Card\n        hovered={isHovered}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <CardImage image={image}/>\n        <CardContent>\n          <CardTitle>{name}</CardTitle>\n          <Collapse in={isHovered} timeout=\"auto\" collapsedHeight=\"50px\">\n            {isHovered\n              ? description\n              : (\n              <Dotdotdot animate clamp={2}>\n                {description}\n              </Dotdotdot>\n            )}\n          </Collapse>\n        </CardContent>\n        {(onAction || value) && (\n          <CardFooter>\n            {value && (\n              <CardQuantity>\n                {value}\n              </CardQuantity>\n            )}\n            {onAction && (\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                disabled={isLoading}\n                onClick={onAction}\n              >\n                {isLoading ? <CircularProgress size={24} color=\"primary\"/> : actionButtonContent}\n              </Button>\n            )}\n          </CardFooter>\n        )}\n      </Card>\n    </CardAppear>\n  );\n});\n\nconst CardAppear = styled.div`\n  position: relative;\n  z-index: ${props => props.hovered ? 1 : 0};\n  width: ${({ theme }) => theme.shape.cardWidth};\n  height: ${({ theme }) => theme.shape.cardWidth};\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  opacity: ${props => props.shown ? 1 : 0};\n  transform: ${props => props.shown ? 'none' : 'translateY(20px)'};;\n`;\n\nconst Card = styled.div`\n  position: absolute;\n  color: ${({ theme }) => theme.palette.text.primary};\n  display: flex;\n  flex-direction: column;\n  width: ${({ theme }) => theme.shape.cardWidth};\n  min-height: ${({ theme }) => theme.shape.cardWidth};\n  background-color: ${({ theme, hovered }) => hovered ? theme.palette.background.default : 'transparent'};\n  box-shadow: ${({ theme, hovered }) => hovered ? theme.shadows[8] : 'none'};\n  transition: ${({ theme }) => theme.transitions.create(['box-shadow', 'background-color'])};\n  border-radius: ${({ theme }) => `${theme.shape.borderRadius}px`};\n`;\n\nconst CardContent = styled(MUICardContent)`\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0;\n  margin-bottom: 8px;\n`;\n\nconst CardTitle = styled.div`\n  color: ${({ theme }) => theme.palette.primary.contrastText};\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  font-weight: bolder;\n`;\n\nconst CardFooter = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  border-top: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  padding: 8px 0;\n  height: 53px;\n  margin: 0px 16px 0 16px;\n`;\n\nconst CardImage = styled.div`\n  display: block;\n  margin-top: 8px;\n  height: 120px;\n  flex-shrink: 1;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CardQuantity = styled.div`\n  flex-grow: 1;\n  color: ${({ theme }) => theme.palette.primary.main};\n  font-weight: 600;\n`;\n\nexport { ProductCard };\n","import React from 'react';\n\nimport { ProductCard } from '../../components/ProductCard';\n\nexport const InventoryItem = React.memo(({\n  item,\n  order,\n  isLoading,\n  onConsume,\n}) => {\n\n  const handleItemConsume = () => onConsume(item, order);\n\n  return (\n    <ProductCard\n      image={item.image_url}\n      name={item.name}\n      order={order}\n      isLoading={isLoading}\n      value={`Quantity: ${item.quantity}`}\n      description={item.description}\n      actionButtonContent=\"Consume\"\n      onAction={item.remaining_uses ? handleItemConsume : undefined}\n    />\n  )\n});\n\n","import axios from 'axios';\nimport { Inventory } from 'store-js-sdk/src/inventory/inventory';\nimport { init } from 'store-js-sdk/src/init';\n\nexport const loadInventory = async (projectId, loginToken) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectId}/user/inventory/items`;\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`\n    },\n  };\n  const response = await axios.get(URL, params);\n\n  return response.data.items.filter(x => x.type === 'virtual_good');\n}\n\nexport const consumeItem = async (projectId, loginToken, item) => {\n  init({ projectId, version: 'v2' });\n  const inventory = new Inventory(loginToken);\n  return await inventory.consumeItem(item.sku, 1, item.instance_id);\n}","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { Preloader } from '../../components/Preloader';\nimport { ProductContext } from '../../context';\nimport { InventoryItem } from './InventoryItem';\nimport { loadInventory, consumeItem } from './InventoryLoader';\n\nconst InventoryList = () => {\n  const {\n    cart,\n    logToken,\n    projectId,\n    setStateFrom,\n    inventoryItems,\n    isItemConsuming,\n    areInventoryItemsFetching,\n    setInventoryItems,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [activeItemID, setActiveItemID] = React.useState(null);\n\n  const handleConsumeItem = React.useCallback(item => {\n    setStateFrom('isItemConsuming', true);\n    setActiveItemID(item.sku);\n    consumeItem(projectId, logToken, item)\n      .then(() => {\n        const updateInventoryItemIndex = inventoryItems.findIndex(x => x.sku === item.sku);\n        const updatedInventoryItem = inventoryItems[updateInventoryItemIndex];\n\n        if (updatedInventoryItem) {\n          const newInventoryItems = updatedInventoryItem.quantity > 1 ? [\n            ...inventoryItems.slice(0, updateInventoryItemIndex),\n            {\n              ...updatedInventoryItem,\n              quantity: updatedInventoryItem.quantity - 1,\n            },\n            ...inventoryItems.slice(updateInventoryItemIndex + 1),\n          ] : [\n            ...inventoryItems.slice(0, updateInventoryItemIndex),\n            ...inventoryItems.slice(updateInventoryItemIndex + 1),\n          ];\n\n          setInventoryItems(newInventoryItems);\n        }\n\n        setStateFrom('isItemConsuming', false);\n      })\n      .catch(error => {\n        setStateFrom('isItemConsuming', false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  });\n\n  const loadInventoryItems = () => {\n    setStateFrom('areInventoryItemsFetching', true);\n    loadInventory(projectId, logToken)\n      .then(data => {\n        setInventoryItems(data);\n        setStateFrom('areInventoryItemsFetching', false);\n      })\n      .catch(error => {\n        setStateFrom('areInventoryItemsFetching', false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  }\n\n  React.useEffect(() => {\n    loadInventoryItems();\n  }, []);\n\n  React.useEffect(() => {\n    if (!areInventoryItemsFetching && cart.cartId && inventoryItems.length === 0) {\n      loadInventoryItems();\n    }\n  }, [inventoryItems.length, cart.cartId]);\n\n  const content = React.useMemo(() => inventoryItems.length > 0 ? (\n    <Content>\n      {inventoryItems.map((item, index) => (\n        <InventoryItem\n          order={index}\n          key={item.sku}\n          item={item}\n          isLoading={isItemConsuming && activeItemID === item.sku}\n          onConsume={handleConsumeItem}\n        />\n      ))}\n    </Content>\n  ) : (\n    <EmptyText>Oops, you have nothing bought yet!</EmptyText>\n  ), [inventoryItems, isItemConsuming]);\n\n  return (\n    <Body>\n      {areInventoryItemsFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  padding: 30px 0;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  grid-gap: 30px;\n  grid-template-columns: ${({ theme }) => `repeat(auto-fit, minmax(\n    ${theme.shape.cardWidth}, \n    ${theme.shape.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nconst EmptyText = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n`;\n\nexport { InventoryList };\n","import { PhysicalGood } from 'store-js-sdk/src/physical-goods/physical-goods';\nimport { init } from 'store-js-sdk/src/init';\n\nexport const loadPhysicalGoods = async (projectId, loginToken) => {\n    //TODO добавить возможность использовать cancelToken в SDK\n    init({ projectId, version: 'v2' });\n    const physicalGood = new PhysicalGood(loginToken);\n    const response = await physicalGood.getPhysicalGoodList();\n    return response.data.items;\n};","import React from 'react';\nimport styled from 'styled-components';\n\nimport Avatar from '@material-ui/core/Avatar';\n\nconst Currency = ({ image, value, currency }) => (\n  <Body>\n    {image && <CurrencyIcon src={image} />}\n    {currency && <CurrencyAcronym>{currency}</CurrencyAcronym>}\n    {value}\n  </Body>\n);\n\nconst Body = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst CurrencyAcronym = styled.span`\n  margin-right: 5px;\n`;\n\nconst CurrencyIcon = styled(Avatar)`\n  && {\n    height: 1em;\n    width: 1em;\n    margin-right: 5px;\n  }\n`;\n\nexport { Currency };\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const PhysicalItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n}) => {\n\n  const handleItemAdd = () => addToCart(product);\n\n  const price = React.useMemo(() => product.price ? (\n    <Currency\n      currency={product.price.currency}\n      value={Math.round(product.price.amount * 100) / 100} />\n  ) : null, [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={<ShoppingCart />}\n      onAction={handleItemAdd}\n    />\n  )\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { ProductContext } from '../../context';\nimport { Preloader } from '../../components/Preloader';\nimport { loadPhysicalGoods } from './PhysicalListLoader';\nimport { PhysicalItem } from './PhysicalItem';\n\nconst PhysicalList = () => {\n  const {\n    logToken,\n    projectId,\n    addToCart,\n    setStateFrom,\n    physicalItems,\n    arePhysicalItemsFetching,\n    setPhysicalItems,\n    isItemAdding,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [activeItemID, setActiveItemID] = React.useState(null);\n\n  const handleItemAdding = React.useCallback(item => {\n    addToCart(item);\n    setActiveItemID(item.sku);\n  }, []);\n\n  const loadPhysicalGoodsList = () => {\n    setStateFrom('arePhysicalItemsFetching', true);\n    loadPhysicalGoods(projectId, logToken)\n      .then(items => {\n        setPhysicalItems(items);\n        setStateFrom('arePhysicalItemsFetching', false);\n      })\n      .catch(error => {\n        enqueueSnackbar(error.message, { variant: 'error' });\n        setStateFrom('arePhysicalItemsFetching', false);\n      });\n  }\n\n  React.useEffect(() => {\n    loadPhysicalGoodsList();\n    setActiveItemID(null);\n  }, [projectId]);\n\n  const content = React.useMemo(() => physicalItems.length > 0 && (\n    <Content>\n      {physicalItems.map((item, index) => (\n        <PhysicalItem\n          order={index}\n          key={item.sku}\n          product={item}\n          isLoading={isItemAdding && activeItemID === item.sku}\n          addToCart={handleItemAdding}\n        />\n      ))}\n    </Content>\n  ), [physicalItems, isItemAdding]);\n\n  return (\n    <Body>\n      {arePhysicalItemsFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  height: 100%;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${({ theme }) => `repeat(auto-fit, minmax(\n    ${theme.shape.cardWidth}, \n    ${theme.shape.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nexport { PhysicalList };\n","import React from 'react';\nimport styled from 'styled-components';\nimport MUITabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst GroupSwitcher = ({\n  groups,\n  activeGroup,\n  onGroupChange,\n}) => {\n  const handleGroupChange = (_, groupID) => onGroupChange(groupID);\n\n  return (\n    <Tabs\n      value={activeGroup}\n      onChange={handleGroupChange}\n      variant=\"scrollable\"\n      textColor=\"primary\"\n      indicatorColor=\"primary\"\n    >\n      {groups.map(group => (\n        <Tab\n          value={group.id}\n          key={group.id}\n          label={group.label}\n        />\n      ))}\n    </Tabs>\n  );\n}\n\nconst Tabs = styled(MUITabs)`\n  padding: 30px 0;\n  \n  & .MuiTabs-flexContainer {\n    justify-content: center;\n  };\n`;\n\nexport { GroupSwitcher };\n","import axios from 'axios';\n\nexport const loadVirtualItems = async projectID => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_items`;\n  const response = await axios.get(url);\n\n  return response.data.items;\n}\n\nexport const loadVirtualCurrencies = async projectID => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_currency`;\n  const response = await axios.get(url);\n\n  return response.data.items;\n}\n\nexport const rewardItems = async data => {\n  const url = 'https://livedemo.xsolla.com/store-demo/api/index.php';\n  const response = await axios.post(url, data);\n\n  return response.data;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport MUITextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\n\nimport { ProductContext } from '../../context';\nimport { GroupSwitcher } from '../../components/GroupSwitcher';\nimport { Preloader } from '../../components/Preloader.js';\nimport { loadVirtualCurrencies, loadVirtualItems, rewardItems } from './ManageInventoryLoader';\n\nconst users = [\n  {\n    id: 'd342dad2-9d59-11e9-a384-42010aa8003f',\n    name: 'support@xsolla.com',\n  },\n  {\n    id: '7d8b1f52-7d3f-400b-acd8-46e3a4368596',\n    name: 'v.legotkin@xsolla.com',\n  },\n  {\n    id: '27bc1227-48a3-4da8-bb86-f8d093f68805',\n    name: 'r.ushakov@xsolla.com',\n  },\n  {\n    id: 'a7d10a4e-3f68-43cc-a6b2-893d2c68fd14',\n    name: 'p.sanachev@xsolla.com',\n  },\n];\n\nconst groups = [\n  {\n    id: 'items',\n    label: 'Items',\n  },\n  {\n    id: 'currencies',\n    label: 'Currencies',\n  },\n];\n\nconst ManageInventory = () => {\n  const { projectId, updateVirtualCurrencyBalance } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [userID, setUserID] = React.useState(null);\n  const [activeGroup, setActiveGroup] = React.useState(null);\n  const [selectedItem, setSelectedItem] = React.useState(null);\n  const [quantity, setQuantity] = React.useState(1);\n  const [isItemProcessing, setItemProcessing] = React.useState(false);\n  \n  const [areManageItemsFetching, setManageItemsFetching] = React.useState(false);\n  const [manageItems, setManageItems] = React.useState([]);\n\n  const [areManageCurrenciesFetching, setManageCurrenciesFetching] = React.useState(false);\n  const [manageCurrencies, setManageCurrencies] = React.useState([]);\n\n  const isFetching = areManageItemsFetching || areManageCurrenciesFetching;\n  const userOptions = React.useMemo(() => users.map(x => <MenuItem value={x.id}>{x.name}</MenuItem>, users));\n  const itemsOptions = React.useMemo(() => manageItems.map(x => <MenuItem value={x.sku}>{x.name}</MenuItem>, manageItems));\n  const currenciesOptions = React.useMemo(() => manageCurrencies.map(x => <MenuItem value={x.sku}>{x.name}</MenuItem>, manageCurrencies));\n\n  const groupsContent = {\n    items: {\n      name: 'Item',\n      items: manageItems,\n      options: itemsOptions,\n    },\n    currencies: {\n      name: 'Currency',\n      items: manageCurrencies,\n      options: currenciesOptions,\n    },\n  };\n\n  const processItem = type => {\n    if (!selectedItem || !userID) {\n      return;\n    }\n\n    const data = { type, user: userID, item: selectedItem, count: quantity };\n    setItemProcessing(true);\n    enqueueSnackbar('Operation is processing', { variant: 'info' });\n    rewardItems(data)\n      .then(() => {\n        setItemProcessing(false);\n        updateVirtualCurrencyBalance();\n        enqueueSnackbar('Complete', { variant: 'success' });\n      })\n      .catch(error => {\n        setItemProcessing(false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  }\n  \n  const handleFormSubmit = event => event.preventDefault();\n  const handleRewardItem = () => processItem('reward');\n  const handleRevokeItem = () => processItem('revoke');\n  const handleUserSelect = event => setUserID(event.target.value);\n  const handleItemSelect = event => setSelectedItem(event.target.value);\n  const handleQuantityChange = event => {\n    const value = Number(event.target.value);\n    setQuantity(value >= 1 ? value : 1);\n  };\n\n  React.useEffect(() => {\n    setUserID(users[0] ? users[0].id : null);\n  }, [users]);\n\n  React.useEffect(() => {\n    setActiveGroup(groups[0] ? groups[0].id : null);\n  }, [groups]);\n\n  React.useEffect(() => {\n    if (activeGroup && groupsContent[activeGroup] && groupsContent[activeGroup].items[0]) {\n      setSelectedItem(groupsContent[activeGroup].items[0].sku);\n      setQuantity(1);\n    }\n  }, [manageItems, manageCurrencies, activeGroup]);\n\n  React.useEffect(() => {\n    if (manageItems.length === 0) {\n      setManageItemsFetching(true);\n      loadVirtualItems(projectId)\n        .then(items => {\n          setManageItemsFetching(false);\n          setManageItems(items);\n        })\n        .catch(error => {\n          setManageItemsFetching(false);\n          enqueueSnackbar(error.message, { variant: 'error' })\n        });\n    }\n  }, [manageItems]);\n\n  React.useEffect(() => {\n    if (manageItems.length === 0) {\n      setManageCurrenciesFetching(true);\n      loadVirtualCurrencies(projectId)\n        .then(items => {\n          setManageCurrenciesFetching(false);\n          setManageCurrencies(items);\n        })\n        .catch(error => {\n          setManageCurrenciesFetching(false);\n          enqueueSnackbar(error.message, { variant: 'error' })\n        });\n    }\n  }, [manageCurrencies]);\n    \n  return (\n    <Body>\n      {isFetching\n        ? <Preloader />\n        : (\n          <Form onSubmit={handleFormSubmit}>\n            <TextField\n              select\n              label=\"User\"\n              value={userID}\n              color=\"primary\"\n              onChange={handleUserSelect}\n            >\n              {userOptions}\n            </TextField>\n            <GroupSwitcher\n              groups={groups}\n              activeGroup={activeGroup}\n              onGroupChange={setActiveGroup}\n            />\n            <Items>\n              {groupsContent[activeGroup] && (\n                <TextField\n                  select\n                  label={groupsContent[activeGroup].name}\n                  value={selectedItem}\n                  color=\"primary\"\n                  onChange={handleItemSelect}\n                >\n                  {groupsContent[activeGroup].options}\n                </TextField>\n              )}\n              <TextField\n                type=\"number\"\n                label=\"Quantity\"\n                value={quantity}\n                color=\"primary\"\n                onChange={handleQuantityChange}\n              />\n            </Items>\n            <FormFooter>\n              <FormActions>\n                {isItemProcessing && <Preloader size={24} />}\n                <RewardButton\n                  type=\"submit\"\n                  variant=\"contained\"\n                  disabled={isItemProcessing}\n                  onClick={handleRewardItem}\n                >\n                  Reward\n                </RewardButton>\n                <Button\n                  variant=\"contained\"\n                  disabled={isItemProcessing}\n                  onClick={handleRevokeItem}\n                >\n                  Revoke\n                </Button>\n              </FormActions>\n            </FormFooter>\n          </Form>\n        )\n      }\n    </Body>\n  );\n};\n\nconst Body = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 50px;\n`;\n\nconst Form = styled.form`\n  max-width: 400px;\n  width: 100%;\n  padding: 20px;\n`;\n\nconst TextField = styled(MUITextField)`\n  width: 100%;\n`;\n\nconst Items = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 20px;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px 0;\n`;\n\nconst FormActions = styled.div`\n  position: relative;\n`;\n\nconst RewardButton = styled(Button)`\n  && {\n    margin-right: 10px;\n  }\n`;\n\nexport { ManageInventory };\n","import axios from 'axios';\n\nexport const loadVirtualItems = async (projectID, token) => {\n  const URL = `https://store.xsolla.com/api/v1/project/${projectID}/items/groups`\n  const response = await axios.get(\n    URL,\n    {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }\n  );\n\n  const [...groups] = await Promise.all(response.data.groups.map(async g => {\n    const virtualItemsByGroup = await loadVirtualItemsByGroup(projectID, g.external_id);\n    return {\n      groupID: g.external_id,\n      groupName: g.name,\n      items: virtualItemsByGroup\n    };\n  }));\n\n  return groups;\n};\n\nconst loadVirtualItemsByGroup = async (projectID, groupID) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_items/group/${groupID}`\n  const response = await axios.get(URL);\n\n  return response.data.items;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const VirtualItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n  buyByVC,\n  isPurchased,\n}) => {\n  const hasVirtualCurrencyPrice = product.virtual_prices && product.virtual_prices.length > 0;\n\n  const handleBuyByVC = React.useCallback(() => buyByVC(product), []);\n  const handleItemAdd = React.useCallback(() => addToCart(product), []);\n  \n  const buttonAction = React.useMemo(() => hasVirtualCurrencyPrice ? handleBuyByVC : handleItemAdd, [hasVirtualCurrencyPrice]);\n  const buttonContent = React.useMemo(() => hasVirtualCurrencyPrice ? 'Buy now' : <ShoppingCart />, [product]);\n  const price = React.useMemo(() => {\n    if (isPurchased) {\n      return <Purchased>Purchased</Purchased>;\n    }\n\n    if (hasVirtualCurrencyPrice) {\n      return (\n        <Currency\n          image={product.virtual_prices[0].image_url}\n          value={product.virtual_prices[0].amount}\n        />\n      );\n    }\n\n    return (\n      <Currency\n        currency={product.price.currency}\n        value={Math.round(product.price.amount * 100) / 100}\n      />\n    );\n  }, [product, hasVirtualCurrencyPrice, isPurchased]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={buttonContent}\n      onAction={!isPurchased ? buttonAction : undefined}\n    />\n  )\n});\n\nconst Purchased = styled.div`\n  color: ${({ theme }) => theme.palette.text.primary};\n  opacity: 0.8;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { ProductContext } from '../../context';\nimport { loadInventory } from '../inventory/InventoryLoader';\nimport { Preloader } from '../../components/Preloader.js';\nimport { GroupSwitcher } from '../../components/GroupSwitcher';\nimport { loadVirtualItems } from './VirtualItemsLoader';\nimport { VirtualItem } from './VirtualItem';\n\nconst VirtualList = () => {\n  const {\n    cart,\n    logToken,\n    virtualItems,\n    inventoryItems,\n    addToCart,\n    buyByVC,\n    projectId,\n    areVirtualItemsFetching,\n    areInventoryItemsFetching,\n    isItemAdding,\n    setInventoryItems,\n    setVirtualItems,\n    setStateFrom,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [activeGroup, setActiveGroup] = React.useState(null);\n  const [activeItemID, setActiveItemID] = React.useState(null);\n\n  const groups = React.useMemo(() => virtualItems.map(x => ({ id: x.groupID, label: x.groupName })), [virtualItems]);\n\n  const handleItemAdding = React.useCallback(item => {\n    addToCart(item);\n    setActiveItemID(item.sku);\n  }, []);\n\n  React.useEffect(() => {\n    setActiveGroup(virtualItems[0] ? virtualItems[0].groupID : null);\n    setActiveItemID(null);\n  }, [virtualItems]);\n\n  React.useEffect(() => {\n    if (!areVirtualItemsFetching && logToken && virtualItems.length === 0) {\n      setStateFrom('areVirtualItemsFetching', true);\n      loadVirtualItems(projectId, logToken)\n        .then(virtualItems => {\n          setVirtualItems(virtualItems);\n          setStateFrom('areVirtualItemsFetching', false);\n        })\n        .catch(error => {\n          setStateFrom('areVirtualItemsFetching', false);\n          enqueueSnackbar(error.message, { variant: 'error' });\n        });\n    }\n  }, [virtualItems]);\n\n  React.useEffect(() => {\n    if (!areInventoryItemsFetching && logToken && inventoryItems.length === 0 && cart.cartId) {\n      setStateFrom('areInventoryItemsFetching', true);\n      loadInventory(projectId, logToken)\n        .then(data => {\n          setInventoryItems(data);\n          setStateFrom('areInventoryItemsFetching', false);\n        })\n        .catch(error => {\n          setStateFrom('areInventoryItemsFetching', false);\n          enqueueSnackbar(error.message, { variant: 'error' });\n        });\n    }\n  }, [inventoryItems, cart.cartId]);\n\n  const content = React.useMemo(() => virtualItems.length > 0 && (\n    <>\n      <GroupSwitcher\n        groups={groups}\n        activeGroup={activeGroup}\n        onGroupChange={setActiveGroup}\n      />\n      {virtualItems.map(g => activeGroup === g.groupID && (\n        <React.Fragment key={g.groupID}>\n          <Title>\n            {g.groupName}\n          </Title>\n          <Group>\n            {g.items.map((item, index) => (\n              <VirtualItem\n                order={index}\n                key={item.sku}\n                product={item}\n                isPurchased={item.inventory_options.consumable === null && inventoryItems.some(x => item.sku === x.sku)}\n                addToCart={handleItemAdding}\n                isLoading={isItemAdding && activeItemID === item.sku}\n                buyByVC={buyByVC}\n              />\n            ))}\n          </Group>\n        </React.Fragment>\n      ))}\n    </>\n  ), [activeGroup, virtualItems, inventoryItems, isItemAdding]);\n\n  return (\n    <Body>\n      {areVirtualItemsFetching || areInventoryItemsFetching\n        ? <Preloader />\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  background-color: transparent;\n`;\n\nconst Group = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${({ theme }) => `repeat(auto-fit, minmax(\n    ${theme.shape.cardWidth}, \n    ${theme.shape.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nconst Title = styled.div`\n  color: ${({ theme }) => theme.palette.primary.contrastText};\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nexport { VirtualList };\n","const size = {\n  mobileS: '320px',\n  mobileM: '375px',\n  mobileL: '425px',\n  tablet: '768px',\n  laptop: '1024px',\n  laptopL: '1440px',\n  desktop: '1920px',\n  retina: '2560px'\n}\n\nexport const device = {\n  mobileS: `(max-width: ${size.mobileS})`,\n  mobileM: `(max-width: ${size.mobileM})`,\n  mobileL: `(max-width: ${size.mobileL})`,\n  tablet: `(max-width: ${size.tablet})`,\n  laptop: `(max-width: ${size.laptop})`,\n  laptopL: `(max-width: ${size.laptopL})`,\n  desktop: `(max-width: ${size.desktop})`,\n  retina: `(max-width: ${size.retina})`\n};","import React from 'react';\nimport styled from 'styled-components';\nimport IconButton from '@material-ui/core/IconButton';\nimport MUIDeleteIcon from \"@material-ui/icons/Delete\";\nimport MUIIncrementIcon from \"@material-ui/icons/AddBox\";\nimport MUIDecrementIcon from \"@material-ui/icons/IndeterminateCheckBox\";\n\nimport { device } from '../../styles/devices';\n\nconst CartItemComponent = ({ item, changeItemQuantity, removeItem }) => {\n  const calcPrice = (price, quantity) => Math.round(price * quantity * 100) / 100;\n  const handleQuantityDec = () => changeItemQuantity(item, item.quantity - 1);\n  const handleQuantityInc = () => changeItemQuantity(item, item.quantity + 1);\n  const handelItemRemove = () => removeItem(item);\n  \n  return (\n    <CartItem>\n      <CartItemImage image={item.image_url} />\n      <CartItemBody>\n        <ItemName>{item.name}</ItemName>\n        <ItemPrice>\n          <CartItemTotal>\n            {item.price.currency} {calcPrice(item.price.amount, item.quantity)}\n          </CartItemTotal>\n          {item.quantity > 1 && (\n            <CartItemPriceForOne>\n              {item.price.currency} {calcPrice(item.price.amount, 1)} for one item\n            </CartItemPriceForOne>\n          )}\n        </ItemPrice>\n      </CartItemBody>\n      <PriceInfo>\n        <QuantityActions>\n          {item.quantity > 1\n            ? (\n              <IconButton color=\"inherit\" onClick={handleQuantityDec}>\n                <DecrementIcon />\n              </IconButton>\n            ) : (\n              <IconButton color=\"inherit\" onClick={handelItemRemove}>\n                <DeleteIcon />\n              </IconButton>\n            )\n          }\n          <ItemQuantity>{item.quantity}</ItemQuantity>\n          <IconButton color=\"inherit\" onClick={handleQuantityInc}>\n            <IncrementIcon />\n          </IconButton>\n        </QuantityActions>\n      </PriceInfo>\n    </CartItem>\n  );\n}\n\nconst CartItem = styled.div`\n  display: grid;\n  grid-template-columns: 0.7fr 1.3fr 1fr;\n  color: ${({ theme }) => theme.palette.text.primary};\n  overflow: hidden;\n  height: 130px;\n\n  @media ${device.mobileL} {\n    height: 185px;\n    grid-template-columns: 0.9fr 1.1fr;\n    grid-template-rows: 120px 1fr;\n  }\n`;\n\nconst CartItemImage = styled.div`\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CartItemBody = styled.div`  \n  padding: 10px;\n`;\n\nconst ItemName = styled.div`\n  font-weight: bolder;\n  margin-bottom: 5px;\n`;\n\nconst QuantityActions = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n`;\n\nconst ItemQuantity = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n`;\n\nconst PriceInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  @media ${device.mobileL} {\n    grid-column: 2 / 2;\n  }\n`;\n\nconst ItemPrice = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  @media ${device.mobileL} {\n    flex-grow: 1;\n  }\n`;\n\nconst CartItemTotal = styled.div`\n  color: ${({ theme }) => theme.palette.primary.main};\n  font-weight: 600;\n`;\n\nconst CartItemPriceForOne = styled.div`\n  font-size: 0.8em;\n  opacity: 0.3;\n`;\n\nconst DeleteIcon = styled(MUIDeleteIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\nconst DecrementIcon = styled(MUIDecrementIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\nconst IncrementIcon = styled(MUIIncrementIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\n\nexport { CartItemComponent as CartItem };","import currencyFormat from \"currency-format\";\nimport currencyNumberFormat from \"currency-number-format\";\n\n// CURRENCY CODE\nfunction defaultCurrency(currency) {\n  return {\n    name: currency,\n    fractionSize: 2,\n    symbol: {\n      grapheme: currency,\n      template: null,\n      rtl: false\n    },\n    uniqSymbol: null\n  };\n}\nfunction getCurrencyOptions(currency) {\n  return currency\n    ? currencyFormat[currency.toUpperCase()] || defaultCurrency(currency)\n    : defaultCurrency(currency);\n}\n\n// LOCALE\nvar defaultLocale = \"en_US\";\nvar localesMap = {\n  ar: \"ar_AE\",\n  bg: \"bg_BG\",\n  cn: \"zh_CN\",\n  cs: \"cs_CZ\",\n  de: \"de_DE\",\n  en: \"en_US\",\n  es: \"es_ES\",\n  fr: \"fr_FR\",\n  he: \"he_IL\",\n  it: \"it_IT\",\n  ja: \"ja_JP\",\n  ko: \"ko_KR\",\n  pl: \"pl_PL\",\n  pt: \"pt_BR\",\n  ro: \"ro_RO\",\n  ru: \"ru_RU\",\n  th: \"th_TH\",\n  tr: \"tr_TR\",\n  tw: \"zh_TW\",\n  vi: \"vi_VN\"\n};\nfunction formatLocale(locale) {\n  return [\n    locale.substr(0, 2).toLowerCase(),\n    locale.substr(3, 2).toUpperCase()\n  ].join(\"_\");\n}\nfunction getLanguageOptions(locale) {\n  return locale\n    ? currencyNumberFormat[formatLocale(locale)] ||\n        currencyNumberFormat[defaultLocale]\n    : currencyNumberFormat[defaultLocale];\n}\nfunction map2to5Locale(locale) {\n  return locale && locale.length === 5\n    ? locale\n    : localesMap[locale] || defaultLocale;\n}\n\n// CURRENCY\nexport function getFormattedCurrency(amount, currency, locale) {\n  var parsedAmount = parseFloat(amount);\n  if (!currency || isNaN(parsedAmount)) {\n    return {\n      formattedCurrency: amount + \" \" + currency,\n      dir: \"ltr\"\n    };\n  }\n\n  var currencyOptions = getCurrencyOptions(currency);\n  var languageOptions = getLanguageOptions(locale);\n\n  var signAmount = parsedAmount < 0 ? \"-\" : \"\";\n  var fractionSize = currencyOptions.fractionSize;\n\n  var symbol = currencyOptions.symbol;\n  var thousandSeparator = languageOptions.thousands;\n  var decimalSeparator = languageOptions.decimal;\n  // Spike for escaping case when grapheme is arabic symbol, and russian style separators was chosen\n  if ((!symbol || symbol.rtl) && languageOptions.thousands === \" \") {\n    thousandSeparator = \",\";\n    decimalSeparator = \".\";\n  }\n\n  var splittedAmount = Math.abs(parsedAmount)\n    .toFixed(fractionSize)\n    .split(\".\");\n  splittedAmount[0] = splittedAmount[0].replace(\n    /(\\d)(?=(\\d{3})+(?!\\d))/g,\n    \"$1\" + thousandSeparator\n  );\n  var formattedAmount = splittedAmount.join(decimalSeparator);\n\n  var formattedCurrency = signAmount + formattedAmount + \" \" + currency;\n  var rtl = false;\n  if (symbol && symbol.template) {\n    formattedCurrency =\n      signAmount +\n      symbol.template\n        .replace(\"1\", formattedAmount)\n        .replace(\"$\", symbol.grapheme);\n    rtl = symbol.rtl;\n  }\n\n  return {\n    formattedCurrency: formattedCurrency,\n    dir: rtl ? \"rtl\" : \"ltr\"\n  };\n}\n","\nexport const generateUUID = () =>\n  ([1e7] + -1e3 + -4e3 + -8e3 + -1e11)\n    .replace(/[018]/g, c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\n","import axios from \"axios\";\n\nexport const purchaseItems = async data => {\n  const url = `https://livedemo.xsolla.com/store-demo/api/index.php`;\n  const response = await axios.post(url, data);\n\n  return response.data;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport Loader from '@material-ui/core/CircularProgress';\nimport MUIDivider from '@material-ui/core/Divider';\n\nimport { ProductContext } from '../../context';\nimport { CartItem } from '../cart/CartItem';\nimport { getFormattedCurrency } from '../../utils/formatCurrency';\nimport { generateUUID } from '../../utils/generateUUID';\nimport { device } from '../../styles/devices';\nimport { purchaseItems } from './ServerPurchaseLoader';\n\nconst ServerPurchase = () => {\n  const { cart, removeFromCart, changeItemQuantityInCart } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [isPurchasing, setPurchasing] = React.useState();\n\n  const calculateSubtotal = cart => {\n    const subtotal = cart.reduce((acc, x) => acc + x.price.amount * x.quantity, 0);\n    return Math.round(subtotal * 100) / 100;\n  };\n\n  const purchase = React.useCallback(() => {\n    const data = {\n      type: 'purchase',\n      user: 'd342dad2-9d59-11e9-a384-42010aa8003f',\n      platform: 'playstation_network',\n      purchase: {\n        amount: cart.price.amount,\n        currency: cart.price.currency,\n        external_purchase_id: generateUUID(),\n        external_purchase_date: (new Date()).toISOString()\n      },\n      items: cart.items.map(({ sku, quantity }) => ({ sku, quantity })),\n    };\n\n    setPurchasing(true);\n    enqueueSnackbar('Operation is processing', { variant: 'info' });\n    purchaseItems(data)\n      .then(() => {\n        setPurchasing(false);\n        enqueueSnackbar('Complete', { variant: 'success' });\n      })\n      .catch(error => {\n        setPurchasing(false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  }, []);\n\n  const cartContent = React.useMemo(\n    () => cart.items.length > 0\n      ? (\n        <CartItems>\n          {cart.items.map(x => (\n            <React.Fragment key={x.sku}>\n              <CartItem\n                item={x}\n                removeItem={removeFromCart}\n                changeItemQuantity={changeItemQuantityInCart}\n              />\n              <Divider/>\n            </React.Fragment>\n          ))}\n        </CartItems>\n      ) : (\n        <EmptyText>\n          Oops, you have nothing bought yet!\n        </EmptyText>\n      ),\n    [cart]\n  );\n\n  const footerContent = React.useMemo(() => cart.items.length > 0 && (\n    <CartFooter>\n      <Subtotal>\n        Subtotal:\n        <Price>\n          {\n            getFormattedCurrency(\n              calculateSubtotal(cart.items),\n              cart.price.currency || cart.items[0].price.currency\n            ).formattedCurrency\n          }\n        </Price>\n      </Subtotal>\n      <CartActions>\n        <Button\n          variant=\"contained\"\n          disabled={isPurchasing}\n          onClick={purchase}\n        >\n          {isPurchasing ? <Loader size={24} color=\"secondary\" /> : 'Grant purchase'}\n        </Button>\n      </CartActions>\n    </CartFooter>\n  ), [cart, isPurchasing]);\n\n  return (\n    <Body>\n      <Content>\n        {cartContent}\n        {footerContent}\n      </Content>\n    </Body>\n  );\n};\n\nconst Body = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 50px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  max-width: 600px;\n  padding: 0 20px;\n`;\n\nconst CartItems = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  padding: 16px 0;\n`;\n\nconst EmptyText = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${({ theme }) => theme.palette.text.primary};\n  height: 100%;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  padding: 24px 0 24px 0;\n`;\n\nconst CartActions = styled.div`\n  display: flex;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n  }\n`;\n\nconst Subtotal = styled.div`\n  display: flex;\n  font-weight: bold; \n  color: ${({ theme }) => theme.palette.text.primary};\n  margin-right: 10px;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n    margin-bottom: 15px;\n    margin-right: 0;\n  }\n`;\n\nconst Price = styled.div`\n  min-width: 80px;\n  text-align: right;\n`;\n\nconst Divider = styled(MUIDivider)`\n  &.MuiDivider-root {\n    background-color: ${({ theme }) => theme.palette.primary.contrastText};\n    opacity: 0.1;\n    margin-bottom: 5px;\n  }\n`;\n\nexport { ServerPurchase };\n","import axios from 'axios';\nimport { init } from 'store-js-sdk/src/init';\n\nexport const getEntitlement = async loginToken => {\n  const url = 'https://store.xsolla.com/api/v2/projects/entitlement';\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`\n    },\n  };\n  const response = await axios.get(url, params);\n\n  return response.data;\n};\n\nexport const redeem = async (projectId, loginToken, redeemCode, sku) => {\n  init({ projectId, version: 'v2' });\n  const url = 'https://store.xsolla.com/api/v1/game_delivery/xsolla_login/redeem_key';\n  const data = {\n    project_id: projectId,\n    digital_content_sku: sku,\n    language: \"en\",\n    key: redeemCode\n  };\n\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`\n    },\n  };\n\n  const response = await axios.post(url, data, params);\n\n  return response.data;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\nimport MUITextField from '@material-ui/core/TextField';\nimport MUIButton from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { ProductContext } from '../../context';\nimport { ProductCard } from '../../components/ProductCard';\nimport { getEntitlement, redeem } from './EntitlementLoader';\n\nconst EntitlementList = () => {\n  const {\n    projectId,\n    logToken,\n    setEntitlementItems,\n    entitlementItems,\n    areEntitlementItemsFetching,\n    isRedeeming,\n    setStateFrom,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [sku, setSku] = React.useState('');\n  const [code, setCode] = React.useState('');\n\n  const handleCodeChange = React.useCallback(event => setCode(event.target.value));\n  const handleSkuChange = React.useCallback(event => setSku(event.target.value));\n\n  const loadEntitlementItems = () => {\n    setStateFrom('areEntitlementItemsFetching', true);\n    getEntitlement(logToken)\n      .then(items => {\n        setStateFrom('areEntitlementItemsFetching', false);\n        setEntitlementItems(items);\n      })\n      .catch(error => {\n        setStateFrom('areEntitlementItemsFetching', false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  }\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setStateFrom('isRedeeming', true);\n    redeem(projectId, logToken, code, sku)\n      .then(() => {\n        setStateFrom('isRedeeming', false);\n        loadEntitlementItems();\n      })\n      .catch(error => {\n        setStateFrom('isRedeeming', false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  }\n\n  React.useEffect(() => {\n    loadEntitlementItems();\n  }, []);\n\n  const entitlementList = React.useMemo(() => entitlementItems.length > 0\n    ? entitlementItems.map((item, key) => (\n        <ProductCard\n          key={item.digital_content_sku}\n          order={key}\n          name={item.name}\n          description={item.description}\n          image={item.image_url}\n        />\n      ))\n    : (\n    <div>\n      Oops, you have no games yet!\n    </div>\n  ), [entitlementItems]);\n\n  return (\n    <Body>\n      <Form onSubmit={handleSubmit}>\n        <TextField\n          color=\"primary\"\n          placeholder=\"Enter your code\"\n          onChange={handleCodeChange}\n          value={code}\n        />\n        <TextField\n          color=\"primary\"\n          placeholder=\"Enter sku of your game\"\n          onChange={handleSkuChange}\n          value={sku}\n        />\n        <FormFooter>\n          <Button color=\"secondary\" type=\"submit\" variant=\"contained\">\n            {isRedeeming ? <CircularProgress size={24} color=\"primary\" /> : 'Redeem Code'}\n          </Button>\n        </FormFooter>\n      </Form>\n      <div>\n        {areEntitlementItemsFetching ? <CircularProgress size={24} color=\"primary\" /> : entitlementList}\n      </div>\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-top: 50px;\n`;\n\nconst Form = styled.form`\n  max-width: 400px;\n  width: 100%;\n  padding: 20px;\n`;\n\nconst TextField = styled(MUITextField)`\n  && {\n    width: 100%;\n    margin-bottom: 20px;\n  }\n`;\n\nconst Button = styled(MUIButton)`\n  && {\n    min-width: 140px;\n  }\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px 0;\n`;\n\nexport { EntitlementList };\n","const routes = {\n  items: '/',\n  currencies: '/crystals',\n  physical: '/physical',\n  inventory: '/inventory',\n  entitlement: '/entitlement',\n  manage: '/manage',\n  purchase: '/purchase',\n  specificProject: '/projects/:projectID'\n}\n\nconst navItems = [\n  {\n    route: routes.items,\n    label: 'Items'\n  },\n  {\n    route: routes.currencies,\n    label: 'Currencies',\n  },\n  {\n    route: routes.physical,\n    label: 'Merchandise',\n  },\n  {\n    route: routes.inventory,\n    label: 'Inventory',\n  },\n  {\n    route: routes.entitlement,\n    label: 'Entitlement',\n  },\n  {\n    route: routes.manage,\n    label: 'Manage',\n  },\n  {\n    route: routes.purchase,\n    label: 'Server purchase',\n  },\n];\n\nexport const getMenuItems = items => navItems\n  .filter(x => items.includes(x.route))\n  .sort((a, b) => items.indexOf(a.route) - items.indexOf(b.route));\n\nexport { routes, navItems };","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\nimport styled from 'styled-components';\nimport Colorer from 'color';\nimport IconClose from '@material-ui/icons/Close';\nimport Button from '@material-ui/core/Button';\nimport MUIModal from '@material-ui/core/Modal';\nimport IconButton from '@material-ui/core/IconButton';\nimport Grow from '@material-ui/core/Grow';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nimport { ProductContext } from '../../context';\nimport { getFormattedCurrency } from '../../utils/formatCurrency';\nimport { getPsTokenBuyCart } from '../../components/StoreLoader';\nimport { device } from '../../styles/devices';\nimport { routes } from '../../utils/routes';\nimport { CartItem } from './CartItem';\n\nconst Cart = () => {\n  const [buyButtonDisabled, setBuyButtonDisabled] = React.useState(false);\n  const {\n    cart,\n    hideCart,\n    logToken,\n    projectId,\n    clearCart,\n    isCartShown,\n    removeFromCart,\n    isItemRemoving,\n    isCartLoading,\n    changeItemQuantityInCart,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n\n  const isLoading = isCartLoading || isItemRemoving;\n\n  const cartSubtotal = React.useMemo(() => {\n    const subtotal = cart.items\n      .filter(item => Boolean(item.price))\n      .reduce((acc, item) => acc + item.price.amount * item.quantity, 0);\n    return Math.round(subtotal * 100) / 100;\n  }, [cart.items]);\n\n  const buyAnotherPlatform = () => {\n    if (buyButtonDisabled || cart.items.length <= 0) {\n      return;\n    }\n\n    history.push(routes.purchase);\n    hideCart();\n  };\n\n  const buyButtonAction = () => {\n    hideCart();\n    getPsTokenBuyCart(projectId, logToken, cart.cartId)\n      .then(data => {\n        setBuyButtonDisabled(true);\n        window.xPayStationInit(data.token, {sandbox: true, host: 'sandbox-secure.xsolla.com'});\n        window.XPayStationWidget.open();\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.CLOSE,\n          () => setBuyButtonDisabled(false),\n        );\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.STATUS_DONE,\n          clearCart\n        );\n      })\n      .catch(error => {\n        setBuyButtonDisabled(false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  };\n\n  return (\n    <Modal\n      open={isCartShown}\n      onClose={hideCart}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{ timeout: 250 }}\n    >\n      <Grow in={isCartShown} timeout={250}>\n        <CartContent>\n          <CartHeader>\n            <h4>Cart</h4>\n            <IconButton color=\"inherit\" onClick={hideCart}>\n              <IconClose />\n            </IconButton>\n          </CartHeader>\n          <CartList>\n            {cart.items.length > 0\n              ? cart.items.map(item => (\n                <CartItem\n                  key={item.sku}\n                  item={item}\n                  removeItem={removeFromCart}\n                  changeItemQuantity={changeItemQuantityInCart}\n                />\n              ))\n              : <p>Empty cart</p>\n            }\n          </CartList>\n          <Loader>\n            {isLoading && <Progress />}\n          </Loader>\n          <CartFooter>\n            {cart.items.length > 0 && (\n              <Subtotal>\n                Subtotal:\n                <Price>\n                  {\n                    getFormattedCurrency(\n                      cartSubtotal,\n                      cart.price.currency || cart.items[0].price.currency\n                    ).formattedCurrency\n                  }\n                </Price>\n              </Subtotal>\n            )}\n            <CartActions>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                disabled={cart.items.length === 0}\n                style={{ marginRight: '7px' }}\n                onClick={buyAnotherPlatform}\n              >\n                Buy on PS4\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                disabled={cart.items.length === 0}\n                onClick={buyButtonAction}\n              >\n                Buy on Xsolla\n              </Button>\n            </CartActions>\n          </CartFooter>\n        </CartContent>\n      </Grow>\n    </Modal>\n  );\n}\n\nconst Modal = styled(MUIModal)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst CartContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-radius: ${({ theme }) => `${theme.shape.borderRadius}px`};\n  background-color: ${({ theme }) => theme.palette.background.default};\n  color: ${({ theme }) => theme.palette.text.primary};\n  padding: 0 32px;\n  width: 680px;\n  max-height: 80vh;\n  outline: none;\n\n  @media ${device.tablet} {\n    padding: 0 16px;\n    max-height: none;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n`;\n\nconst CartHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: ${({ theme }) => theme.palette.text.primary};\n  border-bottom: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  z-index: 10;\n  padding: 24px 0 8px 0;\n`;\n\nconst Loader = styled.div`\n  position: relative;\n`;\n\nconst Progress = styled(LinearProgress)`\n  && {\n    position: absolute;\n    width: 100%;\n  }\n`\n\nconst CartList = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  flex-grow: 1;\n  padding: 16px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  flex-wrap: wrap;\n  border-top: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  padding: 24px 0 24px 0;\n`;\n\nconst CartActions = styled.div`\n  display: flex;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n  }\n`;\n\nconst Subtotal = styled.div`\n  display: flex;\n  flex-grow: 1;\n  font-weight: bold;\n  margin-right: 10px;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n    margin-bottom: 15px;\n    margin-right: 0;\n  }\n`;\n\nconst Price = styled.div`\n  min-width: 80px;\n  text-align: right;\n`;\n\nexport { Cart };\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { device } from '../../styles/devices';\n\nconst VCCartItem = React.memo(({ item }) => {\n  return (\n    <Body>\n      <Image image={item.image_url} />\n      <div>\n        <Name>{item.name}</Name>\n        <div>{item.description}</div>\n      </div>\n    </Body>\n  );\n});\n\nconst Body = styled.div`\n  display: grid;\n  grid-template-columns: 0.7fr 1.3fr 1fr;\n  overflow: hidden;\n  height: 130px;\n\n  @media ${device.mobileL} {\n    height: 185px;\n    grid-template-columns: 0.9fr 1.1fr;\n    grid-template-rows: 120px 1fr;\n  }\n`;\n\nconst Image = styled.div`\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst Name = styled.div`\n  font-weight: bolder;\n  margin-bottom: 5px;\n`;\n\nexport { VCCartItem };\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\nimport Colorer from 'color';\nimport IconButton from '@material-ui/core/IconButton';\nimport IconClose from '@material-ui/icons/Close';\nimport Button from '@material-ui/core/Button';\nimport MUIModal from '@material-ui/core/Modal';\nimport Grow from '@material-ui/core/Grow';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { ProductContext } from '../../context';\nimport { quickPurchaseBuyVirtualCurrency } from '../../components/StoreLoader';\nimport { device } from '../../styles/devices';\nimport { VCCartItem } from './VCCartItem';\n\nconst VCCart = () => {\n  const {\n    vcCart,\n    isVCCartShown,\n    projectId,\n    logToken,\n    clearVCCart,\n    setStateFrom,\n    hideVCCart,\n    isVCCartProcessing,\n    updateVirtualCurrencyBalance,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const buyByVirtualCurrencyButtonAction = () => {\n    setStateFrom('isVCCartProcessing', true);\n    quickPurchaseBuyVirtualCurrency(projectId, vcCart.items[0], logToken)\n      .then(() => {\n        setStateFrom('isVCCartProcessing', false);\n        clearVCCart();\n        updateVirtualCurrencyBalance();\n      })\n      .catch(error => {\n        setStateFrom('isVCCartProcessing', false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  };\n\n  return (\n    <Modal\n      open={isVCCartShown}\n      onClose={hideVCCart}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{ timeout: 250 }}\n    >\n      <Grow in={isVCCartShown} timeout={250}>\n        <CartContent>\n          <CartHeader>\n            <h4>Confirm</h4>\n            <IconButton color=\"inherit\" onClick={hideVCCart}>\n              <IconClose />\n            </IconButton>\n          </CartHeader>\n          <CartList>\n            {vcCart.items.length > 0\n              ? vcCart.items.map(item => <VCCartItem item={item}/>)\n              : <p>Empty cart</p>\n            }\n          </CartList>\n          <CartFooter>\n            <Button\n              variant=\"contained\"\n              disabled={isVCCartProcessing}\n              onClick={buyByVirtualCurrencyButtonAction}\n            >\n              {isVCCartProcessing ? <CircularProgress size={24} color=\"secondary\"/> : 'Buy'}\n            </Button>\n          </CartFooter>\n        </CartContent>\n      </Grow>\n    </Modal>\n  );\n}\n\nconst Modal = styled(MUIModal)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst CartContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-radius: ${({ theme }) => `${theme.shape.borderRadius}px`};\n  background-color: ${({ theme }) => theme.palette.background.default};\n  color: ${({ theme }) => theme.palette.text.primary};\n  padding: 0 32px;\n  width: 680px;\n  max-height: 80vh;\n  outline: none;\n\n  @media ${device.tablet} {\n    padding: 0 16px;\n    max-height: none;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n`;\n\nconst CartHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  z-index: 10;\n  padding: 24px 0 8px 0;\n`;\n\nconst CartList = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  flex-grow: 1;\n  padding: 16px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  border-top: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n  padding: 24px 0 24px 0;\n`;\n\nexport { VCCart };\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const VCItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n}) => {\n\n  const handleItemAdd = () => addToCart(product);\n\n  const price = React.useMemo(() => (\n    <Currency\n      currency={product.price.currency}\n      value={Math.round(product.price.amount * 100) / 100} />\n  ), [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={<ShoppingCart />}\n      onAction={handleItemAdd}\n    />\n  )\n});\n","import axios from 'axios';\n\nexport const loadVirtualCurrencies = async (projectID, token) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_currency/package`;\n  const response = await axios.get(URL, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n\n  return response.data.items;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { Preloader } from '../../components/Preloader';\nimport { ProductContext } from '../../context';\nimport { VCItem } from './VCItem';\nimport { loadVirtualCurrencies } from './VCLoader';\n\nconst VCList = () => {\n  const {\n    logToken,\n    projectId,\n    addToCart,\n    setStateFrom,\n    virtualCurrencies,\n    areVirtualCurrenciesFetching,\n    isItemAdding,\n    setVirtualCurrencies,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [activeItemID, setActiveItemID] = React.useState(null);\n\n  const handleItemAdding = React.useCallback(item => {\n    addToCart(item);\n    setActiveItemID(item.sku);\n  }, []);\n\n  React.useEffect(() => {\n    setActiveItemID(null);\n    setStateFrom('areVirtualCurrenciesFetching', true);\n    loadVirtualCurrencies(projectId, logToken)\n      .then(data => {\n        setVirtualCurrencies(data);\n        setStateFrom('areVirtualCurrenciesFetching', false);\n      })\n      .catch(error => {\n        enqueueSnackbar(error.message, { variant: 'error' });\n        setStateFrom('areVirtualCurrenciesFetching', false);\n      });\n  }, []);\n\n  const content = React.useMemo(() => virtualCurrencies.length > 0 && (\n    <Content>\n      {virtualCurrencies.map((currency, index) => (\n        <VCItem\n          order={index}\n          key={currency.sku}\n          product={currency}\n          isLoading={isItemAdding && currency.sku === activeItemID}\n          addToCart={handleItemAdding}\n        />\n      ))}\n    </Content>\n  ), [virtualCurrencies, isItemAdding]);\n\n  return (\n    <Body>\n      {areVirtualCurrenciesFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  background-color: transparent;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${({ theme }) => `repeat(auto-fit, minmax(\n    ${theme.shape.cardWidth}, \n    ${theme.shape.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nexport { VCList };\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { ProductConsumer } from \"../context\";\nimport Cookie, { parseJwt } from \"./Cookie\";\n\nexport default class XLogin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shown: true,\n      logToken: null,\n      psToken: null\n    };\n  }\n\n  unauthorizedFlow = () => {\n    this.setState({ logToken: null });\n    this.setState({ shown: true });\n  };\n\n  authorizedFlow = tkn => {\n    this.setState({ logToken: tkn, shown: false });\n    this.user = parseJwt(tkn);\n    this.setStateFrom(\"user\", this.user);\n    this.createCart();\n  };\n\n  render() {\n    return (\n      <ProductConsumer>\n          {valueFromContext => {\n            this.setStateFrom = valueFromContext.setStateFrom;\n            this.createCart = valueFromContext.createCart;\n\n            return (\n              <div>\n                <CssXpop\n                  style={{ display: this.state.shown ? \"flex\" : \"none\" }}\n                >\n                  <CssXpopB>\n                    <CssLoginInfo>\n                      Current project: <b>{valueFromContext.projectId}</b>\n                    </CssLoginInfo>\n\n                    <CssLoginPop>\n                      <div id=\"xl_auth\"></div>\n                    </CssLoginPop>\n\n                    <CssLoginInfo>\n                      {myProjects.map((onePr, i) => {\n                        let pr = onePr[\"project_id\"];\n                        let login = onePr[\"login_id\"];\n                        let url = `https://xsolla.github.io/store-demo/#/`;\n                        let urlFull = `${url}?project_id=${pr}&login_id=${login}`;\n                        return (\n                          <div key={pr + i} style={{ marginBottom: \"1em\" }}>\n                            <div style={{ fontSize: \"0.4em\" }}>\n                              <a href={urlFull}>\n                                {pr}: {onePr.projectName}\n                              </a>\n                            </div>\n                          </div>\n                        );\n                      })}\n                      <p>\n                        Open any Xsolla Store using GET parameters <br />\n                        <b>project_id</b> and <b>login_id</b> (login must point\n                        back to https://xsolla.github.io/store-demo/#/)\n                      </p>\n                    </CssLoginInfo>\n                  </CssXpopB>\n                  <CssXpopZ />\n                </CssXpop>\n              </div>\n            );\n          }}\n        </ProductConsumer>\n    );\n  }\n\n  componentDidMount() {\n    window.XloginInit();\n    let cke = Cookie();\n    cke ? this.authorizedFlow(cke) : this.unauthorizedFlow();\n  }\n}\n\nconst CssXpop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  min-height: 100%;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  overflow-y: scroll;\n  padding: 40px 0;\n`;\nconst CssXpopB = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  min-height: 100%;\n  z-index: 100;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n`;\nconst CssXpopZ = styled.div`\n  position: fixed;\n  z-index: 99;\n  background: rgba(0, 0, 0, 0.8);\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n`;\n\nconst CssLoginInfo = styled.div`\n  padding: 20px 70px;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n  flex-grow: 1;\n  font-size: 22px;\n  width: 600px;\n  & a {\n    /* font-family: 'PS Mono', Courier, monospace; */\n    text-decoration: underline;\n    font-size: 28px;\n    line-height: 0px;\n  }\n`;\nconst CssLoginPop = styled.div`\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  text-align: center;\n  padding: 36px;\n  overflow: hidden;\n  margin: 0 70px;\n  border-radius: 8px;\n`;\n\nconst myProjects = [\n  {\n    projectName: \"Xsolla Store Demo\",\n    project_id: 47278,\n    login_id: \"fb2d7c69-bf25-11e9-9244-42010aa80004\"\n  }\n];\n","import React from 'react';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport MUIMenu from '@material-ui/core/Menu';\nimport Hidden from '@material-ui/core/Hidden';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\nimport IconButton from '@material-ui/core/IconButton';\nimport Loader from '@material-ui/core/CircularProgress';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Button from '@material-ui/core/Button';\nimport CartIcon from '@material-ui/icons/ShoppingCart';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport LogoutIcon from '@material-ui/icons/ExitToAppOutlined';\n\nimport { routes, getMenuItems } from '../utils/routes';\nimport { device } from '../styles/devices';\nimport { Currency } from '../components/Currency';\nimport { ProductContext } from '../context';\nimport { eraseCookie } from './Cookie';\nimport XLogin from './XLogin.js';\n\nconst Navbar = ({ isSpecificProject }) => {\n  const {\n    logToken,\n    user,\n    userBalanceVirtualCurrency,\n    projectId,\n    showCart,\n    setSideMenuVisibility,\n    isUserBalanceFetching,\n    isSideMenuShown,\n  } = React.useContext(ProductContext);\n  const { pathname } = useLocation();\n\n  const [menuAnchor, setMenuAnchor] = React.useState(null);\n  const handleMenuClose = () => setMenuAnchor(null);\n  const handleMenuOpen = event => setMenuAnchor(event.currentTarget);\n\n  const toggleSideMenu = () => setSideMenuVisibility(!isSideMenuShown);\n\n  const logOutHandler = () => {\n    eraseCookie(\"xsolla_login_token\", null);\n    eraseCookie(\"xsolla_last_click_id\", null);\n    window.location.reload();\n  };\n\n  const isLogged = logToken && user;\n\n  const generalMenuItems = React.useMemo(() => getMenuItems([\n    routes.items,\n    routes.currencies,\n    ...projectId === 44056 ? [routes.physical] : [],\n  ]), [routes, projectId]);\n\n  const isLocationExistsInTabs = React.useMemo(\n    () => generalMenuItems.some(x => x.route === pathname),\n    [generalMenuItems, pathname]\n  );\n\n  const userMenuItems = React.useMemo(() => getMenuItems([\n    routes.inventory,\n    routes.entitlement,\n    routes.manage,\n    routes.purchase,\n  ]), [routes]);\n\n  return React.useMemo(() => (\n    <Header>\n      {!isSpecificProject && (\n        <>\n          <Hidden mdDown>\n            <Tabs\n              value={isLocationExistsInTabs ? pathname : false}\n              textColor=\"primary\"\n              indicatorColor=\"primary\"\n              component=\"nav\"\n            >\n              {generalMenuItems.map(x => (\n                <Tab\n                  key={x.route}\n                  component={NavLink}\n                  label={x.label}\n                  value={x.route}\n                  to={x.route}\n                />\n              ))}\n            </Tabs>\n          </Hidden>\n\n          <Hidden lgUp>\n            <IconButton color=\"primary\" onClick={toggleSideMenu}>\n              <MenuIcon />\n            </IconButton>\n          </Hidden>\n\n          {isLogged && (\n            <LoginPanel>\n              {isUserBalanceFetching\n                ? <Loader size={24} color=\"primary\"/>\n                : userBalanceVirtualCurrency.map(vc => (\n                  <VCCurrency key={vc.sku}>\n                    <Currency image={vc.image_url} value={vc.amount} />\n                  </VCCurrency>\n                ))\n              }\n\n              <Hidden mdDown>\n                <UserMail\n                  endIcon={Boolean(menuAnchor) ? <ExpandLessIcon /> : <ExpandMoreIcon/>}\n                  onClick={handleMenuOpen}\n                >\n                  {user.email}\n                </UserMail>\n              </Hidden>\n            </LoginPanel>\n          )}\n\n          <XLogin />\n\n          {!logToken && (\n            <LoginButton\n              variant=\"outlined\"\n              color=\"secondary\"\n              size=\"small\"\n            >\n              Log In\n            </LoginButton>\n          )}\n          {isLogged && projectId !== 44056 && (\n          <LogoutButton\n              variant=\"outlined\"\n              size=\"small\"\n              onClick={logOutHandler}\n            >\n              <LogoutIcon size=\"inherit\" />\n            </LogoutButton>\n          )}\n\n          <Menu\n            anchorEl={menuAnchor}\n            getContentAnchorEl={null}\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n            open={Boolean(menuAnchor)}\n            onClose={handleMenuClose}\n          >\n            {userMenuItems.map(x => (\n              <Link\n                key={x.route}\n                onClick={handleMenuClose}\n                activeClassName=\"active\"\n                to={x.route}\n              >\n                {x.label}\n              </Link>\n            ))}\n          </Menu>\n        </>\n      )}\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        size=\"small\"\n        onClick={showCart}\n      >\n        <CartIcon size=\"inherit\" />\n        <Hidden xsDown>\n          cart\n        </Hidden>\n      </Button>\n    </Header>\n  ), [\n    pathname, \n    isLogged, \n    userBalanceVirtualCurrency, \n    userMenuItems, \n    projectId, \n    menuAnchor, \n    isSpecificProject\n  ]);\n}\n\nconst Menu = styled(MUIMenu)`\n  .MuiMenu-list {\n    background-color: ${({ theme }) => theme.palette.background.default};\n  }\n`;\n\nconst Tabs = styled(MUITabs)`\n  &.MuiTabs-root {\n    height: 100%\n  }\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    text-transform: uppercase;\n    font-size: 1.4rem;\n    font-weight: 700;\n    line-height: 1.4rem;\n    min-width: 50px;\n  }\n`;\n\nconst Link = styled(NavLink)`\n  display: flex;\n  padding: 15px 20px;\n  min-width: 200px;\n  align-items: center;\n  text-transform: uppercase;\n  text-decoration: none;\n  font-size: 1.2rem;\n  font-weight: 700;\n  line-height: 1.2rem;\n  height: 100%;\n  color: #d6e0e7;\n  border: none;\n\n  &:hover {\n    color: #ff005b;\n    text-decoration: none;\n  }\n\n  &.active {\n    color: #ff005b;\n  }\n`;\n\nconst LogoutButton = styled(Button)`\n  &.MuiButton-root {\n    margin-right: 10px;\n  }\n`;\n\nconst VCCurrency = styled.div`\n  color: ${({ theme }) => theme.palette.text.primary};\n  margin-right: 10px;\n`;\n\nconst LoginPanel = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  flex-grow: 1;\n\n  @media ${device.mobileL} {\n    justify-content: center;\n  }\n`;\n\nconst LoginButton = styled(Button)`\n  &.MuiButton-root {\n    margin-right: 10px;\n    font-size: 0.8rem;\n  }\n`;\n\nconst UserMail = styled(Button)`\n  && {\n    font-family: 'Roboto';\n    text-transform: uppercase;\n    color: ${({ theme }) => theme.palette.primary.main};\n    margin: 0 1rem;\n  }\n`;\n\nconst Header = styled.header`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  height: 50px;\n  padding: 0 15px;\n  font-family: 'Helvetica Neue', 'Roboto', Arial, Helvetica, sans-serif;\n  background-color: ${({ theme }) => theme.palette.background.default};\n`;\n\nexport { Navbar };\n","import React from 'react';\nimport Colorer from 'color';\nimport styled from 'styled-components';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport Drawer from '@material-ui/core/SwipeableDrawer';\nimport MUIIconButton from '@material-ui/core/IconButton';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport MUIDivider from '@material-ui/core/Divider';\nimport Tabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\nimport LogoutIcon from '@material-ui/icons/ExitToAppOutlined';\n\nimport { ProductContext } from '../context';\nimport { routes, getMenuItems } from '../utils/routes';\nimport { eraseCookie } from './Cookie';\n\nconst MobileNavbar = () => {\n  const {\n    isSideMenuShown,\n    user,\n    logToken,\n    projectId,\n    setSideMenuVisibility,\n  } = React.useContext(ProductContext);\n  const location = useLocation();\n\n  const closeMenu = () => setSideMenuVisibility(false);\n  const openMenu = () => setSideMenuVisibility(true);\n\n  const logOutHandler = () => {\n    eraseCookie(\"xsolla_login_token\", null);\n    eraseCookie(\"xsolla_last_click_id\", null);\n    window.location.reload();\n  };\n\n  React.useEffect(() => closeMenu, []);\n\n  const isLogged = logToken && user;\n\n  const generalMenuItems = React.useMemo(() => getMenuItems([\n    routes.items,\n    routes.currencies,\n    ...projectId === 44056 ? [routes.physical] : [],\n  ]), [projectId]);\n\n  const userMenuItems = React.useMemo(() => getMenuItems([\n    routes.inventory,\n    routes.entitlement,\n    routes.manage,\n    routes.purchase,\n  ]), []);\n\n  return (\n    <Drawer\n      open={isSideMenuShown}\n      anchor=\"left\"\n      onOpen={openMenu}\n      onClose={closeMenu}\n    >\n      <Content>\n        <Header>\n        {isLogged && projectId !== 44056 && (\n          <IconButton onClick={logOutHandler}>\n            <LogoutIcon size=\"inherit\" />\n          </IconButton>\n          )}\n          {isLogged && <UserMail>{user.email}</UserMail>}\n          <IconButton onClick={closeMenu}>\n            <ChevronLeftIcon />\n          </IconButton>\n        </Header>\n        <Tabs\n          value={location.pathname}\n          onChange={closeMenu}\n          component=\"nav\"\n          variant=\"scrollable\"\n          color=\"primary\"\n          indicatorColor=\"primary\"\n          orientation=\"vertical\"\n        \n        >\n        {generalMenuItems.map(x => (\n          <Tab\n            component={NavLink}\n            label={x.label}\n            value={x.route}\n            to={x.route}\n          />\n        ))}\n        <MenuDivider />\n        {userMenuItems.map(x => (\n          <Tab\n            component={NavLink}\n            label={x.label}\n            value={x.route}\n            to={x.route}\n          />\n        ))}\n        </Tabs>\n      </Content>\n    </Drawer>\n  );\n};\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  height: 100%;\n  background-color: ${({ theme }) => theme.palette.background.default};\n`;\n\nconst MenuDivider = styled(MUIDivider)`\n  &.MuiDivider-root {\n    background-color: ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n    margin: 5px 0;\n  }\n`;\n\nconst IconButton = styled(MUIIconButton)`\n  &.MuiIconButton-root {\n    color: ${({ theme }) => theme.palette.primary.main};\n  }\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    padding: 15px;\n    font-size: 1.3rem;\n    line-height: 1.3rem;\n    font-weight: 700;\n  }\n\n  & .MuiTab-wrapper {\n    align-items: flex-start;\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 49px;\n  border-bottom: 1px solid ${({ theme }) => Colorer(theme.palette.text.primary).alpha(0.1).string()};\n`;\n\nconst UserMail = styled.div`\n  flex-grow: 1;\n  padding: 0 15px;\n  text-transform: uppercase;\n  font-family: Roboto;\n  color: ${({ theme }) => theme.palette.primary.main};\n`;\n\nexport { MobileNavbar };\n","import React from 'react';\nimport Colorer from 'color';\nimport { Route, Switch, Redirect, useRouteMatch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Hidden from '@material-ui/core/Hidden';\n\nimport { InventoryList } from './features/inventory/InventoryList';\nimport { PhysicalList } from './features/physical/PhysicalList';\nimport { ManageInventory } from './features/manage/ManageInventory';\nimport { VirtualList } from './features/virtual/VirtualList';\nimport { ServerPurchase } from './features/serverPurchase/ServerPurchase';\nimport { EntitlementList } from './features/entitlement/EntitlementList';\nimport { Cart } from './features/cart/Cart';\nimport { VCCart } from './features/cart/VCCart';\nimport { VCList } from './features/virtualCurrenciesList/VCList';\nimport { Navbar } from './components/Navbar';\nimport { MobileNavbar } from './components/MobileNavbar';\nimport { routes } from './utils/routes';\nimport { ProductContext } from './context';\n\nconst App = () => {\n  const { updateVirtualCurrencyBalance, clearCart, projectId } = React.useContext(ProductContext);\n\n  const isSpecificProject = useRouteMatch({\n    path: routes.specificProject,\n    strict: true,\n    sensitive: true\n  });\n\n  React.useEffect(() => {\n    clearCart();\n  }, [projectId]);\n\n  React.useEffect(() => {\n    updateVirtualCurrencyBalance();\n  }, []);\n\n  return React.useMemo(() => (\n    <Body>\n      <Navbar isSpecificProject={isSpecificProject} />\n      <Hidden lgUp>\n        {!isSpecificProject && <MobileNavbar />}\n      </Hidden>\n      <Cart />\n      <VCCart />\n      <Content>\n        <Switch>\n          <Route path={routes.items} exact component={VirtualList} />\n          <Route path={routes.currencies} component={VCList} />\n          <Route path={routes.physical} component={PhysicalList} />\n          <Route path={routes.inventory} component={InventoryList} />\n          <Route path={routes.manage} component={ManageInventory} />\n          <Route path={routes.entitlement} component={EntitlementList} />\n          <Route path={routes.purchase} component={ServerPurchase} />\n          <Route path={routes.specificProject} component={PhysicalList} />\n          <Redirect to={routes.items}/>\n        </Switch>\n      </Content>\n    </Body>\n  ), [isSpecificProject]);\n};\n\nconst Body = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  font-family: ${({ theme }) => theme.typography.fontFamily};\n  background: ${({ theme }) =>\n      `url(${theme.palette.background.imageUrl}) ${Colorer(theme.palette.background.default).alpha(0.8)}`\n    };\n  background-attachment: fixed;\n  background-size: cover;\n  background-blend-mode: darken;\n`;\n\nconst Content = styled.div`\n  position: relative;\n  height: 100%;\n  overflow-y: auto;\n`;\n\nexport default App;\n","import { createMuiTheme } from '@material-ui/core';\n\nconst mainTheme = createMuiTheme({\n  typography: {\n    fontFamily: '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif'\n  },\n  palette: {\n    primary: {\n      main: '#FF005B',\n      contrastText: '#F6FAFF',\n    },\n    secondary: {\n      main: '#D6E0E7',\n      contrastText: '#000',\n    },\n    text: {\n      primary: '#D6E0E7',\n      secondary: '#D6E0E7',\n    },\n    background: {\n      default: '#011627',\n      paper: '#011627',\n      imageUrl: 'https://res.cloudinary.com/maiik/image/upload/v1549624607/Xsolla/HomePage_Hero_Illustration_1440_oabqmk.jpg',\n    },\n    action: {\n      selected: '#D6E0E712',\n      hover: '#D6E0E708',\n    }\n  },\n  shape: {\n    borderRadius: 6,\n    cardWidth: '300px',\n  },\n});\n\nexport { mainTheme };\n","import React from 'react';\nimport { SnackbarProvider } from 'notistack';\nimport { ThemeProvider } from 'styled-components';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport MuiThemeProvider from '@material-ui/styles/ThemeProvider';\nimport { useRouteMatch } from 'react-router-dom';\n\nimport ProductProvider from './context';\nimport { mainTheme } from './styles/theme';\nimport { device } from './styles/devices';\nimport { routes } from './utils/routes';\n\nconst notificationPosition = {\n  vertical: 'bottom',\n  horizontal: 'right',\n};\n\nconst Provider = ({ children }) => {\n  const isMobile = useMediaQuery(`@media ${device.mobileL}`);\n\n  const match = useRouteMatch({\n    path: routes.specificProject,\n    strict: true,\n    sensitive: true\n  });\n\n  return (\n    <SnackbarProvider\n      anchorOrigin={notificationPosition}\n      dense={isMobile}\n      maxSnack={3}\n      preventDuplicate={isMobile}\n    >\n      <MuiThemeProvider theme={mainTheme}>\n        <ThemeProvider theme={mainTheme}>\n          <ProductProvider projectId={match ? match.params.projectID : window.xProjectId}>\n            {children}\n          </ProductProvider>\n        </ThemeProvider>\n      </MuiThemeProvider>\n    </SnackbarProvider>\n  )\n};\n\nexport default Provider;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport './index.css';\nimport App from './App';\nimport Provider from './provider';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <HashRouter basename='/'>\n    <Provider>\n      <App />\n    </Provider>\n  </HashRouter>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}