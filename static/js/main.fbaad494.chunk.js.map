{"version":3,"sources":["components/Preloader.js","components/Cookie.js","components/StoreLoader.js","context.js","components/ProductCard.js","features/inventory/InventoryItem.js","features/inventory/InventoryLoader.js","features/inventory/InventoryList.js","features/physical/PhysicalListLoader.js","components/Currency.js","features/physical/PhysicalItem.js","features/physical/PhysicalList.js","components/GroupSwitcher.js","features/manage/ManageInventoryLoader.js","features/manage/ManageInventory.js","features/virtual/VirtualItemsLoader.js","features/virtual/VirtualItem.js","features/virtual/VirtualList.js","styles/devices.js","features/cart/CartItem.js","utils/formatCurrency.js","utils/generateUUID.js","features/serverPurchase/ServerPurchaseLoader.js","features/serverPurchase/ServerPurchase.js","features/entitlement/EntitlementLoader.js","features/entitlement/EntitlementItem.js","features/entitlement/EntitlementList.js","features/cart/Cart.js","features/cart/VCCartItem.js","features/cart/VCCart.js","features/virtualCurrenciesList/VCItem.js","features/virtualCurrenciesList/VCLoader.js","features/virtualCurrenciesList/VCList.js","utils/routes.js","components/XLogin.js","components/Navbar.js","components/MobileNavbar.js","App.js","styles/theme.js","provider.js","serviceWorker.js","index.js"],"names":["Preloader","react_default","a","createElement","CssPreloader","CircularProgress","color","styled","div","_templateObject","eatCookie","o","window","location","search","split","join","e","n","t","exec","decodeURIComponent","getQueryParams","token","Date","setTime","getTime","toUTCString","document","cookie","setCookie","history","pushState","pathname","length","i","charAt","substring","indexOf","getCookie","Cookie","xProjectId","eraseCookie","cancel","CancelToken","axios","changeItemQuantityCart","_ref","quantity","cartId","loginToken","_ref$sku","sku","opts","url","method","headers","Content-Type","Authorization","data","JSON","stringify","quickPurchaseBuyVirtualCurrency","_ref3","Object","asyncToGenerator","regenerator_default","mark","_callee","projectId","product","params","response","wrap","_context","prev","next","concat","virtual_prices","post","sent","abrupt","stop","this","_x","_x2","_x3","apply","arguments","ProductContext","React","createContext","ProductProvider","state","_this","props","logToken","userBalanceVirtualCurrency","isSideMenuShown","virtualItems","areVirtualItemsFetching","virtualCurrencies","areVirtualCurrenciesFetching","physicalItems","arePhysicalItemsFetching","inventoryItems","areInventoryItemsFetching","isItemConsuming","entitlementItems","isVCCartShown","isVCCartProcessing","vcCart","items","vcPriceSku","isCartShown","isCartProcessing","cart","price","amount","amount_without_discount","currency","setStateFrom","stateName","stateValue","setState","defineProperty","showCart","hideCart","showVCCart","hideVCCart","setSideMenuVisibility","setEntitlementItems","setInventoryItems","setPhysicalItems","setVirtualCurrencies","setVirtualItems","getCart","_this$state","cartPromise","cancelToken","c","then","catch","error","console","isCancel","cart_id","sort","compareItems","createCart","id","clearCart","updateVirtualCurrencyBalance","payStationHandler","b","buyByVC","clearVCCart","addToCart","enqueueSnackbar","_this$state2","some","elem","objectSpread","toConsumableArray","errorMsg","errorMessage","message","variant","removeFromCart","filter","prod","changeItemQuantityInCart","_this$state3","_ref2","_ref2$sku","removeItemFromCart","indexFind","findIndex","cartItems","splice","getVirtualCurrencyBalance","reps","Provider","value","children","PureComponent","ProductConsumer","Consumer","withSnackbar","ProductCard","memo","image","order","name","description","actionButtonContent","onAction","isLoading","_React$useState","useState","_React$useState2","slicedToArray","isShown","setShown","showCard","_React$useState3","_React$useState4","isActionedCard","setActionedCard","_React$useState5","_React$useState6","isHovered","setHovered","useEffect","setTimeout","CardAppear","shown","hovered","Card","onMouseEnter","onMouseLeave","CardImage","ProductCard_CardContent","CardTitle","Collapse","in","timeout","collapsedHeight","react_dotdotdot_src_default","animate","clamp","CardFooter","CardQuantity","Button","disabled","onClick","size","ProductCard_templateObject","theme","cardWidth","_templateObject2","colorText","colorBg","boxShadow","transitionStyle","borderRadius","CardContent","MUICardContent","_templateObject3","_templateObject4","_templateObject5","Colorer","alpha","string","_templateObject6","_templateObject7","colorAccent","InventoryItem","item","onConsume","image_url","remaining_uses","undefined","loadInventory","URL","get","x","type","consumeItem","_callee2","inventory","_context2","init","version","Inventory","instance_id","_x4","_x5","InventoryList","_React$useContext","useContext","useSnackbar","handleConsumeItem","useCallback","updateInventoryItemIndex","updatedInventoryItem","newInventoryItems","slice","content","useMemo","Content","map","index","key","EmptyText","Body","Preloader_Preloader","InventoryList_templateObject","InventoryList_templateObject2","InventoryList_templateObject3","loadPhysicalGoods","physicalGood","PhysicalGood","getPhysicalGoodList","Currency","Currency_Body","CurrencyIcon","src","CurrencyAcronym","Currency_templateObject","span","Currency_templateObject2","Avatar","Currency_templateObject3","PhysicalItem","Currency_Currency","Math","round","ShoppingCart_default","PhysicalList","PhysicalList_Content","PhysicalList_Body","PhysicalList_templateObject","PhysicalList_templateObject2","GroupSwitcher","groups","activeGroup","onGroupChange","GroupSwitcher_Tabs","onChange","_","groupID","group","GroupSwitcher_Tab","textColor","label","Tabs","MUITabs","GroupSwitcher_templateObject","Tab","MUITab","GroupSwitcher_templateObject2","colorAccentText","fontFamily","loadVirtualItems","projectID","loadVirtualCurrencies","rewardItems","_callee3","_context3","users","ManageInventory","userID","setUserID","setActiveGroup","selectedItem","setSelectedItem","_React$useState7","_React$useState8","setQuantity","_React$useState9","_React$useState10","isItemProcessing","setItemProcessing","_React$useState11","_React$useState12","areManageItemsFetching","setManageItemsFetching","_React$useState13","_React$useState14","manageItems","setManageItems","_React$useState15","_React$useState16","areManageCurrenciesFetching","setManageCurrenciesFetching","_React$useState17","_React$useState18","manageCurrencies","setManageCurrencies","isFetching","userOptions","MenuItem","itemsOptions","currenciesOptions","groupsContent","options","currencies","processItem","user","count","ManageInventory_Body","Form","onSubmit","event","preventDefault","ManageInventory_TextField","select","target","GroupSwitcher_GroupSwitcher","Items","FormActions","RewardButton","ManageInventory_templateObject","form","ManageInventory_templateObject2","TextField","MUITextField","ManageInventory_templateObject3","ManageInventory_templateObject4","ManageInventory_templateObject5","ManageInventory_templateObject6","Promise","all","_ref4","g","virtualItemsByGroup","loadVirtualItemsByGroup","external_id","groupName","toArray","_ref5","VirtualItem","hasVirtualCurrencyPrice","buttonContent","VirtualList","Fragment","Title","Group","VirtualList_Body","VirtualList_templateObject","VirtualList_templateObject2","VirtualList_templateObject3","device","mobileS","mobileM","mobileL","tablet","laptop","laptopL","desktop","retina","CartItemComponent","changeItemQuantity","calcPrice","handleQuantityDec","CartItem","CartItemImage","CartItemBody","ItemName","ItemPrice","CartItemTotal","CartItemPriceForOne","PriceInfo","QuantityActions","IconButton","DecrementIcon","DeleteIcon","ItemQuantity","IncrementIcon","CartItem_templateObject","CartItem_templateObject2","CartItem_templateObject3","CartItem_templateObject4","CartItem_templateObject5","CartItem_templateObject6","CartItem_templateObject7","_templateObject8","_templateObject9","_templateObject10","MUIDeleteIcon","_templateObject11","MUIDecrementIcon","_templateObject12","MUIIncrementIcon","_templateObject13","defaultCurrency","fractionSize","symbol","grapheme","template","rtl","uniqSymbol","defaultLocale","getFormattedCurrency","locale","parsedAmount","parseFloat","isNaN","formattedCurrency","dir","currencyOptions","currencyFormat","toUpperCase","getCurrencyOptions","languageOptions","currencyNumberFormat","substr","toLowerCase","formatLocale","getLanguageOptions","signAmount","thousandSeparator","thousands","decimalSeparator","decimal","splittedAmount","abs","toFixed","replace","formattedAmount","purchaseItems","ServerPurchase","isPurchasing","setPurchasing","purchase","platform","external_purchase_id","crypto","getRandomValues","Uint8Array","toString","external_purchase_date","toISOString","cartContent","CartItems","CartItem_CartItemComponent","ServerPurchase_Divider","ServerPurchase_EmptyText","footerContent","CartFooter","Subtotal","Price","subtotal","reduce","acc","calculateSubtotal","CartActions","ServerPurchase_Body","ServerPurchase_Content","ServerPurchase_templateObject","ServerPurchase_templateObject2","ServerPurchase_templateObject3","ServerPurchase_templateObject4","ServerPurchase_templateObject5","ServerPurchase_templateObject6","ServerPurchase_templateObject7","ServerPurchase_templateObject8","Divider","MUIDivider","ServerPurchase_templateObject9","EntitlementItem","_Component","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","expanded","cardShown","inherits","createClass","_this2","_this$props","initClass","imageUrl","title","className","style","backgroundImage","unmountOnExit","Component","redeem","redeemCode","project_id","digital_content_sku","language","EntitlementList","_PureComponent","code","hasRedeemError","handleChangeCode","bind","assertThisInitialized","handleChangeSku","handleSubmit","updateEntitlement","getEntitlement","_this3","k","log","placeholder","oneProduct","EntitlementItem_EntitlementItem","Modal","MUIModal","Cart_templateObject","CartContent","Cart_templateObject2","CartHeader","Cart_templateObject3","CartList","Cart_templateObject4","Cart_templateObject5","Cart_templateObject6","Cart_templateObject7","Cart_templateObject8","Cart","withRouter","buyButtonDisabled","setBuyButtonDisabled","Cart_Modal","open","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","Grow","Close_default","Cart_CartFooter","Cart_Subtotal","Cart_Price","Cart_CartActions","marginRight","push","sandbox","getPsTokenBuyCart","xPayStationInit","host","XPayStationWidget","on","eventTypes","CLOSE","STATUS_DONE","VCCartItem","VCCartItem_Body","Image","Name","VCCartItem_templateObject","VCCartItem_templateObject2","VCCartItem_templateObject3","VCCart","VCCart_Modal","VCCart_CartContent","VCCart_CartHeader","VCCart_CartList","VCCart_CartFooter","VCCart_templateObject","VCCart_templateObject2","VCCart_templateObject3","VCCart_templateObject4","VCCart_templateObject5","VCItem","VCList","VCList_Content","VCList_Body","VCList_templateObject","VCList_templateObject2","routes","physical","entitlement","manage","navItems","route","getMenuItems","includes","XLogin","unauthorizedFlow","authorizedFlow","tkn","base64","parse","atob","parseJwt","psToken","valueFromContext","CssXpop","display","CssXpopB","CssLoginInfo","CssLoginPop","myProjects","onePr","pr","login","urlFull","marginBottom","fontSize","href","projectName","CssXpopZ","XloginInit","cke","XLogin_templateObject","XLogin_templateObject2","XLogin_templateObject3","XLogin_templateObject4","XLogin_templateObject5","login_id","Menu","MUIMenu","Navbar_templateObject","Navbar_templateObject2","Navbar_templateObject3","Link","NavLink","Navbar_templateObject4","MenuButton","MUIIconButton","Navbar_templateObject5","LogoutButton","Navbar_templateObject6","VCCurrency","Navbar_templateObject7","LoginPanel","Navbar_templateObject8","LoginButton","Navbar_templateObject9","UserMail","Navbar_templateObject10","Header","header","Navbar_templateObject11","Navbar","menuAnchor","setMenuAnchor","handleMenuClose","isLogged","generalMenuItems","isLocationExistsInTabs","userMenuItems","Hidden","mdDown","Navbar_Tabs","component","Navbar_Tab","to","lgUp","Menu_default","vc","endIcon","Boolean","ExpandLess_default","ExpandMore_default","currentTarget","email","XLogin_XLogin","reload","ExitToAppOutlined_default","xsDown","Navbar_Menu","anchorEl","getContentAnchorEl","transformOrigin","vertical","horizontal","anchorOrigin","activeClassName","MobileNavbar_templateObject","MobileNavbar_templateObject2","MenuDivider","MobileNavbar_templateObject3","MobileNavbar_templateObject4","MobileNavbar_templateObject5","MobileNavbar_templateObject6","MobileNavbar_templateObject7","MobileNavbar_templateObject8","MobileNavbar","closeMenu","SwipeableDrawer","anchor","onOpen","MobileNavbar_Content","MobileNavbar_Header","MobileNavbar_IconButton","MobileNavbar_UserMail","ChevronLeft_default","MobileNavbar_Divider","MobileNavbar_Tabs","orientation","MobileNavbar_Tab","App_templateObject","Background","App_templateObject2","backgroundUrl","BackgroundOverlay","App_templateObject3","App","VCCart_VCCart","App_Content","Switch","Route","path","exact","render","EntitlementList_EntitlementList","Redirect","padding","transitionTime","transitionEasing","transition","notificationPosition","isMobile","useMediaQuery","build","dense","maxSnack","preventDuplicate","styled_components_browser_esm","context","HashRouter","basename","hostname","match","ReactDOM","provider","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fbaad494.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst Preloader = () => (\n  <CssPreloader>\n    <CircularProgress color=\"secondary\" />\n  </CssPreloader>\n);\n\nexport { Preloader };\n\nconst CssPreloader = styled.div`\n  z-index: 9;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n`;\n","const eatCookie = () => {\n  const getCookie = o => {\n    for (\n      var e = o + \"=\",\n        n = decodeURIComponent(document.cookie).split(\";\"),\n        t = 0;\n      t < n.length;\n      t++\n    ) {\n      for (var i = n[t]; \" \" === i.charAt(0); ) i = i.substring(1);\n      if (0 === i.indexOf(e)) return i.substring(e.length, i.length);\n    }\n    return \"\";\n  };\n  const setCookie = (o, e) => {\n    var n = new Date();\n    n.setTime(n.getTime() + 864e5);\n    var t = \"expires=\" + n.toUTCString();\n    document.cookie = o + \"=\" + e + \";\" + t + \";path=/\";\n  };\n\n  function getQueryParams(o) {\n    o = o.split(\"+\").join(\" \");\n    for (var e, n = {}, t = /[?&]?([^=]+)=([^&]*)/g; (e = t.exec(o)); )\n      n[decodeURIComponent(e[1])] = decodeURIComponent(e[2]);\n    return n;\n  }\n\n  let o;\n  //console.log(\"let = \");\n  if (window.location.search) {\n    o = getQueryParams(window.location.search).token;\n  }\n  if (o) {\n    setCookie(\"xsolla_login_token\", o);\n    window.history.pushState(\"\", \"\", document.location.pathname);\n  } else {\n    o = getCookie(\"xsolla_login_token\");\n  }\n  if (o && o !== \"undefined\") {\n    //console.log(\"o = \", o);\n    return o;\n  } else {\n    return null;\n  }\n};\n\nexport default function Cookie() {\n  return 44056 === window.xProjectId\n    ? 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE5NjIyMzQwNDgsImlzcyI6Imh0dHBzOi8vbG9naW4ueHNvbGxhLmNvbSIsI'\n    + 'mlhdCI6MTU2MjE0NzY0OCwidXNlcm5hbWUiOiJ4c29sbGEiLCJ4c29sbGFfbG9naW5fYWNjZXNzX2tleSI6IjA2SWF2ZHpDeEVHbm5aMTlp'\n    + 'LUc5TmMxVWFfTWFZOXhTR3ZEVEY4OFE3RnMiLCJzdWIiOiJkMzQyZGFkMi05ZDU5LTExZTktYTM4NC00MjAxMGFhODAwM2YiLCJlbWFpbCI'\n    + '6InN1cHBvcnRAeHNvbGxhLmNvbSIsInR5cGUiOiJ4c29sbGFfbG9naW4iLCJ4c29sbGFfbG9naW5fcHJvamVjdF9pZCI6ImU2ZGZhYWM2LTc'\n    + '4YTgtMTFlOS05MjQ0LTQyMDEwYWE4MDAwNCIsInB1Ymxpc2hlcl9pZCI6MTU5MjR9.GCrW42OguZbLZTaoixCZgAeNLGH2xCeJHxl8u8Xn2aI'\n    : eatCookie();\n}\n\nexport function eraseCookie(o) {\n  return (document.cookie =\n    o + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;\");\n}\n\nexport function parseJwt(o) {\n  let base64Url = o.split(\".\")[1];\n  let base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\n  return JSON.parse(window.atob(base64));\n}\n","import axios from \"axios\";\n\nconst CancelToken = axios.CancelToken;\nlet cancel;\n\nexport function changeItemQuantityCart(\n  { sku = \"sku\" },\n  quantity,\n  cartId,\n  loginToken\n) {\n  cancel && cancel();\n  //console.log(\"sku added = \", sku, \" to cartId = \", cartId);\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId +\n      \"/item/\" +\n      sku,\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: JSON.stringify({\n      quantity: quantity\n    })\n  };\n  return axios(opts);\n}\n\nexport function createCart(loginToken) {\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v1/project/\" + window.xProjectId + \"/cart\",\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n\nexport function removeItemFromCart({ sku = \"sku\" }, cartId, loginToken) {\n  cancel && cancel();\n  //console.log(\"sku removed = \", sku, \" from cartId = \", cartId);\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId +\n      \"/item/\" +\n      sku,\n    method: \"DELETE\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n\nexport function getPsTokenBuyCart(cartId, loginToken) {\n  let opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/payment/cart/\" +\n      cartId,\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    data: {\n      sandbox: true\n    }\n  };\n  return axios(opts)\n    .then(function(response) {\n      //console.log(\"PsToken generated = \", response.data);\n      return response;\n    })\n    .catch(function(error) {\n      //console.log(\"L2PS ERROR = \", error.response);\n    });\n}\n\nexport function getCart(cartId, loginToken) {\n  cancel && cancel();\n  const opts = {\n    url:\n      \"https://store.xsolla.com/api/v2/project/\" +\n      window.xProjectId +\n      \"/cart/\" +\n      cartId,\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(c => {\n      cancel = c;\n    })\n  };\n  return axios(opts)\n    .then(response => response)\n    .catch(error => console.error(error));\n}\n\nexport const quickPurchaseBuyVirtualCurrency = async (projectId, product, loginToken) => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectId}/payment/item/${product.sku}/virtual/${product.virtual_prices[0].sku}`;\n  const params = {\n    headers: {\n      Authorization: `Bearer ${loginToken}`\n    }\n  };\n\n  const response = await axios.post(url, {}, params);\n\n  return response.data;\n}\n\nexport function getVirtualCurrencyBalance(loginToken) {\n  let opts = {\n    url:\n        \"https://store.xsolla.com/api/v2/project/\" + window.xProjectId + \"/user/virtual_currency_balance\",\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    }\n  };\n  return axios(opts);\n}\n","import React from 'react';\nimport { withSnackbar } from 'notistack';\n\nimport Cookie from './components/Cookie';\nimport {\n  changeItemQuantityCart,\n  createCart,\n  removeItemFromCart,\n  getCart, getVirtualCurrencyBalance\n} from './components/StoreLoader';\n\nconst ProductContext = React.createContext();\n\nclass ProductProvider extends React.PureComponent {\n  state = {\n    projectId: this.props.projectId,\n    logToken: Cookie(),\n    userBalanceVirtualCurrency: [],\n    isSideMenuShown: false,\n\n    virtualItems: [],\n    areVirtualItemsFetching: false,\n\n    virtualCurrencies: [],\n    areVirtualCurrenciesFetching: false,\n\n    physicalItems: [],\n    arePhysicalItemsFetching: false,\n\n    inventoryItems: [],\n    areInventoryItemsFetching: false,\n    isItemConsuming: false,\n\n    entitlementItems: [],\n\n    isVCCartShown: false,\n    isVCCartProcessing: false,\n    vcCart: {\n      items: [],\n      vcPriceSku: null\n    },\n\n    isCartShown: false,\n    isCartProcessing: false,\n    cart: {\n      cartId: null,\n      items: [],\n      price: {\n        amount: 0,\n        amount_without_discount: 0,\n        currency: '',\n      }\n    },\n  };\n\n  setStateFrom = (stateName, stateValue) => this.setState({ [stateName]: stateValue });\n\n  showCart = () => this.setState({ isCartShown: true });\n  hideCart = () => this.setState({ isCartShown: false });\n\n  showVCCart = () => this.setState({ isVCCartShown: true });\n  hideVCCart = () => this.setState({ isVCCartShown: false });\n\n  setSideMenuVisibility = isSideMenuShown => this.setState({ isSideMenuShown });\n  setEntitlementItems = entitlementItems => this.setState({ entitlementItems });\n  setInventoryItems = inventoryItems => this.setState({ inventoryItems });\n  setPhysicalItems = physicalItems => this.setState({ physicalItems });\n  setVirtualCurrencies = virtualCurrencies => this.setState({ virtualCurrencies });\n  setVirtualItems = virtualItems => this.setState({ virtualItems });\n\n  getCart = () => {\n    const { cart, logToken } = this.state;\n    const cartPromise = getCart(cart.cartId, logToken);\n    cartPromise.then(response => {\n      if (!cartPromise.isCancel && response) {\n        this.setState({\n          cart: {\n            cartId: response.data.cart_id,\n            items: response.data.items.sort(this.compareItems),\n            price: response.data.price || 0,\n          },\n          isCartProcessing: false\n        });\n      }\n    });\n  };\n\n  createCart = () => {\n    const cartIdPromise = createCart(this.state.logToken);\n    cartIdPromise.then(response => {\n      this.setState({\n        cart: {\n          cartId: response.data.id,\n          items: [],\n          price: {\n            amount: 0,\n            amount_without_discount: 0,\n            currency: '',\n          }\n        }\n      });\n    });\n  };\n\n  clearCart = () => {\n    this.showCart();\n    this.createCart();\n    this.updateVirtualCurrencyBalance();\n  };\n\n  payStationHandler = () => this.clearCart();\n\n  compareItems = (a, b) => {\n    if (a.sku > b.sku) {\n      return 1;\n    }\n    if (a.sku < b.sku) {\n      return -1;\n    }\n    return 0;\n  };\n\n  buyByVC = product => {\n    this.setState({\n      isVCCartShown: true,\n      vcCart: { items: [product] },\n    });\n  };\n\n  clearVCCart = () => {\n    this.setState({\n      isVCCartShown: false,\n      vcCart: { items: [] },\n    });\n  };\n\n  addToCart = product => {\n    const { enqueueSnackbar } = this.props;\n    const { cart, logToken } = this.state;\n    const isItemExist = cart.items.some(elem => elem.sku === product.sku);\n    if (isItemExist) {\n      this.getCart();\n      this.setState({ isCartShown: true });\n    } else {\n      this.setState({ isCartProcessing: true });\n      changeItemQuantityCart(product, 1, cart.cartId, logToken)\n        .then(() => {\n          this.setState({\n            cart: {\n              ...cart,\n              items: [{ ...product, quantity: 1 }, ...cart.items].sort(this.compareItems),\n              price: {\n                ...cart.price,\n                amount: cart.price.amount + product.price.amount,\n                amount_without_discount: cart.price.amount_without_discount + product.price.amount_without_discount,\n              },\n            },\n            isCartProcessing: false\n          });\n          this.showCart();\n        })\n        .catch(error => {\n          this.setState({ isCartProcessing: false });\n          const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n          enqueueSnackbar(errorMsg, { variant: 'error' });\n        });\n    }\n  };\n\n  removeFromCart = product => {\n    const { cart } = this.state;\n    \n    this.setState({\n      cart: {\n        ...cart,\n        items: cart.items\n          .filter(prod => prod.sku !== product.sku)\n          .sort(this.compareItems),\n        price: {\n          ...cart.price,\n          amount: cart.price.amount - product.price.amount * product.quantity,\n          amount_without_discount: cart.price.amount_without_discount - product.price.amount_without_discount * product.quantity\n        }\n      }\n    });\n  };\n\n  changeItemQuantityInCart = (product, quantity) => {\n    const { enqueueSnackbar } = this.props;\n    const { cart, logToken } = this.state;\n\n    if (quantity <= 0) {\n      this.removeFromCart(product);\n      removeItemFromCart(product, cart.cartId, logToken)\n        .then(this.getCart);\n    } else {\n      const indexFind = cart.items.findIndex(elem => elem.sku === product.sku);\n      const cartItems = cart.items;\n      cartItems.splice(indexFind, 1, { ...product, quantity });\n      this.setState({ cart: { ...cart, items: cartItems.sort(this.compareItems) } });\n      changeItemQuantityCart(product, quantity, cart.cartId, logToken)\n        .then(this.getCart)\n        .catch(error => enqueueSnackbar(error.response.data.errorMessage, { variant: 'error' }));\n    }\n  };\n\n  updateVirtualCurrencyBalance = () => {\n    const { logToken } = this.state;\n\n    getVirtualCurrencyBalance(logToken).then(reps => {\n      this.setState({\n        userBalanceVirtualCurrency: reps.data.items\n      });\n    });\n  };\n\n  render() {\n    return (\n      <ProductContext.Provider\n        value={{\n          ...this.state,\n          setStateFrom: this.setStateFrom,\n          payStationHandler: this.payStationHandler,\n          setInventoryItems: this.setInventoryItems,\n          setVirtualCurrencies: this.setVirtualCurrencies,\n          setPhysicalItems: this.setPhysicalItems,\n          setVirtualItems: this.setVirtualItems,\n          setEntitlementItems: this.setEntitlementItems,\n          addToCart: this.addToCart,\n          showVCCart: this.showVCCart,\n          hideVCCart: this.hideVCCart,\n          buyByVC: this.buyByVC,\n          clearVCCart: this.clearVCCart,\n          createCart: this.createCart,\n          showCart: this.showCart,\n          changeItemQuantityInCart: this.changeItemQuantityInCart,\n          updateVirtualCurrencyBalance: this.updateVirtualCurrencyBalance,\n          hideCart: this.hideCart,\n          setSideMenuVisibility: this.setSideMenuVisibility,\n        }}\n      >\n        {this.props.children}\n      </ProductContext.Provider>\n    );\n  }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductContext, ProductConsumer };\n\nexport default withSnackbar(ProductProvider);\n","import React from 'react';\nimport styled from 'styled-components';\nimport Colorer from 'color';\nimport Dotdotdot from 'react-dotdotdot'\n\nimport Collapse from '@material-ui/core/Collapse';\nimport MUICardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst ProductCard = React.memo(({\n  image,\n  order,\n  name,\n  value,\n  description,\n  actionButtonContent,\n  onAction,\n  isLoading,\n}) => {\n  const [isShown, setShown] = React.useState(false);\n  const showCard = () => setShown(true);\n\n  const [isActionedCard, setActionedCard] = React.useState(false);\n  const handleAction = () => {\n    setActionedCard(true);\n    onAction();\n  }\n\n  const [isHovered, setHovered] = React.useState(false);\n  const handleMouseEnter = () => setHovered(true);\n  const handleMouseLeave = () => setHovered(false);\n\n  React.useEffect(() => {\n    if (!isLoading) {\n      setActionedCard(false);\n    }\n  }, [isLoading]);\n\n  React.useEffect(() => {\n    setTimeout(showCard, order * 100);\n  }, []);\n\n  return (\n    <CardAppear shown={isShown} hovered={isHovered}>\n      <Card\n        hovered={isHovered}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <CardImage image={image}/>\n        <CardContent>\n          <CardTitle>{name}</CardTitle>\n          <Collapse in={isHovered} timeout=\"auto\" collapsedHeight=\"50px\">\n            {isHovered\n              ? description\n              : (\n              <Dotdotdot animate clamp={2}>\n                {description}\n              </Dotdotdot>\n            )}\n          </Collapse>\n        </CardContent>\n        <CardFooter>\n          <CardQuantity>\n            {value}\n          </CardQuantity>\n          {onAction && <Button\n            variant=\"contained\"\n            disabled={isLoading && isActionedCard}\n            onClick={handleAction}\n          >\n            {isLoading && isActionedCard ? <CircularProgress size={24} color=\"secondary\"/> : actionButtonContent}\n          </Button>}\n        </CardFooter>\n      </Card>\n    </CardAppear>\n  );\n});\n\nconst CardAppear = styled.div`\n  position: relative;\n  z-index: ${props => props.hovered ? 1 : 0};\n  width: ${props => props.theme.cardWidth};\n  height: ${props => props.theme.cardWidth};\n  transition: transform 350ms ease-out, opacity 150ms ease-out;\n  opacity: ${props => props.shown ? 1 : 0};\n  transform: ${props => props.shown ? 'none' : 'translateY(20px)'};;\n`;\n\nconst Card = styled.div`\n  position: absolute;\n  color: ${props => props.theme.colorText};\n  display: flex;\n  flex-direction: column;\n  width: ${props => props.theme.cardWidth};\n  min-height: ${props => props.theme.cardWidth};\n  background-color: ${props => props.hovered ? props.theme.colorBg : 'transparent'};\n  box-shadow: ${props => props.hovered ? props.theme.boxShadow : 'none'};\n  transition: box-shadow, background-color ${props => props.theme.transitionStyle};\n  border-radius: ${props => `${props.theme.borderRadius}px`};\n`;\n\nconst CardContent = styled(MUICardContent)`\n  min-height: 66px;\n  overflow: hidden;\n  flex-grow: 0;\n  padding-bottom: 0;\n  margin-bottom: 8px;\n`;\n\nconst CardTitle = styled.div`\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  font-weight: bolder;\n`;\n\nconst CardFooter = styled.div`\n  display: flex;\n  align-items: center;\n  border-top: 1px solid ${props => Colorer(props.theme.colorText).alpha(0.1).string()};\n  padding: 8px 0;\n  margin: 0px 16px 0 16px;\n`;\n\nconst CardImage = styled.div`\n  display: block;\n  margin-top: 8px;\n  height: 120px;\n  flex-shrink: 1;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CardQuantity = styled.div`\n  flex-grow: 1;\n  color: ${props => props.theme.colorAccent};\n  font-weight: 600;\n`;\n\nexport { ProductCard };\n","import React from 'react';\n\nimport { ProductCard } from '../../components/ProductCard';\n\nexport const InventoryItem = React.memo(({\n  item,\n  order,\n  isLoading,\n  onConsume,\n}) => {\n\n  const handleItemConsume = () => onConsume(item, order);\n\n  return (\n    <ProductCard\n      image={item.image_url}\n      name={item.name}\n      order={order}\n      isLoading={isLoading}\n      value={`Quantity: ${item.quantity}`}\n      description={item.description}\n      actionButtonContent=\"Consume\"\n      onAction={item.remaining_uses ? handleItemConsume : undefined}\n    />\n  )\n});\n\n","import axios from 'axios';\nimport { Inventory } from 'store-js-sdk/src/inventory/inventory';\nimport { init } from 'store-js-sdk/src/init';\n\nconst CancelToken = axios.CancelToken;\nlet cancel = () => void 0;\n\nexport const loadInventory = async (projectId, loginToken) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectId}/user/inventory/items`;\n  const params = {\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(c => {\n      cancel();\n      cancel = c;\n    })\n  };\n  const response = await axios.get(URL, params);\n\n  return response.data.items.filter(x => x.type === 'virtual_good');\n}\n\nexport const consumeItem = async (projectId, loginToken, item) => {\n  init({ projectId, version: 'v2' });\n  const inventory = new Inventory(loginToken);\n  return await inventory.consumeItem(item.sku, 1, item.instance_id);\n}","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { Preloader } from '../../components/Preloader';\nimport { ProductContext } from '../../context';\nimport { InventoryItem } from './InventoryItem';\nimport { loadInventory, consumeItem } from './InventoryLoader';\n\nconst InventoryList = () => {\n  const {\n    cart,\n    logToken,\n    projectId,\n    setStateFrom,\n    inventoryItems,\n    isItemConsuming,\n    areInventoryItemsFetching,\n    setInventoryItems,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleConsumeItem = React.useCallback(item => {\n    setStateFrom('isItemConsuming', true);\n    consumeItem(projectId, logToken, item)\n      .then(() => {\n        const updateInventoryItemIndex = inventoryItems.findIndex(x => x.sku === item.sku);\n        const updatedInventoryItem = inventoryItems[updateInventoryItemIndex];\n\n        if (updatedInventoryItem) {\n          const newInventoryItems = updatedInventoryItem.quantity > 1 ? [\n            ...inventoryItems.slice(0, updateInventoryItemIndex),\n            {\n              ...updatedInventoryItem,\n              quantity: updatedInventoryItem.quantity - 1,\n            },\n            ...inventoryItems.slice(updateInventoryItemIndex + 1),\n          ] : [\n            ...inventoryItems.slice(0, updateInventoryItemIndex),\n            ...inventoryItems.slice(updateInventoryItemIndex + 1),\n          ];\n\n          setInventoryItems(newInventoryItems);\n        }\n\n        setStateFrom('isItemConsuming', false);\n      })\n      .catch(error => {\n        setStateFrom('isItemConsuming', false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  });\n\n  React.useEffect(() => {\n    if (logToken && inventoryItems.length === 0 && cart.cartId) {\n      setStateFrom('areInventoryItemsFetching', true);\n      loadInventory(projectId, logToken)\n        .then(data => {\n          setInventoryItems(data);\n          setStateFrom('areInventoryItemsFetching', false);\n        })\n        .catch(error => {\n          setStateFrom('areInventoryItemsFetching', false);\n          enqueueSnackbar(error.message, { variant: 'error' });\n        });\n    }\n  }, [inventoryItems.length, cart.cartId]);\n\n  React.useEffect(() => () => setInventoryItems([]), []);\n\n  const content = React.useMemo(() => inventoryItems.length > 0 ? (\n    <Content>\n      {inventoryItems.map((item, index) => (\n        <InventoryItem\n          order={index}\n          key={item.sku}\n          item={item}\n          isLoading={isItemConsuming}\n          onConsume={handleConsumeItem}\n        />\n      ))}\n    </Content>\n  ) : (\n    <EmptyText>Oops, you have nothing bought yet!</EmptyText>\n  ), [inventoryItems, isItemConsuming]);\n\n  return (\n    <Body>\n      {areInventoryItemsFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  color: ${props => props.theme.colorText};\n  padding: 30px 0;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  grid-gap: 30px;\n  grid-template-columns: ${props => `repeat(auto-fit, minmax(\n    ${props.theme.cardWidth}, \n    ${props.theme.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nconst EmptyText = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n`;\n\nexport { InventoryList };\n","import { PhysicalGood } from 'store-js-sdk/src/physical-goods/physical-goods';\nimport { init } from 'store-js-sdk/src/init';\n\nexport const loadPhysicalGoods = async (projectId, loginToken) => {\n    //TODO добавить возможность использовать cancelToken в SDK\n    init({ projectId, version: 'v2' });\n    const physicalGood = new PhysicalGood(loginToken);\n    const response = await physicalGood.getPhysicalGoodList();\n    return response.data.items;\n};","import React from 'react';\nimport styled from 'styled-components';\n\nimport Avatar from '@material-ui/core/Avatar';\n\nconst Currency = ({ image, value, currency }) => (\n  <Body>\n    {image && <CurrencyIcon src={image} />}\n    {currency && <CurrencyAcronym>{currency}</CurrencyAcronym>}\n    {value}\n  </Body>\n);\n\nconst Body = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst CurrencyAcronym = styled.span`\n  margin-right: 5px;\n`;\n\nconst CurrencyIcon = styled(Avatar)`\n  && {\n    height: 1em;\n    width: 1em;\n    margin-right: 5px;\n  }\n`;\n\nexport { Currency };\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const PhysicalItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n}) => {\n\n  const handleItemAdd = () => addToCart(product);\n\n  const price = React.useMemo(() => (\n    <Currency\n      currency={product.price.currency}\n      value={Math.round(product.price.amount * 100) / 100} />\n  ), [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={<ShoppingCart />}\n      onAction={handleItemAdd}\n    />\n  )\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { ProductContext } from '../../context';\nimport { Preloader } from '../../components/Preloader';\nimport { loadPhysicalGoods } from './PhysicalListLoader';\nimport { PhysicalItem } from './PhysicalItem';\n\nconst PhysicalList = () => {\n  const {\n    logToken,\n    projectId,\n    addToCart,\n    setStateFrom,\n    physicalItems,\n    arePhysicalItemsFetching,\n    setPhysicalItems,\n    isCartProcessing,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\nReact.useEffect(() => {\n  if (logToken && physicalItems.length === 0) {\n    setStateFrom('arePhysicalItemsFetching', true);\n    loadPhysicalGoods(projectId, logToken)\n      .then(data => {\n        setPhysicalItems(data);\n        setStateFrom('arePhysicalItemsFetching', false);\n      })\n      .catch(error => {\n        enqueueSnackbar(error.message, { variant: 'error' });\n        setStateFrom('arePhysicalItemsFetching', false);\n      });\n  }\n}, [physicalItems]);\n\nconst content = React.useMemo(() => physicalItems.length > 0 && (\n  <Content>\n    {physicalItems.map((item, index) => (\n      <PhysicalItem\n        order={index}\n        key={item.sku}\n        product={item}\n        isLoading={isCartProcessing}\n        addToCart={addToCart}\n      />\n    ))}\n  </Content>\n), [physicalItems, isCartProcessing]);\n\n  return (\n    <Body>\n      {arePhysicalItemsFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  color: ${props => props.theme.colorText};\n  position: relative;\n  background-color: transparent;\n  z-index: 1;\n  height: 100%;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${props => `repeat(auto-fit, minmax(\n    ${props.theme.cardWidth}, \n    ${props.theme.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nexport { PhysicalList };\n","import React from 'react';\nimport styled from 'styled-components';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\n\nconst GroupSwitcher = ({\n  groups,\n  activeGroup,\n  onGroupChange,\n}) => {\n  const handleGroupChange = (_, groupID) => onGroupChange(groupID);\n\n  return (\n    <Tabs\n      value={activeGroup}\n      onChange={handleGroupChange}\n      variant=\"scrollable\"\n    >\n      {groups.map(group => (\n        <Tab\n          value={group.id}\n          key={group.id}\n          color=\"secondary\"\n          textColor=\"secondary\"\n          label={group.label}\n        />\n      ))}\n    </Tabs>\n  );\n}\n\nconst Tabs = styled(MUITabs)`\n  padding: 30px 0;\n  color: ${props => props.theme.colorAccent};\n  \n  & .MuiTabs-flexContainer {\n    justify-content: center;\n  };\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    color: ${props => props.theme.colorAccentText};\n    font-family: ${props => props.theme.fontFamily};\n  };\n`;\n\nexport { GroupSwitcher };\n","import axios from 'axios';\n\nexport const loadVirtualItems = async projectID => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_items`;\n  const response = await axios.get(url);\n\n  return response.data.items;\n}\n\nexport const loadVirtualCurrencies = async projectID => {\n  const url = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_currency`;\n  const response = await axios.get(url);\n\n  return response.data.items;\n}\n\nexport const rewardItems = async data => {\n  const url = 'https://livedemo.xsolla.com/store-demo/api/index.php';\n  const response = await axios.post(url, data);\n\n  return response.data;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport MUITextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\n\nimport { ProductContext } from '../../context';\nimport { GroupSwitcher } from '../../components/GroupSwitcher';\nimport { Preloader } from '../../components/Preloader.js';\nimport { loadVirtualCurrencies, loadVirtualItems, rewardItems } from './ManageInventoryLoader';\n\nconst users = [\n  {\n    id: 'd342dad2-9d59-11e9-a384-42010aa8003f',\n    name: 'support@xsolla.com',\n  },\n  {\n    id: '7d8b1f52-7d3f-400b-acd8-46e3a4368596',\n    name: 'v.legotkin@xsolla.com',\n  },\n  {\n    id: '27bc1227-48a3-4da8-bb86-f8d093f68805',\n    name: 'r.ushakov@xsolla.com',\n  },\n  {\n    id: 'a7d10a4e-3f68-43cc-a6b2-893d2c68fd14',\n    name: 'p.sanachev@xsolla.com',\n  },\n];\n\nconst groups = [\n  {\n    id: 'items',\n    label: 'Items',\n  },\n  {\n    id: 'currencies',\n    label: 'Currencies',\n  },\n];\n\nconst ManageInventory = () => {\n  const { projectId } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [userID, setUserID] = React.useState(null);\n  const [activeGroup, setActiveGroup] = React.useState(null);\n  const [selectedItem, setSelectedItem] = React.useState(null);\n  const [quantity, setQuantity] = React.useState(1);\n  const [isItemProcessing, setItemProcessing] = React.useState(false);\n  \n  const [areManageItemsFetching, setManageItemsFetching] = React.useState(false);\n  const [manageItems, setManageItems] = React.useState([]);\n\n  const [areManageCurrenciesFetching, setManageCurrenciesFetching] = React.useState(false);\n  const [manageCurrencies, setManageCurrencies] = React.useState([]);\n\n  const isFetching = areManageItemsFetching || areManageCurrenciesFetching;\n  const userOptions = React.useMemo(() => users.map(x => <MenuItem value={x.id}>{x.name}</MenuItem>, users));\n  const itemsOptions = React.useMemo(() => manageItems.map(x => <MenuItem value={x.sku}>{x.name}</MenuItem>, manageItems));\n  const currenciesOptions = React.useMemo(() => manageCurrencies.map(x => <MenuItem value={x.sku}>{x.name}</MenuItem>, manageCurrencies));\n\n  const groupsContent = {\n    items: {\n      name: 'Item',\n      items: manageItems,\n      options: itemsOptions,\n    },\n    currencies: {\n      name: 'Currency',\n      items: manageCurrencies,\n      options: currenciesOptions,\n    },\n  };\n\n  const processItem = type => {\n    if (!selectedItem || !userID) {\n      return;\n    }\n\n    const data = { type, user: userID, item: selectedItem, count: quantity };\n    setItemProcessing(true);\n    enqueueSnackbar('Operation is processing', { variant: 'info' });\n    rewardItems(data)\n      .then(() => {\n        setItemProcessing(false);\n        enqueueSnackbar('Complete', { variant: 'success' });\n      })\n      .catch(error => {\n        setItemProcessing(false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  }\n  \n  const handleFormSubmit = event => event.preventDefault();\n  const handleRewardItem = () => processItem('reward');\n  const handleRevokeItem = () => processItem('revoke');\n  const handleUserSelect = event => setUserID(event.target.value);\n  const handleItemSelect = event => setSelectedItem(event.target.value);\n  const handleQuantityChange = event => setQuantity(event.target.value);\n\n  React.useEffect(() => {\n    setUserID(users[0] ? users[0].id : null);\n  }, [users]);\n\n  React.useEffect(() => {\n    setActiveGroup(groups[0] ? groups[0].id : null);\n  }, [groups]);\n\n  React.useEffect(() => {\n    if (activeGroup && groupsContent[activeGroup] && groupsContent[activeGroup].items[0]) {\n      setSelectedItem(groupsContent[activeGroup].items[0].sku);\n    }\n  }, [manageItems, manageCurrencies, activeGroup]);\n\n  React.useEffect(() => {\n    if (manageItems.length === 0) {\n      setManageItemsFetching(true);\n      loadVirtualItems(projectId)\n        .then(items => {\n          setManageItemsFetching(false);\n          setManageItems(items);\n        })\n        .catch(error => {\n          setManageItemsFetching(false);\n          enqueueSnackbar(error.message, { variant: 'error' })\n        });\n    }\n  }, [manageItems]);\n\n  React.useEffect(() => {\n    if (manageItems.length === 0) {\n      setManageCurrenciesFetching(true);\n      loadVirtualCurrencies(projectId)\n        .then(items => {\n          setManageCurrenciesFetching(false);\n          setManageCurrencies(items);\n        })\n        .catch(error => {\n          setManageCurrenciesFetching(false);\n          enqueueSnackbar(error.message, { variant: 'error' })\n        });\n    }\n  }, [manageCurrencies]);\n    \n  return (\n    <Body>\n      {isFetching\n        ? <Preloader />\n        : (\n          <Form onSubmit={handleFormSubmit}>\n            <TextField\n              select\n              label=\"User\"\n              value={userID}\n              color=\"secondary\"\n              onChange={handleUserSelect}\n            >\n              {userOptions}\n            </TextField>\n            <GroupSwitcher\n              groups={groups}\n              activeGroup={activeGroup}\n              onGroupChange={setActiveGroup}\n            />\n            <Items>\n              {groupsContent[activeGroup] && (\n                <TextField\n                  select\n                  label={groupsContent[activeGroup].name}\n                  value={selectedItem}\n                  color=\"secondary\"\n                  onChange={handleItemSelect}\n                >\n                  {groupsContent[activeGroup].options}\n                </TextField>\n              )}\n              <TextField\n                type=\"number\"\n                label=\"Quantity\"\n                value={quantity}\n                color=\"secondary\"\n                onChange={handleQuantityChange}\n              />\n            </Items>\n            <FormActions>\n              <RewardButton\n                type=\"submit\"\n                variant=\"contained\"\n                disabled={isItemProcessing}\n                onClick={handleRewardItem}\n              >\n                Reward\n              </RewardButton>\n              <Button\n                variant=\"contained\"\n                disabled={isItemProcessing}\n                onClick={handleRevokeItem}\n              >\n                Revoke\n              </Button>\n            </FormActions>\n          </Form>\n        )\n      }\n    </Body>\n  );\n};\n\nconst Body = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 50px;\n`;\n\nconst Form = styled.form`\n  max-width: 400px;\n  width: 100%;\n  padding: 20px;\n  color: ${props => props.theme.colorText};\n`;\n\nconst TextField = styled(MUITextField)`\n  width: 100%;\n\n  & .MuiFormLabel-root {\n    color: ${props => props.theme.colorText}\n  }\n\n  & .MuiInput-root {\n    color: ${props => props.theme.colorText}\n  }\n`;\n\nconst Items = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-column-gap: 20px;\n`;\n\nconst FormActions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px 0;\n`;\n\nconst RewardButton = styled(Button)`\n  && {\n    margin-right: 10px;\n  }\n`;\n\nexport { ManageInventory };\n","import axios from 'axios';\n\nexport const loadVirtualItems = async (projectID, token) => {\n  const URL = `https://store.xsolla.com/api/v1/project/${projectID}/items/groups`\n  const response = await axios.get(\n    URL,\n    {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }\n  );\n\n  const [...groups] = await Promise.all(response.data.groups.map(async g => {\n    const virtualItemsByGroup = await loadVirtualItemsByGroup(projectID, g.external_id);\n    return {\n      groupID: g.external_id,\n      groupName: g.name,\n      items: virtualItemsByGroup\n    };\n  }));\n\n  return groups;\n};\n\nconst loadVirtualItemsByGroup = async (projectID, groupID) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_items/group/${groupID}`\n  const response = await axios.get(URL);\n\n  return response.data.items;\n}\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const VirtualItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n  buyByVC,\n}) => {\n  const handleBuyByVC = () => buyByVC(product);\n  const handleItemAdd = () => addToCart(product);\n  \n  const hasVirtualCurrencyPrice = product.virtual_prices && product.virtual_prices.length > 0;\n  const buttonContent = React.useMemo(() => hasVirtualCurrencyPrice ? 'Buy now' : <ShoppingCart />, [product]);\n  const price = React.useMemo(() => hasVirtualCurrencyPrice\n    ? (\n      <Currency\n        image={product.virtual_prices[0].image_url}\n        value={product.virtual_prices[0].amount}\n      />\n    ) : (\n      <Currency\n        currency={product.price.currency}\n        value={Math.round(product.price.amount * 100) / 100}\n      />\n    ), [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={buttonContent}\n      onAction={hasVirtualCurrencyPrice ? handleBuyByVC : handleItemAdd}\n    />\n  )\n});\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { ProductContext } from '../../context';\nimport { Preloader } from '../../components/Preloader.js';\nimport { GroupSwitcher } from '../../components/GroupSwitcher';\nimport { loadVirtualItems } from './VirtualItemsLoader';\nimport { VirtualItem } from './VirtualItem';\n\nconst VirtualList = () => {\n  const {\n    logToken,\n    virtualItems,\n    addToCart,\n    buyByVC,\n    projectId,\n    areVirtualItemsFetching,\n    isCartProcessing,\n    setVirtualItems,\n    setStateFrom,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [activeGroup, setActiveGroup] = React.useState(null);\n\n  const groups = React.useMemo(() => virtualItems.map(x => ({ id: x.groupID, label: x.groupName })), [virtualItems]);\n\n  React.useEffect(() => {\n    setActiveGroup(virtualItems[0] ? virtualItems[0].groupID : null);\n  }, [virtualItems]);\n\n  React.useEffect(() => {\n    if (!areVirtualItemsFetching && logToken && virtualItems.length === 0) {\n      setStateFrom('areVirtualItemsFetching', true);\n      loadVirtualItems(projectId, logToken).then(virtualItems => {\n        setVirtualItems(virtualItems);\n        setStateFrom('areVirtualItemsFetching', false);\n      }).catch(error => {\n        setStateFrom('areVirtualItemsFetching', false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n    }\n  }, [virtualItems]);\n\n  const content = React.useMemo(() => virtualItems.length > 0 && (\n    <>\n      <GroupSwitcher\n        groups={groups}\n        activeGroup={activeGroup}\n        onGroupChange={setActiveGroup}\n      />\n      {virtualItems.map(g => activeGroup === g.groupID && (\n        <React.Fragment key={g.groupID}>\n          <Title>\n            {g.groupName}\n          </Title>\n          <Group>\n            {g.items.map((item, index) => (\n              <VirtualItem\n                order={index}\n                key={item.sku}\n                product={item}\n                addToCart={addToCart}\n                isLoading={isCartProcessing}\n                buyByVC={buyByVC}\n              />\n            ))}\n          </Group>\n        </React.Fragment>\n      ))}\n    </>\n  ), [activeGroup, virtualItems, isCartProcessing]);\n\n  return (\n    <Body>\n      {areVirtualItemsFetching\n        ? <Preloader />\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  color: ${props => props.theme.colorText};\n  background-color: transparent;\n`;\n\nconst Group = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${props => `repeat(auto-fit, minmax(\n    ${props.theme.cardWidth}, \n    ${props.theme.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nconst Title = styled.div`\n  color: ${props => props.theme.colorText};\n  min-height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  font-size: 1.2em;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nexport { VirtualList };\n","const size = {\n  mobileS: '320px',\n  mobileM: '375px',\n  mobileL: '425px',\n  tablet: '768px',\n  laptop: '1024px',\n  laptopL: '1440px',\n  desktop: '1920px',\n  retina: '2560px'\n}\n\nexport const device = {\n  mobileS: `(max-width: ${size.mobileS})`,\n  mobileM: `(max-width: ${size.mobileM})`,\n  mobileL: `(max-width: ${size.mobileL})`,\n  tablet: `(max-width: ${size.tablet})`,\n  laptop: `(max-width: ${size.laptop})`,\n  laptopL: `(max-width: ${size.laptopL})`,\n  desktop: `(max-width: ${size.desktop})`,\n  retina: `(max-width: ${size.retina})`\n};","import React from 'react';\nimport styled from 'styled-components';\nimport IconButton from '@material-ui/core/IconButton';\nimport MUIDeleteIcon from \"@material-ui/icons/Delete\";\nimport MUIIncrementIcon from \"@material-ui/icons/AddBox\";\nimport MUIDecrementIcon from \"@material-ui/icons/IndeterminateCheckBox\";\n\nimport { device } from '../../styles/devices';\n\nconst CartItemComponent = ({ item, changeItemQuantity }) => {\n  const calcPrice = (price, quantity) => Math.round(price * quantity * 100) / 100;\n  const handleQuantityDec = () => changeItemQuantity(item, item.quantity - 1);\n  const handleQuantityInc = () => changeItemQuantity(item, item.quantity + 1);\n  \n  return (\n    <CartItem>\n      <CartItemImage image={item.image_url} />\n      <CartItemBody>\n        <ItemName>{item.name}</ItemName>\n        <ItemPrice>\n          <CartItemTotal>\n            {item.price.currency} {calcPrice(item.price.amount, item.quantity)}\n          </CartItemTotal>\n          {item.quantity > 1 && (\n            <CartItemPriceForOne>\n              {item.price.currency} {calcPrice(item.price.amount, 1)} for one item\n            </CartItemPriceForOne>\n          )}\n        </ItemPrice>\n      </CartItemBody>\n      <PriceInfo>\n        <QuantityActions>\n          {item.quantity > 1\n            ? (\n              <IconButton color=\"inherit\" onClick={handleQuantityDec}>\n                <DecrementIcon />\n              </IconButton>\n            ) : (\n              <IconButton color=\"inherit\" onClick={handleQuantityDec}>\n                <DeleteIcon />\n              </IconButton>\n            )\n          }\n          <ItemQuantity>{item.quantity}</ItemQuantity>\n          <IconButton color=\"inherit\" onClick={handleQuantityInc}>\n            <IncrementIcon />\n          </IconButton>\n        </QuantityActions>\n      </PriceInfo>\n    </CartItem>\n  );\n}\n\nconst CartItem = styled.div`\n  display: grid;\n  grid-template-columns: 0.7fr 1.3fr 1fr;\n  color: ${props => props.theme.colorText};\n  overflow: hidden;\n  height: 130px;\n\n  @media ${device.mobileL} {\n    height: 185px;\n    grid-template-columns: 0.9fr 1.1fr;\n    grid-template-rows: 120px 1fr;\n  }\n`;\n\nconst CartItemImage = styled.div`\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst CartItemBody = styled.div`  \n  padding: 10px;\n`;\n\nconst ItemName = styled.div`\n  font-weight: bolder;\n  margin-bottom: 5px;\n`;\n\nconst QuantityActions = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n`;\n\nconst ItemQuantity = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bolder;\n  min-width: 44px;\n  font-size: 1.2em;\n`;\n\nconst PriceInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  @media ${device.mobileL} {\n    grid-column: 2 / 2;\n  }\n`;\n\nconst ItemPrice = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  @media ${device.mobileL} {\n    flex-grow: 1;\n  }\n`;\n\nconst CartItemTotal = styled.div`\n  color: ${props => props.theme.colorAccent};\n  font-weight: 600;\n`;\n\nconst CartItemPriceForOne = styled.div`\n  font-size: 0.8em;\n  opacity: 0.3;\n`;\n\nconst DeleteIcon = styled(MUIDeleteIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\nconst DecrementIcon = styled(MUIDecrementIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\nconst IncrementIcon = styled(MUIIncrementIcon)`\n  @media ${device.mobileL} {\n    && {\n      width: 1.5em;\n      height: 1.5em;\n    }\n  }\n`;\n\nexport { CartItemComponent as CartItem };","import currencyFormat from \"currency-format\";\nimport currencyNumberFormat from \"currency-number-format\";\n\n// CURRENCY CODE\nfunction defaultCurrency(currency) {\n  return {\n    name: currency,\n    fractionSize: 2,\n    symbol: {\n      grapheme: currency,\n      template: null,\n      rtl: false\n    },\n    uniqSymbol: null\n  };\n}\nfunction getCurrencyOptions(currency) {\n  return currency\n    ? currencyFormat[currency.toUpperCase()] || defaultCurrency(currency)\n    : defaultCurrency(currency);\n}\n\n// LOCALE\nvar defaultLocale = \"en_US\";\nvar localesMap = {\n  ar: \"ar_AE\",\n  bg: \"bg_BG\",\n  cn: \"zh_CN\",\n  cs: \"cs_CZ\",\n  de: \"de_DE\",\n  en: \"en_US\",\n  es: \"es_ES\",\n  fr: \"fr_FR\",\n  he: \"he_IL\",\n  it: \"it_IT\",\n  ja: \"ja_JP\",\n  ko: \"ko_KR\",\n  pl: \"pl_PL\",\n  pt: \"pt_BR\",\n  ro: \"ro_RO\",\n  ru: \"ru_RU\",\n  th: \"th_TH\",\n  tr: \"tr_TR\",\n  tw: \"zh_TW\",\n  vi: \"vi_VN\"\n};\nfunction formatLocale(locale) {\n  return [\n    locale.substr(0, 2).toLowerCase(),\n    locale.substr(3, 2).toUpperCase()\n  ].join(\"_\");\n}\nfunction getLanguageOptions(locale) {\n  return locale\n    ? currencyNumberFormat[formatLocale(locale)] ||\n        currencyNumberFormat[defaultLocale]\n    : currencyNumberFormat[defaultLocale];\n}\nfunction map2to5Locale(locale) {\n  return locale && locale.length === 5\n    ? locale\n    : localesMap[locale] || defaultLocale;\n}\n\n// CURRENCY\nexport function getFormattedCurrency(amount, currency, locale) {\n  var parsedAmount = parseFloat(amount);\n  if (!currency || isNaN(parsedAmount)) {\n    return {\n      formattedCurrency: amount + \" \" + currency,\n      dir: \"ltr\"\n    };\n  }\n\n  var currencyOptions = getCurrencyOptions(currency);\n  var languageOptions = getLanguageOptions(locale);\n\n  var signAmount = parsedAmount < 0 ? \"-\" : \"\";\n  var fractionSize = currencyOptions.fractionSize;\n\n  var symbol = currencyOptions.symbol;\n  var thousandSeparator = languageOptions.thousands;\n  var decimalSeparator = languageOptions.decimal;\n  // Spike for escaping case when grapheme is arabic symbol, and russian style separators was chosen\n  if ((!symbol || symbol.rtl) && languageOptions.thousands === \" \") {\n    thousandSeparator = \",\";\n    decimalSeparator = \".\";\n  }\n\n  var splittedAmount = Math.abs(parsedAmount)\n    .toFixed(fractionSize)\n    .split(\".\");\n  splittedAmount[0] = splittedAmount[0].replace(\n    /(\\d)(?=(\\d{3})+(?!\\d))/g,\n    \"$1\" + thousandSeparator\n  );\n  var formattedAmount = splittedAmount.join(decimalSeparator);\n\n  var formattedCurrency = signAmount + formattedAmount + \" \" + currency;\n  var rtl = false;\n  if (symbol && symbol.template) {\n    formattedCurrency =\n      signAmount +\n      symbol.template\n        .replace(\"1\", formattedAmount)\n        .replace(\"$\", symbol.grapheme);\n    rtl = symbol.rtl;\n  }\n\n  return {\n    formattedCurrency: formattedCurrency,\n    dir: rtl ? \"rtl\" : \"ltr\"\n  };\n}\n","\nexport const generateUUID = () =>\n  ([1e7] + -1e3 + -4e3 + -8e3 + -1e11)\n    .replace(/[018]/g, c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\n","import axios from \"axios\";\n\nexport const purchaseItems = async data => {\n  const url = `https://livedemo.xsolla.com/store-demo/api/index.php`;\n  const response = await axios.post(url, data);\n\n  return response.data;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport Loader from '@material-ui/core/CircularProgress';\nimport MUIDivider from '@material-ui/core/Divider';\n\nimport { ProductContext } from '../../context';\nimport { CartItem } from '../cart/CartItem';\nimport { getFormattedCurrency } from '../../utils/formatCurrency';\nimport { generateUUID } from '../../utils/generateUUID';\nimport { device } from '../../styles/devices';\nimport { purchaseItems } from './ServerPurchaseLoader';\n\nconst ServerPurchase = () => {\n  const { cart, changeItemQuantityInCart } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [isPurchasing, setPurchasing] = React.useState();\n\n  const calculateSubtotal = cart => {\n    const subtotal = cart.reduce((acc, x) => acc + x.price.amount * x.quantity, 0);\n    return Math.round(subtotal * 100) / 100;\n  };\n\n  const purchase = React.useCallback(() => {\n    const data = {\n      type: 'purchase',\n      user: 'd342dad2-9d59-11e9-a384-42010aa8003f',\n      platform: 'playstation_network',\n      purchase: {\n        amount: cart.price.amount,\n        currency: cart.price.currency,\n        external_purchase_id: generateUUID(),\n        external_purchase_date: (new Date()).toISOString()\n      },\n      items: cart.items.map(({ sku, quantity }) => ({ sku, quantity })),\n    };\n\n    setPurchasing(true);\n    enqueueSnackbar('Operation is processing', { variant: 'info' });\n    purchaseItems(data)\n      .then(() => {\n        setPurchasing(false);\n        enqueueSnackbar('Complete', { variant: 'success' });\n      })\n      .catch(error => {\n        setPurchasing(false);\n        enqueueSnackbar(error.message, { variant: 'error' });\n      });\n  }, []);\n\n  const cartContent = React.useMemo(\n    () => cart.items.length > 0\n      ? (\n        <CartItems>\n          {cart.items.map(x => (\n            <React.Fragment key={x.sku}>\n              <CartItem\n                item={x}\n                changeItemQuantity={changeItemQuantityInCart}\n              />\n              <Divider/>\n            </React.Fragment>\n          ))}\n        </CartItems>\n      ) : (\n        <EmptyText>\n          Oops, you have nothing bought yet!\n        </EmptyText>\n      ),\n    [cart]\n  );\n\n  const footerContent = React.useMemo(() => cart.items.length > 0 && (\n    <CartFooter>\n      <Subtotal>\n        Subtotal:\n        <Price>\n          {\n            getFormattedCurrency(\n              calculateSubtotal(cart.items),\n              cart.price.currency || cart.items[0].price.currency\n            ).formattedCurrency\n          }\n        </Price>\n      </Subtotal>\n      <CartActions>\n        <Button\n          variant=\"contained\"\n          disabled={isPurchasing}\n          onClick={purchase}\n        >\n          {isPurchasing ? <Loader size={24} color=\"secondary\" /> : 'Grant purchase'}\n        </Button>\n      </CartActions>\n    </CartFooter>\n  ), [cart, isPurchasing]);\n\n  return (\n    <Body>\n      <Content>\n        {cartContent}\n        {footerContent}\n      </Content>\n    </Body>\n  );\n};\n\nconst Body = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 50px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  max-width: 600px;\n  padding: 0 20px;\n`;\n\nconst CartItems = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  padding: 16px 0;\n`;\n\nconst EmptyText = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${props => props.theme.colorText};\n  height: 100%;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  padding: 24px 0 24px 0;\n`;\n\nconst CartActions = styled.div`\n  display: flex;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n  }\n`;\n\nconst Subtotal = styled.div`\n  display: flex;\n  font-weight: bold;\n  color: ${props => props.theme.colorText};\n  margin-right: 10px;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n    margin-bottom: 15px;\n    margin-right: 0;\n  }\n`;\n\nconst Price = styled.div`\n  min-width: 80px;\n  text-align: right;\n`;\n\nconst Divider = styled(MUIDivider)`\n  &.MuiDivider-root {\n    background-color: ${props => props.theme.colorAccentText};\n    opacity: 0.1;\n    margin-bottom: 5px;\n  }\n`;\n\nexport { ServerPurchase };\n","import axios from 'axios';\n\nconst CancelToken = axios.CancelToken;\nlet cancel;\n\nexport const getEntitlement = (projectId, loginToken) => {\n  cancel && cancel();\n  let opts = {\n    url:\n    `https://store.xsolla.com/api/v2/projects/entitlement`,\n    method: \"GET\",\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(function executor(c) {\n      cancel = c;\n    })\n  };\n\n  return axios(opts)\n    .then(function(response) {\n      return response.data;\n    });\n};\n\nexport const redeem = async (projectId, loginToken, redeemCode, sku) => {\n  cancel && cancel();\n  const url = 'https://store.xsolla.com/api/v1/game_delivery/xsolla_login/redeem_key';\n  const data = {\n    project_id: projectId,\n    digital_content_sku: sku,\n    language: \"en\",\n    key: redeemCode\n  };\n\n  const params = {\n    headers: {\n      Authorization: \"Bearer \" + loginToken\n    },\n    cancelToken: new CancelToken(c => {\n      cancel = c;\n    }),\n  };\n\n  const response = axios.post(url, data, params);\n\n  return response.data;\n};\n","import React, {Component} from \"react\";\n\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\nimport './EntitlementItem.css';\nimport Button from \"@material-ui/core/Button\";\n\nexport class EntitlementItem extends Component {\n  constructor() {\n    super();\n    this.state = {\n      expanded: false,\n      cardShown: false\n    }\n  }\n\n  componentDidMount() {\n    const {\n      order\n    } = this.props;\n\n    if (!this.state.cardShown) {\n      setTimeout(() => {\n        this.setState({\n          cardShown: true\n        });\n      }, order * 100);\n    }\n  }\n\n  render() {\n    const {\n      initClass,\n      imageUrl,\n      title,\n      description\n    } = this.props;\n\n    return (\n      <div className={`entitlement-item ${!this.state.cardShown ? initClass : \"\"}`}>\n        <div className=\"entitlement-item-card\">\n          <div\n            className=\"entitlement-item-card-media\"\n            style={{\n              backgroundImage: `url(${imageUrl})`\n            }}\n          />\n          <div className=\"entitlement-item-card-content\">\n            <div className=\"entitlement-item-card-content-title\">{title}</div>\n            <div className=\"entitlement-item-card-content-description\">{description}</div>\n          </div>\n          <Collapse in={this.state.expanded} timeout=\"auto\" unmountOnExit>\n            <CardContent>{description}</CardContent>\n          </Collapse>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, {PureComponent} from \"react\";\n\nimport {EntitlementItem} from './EntitlementItem';\nimport {getEntitlement, redeem} from './EntitlementLoader';\nimport {init} from 'store-js-sdk/src/init';\n\nimport './EntitlementList.css';\nimport './EntitlementRedeem.css';\nimport Button from \"@material-ui/core/Button\";\nimport {CircularProgress} from \"@material-ui/core\";\n\nexport class EntitlementList extends PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            code: '',\n            sku: '',\n            hasRedeemError: false,\n            isFetching: false\n        };\n\n        this.handleChangeCode = this.handleChangeCode.bind(this);\n        this.handleChangeSku = this.handleChangeSku.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.logToken && this.props.entitlementItems.length === 0) {\n            this.updateEntitlement();\n            this.props.setStateFrom(\"isFetching\", true);\n        }\n    }\n\n    componentWillUnmount() {\n        if (null !== this.props.entitlementItems) {\n            this.props.setEntitlementItems([]);\n        }\n    }\n\n    updateEntitlement() {\n        init({\n            projectId: window.xProjectId,\n            version: 'v2'\n        });\n\n        this.props.setStateFrom(\"isFetching\", true);\n\n        getEntitlement(window.xProjectId, this.props.logToken)\n            .then(items => {\n                this.props.setEntitlementItems(items);\n            })\n            .catch(() => {\n                this.props.setEntitlementItems([]);\n            });\n    }\n\n    handleChangeCode(event) {\n        this.setState({code: event.target.value});\n    }\n\n    handleChangeSku(event) {\n        this.setState({sku: event.target.value});\n    }\n\n    handleSubmit(event) {\n        this.setState({\n            ...this.state,\n            isFetching: true\n        });\n\n        redeem(window.xProjectId, this.props.logToken, this.state.code, this.state.sku)\n            .then((e, k) => {\n                this.updateEntitlement();\n                this.setState({\n                    ...this.state,\n                    hasRedeemError: false,\n                    isFetching: false\n                });\n            })\n            .catch(() => {\n                console.log('error');\n                this.setState({\n                    ...this.state,\n                    hasRedeemError: true,\n                    isFetching: false\n                });\n            });\n\n        event.preventDefault();\n    }\n\n    render() {\n        const {entitlementItems} = this.props;\n\n        return (\n            <div className=\"\">\n                <form className=\"entitlement-redeem-form\"\n                      onSubmit={this.handleSubmit}\n                >\n                    <input\n                        className=\"entitlement-redeem-input\"\n                        type=\"text\"\n                        size=\"40\"\n                        placeholder={\"Enter your code\"}\n                        onChange={this.handleChangeCode} value={this.state.code}\n                    />\n                    <input\n                        className=\"entitlement-redeem-input\"\n                        type=\"text\"\n                        size=\"40\"\n                        placeholder={\"Enter sku of your game\"}\n                        onChange={this.handleChangeSku} value={this.state.sku}\n                    />\n                    {\n                        this.state.hasRedeemError && !this.state.isFetching && <span className=\"entitlement-redeem-error\">Wrong code</span>\n                    }\n                    {\n                        this.state.isFetching &&\n                        <div className=\"entitlement-redeem-loader\">\n                            <CircularProgress />\n                        </div>\n                    }\n                    <Button\n                        type=\"submit\"\n                        className=\"entitlement-redeem-button\"\n                        variant=\"contained\"\n                    >\n                        Redeem Code\n                    </Button>\n                </form>\n                <div className=\"entitlement-list\">\n                    {\n                        entitlementItems && entitlementItems.length\n                            ?\n                            entitlementItems\n                                .map(\n                                    (oneProduct, key) => {\n                                        return (\n                                            <EntitlementItem\n                                                key={oneProduct.digital_content_sku}\n                                                order={key}\n                                                initClass=\"initialFlow1\"\n                                                title={oneProduct.name}\n                                                description={oneProduct.description}\n                                                imageUrl={oneProduct.image_url}\n                                            />\n                                        );\n                                    }\n                                )\n                            :\n                            <div>\n                                Oops, you have no games yet!\n                            </div>\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\nimport styled from 'styled-components';\nimport Colorer from 'color';\nimport IconClose from '@material-ui/icons/Close';\nimport Button from '@material-ui/core/Button';\nimport MUIModal from '@material-ui/core/Modal';\nimport IconButton from '@material-ui/core/IconButton';\nimport Grow from '@material-ui/core/Grow';\nimport Backdrop from '@material-ui/core/Backdrop';\n\nimport { ProductContext } from '../../context';\nimport { getFormattedCurrency } from '../../utils/formatCurrency';\nimport { getPsTokenBuyCart } from '../../components/StoreLoader';\nimport { device } from '../../styles/devices';\nimport { CartItem } from './CartItem';\n\nconst CartComponent = ({ history }) => {\n  const [buyButtonDisabled, setBuyButtonDisabled] = React.useState(false);\n  const {\n    cart,\n    hideCart,\n    logToken,\n    payStationHandler,\n    isCartShown,\n    changeItemQuantityInCart,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const calculateSubtotal = cart => {\n    const subtotal = cart.reduce((acc, x) => acc + x.price.amount * x.quantity, 0);\n    return Math.round(subtotal * 100) / 100;\n  };\n\n  const buyAnotherPlatform = () => {\n    if (buyButtonDisabled || cart.items.length <= 0) {\n      return;\n    }\n    const path = \"/purchase\";\n    history.push(path);\n    hideCart();\n  };\n\n  const buyButtonAction = () => {\n    hideCart();\n    getPsTokenBuyCart(cart.cartId, logToken)\n      .then(response => {\n        setBuyButtonDisabled(true);\n        window.xPayStationInit(response.data.token, {sandbox: true, host: 'sandbox-secure.xsolla.com'});\n        window.XPayStationWidget.open();\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.CLOSE,\n          () => setBuyButtonDisabled(false),\n        );\n        window.XPayStationWidget.on(\n          window.XPayStationWidget.eventTypes.STATUS_DONE,\n          payStationHandler\n        );\n      })\n      .catch(error => {\n        setBuyButtonDisabled(false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  };\n\n  return (\n    <Modal\n      open={isCartShown}\n      onClose={hideCart}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{ timeout: 250 }}\n    >\n      <Grow in={isCartShown} timeout={250}>\n        <CartContent>\n          <CartHeader>\n            <h4>Cart</h4>\n            <IconButton color=\"inherit\" onClick={hideCart}>\n              <IconClose />\n            </IconButton>\n          </CartHeader>\n          <CartList>\n            {cart.items.length > 0\n              ? cart.items.map(item => (\n                <CartItem\n                  item={item}\n                  changeItemQuantity={changeItemQuantityInCart}\n                />\n              ))\n              : <p>Empty cart</p>\n            }\n          </CartList>\n          <CartFooter>\n            {cart.items.length > 0 && (\n              <Subtotal>\n                Subtotal:\n                <Price>\n                  {\n                    getFormattedCurrency(\n                      calculateSubtotal(cart.items),\n                      cart.price.currency || cart.items[0].price.currency\n                    ).formattedCurrency\n                  }\n                </Price>\n              </Subtotal>\n            )}\n            <CartActions>\n              <Button\n                variant=\"contained\"\n                disabled={cart.items.length === 0}\n                style={{ marginRight: '7px' }}\n                onClick={buyAnotherPlatform}\n              >\n                Buy on PS4\n              </Button>\n              <Button\n                variant=\"contained\"\n                disabled={cart.items.length === 0}\n                onClick={buyButtonAction}\n              >\n                Buy on Xsolla\n              </Button>\n            </CartActions>\n          </CartFooter>\n        </CartContent>\n      </Grow>\n    </Modal>\n  );\n}\n\nconst Modal = styled(MUIModal)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst CartContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-radius: ${props => `${props.theme.borderRadius}px`};\n  background-color: ${props => props.theme.colorBg};\n  color: ${props => props.theme.colorText};\n  padding: 0 32px;\n  width: 680px;\n  max-height: 80vh;\n  outline: none;\n\n  @media ${device.tablet} {\n    padding: 0 16px;\n    max-height: none;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n`;\n\nconst CartHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: ${props => props.theme.colorBg};\n  color: ${props => props.theme.colorText};\n  border-bottom: 1px solid ${props => Colorer(props.theme.colorText).alpha(0.1).string()};\n  z-index: 10;\n  padding: 24px 0 8px 0;\n`;\n\nconst CartList = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  flex-grow: 1;\n  padding: 16px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  background-color: ${props => props.theme.colorBg};\n  border-top: 1px solid ${Colorer(props => props.theme.colorText).alpha(0.1).string()};\n  padding: 24px 0 24px 0;\n`;\n\nconst CartActions = styled.div`\n  display: flex;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n  }\n`;\n\nconst Subtotal = styled.div`\n  display: flex;\n  font-weight: bold;\n  margin-right: 10px;\n\n  @media ${device.tablet} {\n    justify-content: flex-end;\n    width: 100%;\n    margin-bottom: 15px;\n    margin-right: 0;\n  }\n`;\n\nconst Price = styled.div`\n  min-width: 80px;\n  text-align: right;\n`;\n\nexport const Cart = withRouter(CartComponent);\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { device } from '../../styles/devices';\n\nconst VCCartItem = React.memo(({ item }) => {\n  return (\n    <Body>\n      <Image image={item.image_url} />\n      <div>\n        <Name>{item.name}</Name>\n        <div>{item.description}</div>\n      </div>\n    </Body>\n  );\n});\n\nconst Body = styled.div`\n  display: grid;\n  grid-template-columns: 0.7fr 1.3fr 1fr;\n  color: ${props => props.theme.colorText};\n  overflow: hidden;\n  height: 130px;\n\n  @media ${device.mobileL} {\n    height: 185px;\n    grid-template-columns: 0.9fr 1.1fr;\n    grid-template-rows: 120px 1fr;\n  }\n`;\n\nconst Image = styled.div`\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(${props => props.image});\n`;\n\nconst Name = styled.div`\n  font-weight: bolder;\n  margin-bottom: 5px;\n`;\n\nexport { VCCartItem };\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\nimport Colorer from 'color';\nimport IconButton from '@material-ui/core/IconButton';\nimport IconClose from '@material-ui/icons/Close';\nimport Button from '@material-ui/core/Button';\nimport MUIModal from '@material-ui/core/Modal';\nimport Grow from '@material-ui/core/Grow';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { ProductContext } from '../../context';\nimport { quickPurchaseBuyVirtualCurrency } from '../../components/StoreLoader';\nimport { device } from '../../styles/devices';\nimport { VCCartItem } from './VCCartItem';\n\nconst VCCart = () => {\n  const {\n    vcCart,\n    isVCCartShown,\n    projectId,\n    logToken,\n    clearVCCart,\n    setStateFrom,\n    hideVCCart,\n    isVCCartProcessing,\n    updateVirtualCurrencyBalance,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const buyByVirtualCurrencyButtonAction = () => {\n    setStateFrom('isVCCartProcessing', true);\n    quickPurchaseBuyVirtualCurrency(projectId, vcCart.items[0], logToken)\n      .then(() => {\n        setStateFrom('isVCCartProcessing', false);\n        clearVCCart();\n        updateVirtualCurrencyBalance();\n      })\n      .catch(error => {\n        setStateFrom('isVCCartProcessing', false);\n        const errorMsg = error.response ? error.response.data.errorMessage : error.message;\n        enqueueSnackbar(errorMsg, { variant: 'error' });\n      });\n  };\n\n  return (\n    <Modal\n      open={isVCCartShown}\n      onClose={hideVCCart}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{ timeout: 250 }}\n    >\n      <Grow in={isVCCartShown} timeout={250}>\n        <CartContent>\n          <CartHeader>\n            <h4>Confirm</h4>\n            <IconButton color=\"inherit\" onClick={hideVCCart}>\n              <IconClose />\n            </IconButton>\n          </CartHeader>\n          <CartList>\n            {vcCart.items.length > 0\n              ? vcCart.items.map(item => <VCCartItem item={item}/>)\n              : <p>Empty cart</p>\n            }\n          </CartList>\n          <CartFooter>\n            <Button\n              variant=\"contained\"\n              disabled={isVCCartProcessing}\n              onClick={buyByVirtualCurrencyButtonAction}\n            >\n              {isVCCartProcessing ? <CircularProgress size={24} color=\"secondary\"/> : 'Buy'}\n            </Button>\n          </CartFooter>\n        </CartContent>\n      </Grow>\n    </Modal>\n  );\n}\n\nconst Modal = styled(MUIModal)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst CartContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  border-radius: ${props => `${props.theme.borderRadius}px`};\n  background-color: ${props => props.theme.colorBg};\n  color: ${props => props.theme.colorText};\n  padding: 0 32px;\n  width: 680px;\n  max-height: 80vh;\n  outline: none;\n\n  @media ${device.tablet} {\n    padding: 0 16px;\n    max-height: none;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n`;\n\nconst CartHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: ${props => props.theme.colorBg};\n  color: ${props => props.theme.colorText};\n  border-bottom: 1px solid ${Colorer(props => props.theme.colorText).alpha(0.1).string()};\n  z-index: 10;\n  padding: 24px 0 8px 0;\n`;\n\nconst CartList = styled.div`\n  display: grid;\n  grid-row-gap: 30px;\n  flex-grow: 1;\n  padding: 16px 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst CartFooter = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  background-color: ${props => props.theme.colorBg};\n  border-top: 1px solid ${Colorer(props => props.theme.colorText).alpha(0.1).string()};\n  padding: 24px 0 24px 0;\n`;\n\nexport { VCCart };\n","import React from 'react';\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\n\nimport { ProductCard } from '../../components/ProductCard';\nimport { Currency } from '../../components/Currency';\n\nexport const VCItem = React.memo(({\n  product,\n  order,\n  isLoading,\n  addToCart,\n}) => {\n\n  const handleItemAdd = () => addToCart(product);\n\n  const price = React.useMemo(() => (\n    <Currency\n      currency={product.price.currency}\n      value={Math.round(product.price.amount * 100) / 100} />\n  ), [product]);\n\n  return (\n    <ProductCard\n      image={product.image_url}\n      name={product.name}\n      order={order}\n      value={price}\n      isLoading={isLoading}\n      description={product.description}\n      actionButtonContent={<ShoppingCart />}\n      onAction={handleItemAdd}\n    />\n  )\n});\n","import axios from 'axios';\n\nexport const loadVirtualCurrencies = async (projectID, token) => {\n  const URL = `https://store.xsolla.com/api/v2/project/${projectID}/items/virtual_currency/package`;\n  const response = await axios.get(URL, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n\n  return response.data.items;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSnackbar } from 'notistack';\n\nimport { Preloader } from '../../components/Preloader';\nimport { ProductContext } from '../../context';\nimport { VCItem } from './VCItem';\nimport { loadVirtualCurrencies } from './VCLoader';\n\nconst VCList = () => {\n  const {\n    logToken,\n    projectId,\n    addToCart,\n    setStateFrom,\n    virtualCurrencies,\n    areVirtualCurrenciesFetching,\n    isCartProcessing,\n    setVirtualCurrencies,\n  } = React.useContext(ProductContext);\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    if (logToken && virtualCurrencies.length === 0) {\n      setStateFrom('areVirtualCurrenciesFetching', true);\n      loadVirtualCurrencies(projectId, logToken)\n        .then(data => {\n          setVirtualCurrencies(data);\n          setStateFrom('areVirtualCurrenciesFetching', false);\n        })\n        .catch(error => {\n          enqueueSnackbar(error.message, { variant: 'error' });\n          setStateFrom('areVirtualCurrenciesFetching', false);\n        });\n    }\n  }, [virtualCurrencies]);\n\n  const content = React.useMemo(() => virtualCurrencies.length > 0 && (\n    <Content>\n      {virtualCurrencies.map((currency, index) => (\n        <VCItem\n          order={index}\n          key={currency.sku}\n          product={currency}\n          isLoading={isCartProcessing}\n          addToCart={addToCart}\n        />\n      ))}\n    </Content>\n  ), [virtualCurrencies, isCartProcessing]);\n\n  return (\n    <Body>\n      {areVirtualCurrenciesFetching\n        ? <Preloader/>\n        : content\n      }\n    </Body>\n  );\n}\n\nconst Body = styled.div`\n  color: ${props => props.theme.colorText};\n  background-color: transparent;\n`;\n\nconst Content = styled.div`\n  display: grid;\n  padding: 30px 0;\n  grid-gap: 30px;\n  grid-template-columns: ${props => `repeat(auto-fit, minmax(\n    ${props.theme.cardWidth}, \n    ${props.theme.cardWidth}\n  ))`};\n  justify-content: center;\n`;\n\nexport { VCList };\n","const routes = {\n  items: '/',\n  currencies: '/crystals',\n  physical: '/physical',\n  inventory: '/inventory',\n  entitlement: '/entitlement',\n  manage: '/manage',\n  purchase: '/purchase',\n}\n\nconst navItems = [\n  {\n    route: routes.items,\n    label: 'Items'\n  },\n  {\n    route: routes.currencies,\n    label: 'Currencies',\n  },\n  {\n    route: routes.physical,\n    label: 'Merchandise',\n  },\n  {\n    route: routes.inventory,\n    label: 'Inventory',\n  },\n  {\n    route: routes.entitlement,\n    label: 'Entitlement',\n  },\n  {\n    route: routes.manage,\n    label: 'Manage',\n  },\n  {\n    route: routes.purchase,\n    label: 'Server purchase',\n  },\n];\n\nexport const getMenuItems = items => navItems\n  .filter(x => items.includes(x.route))\n  .sort((a, b) => items.indexOf(a.route) - items.indexOf(b.route));\n\nexport { routes, navItems };","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { ProductConsumer } from \"../context\";\nimport Cookie, { parseJwt } from \"./Cookie\";\n\nexport default class XLogin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shown: true,\n      logToken: null,\n      psToken: null\n    };\n  }\n\n  unauthorizedFlow = () => {\n    this.setState({ logToken: null });\n    this.setState({ shown: true });\n  };\n\n  authorizedFlow = tkn => {\n    this.setState({ logToken: tkn, shown: false });\n    this.user = parseJwt(tkn);\n    this.setStateFrom(\"user\", this.user);\n    this.createCart();\n  };\n\n  render() {\n    return (\n      <ProductConsumer>\n          {valueFromContext => {\n            this.setStateFrom = valueFromContext.setStateFrom;\n            this.createCart = valueFromContext.createCart;\n\n            return (\n              <div>\n                <CssXpop\n                  style={{ display: this.state.shown ? \"flex\" : \"none\" }}\n                >\n                  <CssXpopB>\n                    <CssLoginInfo>\n                      Current project: <b>{window.xProjectId}</b>\n                    </CssLoginInfo>\n\n                    <CssLoginPop>\n                      <div id=\"xl_auth\"></div>\n                    </CssLoginPop>\n\n                    <CssLoginInfo>\n                      {myProjects.map((onePr, i) => {\n                        let pr = onePr[\"project_id\"];\n                        let login = onePr[\"login_id\"];\n                        let url = `https://xsolla.github.io/store-demo/#/`;\n                        let urlFull = `${url}?project_id=${pr}&login_id=${login}`;\n                        return (\n                          <div key={pr + i} style={{ marginBottom: \"1em\" }}>\n                            <div style={{ fontSize: \"0.4em\" }}>\n                              <a href={urlFull}>\n                                {pr}: {onePr.projectName}\n                              </a>\n                            </div>\n                          </div>\n                        );\n                      })}\n                      <p>\n                        Open any Xsolla Store using GET parameters <br />\n                        <b>project_id</b> and <b>login_id</b> (login must point\n                        back to https://xsolla.github.io/store-demo/#/)\n                      </p>\n                    </CssLoginInfo>\n                  </CssXpopB>\n                  <CssXpopZ />\n                </CssXpop>\n              </div>\n            );\n          }}\n        </ProductConsumer>\n    );\n  }\n\n  componentDidMount() {\n    window.XloginInit();\n    let cke = Cookie();\n    cke ? this.authorizedFlow(cke) : this.unauthorizedFlow();\n  }\n}\n\nconst CssXpop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  min-height: 100%;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  justify-content: center;\n  overflow-y: scroll;\n  padding: 40px 0;\n`;\nconst CssXpopB = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  min-height: 100%;\n  z-index: 100;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n`;\nconst CssXpopZ = styled.div`\n  position: fixed;\n  z-index: 99;\n  background: rgba(0, 0, 0, 0.8);\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n`;\n\nconst CssLoginInfo = styled.div`\n  padding: 20px 70px;\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  flex-direction: column;\n  flex-grow: 1;\n  font-size: 22px;\n  width: 600px;\n  & a {\n    /* font-family: 'PS Mono', Courier, monospace; */\n    text-decoration: underline;\n    font-size: 28px;\n    line-height: 0px;\n  }\n`;\nconst CssLoginPop = styled.div`\n  display: flex;\n  align-content: center;\n  justify-content: center;\n  text-align: center;\n  padding: 36px;\n  overflow: hidden;\n  margin: 0 70px;\n  border-radius: 8px;\n`;\n\nconst myProjects = [\n  {\n    projectName: \"Xsolla Store Demo\",\n    project_id: 47278,\n    login_id: \"fb2d7c69-bf25-11e9-9244-42010aa80004\"\n  }\n];\n","import React from 'react';\nimport { NavLink, withRouter } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport MUIMenu from '@material-ui/core/Menu';\nimport Hidden from '@material-ui/core/Hidden';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\nimport MUIIconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Button from '@material-ui/core/Button';\nimport CartIcon from '@material-ui/icons/ShoppingCart';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport LogoutIcon from '@material-ui/icons/ExitToAppOutlined';\n\nimport { routes, getMenuItems } from '../utils/routes';\nimport { device } from '../styles/devices';\nimport { Currency } from '../components/Currency';\nimport { ProductContext } from '../context';\nimport { eraseCookie } from './Cookie';\nimport XLogin from './XLogin.js';\n\nconst NavbarComponent = ({ location }) => {\n  const {\n    logToken,\n    user,\n    userBalanceVirtualCurrency,\n    projectId,\n    showCart,\n    setSideMenuVisibility,\n    isSideMenuShown,\n  } = React.useContext(ProductContext);\n\n  const [menuAnchor, setMenuAnchor] = React.useState(null);\n  const handleMenuClose = () => setMenuAnchor(null);\n  const handleMenuOpen = event => setMenuAnchor(event.currentTarget);\n\n  const toggleSideMenu = () => setSideMenuVisibility(!isSideMenuShown);\n\n  const logOutHandler = () => {\n    eraseCookie(\"xsolla_login_token\", null);\n    eraseCookie(\"xsolla_last_click_id\", null);\n    window.location.reload();\n  };\n\n  const isLogged = logToken && user;\n\n  const generalMenuItems = React.useMemo(() => getMenuItems([\n    routes.items,\n    routes.currencies,\n    ...projectId === 44056 ? [routes.physical] : [],\n  ]), [routes, projectId]);\n\n  const isLocationExistsInTabs = React.useMemo(\n    () => generalMenuItems.some(x => x.route === location.pathname),\n    [generalMenuItems, location.pathname]\n  );\n\n  const userMenuItems = React.useMemo(() => getMenuItems([\n    routes.inventory,\n    routes.entitlement,\n    routes.manage,\n    routes.purchase,\n  ]), [routes]);\n\n  return (\n    <Header>\n      <Hidden mdDown>\n        <Tabs value={isLocationExistsInTabs ? location.pathname : false} component=\"nav\">\n          {generalMenuItems.map(x => (\n            <Tab\n              key={x.route}\n              component={NavLink}\n              label={x.label}\n              value={x.route}\n              to={x.route}\n            />\n          ))}\n        </Tabs>\n      </Hidden>\n\n      <Hidden lgUp>\n        <MenuButton onClick={toggleSideMenu}>\n          <MenuIcon />\n        </MenuButton>\n      </Hidden>\n\n      {isLogged && (\n        <LoginPanel>\n          {userBalanceVirtualCurrency.map(vc => (\n            <VCCurrency key={vc.sku}>\n              <Currency image={vc.image_url} value={vc.amount} />\n            </VCCurrency>\n          ))}\n\n          <Hidden mdDown>\n            <UserMail\n              endIcon={Boolean(menuAnchor) ? <ExpandLessIcon /> : <ExpandMoreIcon/>}\n              onClick={handleMenuOpen}\n            >\n              {user.email}\n            </UserMail>\n          </Hidden>\n        </LoginPanel>\n      )}\n\n      <XLogin />\n\n      {!logToken && (\n        <LoginButton\n          variant=\"outlined\"\n          color=\"secondary\"\n          size=\"small\"\n        >\n          Log In\n        </LoginButton>\n      )}\n      {isLogged && projectId !== 44056 && (\n       <LogoutButton\n          variant=\"outlined\"\n          color=\"secondary\"\n          size=\"small\"\n          onClick={logOutHandler}\n        >\n          <LogoutIcon size=\"inherit\" />\n        </LogoutButton>\n      )}\n\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        size=\"small\"\n        onClick={showCart}\n      >\n        <CartIcon size=\"inherit\" />\n        <Hidden xsDown>\n          cart\n        </Hidden>\n      </Button>\n\n      <Menu\n        anchorEl={menuAnchor}\n        getContentAnchorEl={null}\n        transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        open={Boolean(menuAnchor)}\n        onClose={handleMenuClose}\n      >\n        {userMenuItems.map(x => (\n          <Link\n            key={x.route}\n            onClick={handleMenuClose}\n            activeClassName=\"active\"\n            to={x.route}\n          >\n            {x.label}\n          </Link>\n        ))}\n      </Menu>\n    </Header>\n  );\n}\n\nconst Menu = styled(MUIMenu)`\n  .MuiMenu-list {\n    background-color: ${props => props.theme.colorBg};\n  }\n`;\n\nconst Tabs = styled(MUITabs)`\n  &.MuiTabs-root {\n    height: 100%\n  }\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    text-transform: uppercase;\n    font-family: ${props => props.theme.fontFamily};\n    font-size: 1.4rem;\n    font-weight: 700;\n    line-height: 1.4rem;\n    min-width: 50px;\n  }\n`;\n\nconst Link = styled(NavLink)`\n  display: flex;\n  padding: 15px 20px;\n  min-width: 200px;\n  align-items: center;\n  text-transform: uppercase;\n  text-decoration: none;\n  font-family: ${props => props.theme.fontFamily};\n  font-size: 1.2rem;\n  font-weight: 700;\n  line-height: 1.2rem;\n  height: 100%;\n  color: #d6e0e7;\n  border: none;\n\n  &:hover {\n    color: #ff005b;\n    text-decoration: none;\n  }\n\n  &.active {\n    color: #ff005b;\n  }\n`;\n\nconst MenuButton = styled(MUIIconButton)`\n  &.MuiIconButton-root {\n    color: ${props => props.theme.colorAccentText};\n  }\n`;\n\nconst LogoutButton = styled(Button)`\n  &.MuiButton-root {\n    margin-right: 10px;\n  }\n`;\n\nconst VCCurrency = styled.div`\n  margin-right: 10px;\n`;\n\nconst LoginPanel = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  flex-grow: 1;\n\n  @media ${device.mobileL} {\n    justify-content: center;\n  }\n`;\n\nconst LoginButton = styled(Button)`\n  &.MuiButton-root {\n    margin-right: 10px;\n    font-size: 0.8rem;\n  }\n`;\n\nconst UserMail = styled(Button)`\n  && {\n    font-family: 'Roboto';\n    text-transform: uppercase;\n    color: ${props => props.theme.colorAccent};\n    margin: 0 1rem;\n  }\n`;\n\nconst Header = styled.header`\n  display: flex;\n  align-items: center;\n  height: 50px;\n  padding: 0 15px;\n  font-family: 'Helvetica Neue', 'Roboto', Arial, Helvetica, sans-serif;\n  color: ${props => props.theme.colorAccentText};\n  background-color: ${props => props.theme.colorBg};\n`;\n\nexport const Navbar = withRouter(NavbarComponent);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { NavLink, withRouter } from 'react-router-dom';\nimport Drawer from '@material-ui/core/SwipeableDrawer';\nimport MUIIconButton from '@material-ui/core/IconButton';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport MUIDivider from '@material-ui/core/Divider';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\nimport LogoutIcon from '@material-ui/icons/ExitToAppOutlined';\n\nimport { ProductContext } from '../context';\nimport { routes, getMenuItems } from '../utils/routes';\nimport { eraseCookie } from './Cookie';\n\nconst MobileNavbarComponent = ({ location }) => {\n  const {\n    isSideMenuShown,\n    user,\n    logToken,\n    projectId,\n    setSideMenuVisibility,\n  } = React.useContext(ProductContext);\n\n  const closeMenu = () => setSideMenuVisibility(false);\n  const openMenu = () => setSideMenuVisibility(true);\n\n  const logOutHandler = () => {\n    eraseCookie(\"xsolla_login_token\", null);\n    eraseCookie(\"xsolla_last_click_id\", null);\n    window.location.reload();\n  };\n\n  React.useEffect(() => closeMenu, []);\n\n  const isLogged = logToken && user;\n\n  const generalMenuItems = React.useMemo(() => getMenuItems([\n    routes.items,\n    routes.currencies,\n    ...projectId === 44056 ? [routes.physical] : [],\n  ]), [projectId]);\n\n  const userMenuItems = React.useMemo(() => getMenuItems([\n    routes.inventory,\n    routes.entitlement,\n    routes.manage,\n    routes.purchase,\n  ]), []);\n\n  return (\n    <Drawer\n      open={isSideMenuShown}\n      anchor=\"left\"\n      onOpen={openMenu}\n      onClose={closeMenu}\n    >\n      <Content>\n        <Header>\n        {isLogged && projectId !== 44056 && (\n          <IconButton onClick={logOutHandler}>\n            <LogoutIcon size=\"inherit\" />\n          </IconButton>\n          )}\n          <UserMail>{user.email}</UserMail>\n          <IconButton onClick={closeMenu}>\n            <ChevronLeftIcon />\n          </IconButton>\n        </Header>\n        <Divider />\n          <Tabs\n            value={location.pathname}\n            onChange={closeMenu}\n            component=\"nav\"\n            variant=\"scrollable\"\n            orientation=\"vertical\"\n          \n          >\n          {generalMenuItems.map(x => (\n            <Tab\n              component={NavLink}\n              label={x.label}\n              value={x.route}\n              to={x.route}\n            />\n          ))}\n          <MenuDivider />\n          {userMenuItems.map(x => (\n            <Tab\n              component={NavLink}\n              label={x.label}\n              value={x.route}\n              to={x.route}\n            />\n          ))}\n          </Tabs>\n      </Content>\n    </Drawer>\n  );\n};\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  height: 100%;\n  background-color: ${props => props.theme.colorBg};\n`;\n\nconst Divider = styled(MUIDivider)`\n  &.MuiDivider-root {\n    background-color: ${props => props.theme.colorAccentText};\n    opacity: 0.1;\n    margin-bottom: 5px;\n  }\n`;\n\nconst MenuDivider = styled(Divider)`\n  &.MuiDivider-root {\n    margin: 5px 0;\n  }\n`;\n\nconst IconButton = styled(MUIIconButton)`\n  &.MuiIconButton-root {\n    color: ${props => props.theme.colorAccentText};\n  }\n`;\n\nconst Tabs = styled(MUITabs)`\n  color: ${props => props.theme.colorAccent};\n`;\n\nconst Tab = styled(MUITab)`\n  &.MuiTab-root {\n    color: ${props => props.theme.colorAccentText};\n    padding: 15px;\n    font-family: ${props => props.theme.fontFamily};\n    font-size: 1.3rem;\n    line-height: 1.3rem;\n    font-weight: 700;\n  }\n\n  & .MuiTab-wrapper {\n    align-items: flex-start;\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 49px;\n`;\n\nconst UserMail = styled.div`\n  flex-grow: 1;\n  padding: 0 15px;\n  text-transform: uppercase;\n  font-family: Roboto;\n  color: ${props => props.theme.colorAccent};\n`;\n\nexport const MobileNavbar = withRouter(MobileNavbarComponent);\n","import React from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Hidden from '@material-ui/core/Hidden';\n\nimport { InventoryList } from './features/inventory/InventoryList';\nimport { PhysicalList } from './features/physical/PhysicalList';\nimport { ManageInventory } from './features/manage/ManageInventory';\nimport { VirtualList } from './features/virtual/VirtualList';\nimport { ServerPurchase } from './features/serverPurchase/ServerPurchase';\nimport { EntitlementList } from './features/entitlement/EntitlementList';\nimport { Cart } from './features/cart/Cart';\nimport { VCCart } from './features/cart/VCCart';\nimport { VCList } from './features/virtualCurrenciesList/VCList';\nimport { Navbar } from './components/Navbar';\nimport { MobileNavbar } from './components/MobileNavbar';\nimport { routes } from './utils/routes';\nimport { ProductContext } from './context';\n\nconst App = () => {\n  const valueFromContext = React.useContext(ProductContext);\n\n  React.useEffect(() => {\n    valueFromContext.updateVirtualCurrencyBalance();\n  }, []);\n\n  return (\n    <>\n      <Navbar />\n      <Hidden lgUp>\n        <MobileNavbar />\n      </Hidden>\n      <Cart />\n      <VCCart />\n      <Content>\n        <Switch>\n          <Route path={routes.items} exact component={VirtualList} />\n          <Route path={routes.currencies} component={VCList} />\n          <Route path={routes.physical} component={PhysicalList} />\n          <Route path={routes.inventory} component={InventoryList} />\n          <Route path={routes.manage} component={ManageInventory} />\n          <Route path={routes.entitlement} render={() => <EntitlementList {...valueFromContext} />} />\n          <Route path={routes.purchase} component={ServerPurchase} />\n          <Redirect to={routes.items} />\n        </Switch>\n      </Content>\n\n      <Background>\n        <BackgroundOverlay />\n      </Background>\n    </>\n  );\n};\n\nconst Content = styled.div`\n  position: relative;\n  height: 100%;\n  overflow-y: auto;\n`;\n\nconst Background = styled.div`\n  background-image: url(${props => props.theme.backgroundUrl});\n  z-index: -1;\n  background-size: cover;\n  position: fixed;\n  height: 100vh;\n  width: 100vw;\n  left: 0;\n  top: 0;\n`;\n\nconst BackgroundOverlay = styled.div`\n  position: absolute;\n  background-color: ${props => props.theme.colorBg};\n  opacity: 0.8;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n`;\n\nexport default App;\n","const theme = {\n  colorText: '#D6E0E7',\n  colorAccent: '#FF005B',\n  colorAccentText: '#F6FAFF',\n  colorBg: '#011627',\n  borderRadius: 8,\n  backgroundUrl: 'https://res.cloudinary.com/maiik/image/upload/v1549624607/Xsolla/HomePage_Hero_Illustration_1440_oabqmk.jpg',\n  cardWidth: '300px',\n  boxShadow: '0 5px 12px 0px rgba(0,0,0,0.2)',\n  padding: '8px',\n  transitionTime: '0.3s',\n  transitionEasing: 'ease-in-out',\n  transition: `all 0.3s ease-in-out`,\n  transitionStyle: '0.3s ease-in-out',\n  fontFamily: '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif'\n};\n\nexport { theme };\n","import React from 'react';\nimport { SnackbarProvider } from 'notistack';\nimport { ThemeProvider } from 'styled-components';\nimport { useMediaQuery } from '@material-ui/core';\nimport { HashRouter } from 'react-router-dom';\n\nimport ProductProvider from './context';\nimport { theme } from './styles/theme';\nimport { device } from './styles/devices';\n\nconst notificationPosition = {\n  vertical: 'bottom',\n  horizontal: 'right',\n};\n\nconst Provider = ({ children }) => {\n  const isMobile = useMediaQuery(`@media ${device.mobileL}`);\n\n  return (\n    <SnackbarProvider\n      anchorOrigin={notificationPosition}\n      dense={isMobile}\n      maxSnack={3}\n      preventDuplicate={isMobile}\n    >\n      <ThemeProvider theme={theme}>\n        <ProductProvider projectId={window.xProjectId}>\n          <HashRouter basename='/'>\n            {children}\n          </HashRouter>\n        </ProductProvider>\n      </ThemeProvider>\n    </SnackbarProvider>\n  )\n};\n\nexport default Provider;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport Provider from './provider';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <Provider>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}